var Uj=Object.defineProperty,jj=Object.defineProperties;var Bj=Object.getOwnPropertyDescriptors;var Jp=Object.getOwnPropertySymbols;var CR=Object.prototype.hasOwnProperty,SR=Object.prototype.propertyIsEnumerable;var DR=(n,e,t)=>e in n?Uj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,q=(n,e)=>{for(var t in e||={})CR.call(e,t)&&DR(n,t,e[t]);if(Jp)for(var t of Jp(e))SR.call(e,t)&&DR(n,t,e[t]);return n},ve=(n,e)=>jj(n,Bj(e));var gE=(n,e)=>{var t={};for(var r in n)CR.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Jp)for(var r of Jp(n))e.indexOf(r)<0&&SR.call(n,r)&&(t[r]=n[r]);return t};var $j=Object.defineProperty,Hj=Object.defineProperties,qj=Object.getOwnPropertyDescriptors,AR=Object.getOwnPropertySymbols,zj=Object.prototype.hasOwnProperty,Gj=Object.prototype.propertyIsEnumerable,_E=(n,e,t)=>e in n?$j(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,RR=(n,e)=>{for(var t in e||(e={}))zj.call(e,t)&&_E(n,t,e[t]);if(AR)for(var t of AR(e))Gj.call(e,t)&&_E(n,t,e[t]);return n},Wj=(n,e)=>Hj(n,qj(e)),Ce=(n,e,t)=>(_E(n,typeof e!="symbol"?e+"":e,t),t),Ni=globalThis;function xr(n){return(Ni.__Zone_symbol_prefix||"__zone_symbol__")+n}function Kj(){let n=Ni.performance;function e($e){n&&n.mark&&n.mark($e)}function t($e,L){n&&n.measure&&n.measure($e,L)}e("Zone");let r=class vE{constructor(L,F){Ce(this,"_parent"),Ce(this,"_name"),Ce(this,"_properties"),Ce(this,"_zoneDelegate"),this._parent=L,this._name=F?F.name||"unnamed":"<root>",this._properties=F&&F.properties||{},this._zoneDelegate=new o(this,this._parent&&this._parent._zoneDelegate,F)}static assertZonePatched(){if(Ni.Promise!==I.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let L=vE.current;for(;L.parent;)L=L.parent;return L}static get current(){return _.zone}static get currentTask(){return xe}static __load_patch(L,F,U=!1){if(I.hasOwnProperty(L)){let ue=Ni[xr("forceDuplicateZoneCheck")]===!0;if(!U&&ue)throw Error("Already loaded patch: "+L)}else if(!Ni["__Zone_disable_"+L]){let ue="Zone:"+L;e(ue),I[L]=F(Ni,vE,D),t(ue,ue)}}get parent(){return this._parent}get name(){return this._name}get(L){let F=this.getZoneWith(L);if(F)return F._properties[L]}getZoneWith(L){let F=this;for(;F;){if(F._properties.hasOwnProperty(L))return F;F=F._parent}return null}fork(L){if(!L)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,L)}wrap(L,F){if(typeof L!="function")throw new Error("Expecting function got: "+L);let U=this._zoneDelegate.intercept(this,L,F),ue=this;return function(){return ue.runGuarded(U,this,arguments,F)}}run(L,F,U,ue){_={parent:_,zone:this};try{return this._zoneDelegate.invoke(this,L,F,U,ue)}finally{_=_.parent}}runGuarded(L,F=null,U,ue){_={parent:_,zone:this};try{try{return this._zoneDelegate.invoke(this,L,F,U,ue)}catch(Me){if(this._zoneDelegate.handleError(this,Me))throw Me}}finally{_=_.parent}}runTask(L,F,U){if(L.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(L.zone||H).name+"; Execution: "+this.name+")");let ue=L,{type:Me,data:{isPeriodic:de=!1,isRefreshable:vn=!1}={}}=L;if(L.state===$&&(Me===w||Me===E))return;let sn=L.state!=le;sn&&ue._transitionTo(le,se);let Wn=xe;xe=ue,_={parent:_,zone:this};try{Me==E&&L.data&&!de&&!vn&&(L.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,ue,F,U)}catch(xt){if(this._zoneDelegate.handleError(this,xt))throw xt}}finally{let xt=L.state;if(xt!==$&&xt!==b)if(Me==w||de||vn&&xt===B)sn&&ue._transitionTo(se,le,B);else{let J=ue._zoneDelegates;this._updateTaskCount(ue,-1),sn&&ue._transitionTo($,le,$),vn&&(ue._zoneDelegates=J)}_=_.parent,xe=Wn}}scheduleTask(L){if(L.zone&&L.zone!==this){let U=this;for(;U;){if(U===L.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${L.zone.name}`);U=U.parent}}L._transitionTo(B,$);let F=[];L._zoneDelegates=F,L._zone=this;try{L=this._zoneDelegate.scheduleTask(this,L)}catch(U){throw L._transitionTo(b,B,$),this._zoneDelegate.handleError(this,U),U}return L._zoneDelegates===F&&this._updateTaskCount(L,1),L.state==B&&L._transitionTo(se,B),L}scheduleMicroTask(L,F,U,ue){return this.scheduleTask(new a(m,L,F,U,ue,void 0))}scheduleMacroTask(L,F,U,ue,Me){return this.scheduleTask(new a(E,L,F,U,ue,Me))}scheduleEventTask(L,F,U,ue,Me){return this.scheduleTask(new a(w,L,F,U,ue,Me))}cancelTask(L){if(L.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(L.zone||H).name+"; Execution: "+this.name+")");if(!(L.state!==se&&L.state!==le)){L._transitionTo(oe,se,le);try{this._zoneDelegate.cancelTask(this,L)}catch(F){throw L._transitionTo(b,oe),this._zoneDelegate.handleError(this,F),F}return this._updateTaskCount(L,-1),L._transitionTo($,oe),L.runCount=-1,L}}_updateTaskCount(L,F){let U=L._zoneDelegates;F==-1&&(L._zoneDelegates=null);for(let ue=0;ue<U.length;ue++)U[ue]._updateTaskCount(L.type,F)}};Ce(r,"__symbol__",xr);let i=r,s={name:"",onHasTask:($e,L,F,U)=>$e.hasTask(F,U),onScheduleTask:($e,L,F,U)=>$e.scheduleTask(F,U),onInvokeTask:($e,L,F,U,ue,Me)=>$e.invokeTask(F,U,ue,Me),onCancelTask:($e,L,F,U)=>$e.cancelTask(F,U)};class o{constructor(L,F,U){Ce(this,"_zone"),Ce(this,"_taskCounts",{microTask:0,macroTask:0,eventTask:0}),Ce(this,"_parentDelegate"),Ce(this,"_forkDlgt"),Ce(this,"_forkZS"),Ce(this,"_forkCurrZone"),Ce(this,"_interceptDlgt"),Ce(this,"_interceptZS"),Ce(this,"_interceptCurrZone"),Ce(this,"_invokeDlgt"),Ce(this,"_invokeZS"),Ce(this,"_invokeCurrZone"),Ce(this,"_handleErrorDlgt"),Ce(this,"_handleErrorZS"),Ce(this,"_handleErrorCurrZone"),Ce(this,"_scheduleTaskDlgt"),Ce(this,"_scheduleTaskZS"),Ce(this,"_scheduleTaskCurrZone"),Ce(this,"_invokeTaskDlgt"),Ce(this,"_invokeTaskZS"),Ce(this,"_invokeTaskCurrZone"),Ce(this,"_cancelTaskDlgt"),Ce(this,"_cancelTaskZS"),Ce(this,"_cancelTaskCurrZone"),Ce(this,"_hasTaskDlgt"),Ce(this,"_hasTaskDlgtOwner"),Ce(this,"_hasTaskZS"),Ce(this,"_hasTaskCurrZone"),this._zone=L,this._parentDelegate=F,this._forkZS=U&&(U&&U.onFork?U:F._forkZS),this._forkDlgt=U&&(U.onFork?F:F._forkDlgt),this._forkCurrZone=U&&(U.onFork?this._zone:F._forkCurrZone),this._interceptZS=U&&(U.onIntercept?U:F._interceptZS),this._interceptDlgt=U&&(U.onIntercept?F:F._interceptDlgt),this._interceptCurrZone=U&&(U.onIntercept?this._zone:F._interceptCurrZone),this._invokeZS=U&&(U.onInvoke?U:F._invokeZS),this._invokeDlgt=U&&(U.onInvoke?F:F._invokeDlgt),this._invokeCurrZone=U&&(U.onInvoke?this._zone:F._invokeCurrZone),this._handleErrorZS=U&&(U.onHandleError?U:F._handleErrorZS),this._handleErrorDlgt=U&&(U.onHandleError?F:F._handleErrorDlgt),this._handleErrorCurrZone=U&&(U.onHandleError?this._zone:F._handleErrorCurrZone),this._scheduleTaskZS=U&&(U.onScheduleTask?U:F._scheduleTaskZS),this._scheduleTaskDlgt=U&&(U.onScheduleTask?F:F._scheduleTaskDlgt),this._scheduleTaskCurrZone=U&&(U.onScheduleTask?this._zone:F._scheduleTaskCurrZone),this._invokeTaskZS=U&&(U.onInvokeTask?U:F._invokeTaskZS),this._invokeTaskDlgt=U&&(U.onInvokeTask?F:F._invokeTaskDlgt),this._invokeTaskCurrZone=U&&(U.onInvokeTask?this._zone:F._invokeTaskCurrZone),this._cancelTaskZS=U&&(U.onCancelTask?U:F._cancelTaskZS),this._cancelTaskDlgt=U&&(U.onCancelTask?F:F._cancelTaskDlgt),this._cancelTaskCurrZone=U&&(U.onCancelTask?this._zone:F._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let ue=U&&U.onHasTask,Me=F&&F._hasTaskZS;(ue||Me)&&(this._hasTaskZS=ue?U:s,this._hasTaskDlgt=F,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,U.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=F,this._scheduleTaskCurrZone=this._zone),U.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=F,this._invokeTaskCurrZone=this._zone),U.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=F,this._cancelTaskCurrZone=this._zone))}get zone(){return this._zone}fork(L,F){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,L,F):new i(L,F)}intercept(L,F,U){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,L,F,U):F}invoke(L,F,U,ue,Me){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,L,F,U,ue,Me):F.apply(U,ue)}handleError(L,F){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,L,F):!0}scheduleTask(L,F){let U=F;if(this._scheduleTaskZS)this._hasTaskZS&&U._zoneDelegates.push(this._hasTaskDlgtOwner),U=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,L,F),U||(U=F);else if(F.scheduleFn)F.scheduleFn(F);else if(F.type==m)M(F);else throw new Error("Task is missing scheduleFn.");return U}invokeTask(L,F,U,ue){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,L,F,U,ue):F.callback.apply(U,ue)}cancelTask(L,F){let U;if(this._cancelTaskZS)U=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,L,F);else{if(!F.cancelFn)throw Error("Task is not cancelable");U=F.cancelFn(F)}return U}hasTask(L,F){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,L,F)}catch(U){this.handleError(L,U)}}_updateTaskCount(L,F){let U=this._taskCounts,ue=U[L],Me=U[L]=ue+F;if(Me<0)throw new Error("More tasks executed then were scheduled.");if(ue==0||Me==0){let de={microTask:U.microTask>0,macroTask:U.macroTask>0,eventTask:U.eventTask>0,change:L};this.hasTask(this._zone,de)}}}class a{constructor(L,F,U,ue,Me,de){if(Ce(this,"type"),Ce(this,"source"),Ce(this,"invoke"),Ce(this,"callback"),Ce(this,"data"),Ce(this,"scheduleFn"),Ce(this,"cancelFn"),Ce(this,"_zone",null),Ce(this,"runCount",0),Ce(this,"_zoneDelegates",null),Ce(this,"_state","notScheduled"),this.type=L,this.source=F,this.data=ue,this.scheduleFn=Me,this.cancelFn=de,!U)throw new Error("callback is not defined");this.callback=U;let vn=this;L===w&&ue&&ue.useG?this.invoke=a.invokeTask:this.invoke=function(){return a.invokeTask.call(Ni,vn,this,arguments)}}static invokeTask(L,F,U){L||(L=this),gt++;try{return L.runCount++,L.zone.runTask(L,F,U)}finally{gt==1&&k(),gt--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo($,B)}_transitionTo(L,F,U){if(this._state===F||this._state===U)this._state=L,L==$&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${L}', expecting state '${F}'${U?" or '"+U+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let c=xr("setTimeout"),d=xr("Promise"),h=xr("then"),g=[],T=!1,C;function R($e){if(C||Ni[d]&&(C=Ni[d].resolve(0)),C){let L=C[h];L||(L=C.then),L.call(C,$e)}else Ni[c]($e,0)}function M($e){gt===0&&g.length===0&&R(k),$e&&g.push($e)}function k(){if(!T){for(T=!0;g.length;){let $e=g;g=[];for(let L=0;L<$e.length;L++){let F=$e[L];try{F.zone.runTask(F,null,null)}catch(U){D.onUnhandledError(U)}}}D.microtaskDrainDone(),T=!1}}let H={name:"NO ZONE"},$="notScheduled",B="scheduling",se="scheduled",le="running",oe="canceling",b="unknown",m="microTask",E="macroTask",w="eventTask",I={},D={symbol:xr,currentZoneFrame:()=>_,onUnhandledError:st,microtaskDrainDone:st,scheduleMicroTask:M,showUncaughtError:()=>!i[xr("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:st,patchMethod:()=>st,bindArguments:()=>[],patchThen:()=>st,patchMacroTask:()=>st,patchEventPrototype:()=>st,getGlobalObjects:()=>{},ObjectDefineProperty:()=>st,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>st,wrapWithCurrentZone:()=>st,filterProperties:()=>[],attachOriginToPatched:()=>st,_redefineProperty:()=>st,patchCallbacks:()=>st,nativeScheduleMicroTask:R},_={parent:null,zone:new i(null,null)},xe=null,gt=0;function st(){}return t("Zone","Zone"),i}function Qj(){var n;let e=globalThis,t=e[xr("forceDuplicateZoneCheck")]===!0;if(e.Zone&&(t||typeof e.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return(n=e.Zone)!=null||(e.Zone=Kj()),e.Zone}var $d=Object.getOwnPropertyDescriptor,IE=Object.defineProperty,wE=Object.getPrototypeOf,Yj=Object.create,Jj=Array.prototype.slice,TE="addEventListener",bE="removeEventListener",mE=xr(TE),yE=xr(bE),ps="true",gs="false",Hd=xr("");function DE(n,e){return Zone.current.wrap(n,e)}function CE(n,e,t,r,i){return Zone.current.scheduleMacroTask(n,e,t,r,i)}var lt=xr,eg=typeof window<"u",tg=eg?window:void 0,an=eg&&tg||globalThis,Zj="removeAttribute";function SE(n,e){for(let t=n.length-1;t>=0;t--)typeof n[t]=="function"&&(n[t]=DE(n[t],e+"_"+t));return n}function Xj(n,e){let t=n.constructor.name;for(let r=0;r<e.length;r++){let i=e[r],s=n[i];if(s){let o=$d(n,i);if(!xR(o))continue;n[i]=(a=>{let c=function(){return a.apply(this,SE(arguments,t+"."+i))};return ys(c,a),c})(s)}}}function xR(n){return n?n.writable===!1?!1:!(typeof n.get=="function"&&typeof n.set>"u"):!0}var LR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ng=!("nw"in an)&&typeof an.process<"u"&&an.process.toString()==="[object process]",AE=!ng&&!LR&&!!(eg&&tg.HTMLElement),FR=typeof an.process<"u"&&an.process.toString()==="[object process]"&&!LR&&!!(eg&&tg.HTMLElement),Xp={},eB=lt("enable_beforeunload"),NR=function(n){if(n=n||an.event,!n)return;let e=Xp[n.type];e||(e=Xp[n.type]=lt("ON_PROPERTY"+n.type));let t=this||n.target||an,r=t[e],i;if(AE&&t===tg&&n.type==="error"){let s=n;i=r&&r.call(this,s.message,s.filename,s.lineno,s.colno,s.error),i===!0&&n.preventDefault()}else i=r&&r.apply(this,arguments),n.type==="beforeunload"&&an[eB]&&typeof i=="string"?n.returnValue=i:i!=null&&!i&&n.preventDefault();return i};function PR(n,e,t){let r=$d(n,e);if(!r&&t&&$d(t,e)&&(r={enumerable:!0,configurable:!0}),!r||!r.configurable)return;let i=lt("on"+e+"patched");if(n.hasOwnProperty(i)&&n[i])return;delete r.writable,delete r.value;let s=r.get,o=r.set,a=e.slice(2),c=Xp[a];c||(c=Xp[a]=lt("ON_PROPERTY"+a)),r.set=function(d){let h=this;if(!h&&n===an&&(h=an),!h)return;typeof h[c]=="function"&&h.removeEventListener(a,NR),o?.call(h,null),h[c]=d,typeof d=="function"&&h.addEventListener(a,NR,!1)},r.get=function(){let d=this;if(!d&&n===an&&(d=an),!d)return null;let h=d[c];if(h)return h;if(s){let g=s.call(this);if(g)return r.set.call(this,g),typeof d[Zj]=="function"&&d.removeAttribute(e),g}return null},IE(n,e,r),n[i]=!0}function VR(n,e,t){if(e)for(let r=0;r<e.length;r++)PR(n,"on"+e[r],t);else{let r=[];for(let i in n)i.slice(0,2)=="on"&&r.push(i);for(let i=0;i<r.length;i++)PR(n,r[i],t)}}var ni=lt("originalInstance");function Bd(n){let e=an[n];if(!e)return;an[lt(n)]=e,an[n]=function(){let i=SE(arguments,n);switch(i.length){case 0:this[ni]=new e;break;case 1:this[ni]=new e(i[0]);break;case 2:this[ni]=new e(i[0],i[1]);break;case 3:this[ni]=new e(i[0],i[1],i[2]);break;case 4:this[ni]=new e(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},ys(an[n],e);let t=new e(function(){}),r;for(r in t)n==="XMLHttpRequest"&&r==="responseBlob"||(function(i){typeof t[i]=="function"?an[n].prototype[i]=function(){return this[ni][i].apply(this[ni],arguments)}:IE(an[n].prototype,i,{set:function(s){typeof s=="function"?(this[ni][i]=DE(s,n+"."+i),ys(this[ni][i],s)):this[ni][i]=s},get:function(){return this[ni][i]}})})(r);for(r in e)r!=="prototype"&&e.hasOwnProperty(r)&&(an[n][r]=e[r])}function tB(n,e){if(typeof Object.getOwnPropertySymbols!="function")return;Object.getOwnPropertySymbols(n).forEach(r=>{let i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,{get:function(){return n[r]},set:function(s){i&&(!i.writable||typeof i.set!="function")||(n[r]=s)},enumerable:i?i.enumerable:!0,configurable:i?i.configurable:!0})})}var nB=!1;function ms(n,e,t){let r=n;for(;r&&!r.hasOwnProperty(e);)r=wE(r);!r&&n[e]&&(r=n);let i=lt(e),s=null;if(r&&(!(s=r[i])||!r.hasOwnProperty(i))){s=r[i]=r[e];let o=r&&$d(r,e);if(xR(o)){let a=t(s,i,e);r[e]=function(){return a(this,arguments)},ys(r[e],s),nB&&tB(s,r[e])}}return s}function rB(n,e,t){let r=null;function i(s){let o=s.data;return o.args[o.cbIdx]=function(){s.invoke.apply(this,arguments)},r.apply(o.target,o.args),s}r=ms(n,e,s=>function(o,a){let c=t(o,a);return c.cbIdx>=0&&typeof a[c.cbIdx]=="function"?CE(c.name,a[c.cbIdx],c,i):s.apply(o,a)})}function ys(n,e){n[lt("OriginalDelegate")]=e}function kR(n){return typeof n=="function"}function MR(n){return typeof n=="number"}var iB={useG:!0},Lr={},UR={},jR=new RegExp("^"+Hd+"(\\w+)(true|false)$"),BR=lt("propagationStopped");function $R(n,e){let t=(e?e(n):n)+gs,r=(e?e(n):n)+ps,i=Hd+t,s=Hd+r;Lr[n]={},Lr[n][gs]=i,Lr[n][ps]=s}function sB(n,e,t,r){let i=r&&r.add||TE,s=r&&r.rm||bE,o=r&&r.listeners||"eventListeners",a=r&&r.rmAll||"removeAllListeners",c=lt(i),d="."+i+":",h="prependListener",g="."+h+":",T=function($,B,se){if($.isRemoved)return;let le=$.callback;typeof le=="object"&&le.handleEvent&&($.callback=m=>le.handleEvent(m),$.originalDelegate=le);let oe;try{$.invoke($,B,[se])}catch(m){oe=m}let b=$.options;if(b&&typeof b=="object"&&b.once){let m=$.originalDelegate?$.originalDelegate:$.callback;B[s].call(B,se.type,m,b)}return oe};function C($,B,se){if(B=B||n.event,!B)return;let le=$||B.target||n,oe=le[Lr[B.type][se?ps:gs]];if(oe){let b=[];if(oe.length===1){let m=T(oe[0],le,B);m&&b.push(m)}else{let m=oe.slice();for(let E=0;E<m.length&&!(B&&B[BR]===!0);E++){let w=T(m[E],le,B);w&&b.push(w)}}if(b.length===1)throw b[0];for(let m=0;m<b.length;m++){let E=b[m];e.nativeScheduleMicroTask(()=>{throw E})}}}let R=function($){return C(this,$,!1)},M=function($){return C(this,$,!0)};function k($,B){if(!$)return!1;let se=!0;B&&B.useG!==void 0&&(se=B.useG);let le=B&&B.vh,oe=!0;B&&B.chkDup!==void 0&&(oe=B.chkDup);let b=!1;B&&B.rt!==void 0&&(b=B.rt);let m=$;for(;m&&!m.hasOwnProperty(i);)m=wE(m);if(!m&&$[i]&&(m=$),!m||m[c])return!1;let E=B&&B.eventNameToString,w={},I=m[c]=m[i],D=m[lt(s)]=m[s],_=m[lt(o)]=m[o],xe=m[lt(a)]=m[a],gt;B&&B.prepend&&(gt=m[lt(B.prepend)]=m[B.prepend]);function st(j,Y){return Y?typeof j=="boolean"?{capture:j,passive:!0}:j?typeof j=="object"&&j.passive!==!1?Wj(RR({},j),{passive:!0}):j:{passive:!0}:j}let $e=function(j){if(!w.isExisting)return I.call(w.target,w.eventName,w.capture?M:R,w.options)},L=function(j){if(!j.isRemoved){let Y=Lr[j.eventName],ae;Y&&(ae=Y[j.capture?ps:gs]);let he=ae&&j.target[ae];if(he){for(let ie=0;ie<he.length;ie++)if(he[ie]===j){he.splice(ie,1),j.isRemoved=!0,j.removeAbortListener&&(j.removeAbortListener(),j.removeAbortListener=null),he.length===0&&(j.allRemoved=!0,j.target[ae]=null);break}}}if(j.allRemoved)return D.call(j.target,j.eventName,j.capture?M:R,j.options)},F=function(j){return I.call(w.target,w.eventName,j.invoke,w.options)},U=function(j){return gt.call(w.target,w.eventName,j.invoke,w.options)},ue=function(j){return D.call(j.target,j.eventName,j.invoke,j.options)},Me=se?$e:F,de=se?L:ue,vn=function(j,Y){let ae=typeof Y;return ae==="function"&&j.callback===Y||ae==="object"&&j.originalDelegate===Y},sn=B?.diff||vn,Wn=Zone[lt("UNPATCHED_EVENTS")],xt=n[lt("PASSIVE_EVENTS")];function J(j){if(typeof j=="object"&&j!==null){let Y=RR({},j);return j.signal&&(Y.signal=j.signal),Y}return j}let K=function(j,Y,ae,he,ie=!1,ye=!1){return function(){let De=this||n,Te=arguments[0];B&&B.transferEventName&&(Te=B.transferEventName(Te));let tt=arguments[1];if(!tt)return j.apply(this,arguments);if(ng&&Te==="uncaughtException")return j.apply(this,arguments);let Je=!1;if(typeof tt!="function"){if(!tt.handleEvent)return j.apply(this,arguments);Je=!0}if(le&&!le(j,tt,De,arguments))return;let mt=!!xt&&xt.indexOf(Te)!==-1,ot=J(st(arguments[2],mt)),Kn=ot?.signal;if(Kn?.aborted)return;if(Wn){for(let En=0;En<Wn.length;En++)if(Te===Wn[En])return mt?j.call(De,Te,tt,ot):j.apply(this,arguments)}let ga=ot?typeof ot=="boolean"?!0:ot.capture:!1,as=ot&&typeof ot=="object"?ot.once:!1,ma=Zone.current,fr=Lr[Te];fr||($R(Te,E),fr=Lr[Te]);let Pt=fr[ga?ps:gs],Dt=De[Pt],Qr=!1;if(Dt){if(Qr=!0,oe){for(let En=0;En<Dt.length;En++)if(sn(Dt[En],tt))return}}else Dt=De[Pt]=[];let cs,ya=De.constructor.name,_a=UR[ya];_a&&(cs=_a[Te]),cs||(cs=ya+Y+(E?E(Te):Te)),w.options=ot,as&&(w.options.once=!1),w.target=De,w.capture=ga,w.eventName=Te,w.isExisting=Qr;let sr=se?iB:void 0;sr&&(sr.taskData=w),Kn&&(w.options.signal=void 0);let zt=ma.scheduleEventTask(cs,tt,sr,ae,he);if(Kn){w.options.signal=Kn;let En=()=>zt.zone.cancelTask(zt);j.call(Kn,"abort",En,{once:!0}),zt.removeAbortListener=()=>Kn.removeEventListener("abort",En)}if(w.target=null,sr&&(sr.taskData=null),as&&(w.options.once=!0),typeof zt.options!="boolean"&&(zt.options=ot),zt.target=De,zt.capture=ga,zt.eventName=Te,Je&&(zt.originalDelegate=tt),ye?Dt.unshift(zt):Dt.push(zt),ie)return De}};return m[i]=K(I,d,Me,de,b),gt&&(m[h]=K(gt,g,U,de,b,!0)),m[s]=function(){let j=this||n,Y=arguments[0];B&&B.transferEventName&&(Y=B.transferEventName(Y));let ae=arguments[2],he=ae?typeof ae=="boolean"?!0:ae.capture:!1,ie=arguments[1];if(!ie)return D.apply(this,arguments);if(le&&!le(D,ie,j,arguments))return;let ye=Lr[Y],De;ye&&(De=ye[he?ps:gs]);let Te=De&&j[De];if(Te)for(let tt=0;tt<Te.length;tt++){let Je=Te[tt];if(sn(Je,ie)){if(Te.splice(tt,1),Je.isRemoved=!0,Te.length===0&&(Je.allRemoved=!0,j[De]=null,!he&&typeof Y=="string")){let mt=Hd+"ON_PROPERTY"+Y;j[mt]=null}return Je.zone.cancelTask(Je),b?j:void 0}}return D.apply(this,arguments)},m[o]=function(){let j=this||n,Y=arguments[0];B&&B.transferEventName&&(Y=B.transferEventName(Y));let ae=[],he=HR(j,E?E(Y):Y);for(let ie=0;ie<he.length;ie++){let ye=he[ie],De=ye.originalDelegate?ye.originalDelegate:ye.callback;ae.push(De)}return ae},m[a]=function(){let j=this||n,Y=arguments[0];if(Y){B&&B.transferEventName&&(Y=B.transferEventName(Y));let ae=Lr[Y];if(ae){let he=ae[gs],ie=ae[ps],ye=j[he],De=j[ie];if(ye){let Te=ye.slice();for(let tt=0;tt<Te.length;tt++){let Je=Te[tt],mt=Je.originalDelegate?Je.originalDelegate:Je.callback;this[s].call(this,Y,mt,Je.options)}}if(De){let Te=De.slice();for(let tt=0;tt<Te.length;tt++){let Je=Te[tt],mt=Je.originalDelegate?Je.originalDelegate:Je.callback;this[s].call(this,Y,mt,Je.options)}}}}else{let ae=Object.keys(j);for(let he=0;he<ae.length;he++){let ie=ae[he],ye=jR.exec(ie),De=ye&&ye[1];De&&De!=="removeListener"&&this[a].call(this,De)}this[a].call(this,"removeListener")}if(b)return this},ys(m[i],I),ys(m[s],D),xe&&ys(m[a],xe),_&&ys(m[o],_),!0}let H=[];for(let $=0;$<t.length;$++)H[$]=k(t[$],r);return H}function HR(n,e){if(!e){let s=[];for(let o in n){let a=jR.exec(o),c=a&&a[1];if(c&&(!e||c===e)){let d=n[o];if(d)for(let h=0;h<d.length;h++)s.push(d[h])}}return s}let t=Lr[e];t||($R(e),t=Lr[e]);let r=n[t[gs]],i=n[t[ps]];return r?i?r.concat(i):r.slice():i?i.slice():[]}function oB(n,e){let t=n.Event;t&&t.prototype&&e.patchMethod(t.prototype,"stopImmediatePropagation",r=>function(i,s){i[BR]=!0,r&&r.apply(i,s)})}function aB(n,e){e.patchMethod(n,"queueMicrotask",t=>function(r,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}var Zp=lt("zoneTask");function mu(n,e,t,r){let i=null,s=null;e+=r,t+=r;let o={};function a(d){let h=d.data;h.args[0]=function(){return d.invoke.apply(this,arguments)};let g=i.apply(n,h.args);return MR(g)?h.handleId=g:(h.handle=g,h.isRefreshable=kR(g.refresh)),d}function c(d){let{handle:h,handleId:g}=d.data;return s.call(n,h??g)}i=ms(n,e,d=>function(h,g){var T;if(kR(g[0])){let C={isRefreshable:!1,isPeriodic:r==="Interval",delay:r==="Timeout"||r==="Interval"?g[1]||0:void 0,args:g},R=g[0];g[0]=function(){try{return R.apply(this,arguments)}finally{let{handle:le,handleId:oe,isPeriodic:b,isRefreshable:m}=C;!b&&!m&&(oe?delete o[oe]:le&&(le[Zp]=null))}};let M=CE(e,g[0],C,a,c);if(!M)return M;let{handleId:k,handle:H,isRefreshable:$,isPeriodic:B}=M.data;if(k)o[k]=M;else if(H&&(H[Zp]=M,$&&!B)){let se=H.refresh;H.refresh=function(){let{zone:le,state:oe}=M;return oe==="notScheduled"?(M._state="scheduled",le._updateTaskCount(M,1)):oe==="running"&&(M._state="scheduling"),se.call(this)}}return(T=H??k)!=null?T:M}else return d.apply(n,g)}),s=ms(n,t,d=>function(h,g){let T=g[0],C;MR(T)?(C=o[T],delete o[T]):(C=T?.[Zp],C?T[Zp]=null:C=T),C?.type?C.cancelFn&&C.zone.cancelTask(C):d.apply(n,g)})}function cB(n,e){let{isBrowser:t,isMix:r}=e.getGlobalObjects();if(!t&&!r||!n.customElements||!("customElements"in n))return;let i=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,n.customElements,"customElements","define",i)}function uB(n,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:t,zoneSymbolEventNames:r,TRUE_STR:i,FALSE_STR:s,ZONE_SYMBOL_PREFIX:o}=e.getGlobalObjects();for(let c=0;c<t.length;c++){let d=t[c],h=d+s,g=d+i,T=o+h,C=o+g;r[d]={},r[d][s]=T,r[d][i]=C}let a=n.EventTarget;if(!(!a||!a.prototype))return e.patchEventTarget(n,e,[a&&a.prototype]),!0}function lB(n,e){e.patchEventPrototype(n,e)}function qR(n,e,t){if(!t||t.length===0)return e;let r=t.filter(s=>s.target===n);if(r.length===0)return e;let i=r[0].ignoreProperties;return e.filter(s=>i.indexOf(s)===-1)}function OR(n,e,t,r){if(!n)return;let i=qR(n,e,t);VR(n,i,r)}function EE(n){return Object.getOwnPropertyNames(n).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function dB(n,e){if(ng&&!FR||Zone[n.symbol("patchEvents")])return;let t=e.__Zone_ignore_on_properties,r=[];if(AE){let i=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]),OR(i,EE(i),t,wE(i))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<r.length;i++){let s=e[r[i]];s?.prototype&&OR(s.prototype,EE(s.prototype),t)}}function hB(n){n.__load_patch("timers",e=>{let r="clear";mu(e,"set",r,"Timeout"),mu(e,"set",r,"Interval"),mu(e,"set",r,"Immediate")}),n.__load_patch("requestAnimationFrame",e=>{mu(e,"request","cancel","AnimationFrame"),mu(e,"mozRequest","mozCancel","AnimationFrame"),mu(e,"webkitRequest","webkitCancel","AnimationFrame")}),n.__load_patch("blocking",(e,t)=>{let r=["alert","prompt","confirm"];for(let i=0;i<r.length;i++){let s=r[i];ms(e,s,(o,a,c)=>function(d,h){return t.current.run(o,e,h,c)})}}),n.__load_patch("EventTarget",(e,t,r)=>{lB(e,r),uB(e,r);let i=e.XMLHttpRequestEventTarget;i&&i.prototype&&r.patchEventTarget(e,r,[i.prototype])}),n.__load_patch("MutationObserver",(e,t,r)=>{Bd("MutationObserver"),Bd("WebKitMutationObserver")}),n.__load_patch("IntersectionObserver",(e,t,r)=>{Bd("IntersectionObserver")}),n.__load_patch("FileReader",(e,t,r)=>{Bd("FileReader")}),n.__load_patch("on_property",(e,t,r)=>{dB(r,e)}),n.__load_patch("customElements",(e,t,r)=>{cB(e,r)}),n.__load_patch("XHR",(e,t)=>{d(e);let r=lt("xhrTask"),i=lt("xhrSync"),s=lt("xhrListener"),o=lt("xhrScheduled"),a=lt("xhrURL"),c=lt("xhrErrorBeforeScheduled");function d(h){let g=h.XMLHttpRequest;if(!g)return;let T=g.prototype;function C(I){return I[r]}let R=T[mE],M=T[yE];if(!R){let I=h.XMLHttpRequestEventTarget;if(I){let D=I.prototype;R=D[mE],M=D[yE]}}let k="readystatechange",H="scheduled";function $(I){let D=I.data,_=D.target;_[o]=!1,_[c]=!1;let xe=_[s];R||(R=_[mE],M=_[yE]),xe&&M.call(_,k,xe);let gt=_[s]=()=>{if(_.readyState===_.DONE)if(!D.aborted&&_[o]&&I.state===H){let $e=_[t.__symbol__("loadfalse")];if(_.status!==0&&$e&&$e.length>0){let L=I.invoke;I.invoke=function(){let F=_[t.__symbol__("loadfalse")];for(let U=0;U<F.length;U++)F[U]===I&&F.splice(U,1);!D.aborted&&I.state===H&&L.call(I)},$e.push(I)}else I.invoke()}else!D.aborted&&_[o]===!1&&(_[c]=!0)};return R.call(_,k,gt),_[r]||(_[r]=I),E.apply(_,D.args),_[o]=!0,I}function B(){}function se(I){let D=I.data;return D.aborted=!0,w.apply(D.target,D.args)}let le=ms(T,"open",()=>function(I,D){return I[i]=D[2]==!1,I[a]=D[1],le.apply(I,D)}),oe="XMLHttpRequest.send",b=lt("fetchTaskAborting"),m=lt("fetchTaskScheduling"),E=ms(T,"send",()=>function(I,D){if(t.current[m]===!0||I[i])return E.apply(I,D);{let _={target:I,url:I[a],isPeriodic:!1,args:D,aborted:!1},xe=CE(oe,B,_,$,se);I&&I[c]===!0&&!_.aborted&&xe.state===H&&xe.invoke()}}),w=ms(T,"abort",()=>function(I,D){let _=C(I);if(_&&typeof _.type=="string"){if(_.cancelFn==null||_.data&&_.data.aborted)return;_.zone.cancelTask(_)}else if(t.current[b]===!0)return w.apply(I,D)})}}),n.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Xj(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),n.__load_patch("PromiseRejectionEvent",(e,t)=>{function r(i){return function(s){HR(e,i).forEach(a=>{let c=e.PromiseRejectionEvent;if(c){let d=new c(i,{promise:s.promise,reason:s.rejection});a.invoke(d)}})}}e.PromiseRejectionEvent&&(t[lt("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[lt("rejectionHandledHandler")]=r("rejectionhandled"))}),n.__load_patch("queueMicrotask",(e,t,r)=>{aB(e,r)})}function fB(n){n.__load_patch("ZoneAwarePromise",(e,t,r)=>{let i=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function o(J){if(J&&J.toString===Object.prototype.toString){let K=J.constructor&&J.constructor.name;return(K||"")+": "+JSON.stringify(J)}return J?J.toString():Object.prototype.toString.call(J)}let a=r.symbol,c=[],d=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,h=a("Promise"),g=a("then"),T="__creationTrace__";r.onUnhandledError=J=>{if(r.showUncaughtError()){let K=J&&J.rejection;K?console.error("Unhandled Promise rejection:",K instanceof Error?K.message:K,"; Zone:",J.zone.name,"; Task:",J.task&&J.task.source,"; Value:",K,K instanceof Error?K.stack:void 0):console.error(J)}},r.microtaskDrainDone=()=>{for(;c.length;){let J=c.shift();try{J.zone.runGuarded(()=>{throw J.throwOriginal?J.rejection:J})}catch(K){R(K)}}};let C=a("unhandledPromiseRejectionHandler");function R(J){r.onUnhandledError(J);try{let K=t[C];typeof K=="function"&&K.call(this,J)}catch{}}function M(J){return J&&typeof J.then=="function"}function k(J){return J}function H(J){return de.reject(J)}let $=a("state"),B=a("value"),se=a("finally"),le=a("parentPromiseValue"),oe=a("parentPromiseState"),b="Promise.then",m=null,E=!0,w=!1,I=0;function D(J,K){return j=>{try{st(J,K,j)}catch(Y){st(J,!1,Y)}}}let _=function(){let J=!1;return function(j){return function(){J||(J=!0,j.apply(null,arguments))}}},xe="Promise resolved with itself",gt=a("currentTaskTrace");function st(J,K,j){let Y=_();if(J===j)throw new TypeError(xe);if(J[$]===m){let ae=null;try{(typeof j=="object"||typeof j=="function")&&(ae=j&&j.then)}catch(he){return Y(()=>{st(J,!1,he)})(),J}if(K!==w&&j instanceof de&&j.hasOwnProperty($)&&j.hasOwnProperty(B)&&j[$]!==m)L(j),st(J,j[$],j[B]);else if(K!==w&&typeof ae=="function")try{ae.call(j,Y(D(J,K)),Y(D(J,!1)))}catch(he){Y(()=>{st(J,!1,he)})()}else{J[$]=K;let he=J[B];if(J[B]=j,J[se]===se&&K===E&&(J[$]=J[oe],J[B]=J[le]),K===w&&j instanceof Error){let ie=t.currentTask&&t.currentTask.data&&t.currentTask.data[T];ie&&s(j,gt,{configurable:!0,enumerable:!1,writable:!0,value:ie})}for(let ie=0;ie<he.length;)F(J,he[ie++],he[ie++],he[ie++],he[ie++]);if(he.length==0&&K==w){J[$]=I;let ie=j;try{throw new Error("Uncaught (in promise): "+o(j)+(j&&j.stack?`
`+j.stack:""))}catch(ye){ie=ye}d&&(ie.throwOriginal=!0),ie.rejection=j,ie.promise=J,ie.zone=t.current,ie.task=t.currentTask,c.push(ie),r.scheduleMicroTask()}}}return J}let $e=a("rejectionHandledHandler");function L(J){if(J[$]===I){try{let K=t[$e];K&&typeof K=="function"&&K.call(this,{rejection:J[B],promise:J})}catch{}J[$]=w;for(let K=0;K<c.length;K++)J===c[K].promise&&c.splice(K,1)}}function F(J,K,j,Y,ae){L(J);let he=J[$],ie=he?typeof Y=="function"?Y:k:typeof ae=="function"?ae:H;K.scheduleMicroTask(b,()=>{try{let ye=J[B],De=!!j&&se===j[se];De&&(j[le]=ye,j[oe]=he);let Te=K.run(ie,void 0,De&&ie!==H&&ie!==k?[]:[ye]);st(j,!0,Te)}catch(ye){st(j,!1,ye)}},j)}let U="function ZoneAwarePromise() { [native code] }",ue=function(){},Me=e.AggregateError;class de{static toString(){return U}static resolve(K){return K instanceof de?K:st(new this(null),E,K)}static reject(K){return st(new this(null),w,K)}static withResolvers(){let K={};return K.promise=new de((j,Y)=>{K.resolve=j,K.reject=Y}),K}static any(K){if(!K||typeof K[Symbol.iterator]!="function")return Promise.reject(new Me([],"All promises were rejected"));let j=[],Y=0;try{for(let ie of K)Y++,j.push(de.resolve(ie))}catch{return Promise.reject(new Me([],"All promises were rejected"))}if(Y===0)return Promise.reject(new Me([],"All promises were rejected"));let ae=!1,he=[];return new de((ie,ye)=>{for(let De=0;De<j.length;De++)j[De].then(Te=>{ae||(ae=!0,ie(Te))},Te=>{he.push(Te),Y--,Y===0&&(ae=!0,ye(new Me(he,"All promises were rejected")))})})}static race(K){let j,Y,ae=new this((ye,De)=>{j=ye,Y=De});function he(ye){j(ye)}function ie(ye){Y(ye)}for(let ye of K)M(ye)||(ye=this.resolve(ye)),ye.then(he,ie);return ae}static all(K){return de.allWithCallback(K)}static allSettled(K){return(this&&this.prototype instanceof de?this:de).allWithCallback(K,{thenCallback:Y=>({status:"fulfilled",value:Y}),errorCallback:Y=>({status:"rejected",reason:Y})})}static allWithCallback(K,j){let Y,ae,he=new this((Te,tt)=>{Y=Te,ae=tt}),ie=2,ye=0,De=[];for(let Te of K){M(Te)||(Te=this.resolve(Te));let tt=ye;try{Te.then(Je=>{De[tt]=j?j.thenCallback(Je):Je,ie--,ie===0&&Y(De)},Je=>{j?(De[tt]=j.errorCallback(Je),ie--,ie===0&&Y(De)):ae(Je)})}catch(Je){ae(Je)}ie++,ye++}return ie-=2,ie===0&&Y(De),he}constructor(K){let j=this;if(!(j instanceof de))throw new Error("Must be an instanceof Promise.");j[$]=m,j[B]=[];try{let Y=_();K&&K(Y(D(j,E)),Y(D(j,w)))}catch(Y){st(j,!1,Y)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return de}then(K,j){var Y;let ae=(Y=this.constructor)==null?void 0:Y[Symbol.species];(!ae||typeof ae!="function")&&(ae=this.constructor||de);let he=new ae(ue),ie=t.current;return this[$]==m?this[B].push(ie,he,K,j):F(this,ie,he,K,j),he}catch(K){return this.then(null,K)}finally(K){var j;let Y=(j=this.constructor)==null?void 0:j[Symbol.species];(!Y||typeof Y!="function")&&(Y=de);let ae=new Y(ue);ae[se]=se;let he=t.current;return this[$]==m?this[B].push(he,ae,K,K):F(this,he,ae,K,K),ae}}de.resolve=de.resolve,de.reject=de.reject,de.race=de.race,de.all=de.all;let vn=e[h]=e.Promise;e.Promise=de;let sn=a("thenPatched");function Wn(J){let K=J.prototype,j=i(K,"then");if(j&&(j.writable===!1||!j.configurable))return;let Y=K.then;K[g]=Y,J.prototype.then=function(ae,he){return new de((ye,De)=>{Y.call(this,ye,De)}).then(ae,he)},J[sn]=!0}r.patchThen=Wn;function xt(J){return function(K,j){let Y=J.apply(K,j);if(Y instanceof de)return Y;let ae=Y.constructor;return ae[sn]||Wn(ae),Y}}return vn&&(Wn(vn),ms(e,"fetch",J=>xt(J))),Promise[t.__symbol__("uncaughtPromiseErrors")]=c,de})}function pB(n){n.__load_patch("toString",e=>{let t=Function.prototype.toString,r=lt("OriginalDelegate"),i=lt("Promise"),s=lt("Error"),o=function(){if(typeof this=="function"){let h=this[r];if(h)return typeof h=="function"?t.call(h):Object.prototype.toString.call(h);if(this===Promise){let g=e[i];if(g)return t.call(g)}if(this===Error){let g=e[s];if(g)return t.call(g)}}return t.call(this)};o[r]=t,Function.prototype.toString=o;let a=Object.prototype.toString,c="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?c:a.call(this)}})}function gB(n,e,t,r,i){let s=Zone.__symbol__(r);if(e[s])return;let o=e[s]=e[r];e[r]=function(a,c,d){return c&&c.prototype&&i.forEach(function(h){let g=`${t}.${r}::`+h,T=c.prototype;try{if(T.hasOwnProperty(h)){let C=n.ObjectGetOwnPropertyDescriptor(T,h);C&&C.value?(C.value=n.wrapWithCurrentZone(C.value,g),n._redefineProperty(c.prototype,h,C)):T[h]&&(T[h]=n.wrapWithCurrentZone(T[h],g))}else T[h]&&(T[h]=n.wrapWithCurrentZone(T[h],g))}catch{}}),o.call(e,a,c,d)},n.attachOriginToPatched(e[r],o)}function mB(n){n.__load_patch("util",(e,t,r)=>{let i=EE(e);r.patchOnProperties=VR,r.patchMethod=ms,r.bindArguments=SE,r.patchMacroTask=rB;let s=t.__symbol__("BLACK_LISTED_EVENTS"),o=t.__symbol__("UNPATCHED_EVENTS");e[o]&&(e[s]=e[o]),e[s]&&(t[s]=t[o]=e[s]),r.patchEventPrototype=oB,r.patchEventTarget=sB,r.ObjectDefineProperty=IE,r.ObjectGetOwnPropertyDescriptor=$d,r.ObjectCreate=Yj,r.ArraySlice=Jj,r.patchClass=Bd,r.wrapWithCurrentZone=DE,r.filterProperties=qR,r.attachOriginToPatched=ys,r._redefineProperty=Object.defineProperty,r.patchCallbacks=gB,r.getGlobalObjects=()=>({globalSources:UR,zoneSymbolEventNames:Lr,eventNames:i,isBrowser:AE,isMix:FR,isNode:ng,TRUE_STR:ps,FALSE_STR:gs,ZONE_SYMBOL_PREFIX:Hd,ADD_EVENT_LISTENER_STR:TE,REMOVE_EVENT_LISTENER_STR:bE})})}function yB(n){fB(n),pB(n),mB(n)}var zR=Qj();yB(zR);hB(zR);var Mn=null,rg=!1,kE=1,_B=null,Qn=Symbol("SIGNAL");function Oe(n){let e=Mn;return Mn=n,e}function sg(){return Mn}var qd={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zd(n){if(rg)throw new Error("");if(Mn===null)return;Mn.consumerOnSignalRead(n);let e=Mn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Mn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Mn.producers,t!==void 0&&t.producer===n)){Mn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Mn&&(!r||EB(i,Mn)))return;let s=yu(Mn),o={producer:n,consumer:Mn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Mn.producersTail=o,e!==void 0?e.nextProducer=o:Mn.producers=o,s&&QR(n,o)}function GR(){kE++}function ME(n){if(!(yu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===kE)){if(!n.producerMustRecompute(n)&&!ag(n)){PE(n);return}n.producerRecomputeValue(n),PE(n)}}function OE(n){if(n.consumers===void 0)return;let e=rg;rg=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||vB(r)}}finally{rg=e}}function xE(){return Mn?.consumerAllowSignalWrites!==!1}function vB(n){n.dirty=!0,OE(n),n.consumerMarkedDirty?.(n)}function PE(n){n.dirty=!1,n.lastCleanEpoch=kE}function Gd(n){return n&&WR(n),Oe(n)}function WR(n){n.producersTail=void 0,n.recomputing=!0}function og(n,e){Oe(e),n&&KR(n)}function KR(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(yu(n))do t=LE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function ag(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(ME(t),r!==t.version))return!0}return!1}function Wd(n){if(yu(n)){let e=n.producers;for(;e!==void 0;)e=LE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function QR(n,e){let t=n.consumersTail,r=yu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)QR(i.producer,i)}function LE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!yu(e)){let s=e.producers;for(;s!==void 0;)s=LE(s)}return t}function yu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function FE(n){_B?.(n)}function EB(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function VE(n,e){return Object.is(n,e)}function cg(n,e){let t=Object.create(IB);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(ME(t),zd(t),t.value===ig)throw t.error;return t.value};return r[Qn]=t,FE(t),r}var RE=Symbol("UNSET"),NE=Symbol("COMPUTING"),ig=Symbol("ERRORED"),IB=ve(q({},qd),{value:RE,dirty:!0,error:null,equal:VE,kind:"computed",producerMustRecompute(n){return n.value===RE||n.value===NE},producerRecomputeValue(n){if(n.value===NE)throw new Error("");let e=n.value;n.value=NE;let t=Gd(n),r,i=!1;try{r=n.computation(),Oe(null),i=e!==RE&&e!==ig&&r!==ig&&n.equal(e,r)}catch(s){r=ig,n.error=s}finally{og(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function wB(){throw new Error}var YR=wB;function JR(n){YR(n)}function UE(n){YR=n}var TB=null;function jE(n,e){let t=Object.create(ug);t.value=n,e!==void 0&&(t.equal=e);let r=()=>ZR(t);return r[Qn]=t,FE(t),[r,o=>Kd(t,o),o=>XR(t,o)]}function ZR(n){return zd(n),n.value}function Kd(n,e){xE()||JR(n),n.equal(n.value,e)||(n.value=e,bB(n))}function XR(n,e){xE()||JR(n),Kd(n,e(n.value))}var ug=ve(q({},qd),{equal:VE,value:void 0,kind:"signal"});function bB(n){n.version++,GR(),OE(n),TB?.(n)}function BE(n){let e=Oe(null);try{return n()}finally{Oe(e)}}function Re(n){return typeof n=="function"}function _u(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var lg=_u(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ma(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ft=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Re(r))try{r()}catch(s){e=s instanceof lg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{eN(s)}catch(o){e=e??[],o instanceof lg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new lg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)eN(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ma(t,e)}remove(e){let{_finalizers:t}=this;t&&Ma(t,e),e instanceof n&&e._removeParent(this)}};Ft.EMPTY=(()=>{let n=new Ft;return n.closed=!0,n})();var $E=Ft.EMPTY;function dg(n){return n instanceof Ft||n&&"closed"in n&&Re(n.remove)&&Re(n.add)&&Re(n.unsubscribe)}function eN(n){Re(n)?n():n.unsubscribe()}var ri={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vu={setTimeout(n,e,...t){let{delegate:r}=vu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=vu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hg(n){vu.setTimeout(()=>{let{onUnhandledError:e}=ri;if(e)e(n);else throw n})}function Oa(){}var tN=HE("C",void 0,void 0);function nN(n){return HE("E",void 0,n)}function rN(n){return HE("N",n,void 0)}function HE(n,e,t){return{kind:n,value:e,error:t}}var xa=null;function Eu(n){if(ri.useDeprecatedSynchronousErrorHandling){let e=!xa;if(e&&(xa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=xa;if(xa=null,t)throw r}}else n()}function iN(n){ri.useDeprecatedSynchronousErrorHandling&&xa&&(xa.errorThrown=!0,xa.error=n)}var La=class extends Ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dg(e)&&e.add(this)):this.destination=SB}static create(e,t,r){return new Iu(e,t,r)}next(e){this.isStopped?zE(rN(e),this):this._next(e)}error(e){this.isStopped?zE(nN(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zE(tN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DB=Function.prototype.bind;function qE(n,e){return DB.call(n,e)}var GE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){fg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){fg(r)}else fg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fg(t)}}},Iu=class extends La{constructor(e,t,r){super();let i;if(Re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ri.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qE(e.next,s),error:e.error&&qE(e.error,s),complete:e.complete&&qE(e.complete,s)}):i=e}this.destination=new GE(i)}};function fg(n){ri.useDeprecatedSynchronousErrorHandling?iN(n):hg(n)}function CB(n){throw n}function zE(n,e){let{onStoppedNotification:t}=ri;t&&vu.setTimeout(()=>t(n,e))}var SB={closed:!0,next:Oa,error:CB,complete:Oa};var wu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ii(n){return n}function pg(...n){return WE(n)}function WE(n){return n.length===0?ii:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=RB(t)?t:new Iu(t,r,i);return Eu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=sN(r),new r((i,s)=>{let o=new Iu({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[wu](){return this}pipe(...t){return WE(t)(this)}toPromise(t){return t=sN(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function sN(n){var e;return(e=n??ri.Promise)!==null&&e!==void 0?e:Promise}function AB(n){return n&&Re(n.next)&&Re(n.error)&&Re(n.complete)}function RB(n){return n&&n instanceof La||AB(n)&&dg(n)}function NB(n){return Re(n?.lift)}function dt(n){return e=>{if(NB(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ht(n,e,t,r,i){return new KE(n,e,t,r,i)}var KE=class extends La{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var oN=_u(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var It=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oN}next(t){Eu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Eu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Eu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?$E:(this.currentObservers=null,s.push(t),new Ft(()=>{this.currentObservers=null,Ma(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new gg(e,t),n})(),gg=class extends It{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:$E}};var wn=class extends It{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var QE={now(){return(QE.delegate||Date).now()},delegate:void 0};var mg=class extends Ft{constructor(e,t){super()}schedule(e,t=0){return this}};var Qd={setInterval(n,e,...t){let{delegate:r}=Qd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Qd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Tu=class extends mg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Qd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Qd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ma(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var bu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};bu.now=QE.now;var Du=class extends bu{constructor(e,t=bu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var YE=new Du(Tu);var yg=class extends Tu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var _g=class extends Du{};var JE=new _g(yg);var cr=new ge(n=>n.complete());function aN(n){return n&&Re(n.schedule)}function cN(n){return n[n.length-1]}function vg(n){return Re(cN(n))?n.pop():void 0}function bo(n){return aN(cN(n))?n.pop():void 0}function Eg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function lN(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function uN(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fa(n){return this instanceof Fa?(this.v=n,this):new Fa(n)}function dN(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(C){return function(R){return Promise.resolve(R).then(C,g)}}function a(C,R){r[C]&&(i[C]=function(M){return new Promise(function(k,H){s.push([C,M,k,H])>1||c(C,M)})},R&&(i[C]=R(i[C])))}function c(C,R){try{d(r[C](R))}catch(M){T(s[0][3],M)}}function d(C){C.value instanceof Fa?Promise.resolve(C.value.v).then(h,g):T(s[0][2],C)}function h(C){c("next",C)}function g(C){c("throw",C)}function T(C,R){C(R),s.shift(),s.length&&c(s[0][0],s[0][1])}}function hN(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof uN=="function"?uN(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Ig=n=>n&&typeof n.length=="number"&&typeof n!="function";function wg(n){return Re(n?.then)}function Tg(n){return Re(n[wu])}function bg(n){return Symbol.asyncIterator&&Re(n?.[Symbol.asyncIterator])}function Dg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cg=PB();function Sg(n){return Re(n?.[Cg])}function Ag(n){return dN(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Fa(t.read());if(i)return yield Fa(void 0);yield yield Fa(r)}}finally{t.releaseLock()}})}function Rg(n){return Re(n?.getReader)}function Gt(n){if(n instanceof ge)return n;if(n!=null){if(Tg(n))return kB(n);if(Ig(n))return MB(n);if(wg(n))return OB(n);if(bg(n))return fN(n);if(Sg(n))return xB(n);if(Rg(n))return LB(n)}throw Dg(n)}function kB(n){return new ge(e=>{let t=n[wu]();if(Re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MB(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function OB(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hg)})}function xB(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fN(n){return new ge(e=>{FB(n,e).catch(t=>e.error(t))})}function LB(n){return fN(Ag(n))}function FB(n,e){var t,r,i,s;return lN(this,void 0,void 0,function*(){try{for(t=hN(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function ur(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Do(n,e=0){return dt((t,r)=>{t.subscribe(ht(r,i=>ur(r,n,()=>r.next(i),e),()=>ur(r,n,()=>r.complete(),e),i=>ur(r,n,()=>r.error(i),e)))})}function Co(n,e=0){return dt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function pN(n,e){return Gt(n).pipe(Co(e),Do(e))}function gN(n,e){return Gt(n).pipe(Co(e),Do(e))}function mN(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function yN(n,e){return new ge(t=>{let r;return ur(t,e,()=>{r=n[Cg](),ur(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Re(r?.return)&&r.return()})}function Ng(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{ur(t,e,()=>{let r=n[Symbol.asyncIterator]();ur(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function _N(n,e){return Ng(Ag(n),e)}function vN(n,e){if(n!=null){if(Tg(n))return pN(n,e);if(Ig(n))return mN(n,e);if(wg(n))return gN(n,e);if(bg(n))return Ng(n,e);if(Sg(n))return yN(n,e);if(Rg(n))return _N(n,e)}throw Dg(n)}function wt(n,e){return e?vN(n,e):Gt(n)}function Ne(...n){let e=bo(n);return wt(n,e)}function ZE(n,e){let t=Re(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function Pg(n){return!!n&&(n instanceof ge||Re(n.lift)&&Re(n.subscribe))}var Va=_u(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ve(n,e){return dt((t,r)=>{let i=0;t.subscribe(ht(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:VB}=Array;function UB(n,e){return VB(e)?n(...e):n(e)}function kg(n){return Ve(e=>UB(n,e))}var{isArray:jB}=Array,{getPrototypeOf:BB,prototype:$B,keys:HB}=Object;function Mg(n){if(n.length===1){let e=n[0];if(jB(e))return{args:e,keys:null};if(qB(e)){let t=HB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function qB(n){return n&&typeof n=="object"&&BB(n)===$B}function Og(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xg(...n){let e=bo(n),t=vg(n),{args:r,keys:i}=Mg(n);if(r.length===0)return wt([],e);let s=new ge(zB(r,e,i?o=>Og(i,o):ii));return t?s.pipe(kg(t)):s}function zB(n,e,t=ii){return r=>{EN(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)EN(e,()=>{let d=wt(n[c],e),h=!1;d.subscribe(ht(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function EN(n,e,t){n?ur(t,n,e):e()}function IN(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,g=!1,T=()=>{g&&!c.length&&!d&&e.complete()},C=M=>d<r?R(M):c.push(M),R=M=>{s&&e.next(M),d++;let k=!1;Gt(t(M,h++)).subscribe(ht(e,H=>{i?.(H),s?C(H):e.next(H)},()=>{k=!0},void 0,()=>{if(k)try{for(d--;c.length&&d<r;){let H=c.shift();o?ur(e,o,()=>R(H)):R(H)}T()}catch(H){e.error(H)}}))};return n.subscribe(ht(e,C,()=>{g=!0,T()})),()=>{a?.()}}function Tn(n,e,t=1/0){return Re(e)?Tn((r,i)=>Ve((s,o)=>e(r,s,i,o))(Gt(n(r,i))),t):(typeof e=="number"&&(t=e),dt((r,i)=>IN(r,i,n,t)))}function So(n=1/0){return Tn(ii,n)}function wN(){return So(1)}function Cu(...n){return wN()(wt(n,bo(n)))}function Yd(n){return new ge(e=>{Gt(n()).subscribe(e)})}function XE(...n){let e=vg(n),{args:t,keys:r}=Mg(n),i=new ge(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let g=!1;Gt(t[h]).subscribe(ht(s,T=>{g||(g=!0,d--),a[h]=T},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?Og(r,a):a),s.complete())}))}});return e?i.pipe(kg(e)):i}var _s=new ge(Oa);function On(n,e){return dt((t,r)=>{let i=0;t.subscribe(ht(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Su(n){return dt((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ht(t,void 0,void 0,o=>{s=Gt(n(o,Su(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Au(n,e){return Re(e)?Tn(n,e,1):Tn(n,1)}function eI(n){return dt((e,t)=>{let r=!1;e.subscribe(ht(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function bn(n){return n<=0?()=>cr:dt((e,t)=>{let r=0;e.subscribe(ht(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function TN(n=GB){return dt((e,t)=>{let r=!1;e.subscribe(ht(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function GB(){return new Va}function tI(n){return dt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vs(n,e){let t=arguments.length>=2;return r=>r.pipe(n?On((i,s)=>n(i,s,r)):ii,bn(1),t?eI(e):TN(()=>new Va))}function Lg(n){return n<=0?()=>cr:dt((e,t)=>{let r=[];e.subscribe(ht(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Fg(...n){let e=bo(n);return dt((t,r)=>{(e?Cu(n,t,e):Cu(n,t)).subscribe(r)})}function xn(n,e){return dt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ht(r,c=>{i?.unsubscribe();let d=0,h=s++;Gt(n(c,h)).subscribe(i=ht(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Jd(n){return dt((e,t)=>{Gt(n).subscribe(ht(t,()=>t.complete(),Oa)),!t.closed&&e.subscribe(t)})}function Dn(n,e,t){let r=Re(n)||e||t?{next:n,error:e,complete:t}:n;return r?dt((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ht(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ii}var nI;function Vg(){return nI}function Pi(n){let e=nI;return nI=n,e}var bN=Symbol("NotFound");function Ru(n){return n===bN||n?.name==="\u0275NotFound"}var Ao=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},_I=new Ao("21.0.3");var Hg="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ee=class extends Error{code;constructor(e,t){super(Mi(e,t)),this.code=e}};function QB(n){return`NG0${Math.abs(n)}`}function Mi(n,e){return`${QB(n)}${e?": "+e:""}`}var Ts=globalThis;function ft(n){for(let e in n)if(n[e]===ft)return e;throw Error("")}function RN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Is(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Is).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function vI(n,e){return n?e?`${n} ${e}`:n:e||""}var YB=ft({__forward_ref__:ft});function Ha(n){return n.__forward_ref__=Ha,n.toString=function(){return Is(this())},n}function Cn(n){return EI(n)?n():n}function EI(n){return typeof n=="function"&&n.hasOwnProperty(YB)&&n.__forward_ref__===Ha}function te(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Fr(n){return{providers:n.providers||[],imports:n.imports||[]}}function rh(n){return JB(n,qg)}function II(n){return rh(n)!==null}function JB(n,e){return n.hasOwnProperty(e)&&n[e]||null}function ZB(n){let e=n?.[qg]??null;return e||null}function iI(n){return n&&n.hasOwnProperty(jg)?n[jg]:null}var qg=ft({\u0275prov:ft}),jg=ft({\u0275inj:ft}),ne=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=te({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wI(n){return n&&!!n.\u0275providers}var TI=ft({\u0275cmp:ft}),bI=ft({\u0275dir:ft}),DI=ft({\u0275pipe:ft}),CI=ft({\u0275mod:ft}),Xd=ft({\u0275fac:ft}),qa=ft({__NG_ELEMENT_ID__:ft}),DN=ft({__NG_ENV_ID__:ft});function ih(n){return typeof n=="string"?n:n==null?"":String(n)}function NN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ih(n)}var PN=ft({ngErrorCode:ft}),XB=ft({ngErrorMessage:ft}),e$=ft({ngTokenPath:ft});function SI(n,e){return kN("",-200,e)}function zg(n,e){throw new ee(-201,!1)}function kN(n,e,t){let r=new ee(e,n);return r[PN]=e,r[XB]=n,t&&(r[e$]=t),r}function t$(n){return n[PN]}var sI;function MN(){return sI}function Yn(n){let e=sI;return sI=n,e}function AI(n,e,t){let r=rh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;zg(n,"Injector")}var n$={},Ua=n$,oI="__NG_DI_FLAG__",aI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ja(t)||0;try{return this.injector.get(e,r&8?null:Ua,r)}catch(i){if(Ru(i))return i;throw i}}};function r$(n,e=0){let t=Vg();if(t===void 0)throw new ee(-203,!1);if(t===null)return AI(n,void 0,e);{let r=i$(e),i=t.retrieve(n,r);if(Ru(i)){if(r.optional)return null;throw i}return i}}function me(n,e=0){return(MN()||r$)(Cn(n),e)}function V(n,e){return me(n,ja(e))}function ja(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function i$(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function cI(n){let e=[];for(let t=0;t<n.length;t++){let r=Cn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=s$(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(me(i,s))}else e.push(me(r))}return e}function ON(n,e){return n[oI]=e,n.prototype[oI]=e,n}function s$(n){return n[oI]}function Ro(n,e){let t=n.hasOwnProperty(Xd);return t?n[Xd]:null}function xN(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function LN(n){return n.flat(Number.POSITIVE_INFINITY)}function Gg(n,e){n.forEach(t=>Array.isArray(t)?Gg(t,e):e(t))}function RI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function FN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function VN(n,e,t){let r=Pu(n,e);return r>=0?n[r|1]=t:(r=~r,FN(n,r,e,t)),r}function Wg(n,e){let t=Pu(n,e);if(t>=0)return n[t|1]}function Pu(n,e){return o$(n,e,1)}function o$(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Po={},_r=[],ko=new ne(""),NI=new ne("",-1),PI=new ne(""),eh=class{get(e,t=Ua){if(t===Ua){let i=kN("",-201);throw i.name="\u0275NotFound",i}return t}};function kI(n){return n[CI]||null}function bs(n){return n[TI]||null}function MI(n){return n[bI]||null}function UN(n){return n[DI]||null}function Jn(n){return{\u0275providers:n}}function jN(...n){return{\u0275providers:OI(!0,n),\u0275fromNgModule:!0}}function OI(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Gg(e,o=>{let a=o;Bg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BN(i,s),t}function BN(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];xI(i,s=>{e(s,r)})}}function Bg(n,e,t,r){if(n=Cn(n),!n)return!1;let i=null,s=iI(n),o=!s&&bs(n);if(!s&&!o){let c=n.ngModule;if(s=iI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)Bg(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{Gg(s.imports,h=>{Bg(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&BN(d,e)}if(!a){let d=Ro(i)||(()=>new i);e({provide:i,useFactory:d,deps:_r},i),e({provide:PI,useValue:i,multi:!0},i),e({provide:ko,useValue:()=>me(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;xI(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function xI(n,e){for(let t of n)wI(t)&&(t=t.\u0275providers),Array.isArray(t)?xI(t,e):e(t)}var a$=ft({provide:String,useValue:ft});function $N(n){return n!==null&&typeof n=="object"&&a$ in n}function c$(n){return!!(n&&n.useExisting)}function u$(n){return!!(n&&n.useFactory)}function Ba(n){return typeof n=="function"}function HN(n){return!!n.useClass}var oh=new ne(""),Ug={},CN={},rI;function ah(){return rI===void 0&&(rI=new eh),rI}var Vt=class{},$a=class extends Vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,lI(e,o=>this.processProvider(o)),this.records.set(NI,Nu(void 0,this)),i.has("environment")&&this.records.set(Vt,Nu(void 0,this));let s=this.records.get(oh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(PI,_r,{self:!0}))}retrieve(e,t){let r=ja(t)||0;try{return this.get(e,Ua,r)}catch(i){if(Ru(i))return i;throw i}}destroy(){Zd(this),this._destroyed=!0;let e=Oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Oe(e)}}onDestroy(e){return Zd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Zd(this);let t=Pi(this),r=Yn(void 0),i;try{return e()}finally{Pi(t),Yn(r)}}get(e,t=Ua,r){if(Zd(this),e.hasOwnProperty(DN))return e[DN](this);let i=ja(r),s,o=Pi(this),a=Yn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=p$(e)&&rh(e);h&&this.injectableDefInScope(h)?d=Nu(uI(e),Ug):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?ah():this.parent;return t=i&8&&t===Ua?null:t,c.get(e,t)}catch(c){let d=t$(c);throw d===-200||d===-201?new ee(d,null):c}finally{Yn(a),Pi(o)}}resolveInjectorInitializers(){let e=Oe(null),t=Pi(this),r=Yn(void 0),i;try{let s=this.get(ko,_r,{self:!0});for(let o of s)o()}finally{Pi(t),Yn(r),Oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Is(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Cn(e);let t=Ba(e)?e:Cn(e&&e.provide),r=d$(e);if(!Ba(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Nu(void 0,Ug,!0),i.factory=()=>cI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Oe(null);try{if(t.value===CN)throw SI(Is(e));return t.value===Ug&&(t.value=CN,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&f$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Cn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function uI(n){let e=rh(n),t=e!==null?e.factory:Ro(n);if(t!==null)return t;if(n instanceof ne)throw new ee(204,!1);if(n instanceof Function)return l$(n);throw new ee(204,!1)}function l$(n){if(n.length>0)throw new ee(204,!1);let t=ZB(n);return t!==null?()=>t.factory(n):()=>new n}function d$(n){if($N(n))return Nu(void 0,n.useValue);{let e=LI(n);return Nu(e,Ug)}}function LI(n,e,t){let r;if(Ba(n)){let i=Cn(n);return Ro(i)||uI(i)}else if($N(n))r=()=>Cn(n.useValue);else if(u$(n))r=()=>n.useFactory(...cI(n.deps||[]));else if(c$(n))r=(i,s)=>me(Cn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Cn(n&&(n.useClass||n.provide));if(h$(n))r=()=>new i(...cI(n.deps));else return Ro(i)||uI(i)}return r}function Zd(n){if(n.destroyed)throw new ee(205,!1)}function Nu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function h$(n){return!!n.deps}function f$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function p$(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function lI(n,e){for(let t of n)Array.isArray(t)?lI(t,e):t&&wI(t)?lI(t.\u0275providers,e):e(t)}function Kt(n,e){let t;n instanceof $a?(Zd(n),t=n):t=new aI(n);let r,i=Pi(t),s=Yn(void 0);try{return e()}finally{Pi(i),Yn(s)}}function qN(){return MN()!==void 0||Vg()!=null}var si=0,Ee=1,be=2,hn=3,Vr=4,Ur=5,ch=6,ku=7,Ln=8,Mo=9,Oi=10,Rt=11,Mu=12,FI=13,za=14,jr=15,Oo=16,Ga=17,xi=18,uh=19,VI=20,Es=21,Kg=22,lh=23,vr=24,Wa=25,dh=26,Sn=27,zN=1;var xo=7,hh=8,Ka=9,Zn=10;function Li(n){return Array.isArray(n)&&typeof n[zN]=="object"}function oi(n){return Array.isArray(n)&&n[zN]===!0}function UI(n){return(n.flags&4)!==0}function Lo(n){return n.componentOffset>-1}function fh(n){return(n.flags&1)===1}function Fi(n){return!!n.template}function Ou(n){return(n[be]&512)!==0}function Qa(n){return(n[be]&256)===256}var GN="svg",WN="math";function Br(n){for(;Array.isArray(n);)n=n[si];return n}function jI(n,e){return Br(e[n])}function ai(n,e){return Br(e[n.index])}function Qg(n,e){return n.data[e]}function BI(n,e){return n[e]}function $I(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function $r(n,e){let t=e[n];return Li(t)?t:t[si]}function KN(n){return(n[be]&4)===4}function Yg(n){return(n[be]&128)===128}function QN(n){return oi(n[hn])}function Ya(n,e){return e==null?null:n[e]}function HI(n){n[Ga]=0}function qI(n){n[be]&1024||(n[be]|=1024,Yg(n)&&xu(n))}function YN(n,e){for(;n>0;)e=e[za],n--;return e}function ph(n){return!!(n[be]&9216||n[vr]?.dirty)}function Jg(n){n[Oi].changeDetectionScheduler?.notify(8),n[be]&64&&(n[be]|=1024),ph(n)&&xu(n)}function xu(n){n[Oi].changeDetectionScheduler?.notify(0);let e=No(n);for(;e!==null&&!(e[be]&8192||(e[be]|=8192,!Yg(e)));)e=No(e)}function zI(n,e){if(Qa(n))throw new ee(911,!1);n[Es]===null&&(n[Es]=[]),n[Es].push(e)}function JN(n,e){if(n[Es]===null)return;let t=n[Es].indexOf(e);t!==-1&&n[Es].splice(t,1)}function No(n){let e=n[hn];return oi(e)?e[hn]:e}function GI(n){return n[ku]??=[]}function WI(n){return n.cleanup??=[]}function ZN(n,e,t,r){let i=GI(e);i.push(t),n.firstCreatePass&&WI(n).push(r,i.length-1)}var Ue={lFrame:dP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dI=!1;function XN(){return Ue.lFrame.elementDepthCount}function eP(){Ue.lFrame.elementDepthCount++}function KI(){Ue.lFrame.elementDepthCount--}function QI(){return Ue.bindingsEnabled}function tP(){return Ue.skipHydrationRootTNode!==null}function YI(n){return Ue.skipHydrationRootTNode===n}function JI(){Ue.skipHydrationRootTNode=null}function ze(){return Ue.lFrame.lView}function An(){return Ue.lFrame.tView}function Fn(n){return Ue.lFrame.contextLView=n,n[Ln]}function Vn(n){return Ue.lFrame.contextLView=null,n}function fn(){let n=ZI();for(;n!==null&&n.type===64;)n=n.parent;return n}function ZI(){return Ue.lFrame.currentTNode}function nP(){let n=Ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Lu(n,e){let t=Ue.lFrame;t.currentTNode=n,t.isParent=e}function XI(){return Ue.lFrame.isParent}function rP(){Ue.lFrame.isParent=!1}function ew(){return dI}function tw(n){let e=dI;return dI=n,e}function nw(){let n=Ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function iP(n){return Ue.lFrame.bindingIndex=n}function gh(){return Ue.lFrame.bindingIndex++}function sP(n){let e=Ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function oP(){return Ue.lFrame.inI18n}function aP(n,e){let t=Ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zg(e)}function cP(){return Ue.lFrame.currentDirectiveIndex}function Zg(n){Ue.lFrame.currentDirectiveIndex=n}function uP(n){let e=Ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function rw(){return Ue.lFrame.currentQueryIndex}function Xg(n){Ue.lFrame.currentQueryIndex=n}function g$(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[Ur]:null}function iw(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=g$(s),i===null||(s=s[za],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ue.lFrame=lP();return r.currentTNode=e,r.lView=n,!0}function em(n){let e=lP(),t=n[Ee];Ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lP(){let n=Ue.lFrame,e=n===null?null:n.child;return e===null?dP(n):e}function dP(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function hP(){let n=Ue.lFrame;return Ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var sw=hP;function tm(){let n=hP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fP(n){return(Ue.lFrame.contextLView=YN(n,Ue.lFrame.contextLView))[Ln]}function Ja(){return Ue.lFrame.selectedIndex}function Fo(n){Ue.lFrame.selectedIndex=n}function nm(){let n=Ue.lFrame;return Qg(n.tView,n.selectedIndex)}function pP(){return Ue.lFrame.currentNamespace}var gP=!0;function rm(){return gP}function im(n){gP=n}function hI(n,e=null,t=null,r){let i=ow(n,e,t,r);return i.resolveInjectorInitializers(),i}function ow(n,e=null,t=null,r,i=new Set){let s=[t||_r,jN(n)];return r=r||(typeof n=="object"?void 0:Is(n)),new $a(s,e||ah(),r||null,i)}var Ct=class n{static THROW_IF_NOT_FOUND=Ua;static NULL=new eh;static create(e,t){if(Array.isArray(e))return hI({name:""},t,e,"");{let r=e.name??"";return hI({name:r},e.parent,e.providers,r)}}static \u0275prov=te({token:n,providedIn:"any",factory:()=>me(NI)});static __NG_ELEMENT_ID__=-1},Ut=new ne(""),Vi=(()=>{class n{static __NG_ELEMENT_ID__=m$;static __NG_ENV_ID__=t=>t}return n})(),fI=class extends Vi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Qa(this._lView)}onDestroy(e){let t=this._lView;return zI(t,e),()=>JN(t,e)}};function m$(){return new fI(ze())}var aw=!1,Ui=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new wn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ge(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})(),pI=class extends It{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qN()&&(this.destroyRef=V(Vi,{optional:!0})??void 0,this.pendingTasks=V(Ui,{optional:!0})??void 0)}emit(e){let t=Oe(null);try{super.next(e)}finally{Oe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ft&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Wt=pI;function $g(...n){}function cw(n){let e,t;function r(){n=$g;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function uw(n){return queueMicrotask(()=>n()),()=>{n=$g}}var lw="isAngularZone",th=lw+"_ID",y$=0,We=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Wt(!1);onMicrotaskEmpty=new Wt(!1);onStable=new Wt(!1);onError=new Wt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=aw}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,E$(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(lw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,_$,$g,$g);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},_$={};function dw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function v$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){cw(()=>{n.callbackScheduled=!1,gI(n),n.isCheckStableRunning=!0,dw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),gI(n)}function E$(n){let e=()=>{v$(n)},t=y$++;n._inner=n._inner.fork({name:"angular",properties:{[lw]:!0,[th]:t,[th+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(I$(c))return r.invokeTask(s,o,a,c);try{return SN(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),AN(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return SN(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!w$(c)&&e(),AN(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,gI(n),dw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function gI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function SN(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function AN(n){n._nesting--,dw(n)}var nh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Wt;onMicrotaskEmpty=new Wt;onStable=new Wt;onError=new Wt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function I$(n){return mP(n,"__ignore_ng_zone__")}function w$(n){return mP(n,"__scheduler_tick__")}function mP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ki=class{_console=console;handleError(e){this._console.error("ERROR",e)}},lr=new ne("",{factory:()=>{let n=V(We),e=V(Vt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(ki),t.handleError(r))})}}}),yP={provide:ko,useValue:()=>{let n=V(ki,{optional:!0})},multi:!0};function jt(n,e){let[t,r,i]=jE(n,e?.equal),s=t,o=s[Qn];return s.set=r,s.update=i,s.asReadonly=_P.bind(s),s}function _P(){let n=this[Qn];if(n.readonlyFn===void 0){let e=()=>this();e[Qn]=n,n.readonlyFn=e}return n.readonlyFn}var sm=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=T$}return n})();function T$(){return new sm(ze(),fn())}var ws=class{},Fu=new ne("",{factory:()=>!0});var om=new ne(""),Vu=(()=>{class n{internalPendingTasks=V(Ui);scheduler=V(ws);errorHandler=V(lr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})(),hw=(()=>{class n{static \u0275prov=te({token:n,providedIn:"root",factory:()=>new mI})}return n})(),mI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},yI=class{[Qn];constructor(e){this[Qn]=e}destroy(){this[Qn].destroy()}};function Bt(n){return BE(n)}function zu(n){return{toString:n}.toString()}var am="__parameters__";function P$(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function k$(n,e,t){return zu(()=>{let r=P$(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let g=c.hasOwnProperty(am)?c[am]:Object.defineProperty(c,am,{value:[]})[am];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Er=ON(k$("Optional"),8);function M$(n){return typeof n=="function"}function KP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var gm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Ds=(()=>{let n=()=>QP;return n.ngInherit=!0,n})();function QP(n){return n.type.prototype.ngOnChanges&&(n.setInput=x$),O$}function O$(){let n=JP(this),e=n?.current;if(e){let t=n.previous;if(t===Po)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function x$(n,e,t,r,i){let s=this.declaredInputs[r],o=JP(n)||L$(n,{previous:Po,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new gm(d&&d.currentValue,t,c===Po),KP(n,e,i,t)}var YP="__ngSimpleChanges__";function JP(n){return n[YP]||null}function L$(n,e){return n[YP]=e}var vP=[];var pt=function(n,e=null,t){for(let r=0;r<vP.length;r++){let i=vP[r];i(n,e,t)}},Ze=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ze||{});function F$(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=QP(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function ZP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function lm(n,e,t){XP(n,e,3,t)}function dm(n,e,t,r){(n[be]&3)===t&&XP(n,e,t,r)}function fw(n,e){let t=n[be];(t&3)===e&&(t&=16383,t+=1,n[be]=t)}function XP(n,e,t,r){let i=r!==void 0?n[Ga]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ga]+=65536),(a<s||s==-1)&&(V$(n,t,e,c),n[Ga]=(n[Ga]&4294901760)+c+2),c++}function EP(n,e){pt(Ze.LifecycleHookStart,n,e);let t=Oe(null);try{e.call(n)}finally{Oe(t),pt(Ze.LifecycleHookEnd,n,e)}}function V$(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[be]>>14<n[Ga]>>16&&(n[be]&3)===e&&(n[be]+=16384,EP(a,s)):EP(a,s)}var ju=-1,Xa=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function U$(n){return(n.flags&8)!==0}function j$(n){return(n.flags&16)!==0}function B$(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];$$(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ek(n){return n===3||n===4||n===6}function $$(n){return n.charCodeAt(0)===64}function Bu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?IP(n,t,i,null,e[++r]):IP(n,t,i,null,null))}}return n}function IP(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function tk(n){return n!==ju}function mm(n){return n&32767}function H$(n){return n>>16}function ym(n,e){let t=H$(n),r=e;for(;t>0;)r=r[za],t--;return r}var Tw=!0;function _m(n){let e=Tw;return Tw=n,e}var q$=256,nk=q$-1,rk=5,z$=0,ji={};function G$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(qa)&&(r=t[qa]),r==null&&(r=t[qa]=z$++);let i=r&nk,s=1<<i;e.data[n+(i>>rk)]|=s}function vm(n,e){let t=ik(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,pw(r.data,n),pw(e,null),pw(r.blueprint,null));let i=qw(n,e),s=n.injectorIndex;if(tk(i)){let o=mm(i),a=ym(i,e),c=a[Ee].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function pw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ik(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function qw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=uk(i),r===null)return ju;if(t++,i=i[za],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ju}function bw(n,e,t){G$(n,e,t)}function W$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(ek(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function sk(n,e,t){if(t&8||n!==void 0)return n;zg(e,"NodeInjector")}function ok(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Mo],s=Yn(void 0);try{return i?i.get(e,r,t&8):AI(e,r,t&8)}finally{Yn(s)}}return sk(r,e,t)}function ak(n,e,t,r=0,i){if(n!==null){if(e[be]&2048&&!(r&2)){let o=J$(n,e,t,r,ji);if(o!==ji)return o}let s=ck(n,e,t,r,ji);if(s!==ji)return s}return ok(e,t,r,i)}function ck(n,e,t,r,i){let s=Q$(t);if(typeof s=="function"){if(!iw(e,n,r))return r&1?sk(i,t,r):ok(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))zg(t);else return o}finally{sw()}}else if(typeof s=="number"){let o=null,a=ik(n,e),c=ju,d=r&1?e[jr][Ur]:null;for((a===-1||r&4)&&(c=a===-1?qw(n,e):e[a+8],c===ju||!TP(r,!1)?a=-1:(o=e[Ee],a=mm(c),e=ym(c,e)));a!==-1;){let h=e[Ee];if(wP(s,a,h.data)){let g=K$(a,e,t,o,r,d);if(g!==ji)return g}c=e[a+8],c!==ju&&TP(r,e[Ee].data[a+8]===d)&&wP(s,a,e)?(o=h,a=mm(c),e=ym(c,e)):a=-1}}return i}function K$(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?Lo(a)&&Tw:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=hm(a,o,t,c,d);return h!==null?vh(e,o,h,a,i):ji}function hm(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,g=r?a:a+h,T=i?a+h:d;for(let C=g;C<T;C++){let R=o[C];if(C<c&&t===R||C>=c&&R.type===t)return C}if(i){let C=o[c];if(C&&Fi(C)&&C.type===t)return c}return null}function vh(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Xa){let a=s;if(a.resolving){let C=NN(o[t]);throw SI(C)}let c=_m(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,g=a.injectImpl?Yn(a.injectImpl):null,T=iw(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&F$(t,o[t],e)}finally{g!==null&&Yn(g),_m(c),a.resolving=!1,sw()}}return s}function Q$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(qa)?n[qa]:void 0;return typeof e=="number"?e>=0?e&nk:Y$:e}function wP(n,e,t){let r=1<<n;return!!(t[e+(n>>rk)]&r)}function TP(n,e){return!(n&2)&&!(n&1&&e)}var Za=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ak(this._tNode,this._lView,e,ja(r),t)}};function Y$(){return new Za(fn(),ze())}function ic(n){return zu(()=>{let e=n.prototype.constructor,t=e[Xd]||Dw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Xd]||Dw(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Dw(n){return EI(n)?()=>{let e=Dw(Cn(n));return e&&e()}:Ro(n)}function J$(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[be]&2048&&!Ou(o);){let a=ck(s,o,t,r|2,ji);if(a!==ji)return a;let c=s.parent;if(!c){let d=o[VI];if(d){let h=d.get(t,ji,r);if(h!==ji)return h}c=uk(o),o=o[za]}s=c}return i}function uk(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[Ur]:null}function Th(n){return W$(fn(),n)}function Z$(){return Gu(fn(),ze())}function Gu(n,e){return new Ir(ai(n,e))}var Ir=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Z$}return n})();function X$(n){return n instanceof Ir?n.nativeElement:n}function eH(){return this._results[Symbol.iterator]()}var Em=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new It}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=LN(e);(this._changesDetected=!xN(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=eH};function lk(n){return(n.flags&128)===128}var zw=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(zw||{}),dk=new Map,tH=0;function nH(){return tH++}function rH(n){dk.set(n[uh],n)}function Cw(n){dk.delete(n[uh])}var bP="__ngContext__";function $u(n,e){Li(e)?(n[bP]=e[uh],rH(e)):n[bP]=e}function hk(n){return pk(n[Mu])}function fk(n){return pk(n[Vr])}function pk(n){for(;n!==null&&!oi(n);)n=n[Vr];return n}var iH;function Gw(n){iH=n}var Pm=new ne("",{factory:()=>sH}),sH="ng";var km=new ne(""),sc=new ne("",{providedIn:"platform",factory:()=>"unknown"});var Mm=new ne("",{factory:()=>V(Ut).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gk=!1,mk=new ne("",{factory:()=>gk});var Ww=new ne("");var oH=(n,e,t,r)=>{};function aH(n,e,t,r){oH(n,e,t,r)}function Kw(n){return(n.flags&32)===32}var cH=()=>null;function yk(n,e,t=!1){return cH(n,e,t)}function _k(n,e){let t=n.contentQueries;if(t!==null){let r=Oe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Xg(s),a.contentQueries(2,e[o],o)}}}finally{Oe(r)}}}function Sw(n,e,t){Xg(0);let r=Oe(null);try{e(n,t)}finally{Oe(r)}}function vk(n,e,t){if(UI(e)){let r=Oe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Oe(r)}}}var ui=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(ui||{});var cm;function uH(){if(cm===void 0&&(cm=null,Ts.trustedTypes))try{cm=Ts.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cm}function DP(n){return uH()?.createScriptURL(n)||n}var Im=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Hg})`}};function bh(n){return n instanceof Im?n.changingThisBreaksApplicationSecurity:n}function Qw(n,e){let t=Ek(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Hg})`)}return t===e}function Ek(n){return n instanceof Im&&n.getTypeName()||null}var lH=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ik(n){return n=String(n),n.match(lH)?n:"unsafe:"+n}function dH(n,e){return n.createText(e)}function hH(n,e,t){n.setValue(e,t)}function wk(n,e,t){return n.createElement(e,t)}function wm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Tk(n,e,t){n.appendChild(e,t)}function CP(n,e,t,r,i){r!==null?wm(n,e,t,r,i):Tk(n,e,t)}function fH(n,e,t,r){n.removeChild(null,e,t,r)}function pH(n,e,t){n.setAttribute(e,"style",t)}function gH(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function bk(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&B$(n,e,r),i!==null&&gH(n,e,i),s!==null&&pH(n,e,s)}var Om=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Om||{});function xm(n){let e=Ck();return e?e.sanitize(Om.URL,n)||"":Qw(n,"URL")?bh(n):Ik(ih(n))}function Dk(n){let e=Ck();if(e)return DP(e.sanitize(Om.RESOURCE_URL,n)||"");if(Qw(n,"ResourceURL"))return DP(bh(n));throw new ee(904,!1)}function mH(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Dk:xm}function Yw(n,e,t){return mH(e,t)(n)}function Ck(){let n=ze();return n&&n[Oi].sanitizer}function Sk(n){return n instanceof Function?n():n}function yH(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var Ak="ng-template";function _H(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yH(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Jw(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Jw(n){return n.type===4&&n.value!==Ak}function vH(n,e,t){let r=n.type===4&&!t?Ak:n.value;return e===r}function EH(n,e,t){let r=4,i=n.attrs,s=i!==null?TH(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!ci(r)&&!ci(c))return!1;if(o&&ci(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!vH(n,c,t)||c===""&&e.length===1){if(ci(r))return!1;o=!0}}else if(r&8){if(i===null||!_H(n,i,c,t)){if(ci(r))return!1;o=!0}}else{let d=e[++a],h=IH(c,i,Jw(n),t);if(h===-1){if(ci(r))return!1;o=!0;continue}if(d!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(ci(r))return!1;o=!0}}}}return ci(r)||o}function ci(n){return(n&1)===0}function IH(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return bH(e,n)}function wH(n,e,t=!1){for(let r=0;r<e.length;r++)if(EH(n,e[r],t))return!0;return!1}function TH(n){for(let e=0;e<n.length;e++){let t=n[e];if(ek(t))return e}return n.length}function bH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function SP(n,e){return n?":not("+e.trim()+")":e}function DH(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!ci(o)&&(e+=SP(s,i),i=""),r=o,s=s||!ci(r);t++}return i!==""&&(e+=SP(s,i)),e}function CH(n){return n.map(DH).join(",")}function SH(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!ci(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Cs={};function Zw(n,e,t,r,i,s,o,a,c,d,h){let g=Sn+r,T=g+i,C=AH(g,T),R=typeof d=="function"?d():d;return C[Ee]={type:n,blueprint:C,template:t,queries:null,viewQuery:a,declTNode:e,data:C.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:T,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:R,incompleteFirstPass:!1,ssrId:h}}function AH(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Cs);return t}function RH(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Zw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Xw(n,e,t,r,i,s,o,a,c,d,h){let g=e.blueprint.slice();return g[si]=i,g[be]=r|4|128|8|64|1024,(d!==null||n&&n[be]&2048)&&(g[be]|=2048),HI(g),g[hn]=g[za]=n,g[Ln]=t,g[Oi]=o||n&&n[Oi],g[Rt]=a||n&&n[Rt],g[Mo]=c||n&&n[Mo]||null,g[Ur]=s,g[uh]=nH(),g[ch]=h,g[VI]=d,g[jr]=e.type==2?n[jr]:g,g}function NH(n,e,t){let r=ai(e,n),i=RH(t),s=n[Oi].rendererFactory,o=eT(n,Xw(n,i,null,Rk(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function Rk(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Nk(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function eT(n,e){return n[Mu]?n[FI][Vr]=e:n[Mu]=e,n[FI]=e,e}function Rn(n=1){Pk(An(),ze(),Ja()+n,!1)}function Pk(n,e,t,r){if(!r)if((e[be]&3)===3){let s=n.preOrderCheckHooks;s!==null&&lm(e,s,t)}else{let s=n.preOrderHooks;s!==null&&dm(e,s,0,t)}Fo(t)}var Lm=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Lm||{});function Aw(n,e,t,r){let i=Oe(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Lm.SignalBased)!==0&&(c=e[s][Qn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):KP(e,c,s,r)}finally{Oe(i)}}var Bi=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Bi||{}),PH;function tT(n,e){return PH(n,e)}var Hu=new Set,Fm=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Fm||{}),oc=new ne(""),AP=new Set;function ac(n){AP.has(n)||(AP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var nT=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})(),kk=[0,1,2,3],Mk=(()=>{class n{ngZone=V(We);scheduler=V(ws);errorHandler=V(ki,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){V(oc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&pt(Ze.AfterRenderHooksStart),this.executing=!0;for(let r of kk)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&pt(Ze.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Wa]??=[]).push(t),xu(r),r[be]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Fm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}return n})(),Tm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Wa];e&&(this.view[Wa]=e.filter(t=>t!==this))}};function Vm(n,e){let t=e?.injector??V(Ct);return ac("NgAfterNextRender"),MH(n,t,e,!0)}function kH(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function MH(n,e,t,r){let i=e.get(nT);i.impl??=e.get(Mk);let s=e.get(oc,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Vi):null,a=e.get(sm,null,{optional:!0}),c=new Tm(i.impl,kH(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var OH=new ne("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:V(Vt)})});function Ok(n,e,t){let r=n.get(OH);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function xH(n,e){for(let[t,r]of e)Ok(n,r.animateFns)}function RP(n,e,t,r){let i=n?.[dh]?.enter;e!==null&&i&&i.has(t.index)&&xH(r,i)}function Uu(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;oi(i)?c=i:Li(i)&&(d=!0,i=i[si]);let h=Br(i);n===0&&r!==null?(RP(a,r,s,t),o==null?Tk(e,r,h):wm(e,r,h,o||null,!0)):n===1&&r!==null?(RP(a,r,s,t),wm(e,r,h,o||null,!0)):n===2?NP(a,s,t,g=>{fH(e,h,d,g)}):n===3&&NP(a,s,t,()=>{e.destroyNode(h)}),c!=null&&KH(e,n,t,c,s,r,o)}}function LH(n,e){xk(n,e),e[si]=null,e[Ur]=null}function FH(n,e,t,r,i,s){r[si]=i,r[Ur]=e,Um(n,r,t,1,i,s)}function xk(n,e){e[Oi].changeDetectionScheduler?.notify(9),Um(n,e,e[Rt],2,null,null)}function VH(n){let e=n[Mu];if(!e)return gw(n[Ee],n);for(;e;){let t=null;if(Li(e))t=e[Mu];else{let r=e[Zn];r&&(t=r)}if(!t){for(;e&&!e[Vr]&&e!==n;)Li(e)&&gw(e[Ee],e),e=e[hn];e===null&&(e=n),Li(e)&&gw(e[Ee],e),t=e&&e[Vr]}e=t}}function rT(n,e){let t=n[Ka],r=t.indexOf(e);t.splice(r,1)}function Lk(n,e){if(Qa(e))return;let t=e[Rt];t.destroyNode&&Um(n,e,t,3,null,null),VH(e)}function gw(n,e){if(Qa(e))return;let t=Oe(null);try{e[be]&=-129,e[be]|=256,e[vr]&&Wd(e[vr]),BH(n,e),jH(n,e),e[Ee].type===1&&e[Rt].destroy();let r=e[Oo];if(r!==null&&oi(e[hn])){r!==e[hn]&&rT(r,e);let i=e[xi];i!==null&&i.detachView(n)}Cw(e)}finally{Oe(t)}}function NP(n,e,t,r){let i=n?.[dh];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Hu.add(n),Ok(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),UH(n,r)}else n&&Hu.delete(n),r(!1)},i)}function UH(n,e){let t=n[dh]?.running;if(t){t.then(()=>{n[dh].running=void 0,Hu.delete(n),e(!0)});return}e(!1)}function jH(n,e){let t=n.cleanup,r=e[ku];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[ku]=null);let i=e[Es];if(i!==null){e[Es]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[lh];if(s!==null){e[lh]=null;for(let o of s)o.destroy()}}function BH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Xa)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];pt(Ze.LifecycleHookStart,a,c);try{c.call(a)}finally{pt(Ze.LifecycleHookEnd,a,c)}}else{pt(Ze.LifecycleHookStart,i,s);try{s.call(i)}finally{pt(Ze.LifecycleHookEnd,i,s)}}}}}function $H(n,e,t){return HH(n,e.parent,t)}function HH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[si];if(Lo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ui.None||i===ui.Emulated)return null}return ai(r,t)}function qH(n,e,t){return GH(n,e,t)}function zH(n,e,t){return n.type&40?ai(n,t):null}var GH=zH,PP;function iT(n,e,t,r){let i=$H(n,r,e),s=e[Rt],o=r.parent||e[Ur],a=qH(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)CP(s,i,t[c],a,!1);else CP(s,i,t,a,!1);PP!==void 0&&PP(s,r,e,t,i)}function yh(n,e){if(e!==null){let t=e.type;if(t&3)return ai(e,n);if(t&4)return Rw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return yh(n,r);{let i=n[e.index];return oi(i)?Rw(-1,i):Br(i)}}else{if(t&128)return yh(n,e.next);if(t&32)return tT(e,n)()||Br(n[e.index]);{let r=Fk(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=No(n[jr]);return yh(i,r)}else return yh(n,e.next)}}}return null}function Fk(n,e){if(e!==null){let r=n[jr][Ur],i=e.projection;return r.projection[i]}return null}function Rw(n,e){let t=Zn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return yh(r,i)}return e[xo]}function sT(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Mo];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&$u(Br(c),r),t.flags|=2),!Kw(t))if(d&8)sT(n,e,t.child,r,i,s,!1),Uu(e,n,a,i,c,t,s,r);else if(d&32){let h=tT(t,r),g;for(;g=h();)Uu(e,n,a,i,g,t,s,r);Uu(e,n,a,i,c,t,s,r)}else d&16?WH(n,e,r,t,i,s):Uu(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Um(n,e,t,r,i,s){sT(t,r,n.firstChild,e,i,s,!1)}function WH(n,e,t,r,i,s){let o=t[jr],c=o[Ur].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Uu(e,n,t[Mo],i,h,r,s,t)}else{let d=c,h=o[hn];lk(r)&&(d.flags|=128),sT(n,e,d,h,i,s,!0)}}function KH(n,e,t,r,i,s,o){let a=r[xo],c=Br(r);a!==c&&Uu(e,n,t,s,a,i,o);for(let d=Zn;d<r.length;d++){let h=r[d];Um(h[Ee],h,n,e,s,a)}}function QH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Bi.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Bi.Important),n.setStyle(t,r,i,s))}}function Vk(n,e,t,r,i){let s=Ja(),o=r&2;try{Fo(-1),o&&e.length>Sn&&Pk(n,e,Sn,!1);let a=o?Ze.TemplateUpdateStart:Ze.TemplateCreateStart;pt(a,i,t),t(r,i)}finally{Fo(s);let a=o?Ze.TemplateUpdateEnd:Ze.TemplateCreateEnd;pt(a,i,t)}}function oT(n,e,t){n4(n,e,t),(t.flags&64)===64&&r4(n,e,t)}function aT(n,e,t=ai){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function YH(n,e,t,r){let s=r.get(mk,gk)||t===ui.ShadowDom||t===ui.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return JH(o),o}function JH(n){ZH(n)}var ZH=()=>null;function XH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Uk(n,e,t,r,i,s){let o=e[Ee];if(cT(n,o,e,t,r)){Lo(n)&&t4(e,n.index);return}n.type&3&&(t=XH(t)),e4(n,e,t,r,i,s)}function e4(n,e,t,r,i,s){if(n.type&3){let o=ai(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function t4(n,e){let t=$r(e,n);t[be]&16||(t[be]|=64)}function n4(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Lo(t)&&NH(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||vm(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=vh(e,n,o,t);if($u(c,e),s!==null&&a4(e,o-r,c,a,t,s),Fi(a)){let d=$r(t.index,e);d[Ln]=vh(e,n,o,t)}}}function r4(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=cP();try{Fo(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Zg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&i4(c,d)}}finally{Fo(-1),Zg(o)}}function i4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jk(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];wH(e,s.selectors,!1)&&(r??=[],Fi(s)?r.unshift(s):r.push(s))}return r}function s4(n,e,t,r,i,s){let o=ai(n,e);o4(e[Rt],o,s,n.value,t,r,i)}function o4(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?ih(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function a4(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];Aw(r,t,c,d)}}function Bk(n,e,t,r,i){let s=Sn+t,o=e[Ee],a=i(o,e,n,r,t);e[s]=a,Lu(n,!0);let c=n.type===2;return c?(bk(e[Rt],a,n),(XN()===0||fh(n))&&$u(a,e),eP()):$u(a,e),rm()&&(!c||!Kw(n))&&iT(o,e,a,n),n}function $k(n){let e=n;return XI()?rP():(e=e.parent,Lu(e,!1)),e}function c4(n,e){let t=n[Mo];if(!t)return;let r;try{r=t.get(lr,null)}catch{r=null}r?.(e)}function cT(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],g=e.data[d];Aw(g,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];Aw(h,d,r,i),a=!0}return a}function u4(n,e){let t=$r(e,n),r=t[Ee];l4(r,t);let i=t[si];i!==null&&t[ch]===null&&(t[ch]=yk(i,t[Mo])),pt(Ze.ComponentStart);try{uT(r,t,t[Ln])}finally{pt(Ze.ComponentEnd,t[Ln])}}function l4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function uT(n,e,t){em(e);try{let r=n.viewQuery;r!==null&&Sw(1,r,t);let i=n.template;i!==null&&Vk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xi]?.finishViewCreation(n),n.staticContentQueries&&_k(n,e),n.staticViewQueries&&Sw(2,n.viewQuery,t);let s=n.components;s!==null&&d4(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[be]&=-5,tm()}}function d4(n,e){for(let t=0;t<e.length;t++)u4(n,e[t])}function h4(n,e,t,r){let i=Oe(null);try{let s=e.tView,a=n[be]&4096?4096:16,c=Xw(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Oo]=d;let h=n[xi];return h!==null&&(c[xi]=h.createEmbeddedView(s)),uT(s,c,t),c}finally{Oe(i)}}function kP(n,e){return!e||e.firstChild===null||lk(n)}function Eh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Br(s)),oi(s)&&Hk(s,r);let o=t.type;if(o&8)Eh(n,e,t.child,r);else if(o&32){let a=tT(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Fk(e,t);if(Array.isArray(a))r.push(...a);else{let c=No(e[jr]);Eh(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Hk(n,e){for(let t=Zn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Eh(r[Ee],r,i,e)}n[xo]!==n[si]&&e.push(n[xo])}function qk(n){if(n[Wa]!==null){for(let e of n[Wa])e.impl.addSequence(e);n[Wa].length=0}}var zk=[];function f4(n){return n[vr]??p4(n)}function p4(n){let e=zk.pop()??Object.create(m4);return e.lView=n,e}function g4(n){n.lView[vr]!==n&&(n.lView=null,zk.push(n))}var m4=ve(q({},qd),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{xu(n.lView)},consumerOnSignalRead(){this.lView[vr]=this}});function y4(n){let e=n[vr]??Object.create(_4);return e.lView=n,e}var _4=ve(q({},qd),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=No(n.lView);for(;e&&!Gk(e[Ee]);)e=No(e);e&&qI(e)},consumerOnSignalRead(){this.lView[vr]=this}});function Gk(n){return n.type!==2}function Wk(n){if(n[lh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[lh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[be]&8192)}}var v4=100;function Kk(n,e=0){let r=n[Oi].rendererFactory,i=!1;i||r.begin?.();try{E4(n,e)}finally{i||r.end?.()}}function E4(n,e){let t=ew();try{tw(!0),Nw(n,e);let r=0;for(;ph(n);){if(r===v4)throw new ee(103,!1);r++,Nw(n,1)}}finally{tw(t)}}function I4(n,e,t,r){if(Qa(e))return;let i=e[be],s=!1,o=!1;em(e);let a=!0,c=null,d=null;s||(Gk(n)?(d=f4(e),c=Gd(d)):sg()===null?(a=!1,d=y4(e),c=Gd(d)):e[vr]&&(Wd(e[vr]),e[vr]=null));try{HI(e),iP(n.bindingStartIndex),t!==null&&Vk(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let C=n.preOrderCheckHooks;C!==null&&lm(e,C,null)}else{let C=n.preOrderHooks;C!==null&&dm(e,C,0,null),fw(e,0)}if(o||w4(e),Wk(e),Qk(e,0),n.contentQueries!==null&&_k(n,e),!s)if(h){let C=n.contentCheckHooks;C!==null&&lm(e,C)}else{let C=n.contentHooks;C!==null&&dm(e,C,1),fw(e,1)}b4(n,e);let g=n.components;g!==null&&Jk(e,g,0);let T=n.viewQuery;if(T!==null&&Sw(2,T,r),!s)if(h){let C=n.viewCheckHooks;C!==null&&lm(e,C)}else{let C=n.viewHooks;C!==null&&dm(e,C,2),fw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Kg]){for(let C of e[Kg])C();e[Kg]=null}s||(qk(e),e[be]&=-73)}catch(h){throw s||xu(e),h}finally{d!==null&&(og(d,c),a&&g4(d)),tm()}}function Qk(n,e){for(let t=hk(n);t!==null;t=fk(t))for(let r=Zn;r<t.length;r++){let i=t[r];Yk(i,e)}}function w4(n){for(let e=hk(n);e!==null;e=fk(e)){if(!(e[be]&2))continue;let t=e[Ka];for(let r=0;r<t.length;r++){let i=t[r];qI(i)}}}function T4(n,e,t){pt(Ze.ComponentStart);let r=$r(e,n);try{Yk(r,t)}finally{pt(Ze.ComponentEnd,r[Ln])}}function Yk(n,e){Yg(n)&&Nw(n,e)}function Nw(n,e){let r=n[Ee],i=n[be],s=n[vr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&ag(s)),o||=!1,s&&(s.dirty=!1),n[be]&=-9217,o)I4(r,n,r.template,n[Ln]);else if(i&8192){let a=Oe(null);try{Wk(n),Qk(n,1);let c=r.components;c!==null&&Jk(n,c,1),qk(n)}finally{Oe(a)}}}function Jk(n,e,t){for(let r=0;r<e.length;r++)T4(n,e[r],t)}function b4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Fo(~i);else{let s=i,o=t[++r],a=t[++r];aP(o,s);let c=e[s];pt(Ze.HostBindingsUpdateStart,c);try{a(2,c)}finally{pt(Ze.HostBindingsUpdateEnd,c)}}}}finally{Fo(-1)}}function lT(n,e){let t=ew()?64:1088;for(n[Oi].changeDetectionScheduler?.notify(e);n;){n[be]|=t;let r=No(n);if(Ou(n)&&!r)return n;n=r}return null}function Zk(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function D4(n,e,t,r=!0){let i=e[Ee];if(C4(i,e,n,t),r){let o=Rw(t,n),a=e[Rt],c=a.parentNode(n[xo]);c!==null&&FH(i,n[Ur],a,e,c,o)}let s=e[ch];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Pw(n,e){if(n.length<=Zn)return;let t=Zn+e,r=n[t];if(r){let i=r[Oo];i!==null&&i!==n&&rT(i,r),e>0&&(n[t-1][Vr]=r[Vr]);let s=sh(n,Zn+e);LH(r[Ee],r);let o=s[xi];o!==null&&o.detachView(s[Ee]),r[hn]=null,r[Vr]=null,r[be]&=-129}return r}function C4(n,e,t,r){let i=Zn+r,s=t.length;r>0&&(t[i-1][Vr]=e),r<s-Zn?(e[Vr]=t[i],RI(t,Zn+r,e)):(t.push(e),e[Vr]=null),e[hn]=t;let o=e[Oo];o!==null&&t!==o&&Xk(o,e);let a=e[xi];a!==null&&a.insertView(n),Jg(e),e[be]|=128}function Xk(n,e){let t=n[Ka],r=e[hn];if(Li(r))n[be]|=2;else{let i=r[hn][jr];e[jr]!==i&&(n[be]|=2)}t===null?n[Ka]=[e]:t.push(e)}var Vo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ee];return Eh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ln]}set context(e){this._lView[Ln]=e}get destroyed(){return Qa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[hn];if(oi(e)){let t=e[hh],r=t?t.indexOf(this):-1;r>-1&&(Pw(e,r),sh(t,r))}this._attachedToViewContainer=!1}Lk(this._lView[Ee],this._lView)}onDestroy(e){zI(this._lView,e)}markForCheck(){lT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[be]&=-129}reattach(){Jg(this._lView),this._lView[be]|=128}detectChanges(){this._lView[be]|=1024,Kk(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ou(this._lView),t=this._lView[Oo];t!==null&&!e&&rT(t,this._lView),xk(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=Ou(this._lView),r=this._lView[Oo];r!==null&&!t&&Xk(r,this._lView),Jg(this._lView)}};var Uo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=S4;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=h4(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Vo(s)}}return n})();function S4(){return dT(fn(),ze())}function dT(n,e){return n.type&4?new Uo(e,n,Gu(n,e)):null}function jm(n,e,t,r,i){let s=n.data[e];if(s===null)s=A4(n,e,t,r,i),oP()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=nP();s.injectorIndex=o===null?-1:o.injectorIndex}return Lu(s,!0),s}function A4(n,e,t,r,i){let s=ZI(),o=XI(),a=o?s:s&&s.parent,c=n.data[e]=N4(n,a,t,e,r,i);return R4(n,c,s,o),c}function R4(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function N4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return tP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var P4=()=>null;function MP(n,e){return P4(n,e)}var eM=class{},Bm=class{},kw=class{resolveComponentFactory(e){throw new ee(917,!1)}},Dh=class{static NULL=new kw},ec=class{},Ss=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>k4()}return n})();function k4(){let n=ze(),e=fn(),t=$r(e.index,n);return(Li(t)?t:n)[Rt]}var tM=(()=>{class n{static \u0275prov=te({token:n,providedIn:"root",factory:()=>null})}return n})();var fm={},Mw=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,fm,r);return i!==fm||t===fm?i:this.parentInjector.get(e,t,r)}};function bm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=vI(i,a);else if(s==2){let c=a,d=e[++o];r=vI(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function je(n,e=0){let t=ze();if(t===null)return me(n,e);let r=fn();return ak(r,t,Cn(n),e)}function hT(){let n="invalid";throw new Error(n)}function nM(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}x4(n,e,t,a,s,c,d)}s!==null&&r!==null&&M4(t,r,s)}function M4(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ee(-301,!1);r.push(e[i],s)}}function O4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function x4(n,e,t,r,i,s,o){let a=r.length,c=null;for(let T=0;T<a;T++){let C=r[T];c===null&&Fi(C)&&(c=C,O4(n,t,T)),bw(vm(t,e),n,C.type)}B4(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let T=0;T<a;T++){let C=r[T];C.providersResolver&&C.providersResolver(C)}let d=!1,h=!1,g=Nk(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let T=0;T<a;T++){let C=r[T];if(t.mergedAttrs=Bu(t.mergedAttrs,C.hostAttrs),F4(n,t,e,g,C),j4(g,C,i),o!==null&&o.has(C)){let[M,k]=o.get(C);t.directiveToIndex.set(C.type,[g,M+t.directiveStart,k+t.directiveStart])}else(s===null||!s.has(C))&&t.directiveToIndex.set(C.type,g);C.contentQueries!==null&&(t.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(t.flags|=64);let R=C.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}L4(n,t,s)}function L4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))OP(0,e,i,r),OP(1,e,i,r),LP(e,r,!1);else{let s=t.get(i);xP(0,e,s,r),xP(1,e,s,r),LP(e,r,!0)}}}function OP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),rM(e,s)}}function xP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),rM(e,o)}}function rM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function LP(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Jw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function F4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ro(i.type,!0)),o=new Xa(s,Fi(i),je,null);n.blueprint[r]=o,t[r]=o,V4(n,e,r,Nk(n,t,i.hostVars,Cs),i)}function V4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;U4(o)!=a&&o.push(a),o.push(t,r,s)}}function U4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function j4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fi(e)&&(t[""]=n)}}function B4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function iM(n,e,t,r,i,s,o,a){let c=e[Ee],d=c.consts,h=Ya(d,o),g=jm(c,n,t,r,h);return s&&nM(c,e,g,Ya(d,a),i),g.mergedAttrs=Bu(g.mergedAttrs,g.attrs),g.attrs!==null&&bm(g,g.attrs,!1),g.mergedAttrs!==null&&bm(g,g.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,g),g}function sM(n,e){ZP(n,e),UI(e)&&n.queries.elementEnd(e)}function $4(n,e,t,r,i,s){let o=e.consts,a=Ya(o,i),c=jm(e,n,t,r,a);if(c.mergedAttrs=Bu(c.mergedAttrs,c.attrs),s!=null){let d=Ya(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&bm(c,c.attrs,!1),c.mergedAttrs!==null&&bm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function fT(n){return aM(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function oM(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function aM(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function cM(n,e,t){return n[e]=t}function jo(n,e,t){if(t===Cs)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function H4(n,e,t,r){let i=jo(n,e,t);return jo(n,e+1,r)||i}function pm(n,e,t){return function r(i){let s=Lo(n)?$r(n.index,e):e;lT(s,5);let o=e[Ln],a=FP(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=FP(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function FP(n,e,t,r){let i=Oe(null);try{return pt(Ze.OutputStart,e,t),t(r)!==!1}catch(s){return c4(n,s),!1}finally{pt(Ze.OutputEnd,e,t),Oe(i)}}function uM(n,e,t,r,i,s,o,a){let c=fh(n),d=!1,h=null;if(!r&&c&&(h=z4(e,t,s,n.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let g=ai(n,t),T=r?r(g):g;aH(t,T,s,a);let C=i.listen(T,s,a);if(!q4(s)){let R=r?M=>r(Br(M[n.index])):n.index;lM(R,e,t,s,a,C,!1)}}return d}function q4(n){return n.startsWith("animation")||n.startsWith("transition")}function z4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ku],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function lM(n,e,t,r,i,s,o){let a=e.firstCreatePass?WI(e):null,c=GI(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function VP(n,e,t,r,i,s){let o=e[t],a=e[Ee],d=a.data[t].outputs[r],g=o[d].subscribe(s);lM(n.index,a,e,i,s,g,!0)}var Ow=Symbol("BINDING");var Dm=class extends Dh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=bs(e);return new tc(t,this.ngModule)}};function G4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Lm.SignalBased)!==0};return i&&(s.transform=i),s})}function W4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function K4(n,e,t){let r=e instanceof Vt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Mw(t,r):t}function Q4(n){let e=n.get(ec,null);if(e===null)throw new ee(407,!1);let t=n.get(tM,null),r=n.get(ws,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Y4(n,e){let t=dM(n);return wk(e,t,t==="svg"?GN:t==="math"?WN:null)}function dM(n){return(n.selectors[0][0]||"div").toLowerCase()}var tc=class extends Bm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=G4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=W4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=CH(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){pt(Ze.DynamicComponentStart);let a=Oe(null);try{let c=this.componentDef,d=J4(r,c,o,s),h=K4(c,i||this.ngModule,e),g=Q4(h),T=g.rendererFactory.createRenderer(null,c),C=r?YH(T,r,c.encapsulation,h):Y4(c,T),R=o?.some(UP)||s?.some(H=>typeof H!="function"&&H.bindings.some(UP)),M=Xw(null,d,null,512|Rk(c),null,null,g,T,h,null,yk(C,h,!0));M[Sn]=C,em(M);let k=null;try{let H=iM(Sn,M,2,"#host",()=>d.directiveRegistry,!0,0);bk(T,C,H),$u(C,M),oT(d,M,H),vk(d,H,M),sM(d,H),t!==void 0&&X4(H,this.ngContentSelectors,t),k=$r(H.index,M),M[Ln]=k[Ln],uT(d,M,null)}catch(H){throw k!==null&&Cw(k),Cw(M),H}finally{pt(Ze.DynamicComponentEnd),tm()}return new Cm(this.componentType,M,!!R)}finally{Oe(a)}}};function J4(n,e,t,r){let i=n?["ng-version","21.0.3"]:SH(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[Ow].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let T of g.bindings){a+=T[Ow].requiredVars;let C=h+1;T.create&&(T.targetIdx=C,(s??=[]).push(T)),T.update&&(T.targetIdx=C,(o??=[]).push(T))}}let c=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,T=MI(g);c.push(T)}return Zw(0,null,Z4(s,o),1,a,c,null,null,null,[i],null)}function Z4(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function UP(n){let e=n[Ow].kind;return e==="input"||e==="twoWay"}var Cm=class extends eM{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Qg(t[Ee],Sn),this.location=Gu(this._tNode,t),this.instance=$r(this._tNode.index,t)[Ln],this.hostView=this.changeDetectorRef=new Vo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=cT(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let o=$r(r.index,i);lT(o,1)}get injector(){return new Za(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function X4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var As=(()=>{class n{static __NG_ELEMENT_ID__=eq}return n})();function eq(){let n=fn();return fM(n,ze())}var tq=As,hM=class extends tq{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Gu(this._hostTNode,this._hostLView)}get injector(){return new Za(this._hostTNode,this._hostLView)}get parentInjector(){let e=qw(this._hostTNode,this._hostLView);if(tk(e)){let t=ym(e,this._hostLView),r=mm(e),i=t[Ee].data[r+8];return new Za(i,t)}else return new Za(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=jP(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Zn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=MP(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,kP(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!M$(e),d;if(c)d=t;else{let k=t||{};d=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef,o=k.directives,a=k.bindings}let h=c?e:new tc(bs(e)),g=r||this.parentInjector;if(!s&&h.ngModule==null){let H=(c?g:this.parentInjector).get(Vt,null);H&&(s=H)}let T=bs(h.componentType??{}),C=MP(this._lContainer,T?.id??null),R=C?.firstChild??null,M=h.create(g,i,R,s,o,a);return this.insertImpl(M.hostView,d,kP(this._hostTNode,C)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(QN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[hn],d=new hM(c,c[Ur],c[hn]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return D4(o,i,s,r),e.attachToViewContainerRef(),RI(mw(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=jP(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Pw(this._lContainer,t);r&&(sh(mw(this._lContainer),t),Lk(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=Pw(this._lContainer,t);return r&&sh(mw(this._lContainer),t)!=null?new Vo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function jP(n){return n[hh]}function mw(n){return n[hh]||(n[hh]=[])}function fM(n,e){let t,r=e[n.index];return oi(r)?t=r:(t=Zk(r,e,null,n),e[n.index]=t,eT(e,t)),rq(t,e,n,r),new hM(t,n,e)}function nq(n,e){let t=n[Rt],r=t.createComment(""),i=ai(e,n),s=t.parentNode(i);return wm(t,s,r,t.nextSibling(i),!1),r}var rq=oq,iq=()=>!1;function sq(n,e,t){return iq(n,e,t)}function oq(n,e,t,r){if(n[xo])return;let i;t.type&8?i=Br(r):i=nq(e,t),n[xo]=i}var xw=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Lw=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)pT(e,t).matches!==null&&this.queries[t].setDirty()}},Fw=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=pq(e):this.predicate=e}},Vw=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Uw=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,aq(t,s)),this.matchTNodeWithReadOption(e,t,hm(t,e,s,!1,!1))}else r===Uo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hm(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ir||i===As||i===Uo&&t.type&4)this.addMatch(t.index,-2);else{let s=hm(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function aq(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function cq(n,e){return n.type&11?Gu(n,e):n.type&4?dT(n,e):null}function uq(n,e,t,r){return t===-1?cq(e,n):t===-2?lq(n,e,r):vh(n,n[Ee],t,e)}function lq(n,e,t){if(t===Ir)return Gu(e,n);if(t===Uo)return dT(e,n);if(t===As)return fM(e,n)}function pM(n,e,t,r){let i=e[xi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let d=o[c];if(d<0)a.push(null);else{let h=s[d];a.push(uq(e,h,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function jw(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=pM(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let d=s[a+1],h=e[-c];for(let g=Zn;g<h.length;g++){let T=h[g];T[Oo]===T[hn]&&jw(T[Ee],T,d,r)}if(h[Ka]!==null){let g=h[Ka];for(let T=0;T<g.length;T++){let C=g[T];jw(C[Ee],C,d,r)}}}}}return r}function dq(n,e){return n[xi].queries[e].queryList}function hq(n,e,t){let r=new Em((t&4)===4);return ZN(n,e,r,r.destroy),(e[xi]??=new Lw).queries.push(new xw(r))-1}function fq(n,e,t,r){let i=An();if(i.firstCreatePass){let s=fn();gq(i,new Fw(e,t,r),s.index),mq(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return hq(i,ze(),t)}function pq(n){return n.split(",").map(e=>e.trim())}function gq(n,e,t){n.queries===null&&(n.queries=new Vw),n.queries.track(new Uw(e,t))}function mq(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function pT(n,e){return n.queries.getByIndex(e)}function yq(n,e){let t=n[Ee],r=pT(t,e);return r.crossesNgTemplate?jw(t,n,e,[]):pM(t,n,r,e)}var nc=class{},$m=class{};var Sm=class extends nc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Dm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=kI(e);this._bootstrapComponents=Sk(s.bootstrap),this._r3Injector=ow(e,t,[{provide:nc,useValue:this},{provide:Dh,useValue:this.componentFactoryResolver},...r],Is(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Am=class extends $m{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Sm(this.moduleType,e,[])}};var Ih=class extends nc{injector;componentFactoryResolver=new Dm(this);instance=null;constructor(e){super();let t=new $a([...e.providers,{provide:nc,useValue:this},{provide:Dh,useValue:this.componentFactoryResolver}],e.parent||ah(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wu(n,e,t=null){return new Ih({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var _q=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=OI(!1,t.type),i=r.length>0?Wu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=te({token:n,providedIn:"environment",factory:()=>new n(me(Vt))})}return n})();function wr(n){return zu(()=>{let e=gM(n),t=ve(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(_q).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ui.Emulated,styles:n.styles||_r,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ac("NgStandalone"),mM(t);let r=n.dependencies;return t.directiveDefs=BP(r,vq),t.pipeDefs=BP(r,UN),t.id=wq(t),t})}function vq(n){return bs(n)||MI(n)}function li(n){return zu(()=>({type:n.type,bootstrap:n.bootstrap||_r,declarations:n.declarations||_r,imports:n.imports||_r,exports:n.exports||_r,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Eq(n,e){if(n==null)return Po;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Lm.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function Iq(n){if(n==null)return Po;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Xn(n){return zu(()=>{let e=gM(n);return mM(e),e})}function Hm(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function gM(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Po,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||_r,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Eq(n.inputs,e),outputs:Iq(n.outputs),debugInfo:null}}function mM(n){n.features?.forEach(e=>e(n))}function BP(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function wq(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Tq(n){return Object.getPrototypeOf(n.prototype).constructor}function cc(n){let e=Tq(n.type),t=!0,r=[n];for(;e;){let i;if(Fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=yw(n.inputs),o.declaredInputs=yw(n.declaredInputs),o.outputs=yw(n.outputs);let a=i.hostBindings;a&&Aq(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&Cq(n,c),d&&Sq(n,d),bq(n,i),RN(n.outputs,i.outputs),Fi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===cc&&(t=!1)}}e=Object.getPrototypeOf(e)}Dq(r)}function bq(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Dq(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Bu(i.hostAttrs,t=Bu(t,i.hostAttrs))}}function yw(n){return n===Po?{}:n===_r?[]:n}function Cq(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Sq(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function Aq(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Rq(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Bu(n.mergedAttrs,n.attrs);let h=n.tView=Zw(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Lu(n,!1);let c=Pq(t,e,n,r);rm()&&iT(t,e,c,n),$u(c,e);let d=Zk(c,e,c,n);e[r+Sn]=d,eT(e,d),sq(d,n,e)}function Nq(n,e,t,r,i,s,o,a,c,d,h){let g=t+Sn,T;return e.firstCreatePass?(T=jm(e,g,4,o||null,a||null),QI()&&nM(e,n,T,Ya(e.consts,d),jk),ZP(e,T)):T=e.data[g],Rq(T,n,e,t,r,i,s,c),fh(T)&&oT(e,n,T),d!=null&&aT(n,T,h),T}function Rs(n,e,t,r,i,s,o,a){let c=ze(),d=An(),h=Ya(d.consts,s);return Nq(c,d,n,e,t,r,i,h,void 0,o,a),Rs}var Pq=kq;function kq(n,e,t,r){return im(!0),e[Rt].createComment("")}var gT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function yM(n){return typeof n=="function"&&n[Qn]!==void 0}function mT(n){return yM(n)&&typeof n.set=="function"}var yT=new ne("");function Ns(n){return!!n&&typeof n.then=="function"}function qm(n){return!!n&&typeof n.subscribe=="function"}var _T=new ne("");function Ku(n){return Jn([{provide:_T,multi:!0,useValue:n}])}var vT=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=V(_T,{optional:!0})??[];injector=V(Ct);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Kt(this.injector,i);if(Ns(s))t.push(s);else if(qm(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ch=new ne("");function _M(){UE(()=>{let n="";throw new ee(600,n)})}function vM(n){return n.isBoundToModule}var Mq=10;var di=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=V(lr);afterRenderManager=V(nT);zonelessEnabled=V(Fu);rootEffectScheduler=V(hw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new It;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=V(Ui);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ve(t=>!t))}constructor(){V(oc,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=V(Vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ct.NULL){return this._injector.get(We).run(()=>{pt(Ze.BootstrapComponentStart);let o=t instanceof Bm;if(!this._injector.get(vT).done){let R="";throw new ee(405,R)}let c;o?c=t:c=this._injector.get(Dh).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=vM(c)?void 0:this._injector.get(nc),h=r||c.selector,g=c.create(i,[],h,d),T=g.location.nativeElement,C=g.injector.get(yT,null);return C?.registerApplication(T),g.onDestroy(()=>{this.detachView(g.hostView),_h(this.components,g),C?.unregisterApplication(T)}),this._loadComponent(g),pt(Ze.BootstrapComponentEnd,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pt(Ze.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw pt(Ze.ChangeDetectionEnd),new ee(101,!1);let t=Oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Oe(t),this.afterTick.next(),pt(Ze.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ec,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Mq;){pt(Ze.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{pt(Ze.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ph(i))continue;let s=r&&!this.zonelessEnabled?0:1;Kk(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ph(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;_h(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ch,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>_h(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _h(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Sh(n,e,t,r){let i=ze(),s=gh();if(jo(i,s,e)){let o=An(),a=nm();s4(a,i,n,e,t,r)}return Sh}var Aoe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function dr(n,e,t){let r=ze(),i=gh();if(jo(r,i,e)){let s=An(),o=nm();Uk(o,r,n,e,r[Rt],t)}return dr}function $P(n,e,t,r,i){cT(e,n,t,i?"class":"style",r)}function Pe(n,e,t,r){let i=ze(),s=i[Ee],o=n+Sn,a=s.firstCreatePass?iM(o,i,2,e,jk,QI(),t,r):s.data[o];if(Bk(a,i,n,e,EM),fh(a)){let c=i[Ee];oT(c,i,a),vk(c,a,i)}return r!=null&&aT(i,a),Pe}function Be(){let n=An(),e=fn(),t=$k(e);return n.firstCreatePass&&sM(n,t),YI(t)&&JI(),KI(),t.classesWithoutHost!=null&&U$(t)&&$P(n,t,ze(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&j$(t)&&$P(n,t,ze(),t.stylesWithoutHost,!1),Be}function $i(n,e,t,r){return Pe(n,e,t,r),Be(),$i}function Ah(n,e,t,r){let i=ze(),s=i[Ee],o=n+Sn,a=s.firstCreatePass?$4(o,s,2,e,t,r):s.data[o];return Bk(a,i,n,e,EM),r!=null&&aT(i,a),Ah}function Rh(){let n=fn(),e=$k(n);return YI(e)&&JI(),KI(),Rh}var EM=(n,e,t,r,i)=>(im(!0),wk(e[Rt],r,pP()));function Ps(){return ze()}var mh=void 0;function Oq(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var xq=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",mh,mh,mh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Oq],_w={};function Tr(n){let e=Lq(n),t=HP(e);if(t)return t;let r=e.split("-")[0];if(t=HP(r),t)return t;if(r==="en")return xq;throw new ee(701,!1)}function HP(n){return n in _w||(_w[n]=Ts.ng&&Ts.ng.common&&Ts.ng.common.locales&&Ts.ng.common.locales[n]),_w[n]}var $t=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})($t||{});function Lq(n){return n.toLowerCase().replace(/_/g,"-")}var Nh="en-US";var Fq=Nh;function IM(n){typeof n=="string"&&(Fq=n.toLowerCase().replace(/_/g,"-"))}function St(n,e,t){let r=ze(),i=An(),s=fn();return wM(i,r,r[Rt],s,n,e,t),St}function zm(n,e,t){let r=ze(),i=An(),s=fn();return(s.type&3||t)&&uM(s,i,r,t,r[Rt],n,e,pm(s,r,e)),zm}function wM(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=pm(r,e,s),uM(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let T=h[g],C=h[g+1];c??=pm(r,e,s),VP(r,e,T,C,i,c)}if(d&&d.length)for(let g of d)c??=pm(r,e,s),VP(r,e,g,i,i,c)}}function Un(n=1){return fP(n)}function ET(n,e,t,r){fq(n,e,t,r)}function IT(n){let e=ze(),t=An(),r=rw();Xg(r+1);let i=pT(t,r);if(n.dirty&&KN(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=yq(e,r);n.reset(s,X$),n.notifyOnChanges()}return!0}return!1}function wT(){return dq(ze(),rw())}function um(n,e){return n<<17|e<<2}function rc(n){return n>>17&32767}function Vq(n){return(n&2)==2}function Uq(n,e){return n&131071|e<<17}function Bw(n){return n|2}function qu(n){return(n&131068)>>2}function vw(n,e){return n&-131069|e<<2}function jq(n){return(n&1)===1}function $w(n){return n|1}function Bq(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=rc(o),c=qu(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Pu(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let T=rc(n[a+1]);n[r+1]=um(T,a),T!==0&&(n[T+1]=vw(n[T+1],r)),n[a+1]=Uq(n[a+1],r)}else n[r+1]=um(a,0),a!==0&&(n[a+1]=vw(n[a+1],r)),a=r;else n[r+1]=um(c,0),a===0?a=r:n[c+1]=vw(n[c+1],r),c=r;d&&(n[r+1]=Bw(n[r+1])),qP(n,h,r,!0),qP(n,h,r,!1),$q(e,h,n,r,s),o=um(a,c),s?e.classBindings=o:e.styleBindings=o}function $q(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Pu(s,e)>=0&&(t[r+1]=$w(t[r+1]))}function qP(n,e,t,r){let i=n[t+1],s=e===null,o=r?rc(i):qu(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];Hq(c,e)&&(a=!0,n[o+1]=r?$w(d):Bw(d)),o=r?rc(d):qu(d)}a&&(n[t+1]=r?Bw(i):$w(i))}function Hq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Pu(n,e)>=0:!1}function Qu(n,e){return qq(n,e,null,!0),Qu}function qq(n,e,t,r){let i=ze(),s=An(),o=sP(2);if(s.firstUpdatePass&&Gq(s,n,o,r),e!==Cs&&jo(i,o,e)){let a=s.data[Ja()];Jq(s,a,i,i[Rt],n,i[o+1]=Zq(e,t),r,o)}}function zq(n,e){return e>=n.expandoStartIndex}function Gq(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ja()],o=zq(n,t);Xq(s,r)&&e===null&&!o&&(e=!1),e=Wq(i,s,e,r),Bq(i,s,e,t,o,r)}}function Wq(n,e,t,r){let i=uP(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ew(null,n,e,t,r),t=wh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Ew(i,n,e,t,r),s===null){let c=Kq(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Ew(null,n,e,c[1],r),c=wh(c,e.attrs,r),Qq(n,e,r,c))}else s=Yq(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Kq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qu(r)!==0)return n[rc(r)]}function Qq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[rc(i)]=r}function Yq(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=wh(r,o,t)}return wh(r,e.attrs,t)}function Ew(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=wh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),VN(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Jq(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=jq(d)?zP(c,e,t,i,qu(d),o):void 0;if(!Rm(h)){Rm(s)||Vq(d)&&(s=zP(c,null,t,i,a,o));let g=jI(Ja(),t);QH(r,o,g,i,s)}}function zP(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,T=t[i+1];T===Cs&&(T=g?_r:void 0);let C=g?Wg(T,r):h===r?T:void 0;if(d&&!Rm(C)&&(C=Wg(c,r)),Rm(C)&&(a=C,o))return a;let R=n[i+1];i=o?rc(R):qu(R)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Wg(c,r))}return a}function Rm(n){return n!==void 0}function Zq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Is(bh(n)))),n}function Xq(n,e){return(n.flags&(e?8:16))!==0}function it(n,e=""){let t=ze(),r=An(),i=n+Sn,s=r.firstCreatePass?jm(r,i,1,e,null):r.data[i],o=e6(r,t,s,e,n);t[i]=o,rm()&&iT(r,t,o,s),Lu(s,!1)}var e6=(n,e,t,r,i)=>(im(!0),dH(e[Rt],r));function t6(n,e,t,r=""){return jo(n,gh(),t)?e+ih(t)+r:Cs}function Gm(n){return Yu("",n),Gm}function Yu(n,e,t){let r=ze(),i=t6(r,n,e,t);return i!==Cs&&n6(r,Ja(),i),Yu}function n6(n,e,t){let r=jI(e,n);hH(n[Rt],r,t)}function Wm(n,e,t){mT(e)&&(e=e());let r=ze(),i=gh();if(jo(r,i,e)){let s=An(),o=nm();Uk(o,r,n,e,r[Rt],t)}return Wm}function TT(n,e){let t=mT(n);return t&&n.set(e),t}function Km(n,e){let t=ze(),r=An(),i=fn();return wM(r,t,t[Rt],i,n,e),Km}function GP(n,e,t){let r=An();r.firstCreatePass&&TM(e,r.data,r.blueprint,Fi(n),t)}function TM(n,e,t,r,i){if(n=Cn(n),Array.isArray(n))for(let s=0;s<n.length;s++)TM(n[s],e,t,r,i);else{let s=An(),o=ze(),a=fn(),c=Ba(n)?n:Cn(n.provide),d=LI(n),h=a.providerIndexes&1048575,g=a.directiveStart,T=a.providerIndexes>>20;if(Ba(n)||!n.multi){let C=new Xa(d,i,je,null),R=ww(c,e,i?h:h+T,g);R===-1?(bw(vm(a,o),s,c),Iw(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(C),o.push(C)):(t[R]=C,o[R]=C)}else{let C=ww(c,e,h+T,g),R=ww(c,e,h,h+T),M=C>=0&&t[C],k=R>=0&&t[R];if(i&&!k||!i&&!M){bw(vm(a,o),s,c);let H=s6(i?i6:r6,t.length,i,r,d,n);!i&&k&&(t[R].providerFactory=H),Iw(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=bM(t[i?R:C],d,!i&&r);Iw(s,n,C>-1?C:R,H)}!i&&r&&k&&t[R].componentProviders++}}}function Iw(n,e,t,r){let i=Ba(e),s=HN(e);if(i||s){let c=(s?Cn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function bM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ww(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function r6(n,e,t,r,i){return Hw(this.multi,[])}function i6(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=vh(r,r[Ee],this.providerFactory.index,i);o=c.slice(0,a),Hw(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],Hw(s,o);return o}function Hw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function s6(n,e,t,r,i,s){let o=new Xa(n,t,je,null);return o.multi=[],o.index=e,o.componentProviders=0,bM(o,i,r&&!t),o}function Qm(n,e){return t=>{t.providersResolver=(r,i)=>GP(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>GP(r,i?i(e):e,!0))}}function DM(n,e){let t=n[e];return t===Cs?void 0:t}function o6(n,e,t,r,i,s){let o=e+t;return jo(n,o,i)?cM(n,o+1,s?r.call(s,i):r(i)):DM(n,o+1)}function a6(n,e,t,r,i,s,o){let a=e+t;return H4(n,a,i,s)?cM(n,a+2,o?r.call(o,i,s):r(i,s)):DM(n,a+2)}function Ph(n,e){let t=An(),r,i=n+Sn;t.firstCreatePass?(r=c6(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ro(r.type,!0)),o,a=Yn(je);try{let c=_m(!1),d=s();return _m(c),$I(t,ze(),i,d),d}finally{Yn(a)}}function c6(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function bT(n,e,t){let r=n+Sn,i=ze(),s=BI(i,r);return CM(i,r)?o6(i,nw(),e,s.transform,t,s):s.transform(t)}function DT(n,e,t,r){let i=n+Sn,s=ze(),o=BI(s,i);return CM(s,i)?a6(s,nw(),e,o.transform,t,r,o):o.transform(t,r)}function CM(n,e){return n[Ee].data[e].pure}var Nm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},CT=(()=>{class n{compileModuleSync(t){return new Am(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=kI(t),s=Sk(i.declarations).reduce((o,a)=>{let c=bs(a);return c&&o.push(new tc(c)),o},[]);return new Nm(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SM=(()=>{class n{applicationErrorHandler=V(lr);appRef=V(di);taskService=V(Ui);ngZone=V(We);zonelessEnabled=V(Fu);tracing=V(oc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ft;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(th):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(om,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?uw:cw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(th+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,uw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AM(){return[{provide:ws,useExisting:SM},{provide:We,useClass:nh},{provide:Fu,useValue:!0}]}function u6(){return typeof $localize<"u"&&$localize.locale||Nh}var kh=new ne("",{factory:()=>V(kh,{optional:!0,skipSelf:!0})||u6()});function Mh(n,e){return cg(n,e?.equal)}var MM=Symbol("InputSignalNode#UNSET"),I6=ve(q({},ug),{transformFn:void 0,applyValueToInputSignal(n,e){Kd(n,e)}});function OM(n,e){let t=Object.create(I6);t.value=n,t.transformFn=e?.transform;function r(){if(zd(t),t.value===MM){let i=null;throw new ee(-950,i)}return t.value}return r[Qn]=t,r}var Jm=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Th(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function RM(n,e){return OM(n,e)}function w6(n){return OM(MM,n)}var xM=(RM.required=w6,RM);var T6=(()=>{class n{zone=V(We);changeDetectionScheduler=V(ws);applicationRef=V(di);applicationErrorHandler=V(lr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b6=new ne("",{factory:()=>!1});function D6({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new We(ve(q({},FM()),{scheduleInRootZone:e})),[{provide:Fu,useValue:!1},{provide:We,useFactory:n},{provide:ko,multi:!0,useFactory:()=>{let t=V(T6,{optional:!0});return()=>t.initialize()}},{provide:ko,multi:!0,useFactory:()=>{let t=V(C6);return()=>{t.initialize()}}},{provide:om,useValue:e??aw}]}function LM(n){let e=n?.scheduleInRootZone,t=D6({ngZoneFactory:()=>{let r=FM(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&ac("NgZone_CoalesceEvent"),new We(r)},scheduleInRootZone:e});return Jn([{provide:b6,useValue:!0},t])}function FM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var C6=(()=>{class n{subscription=new Ft;initialized=!1;zone=V(We);pendingTasks=V(Ui);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ST=new ne(""),S6=new ne("");function Oh(n){return!n.moduleRef}function A6(n){let e=Oh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(We);return t.run(()=>{Oh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(lr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Oh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(ST);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(ST);o.add(s),n.moduleRef.onDestroy(()=>{_h(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return N6(r,t,()=>{let s=e.get(Ui),o=s.add(),a=e.get(vT);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(kh,Nh);if(IM(c||Nh),!e.get(S6,!0))return Oh(n)?e.get(di):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Oh(n)){let h=e.get(di);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return R6?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var R6;function N6(n,e,t){try{let r=t();return Ns(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ym=null;function P6(n=[],e){return Ct.create({name:e,providers:[{provide:oh,useValue:"platform"},{provide:ST,useValue:new Set([()=>Ym=null])},...n]})}function k6(n=[]){if(Ym)return Ym;let e=P6(n);return Ym=e,_M(),M6(e),e}function M6(n){let e=n.get(km,null);Kt(n,()=>{e?.forEach(t=>t())})}function Ju(){return!1}var ks=(()=>{class n{static __NG_ELEMENT_ID__=O6}return n})();function O6(n){return x6(fn(),ze(),(n&16)===16)}function x6(n,e,t){if(Lo(n)&&!t){let r=$r(n.index,e);return new Vo(r,r)}else if(n.type&175){let r=e[jr];return new Vo(r,e)}return null}var AT=class{constructor(){}supports(e){return fT(e)}create(e){return new RT(e)}},L6=(n,e)=>e,RT=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||L6}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<NM(r,i,s)?t:r,a=NM(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let T=0;T<d;T++){let C=T<s.length?s[T]:s[T]=0,R=C+T;h<=R&&R<d&&(s[T]=C+1)}let g=o.previousIndex;s[g]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!fT(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,oM(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new NT(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},NT=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},PT=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Zm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new PT,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function NM(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function PM(){return new kT([new AT])}var kT=(()=>{class n{factories;static \u0275prov=te({token:n,providedIn:"root",factory:PM});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=V(n,{optional:!0,skipSelf:!0});return n.create(t,r||PM())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();function VM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;pt(Ze.BootstrapApplicationStart);try{let s=i?.injector??k6(r),o=[AM(),yP,...t||[]],a=new Ih({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return A6({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{pt(Ze.BootstrapApplicationEnd)}}function uc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function UM(n){let e=bs(n);if(!e)return null;let t=new tc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var jM=null;function Hr(){return jM}function MT(n){jM??=n}var Lh=class{},Zu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>V(BM),providedIn:"platform"})}return n})(),OT=new ne(""),BM=(()=>{class n extends Zu{_location;_history;_doc=V(Ut);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hr().getBaseHref(this._doc)}onPopState(t){let r=Hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Xm(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function $M(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function hi(n){return n&&n[0]!=="?"?`?${n}`:n}var fi=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>V(ty),providedIn:"root"})}return n})(),ey=new ne(""),ty=(()=>{class n extends fi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Xm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+hi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+hi(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+hi(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(Zu),me(ey,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bo=(()=>{class n{_subject=new It;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=U6($M(HM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+hi(r))}normalize(t){return n.stripTrailingSlash(V6(this._basePath,HM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=hi;static joinWithSlash=Xm;static stripTrailingSlash=$M;static \u0275fac=function(r){return new(r||n)(me(fi))};static \u0275prov=te({token:n,factory:()=>F6(),providedIn:"root"})}return n})();function F6(){return new Bo(me(fi))}function V6(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function HM(n){return n.replace(/\/index.html$/,"")}function U6(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var jT=(()=>{class n extends fi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Xm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+hi(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+hi(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(Zu),me(ey,8))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();var jn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(jn||{}),vt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(vt||{}),hr=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(hr||{}),Os={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function WM(n){return Tr(n)[$t.LocaleId]}function KM(n,e,t){let r=Tr(n),i=[r[$t.DayPeriodsFormat],r[$t.DayPeriodsStandalone]],s=qr(i,e);return qr(s,t)}function QM(n,e,t){let r=Tr(n),i=[r[$t.DaysFormat],r[$t.DaysStandalone]],s=qr(i,e);return qr(s,t)}function YM(n,e,t){let r=Tr(n),i=[r[$t.MonthsFormat],r[$t.MonthsStandalone]],s=qr(i,e);return qr(s,t)}function JM(n,e){let r=Tr(n)[$t.Eras];return qr(r,e)}function Fh(n,e){let t=Tr(n);return qr(t[$t.DateFormat],e)}function Vh(n,e){let t=Tr(n);return qr(t[$t.TimeFormat],e)}function Uh(n,e){let r=Tr(n)[$t.DateTimeFormat];return qr(r,e)}function jh(n,e){let t=Tr(n),r=t[$t.NumberSymbols][e];if(typeof r>"u"){if(e===Os.CurrencyDecimal)return t[$t.NumberSymbols][Os.Decimal];if(e===Os.CurrencyGroup)return t[$t.NumberSymbols][Os.Group]}return r}function ZM(n){if(!n[$t.ExtraData])throw new ee(2303,!1)}function XM(n){let e=Tr(n);return ZM(e),(e[$t.ExtraData][2]||[]).map(r=>typeof r=="string"?xT(r):[xT(r[0]),xT(r[1])])}function eO(n,e,t){let r=Tr(n);ZM(r);let i=[r[$t.ExtraData][0],r[$t.ExtraData][1]],s=qr(i,e)||[];return qr(s,t)||[]}function qr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ee(2304,!1)}function xT(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var j6=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ny={},B6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function tO(n,e,t,r){let i=Y6(n);e=Ms(t,e)||e;let o=[],a;for(;e;)if(a=B6.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=rO(r,c),i=Q6(i,r));let d="";return o.forEach(h=>{let g=W6(h);d+=g?g(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function ay(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ms(n,e){let t=WM(n);if(ny[t]??={},ny[t][e])return ny[t][e];let r="";switch(e){case"shortDate":r=Fh(n,hr.Short);break;case"mediumDate":r=Fh(n,hr.Medium);break;case"longDate":r=Fh(n,hr.Long);break;case"fullDate":r=Fh(n,hr.Full);break;case"shortTime":r=Vh(n,hr.Short);break;case"mediumTime":r=Vh(n,hr.Medium);break;case"longTime":r=Vh(n,hr.Long);break;case"fullTime":r=Vh(n,hr.Full);break;case"short":let i=Ms(n,"shortTime"),s=Ms(n,"shortDate");r=ry(Uh(n,hr.Short),[i,s]);break;case"medium":let o=Ms(n,"mediumTime"),a=Ms(n,"mediumDate");r=ry(Uh(n,hr.Medium),[o,a]);break;case"long":let c=Ms(n,"longTime"),d=Ms(n,"longDate");r=ry(Uh(n,hr.Long),[c,d]);break;case"full":let h=Ms(n,"fullTime"),g=Ms(n,"fullDate");r=ry(Uh(n,hr.Full),[h,g]);break}return r&&(ny[t][e]=r),r}function ry(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function pi(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function $6(n,e){return pi(n,3).substring(0,e)}function Yt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=H6(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return $6(a,e);let c=jh(o,Os.MinusSign);return pi(a,e,c,r,i)}}function H6(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ee(2301,!1)}}function Tt(n,e,t=jn.Format,r=!1){return function(i,s){return q6(i,s,n,e,t,r)}}function q6(n,e,t,r,i,s){switch(t){case 2:return YM(e,i,r)[n.getMonth()];case 1:return QM(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=XM(e),h=eO(e,i,r),g=d.findIndex(T=>{if(Array.isArray(T)){let[C,R]=T,M=o>=C.hours&&a>=C.minutes,k=o<R.hours||o===R.hours&&a<R.minutes;if(C.hours<R.hours){if(M&&k)return!0}else if(M||k)return!0}else if(T.hours===o&&T.minutes===a)return!0;return!1});if(g!==-1)return h[g]}return KM(e,i,r)[o<12?0:1];case 3:return JM(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new ee(2302,!1)}}function iy(n){return function(e,t,r){let i=-1*r,s=jh(t,Os.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+pi(o,2,s)+pi(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+pi(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+pi(o,2,s)+":"+pi(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+pi(o,2,s)+":"+pi(Math.abs(i%60),2,s);default:throw new ee(2310,!1)}}}var z6=0,oy=4;function G6(n){let e=ay(n,z6,1).getDay();return ay(n,0,1+(e<=oy?oy:oy+7)-e)}function nO(n){let e=n.getDay(),t=e===0?-3:oy-e;return ay(n.getFullYear(),n.getMonth(),n.getDate()+t)}function LT(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=nO(t),o=G6(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return pi(i,n,jh(r,Os.MinusSign))}}function sy(n,e=!1){return function(t,r){let s=nO(t).getFullYear();return pi(s,n,jh(r,Os.MinusSign),e)}}var FT={};function W6(n){if(FT[n])return FT[n];let e;switch(n){case"G":case"GG":case"GGG":e=Tt(3,vt.Abbreviated);break;case"GGGG":e=Tt(3,vt.Wide);break;case"GGGGG":e=Tt(3,vt.Narrow);break;case"y":e=Yt(0,1,0,!1,!0);break;case"yy":e=Yt(0,2,0,!0,!0);break;case"yyy":e=Yt(0,3,0,!1,!0);break;case"yyyy":e=Yt(0,4,0,!1,!0);break;case"Y":e=sy(1);break;case"YY":e=sy(2,!0);break;case"YYY":e=sy(3);break;case"YYYY":e=sy(4);break;case"M":case"L":e=Yt(1,1,1);break;case"MM":case"LL":e=Yt(1,2,1);break;case"MMM":e=Tt(2,vt.Abbreviated);break;case"MMMM":e=Tt(2,vt.Wide);break;case"MMMMM":e=Tt(2,vt.Narrow);break;case"LLL":e=Tt(2,vt.Abbreviated,jn.Standalone);break;case"LLLL":e=Tt(2,vt.Wide,jn.Standalone);break;case"LLLLL":e=Tt(2,vt.Narrow,jn.Standalone);break;case"w":e=LT(1);break;case"ww":e=LT(2);break;case"W":e=LT(1,!0);break;case"d":e=Yt(2,1);break;case"dd":e=Yt(2,2);break;case"c":case"cc":e=Yt(7,1);break;case"ccc":e=Tt(1,vt.Abbreviated,jn.Standalone);break;case"cccc":e=Tt(1,vt.Wide,jn.Standalone);break;case"ccccc":e=Tt(1,vt.Narrow,jn.Standalone);break;case"cccccc":e=Tt(1,vt.Short,jn.Standalone);break;case"E":case"EE":case"EEE":e=Tt(1,vt.Abbreviated);break;case"EEEE":e=Tt(1,vt.Wide);break;case"EEEEE":e=Tt(1,vt.Narrow);break;case"EEEEEE":e=Tt(1,vt.Short);break;case"a":case"aa":case"aaa":e=Tt(0,vt.Abbreviated);break;case"aaaa":e=Tt(0,vt.Wide);break;case"aaaaa":e=Tt(0,vt.Narrow);break;case"b":case"bb":case"bbb":e=Tt(0,vt.Abbreviated,jn.Standalone,!0);break;case"bbbb":e=Tt(0,vt.Wide,jn.Standalone,!0);break;case"bbbbb":e=Tt(0,vt.Narrow,jn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Tt(0,vt.Abbreviated,jn.Format,!0);break;case"BBBB":e=Tt(0,vt.Wide,jn.Format,!0);break;case"BBBBB":e=Tt(0,vt.Narrow,jn.Format,!0);break;case"h":e=Yt(3,1,-12);break;case"hh":e=Yt(3,2,-12);break;case"H":e=Yt(3,1);break;case"HH":e=Yt(3,2);break;case"m":e=Yt(4,1);break;case"mm":e=Yt(4,2);break;case"s":e=Yt(5,1);break;case"ss":e=Yt(5,2);break;case"S":e=Yt(6,1);break;case"SS":e=Yt(6,2);break;case"SSS":e=Yt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=iy(0);break;case"ZZZZZ":e=iy(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=iy(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=iy(2);break;default:return null}return FT[n]=e,e}function rO(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function K6(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Q6(n,e,t){let i=n.getTimezoneOffset(),s=rO(e,i);return K6(n,-1*(s-i))}function Y6(n){if(qM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return ay(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(j6))return J6(r)}let e=new Date(n);if(!qM(e))throw new ee(2311,!1);return e}function J6(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function qM(n){return n instanceof Date&&!isNaN(n.valueOf())}var cy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ly=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new cy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),zM(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);zM(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(je(As),je(Uo),je(kT))};static \u0275dir=Xn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function zM(n,e){n.context.$implicit=e.item}var lc=(()=>{class n{_viewContainer;_context=new uy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){GM(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){GM(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(je(As),je(Uo))};static \u0275dir=Xn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),uy=class{$implicit=null;ngIf=null};function GM(n,e){if(n&&!n.createEmbeddedView)throw new ee(2020,!1)}function iO(n,e){return new ee(2100,!1)}var VT=class{createSubscription(e,t,r){return Bt(()=>e.subscribe({next:t,error:r}))}dispose(e){Bt(()=>e.unsubscribe())}},UT=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},Z6=new UT,X6=new VT,BT=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=V(lr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Ns(t))return Z6;if(qm(t))return X6;throw iO(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(je(ks,16))};static \u0275pipe=Hm({name:"async",type:n,pure:!1})}return n})();var ez="mediumDate",sO=new ne(""),oO=new ne(""),$T=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??ez,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return tO(t,o,s||this.locale,a)}catch(o){throw iO(n,o.message)}}static \u0275fac=function(r){return new(r||n)(je(kh,16),je(sO,24),je(oO,24))};static \u0275pipe=Hm({name:"date",type:n,pure:!0})}return n})();var $o=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=li({type:n});static \u0275inj=Fr({})}return n})();function HT(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Bh=class{};var aO="browser";var cO=(()=>{class n{static \u0275prov=te({token:n,providedIn:"root",factory:()=>new qT(V(Ut),window)})}return n})(),qT=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ve(q({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=tz(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Mi(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(ve(q({},t),{left:i-o[0],top:s-o[1]}))}};function tz(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var $h=class{_doc;constructor(e){this._doc=e}manager},hy=(()=>{class n extends $h{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(me(Ut))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),gy=new ne(""),KT=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof hy));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof hy);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(gy),me(We))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),zT="ng-app-id";function uO(n){for(let e of n)e.remove()}function lO(n,e){let t=e.createElement("style");return t.textContent=n,t}function nz(n,e,t,r){let i=n.head?.querySelectorAll(`style[${zT}="${e}"],link[${zT}="${e}"]`);if(i)for(let s of i)s.removeAttribute(zT),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function WT(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var QT=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,nz(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,lO);r?.forEach(i=>this.addUsage(i,this.external,WT))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(uO(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])uO(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,lO(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,WT(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(Ut),me(Pm),me(Mm,8),me(sc))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),GT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},YT=/%COMP%/g;var hO="%COMP%",rz=`_nghost-${hO}`,iz=`_ngcontent-${hO}`,sz=!0,oz=new ne("",{factory:()=>sz});function az(n){return iz.replace(YT,n)}function cz(n){return rz.replace(YT,n)}function fO(n,e){return e.map(t=>t.replace(YT,n))}var JT=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new Hh(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof py?i.applyToHost(t):i instanceof qh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,T=this.tracingService;switch(r.encapsulation){case ui.Emulated:s=new py(c,d,r,this.appId,h,o,a,g,T);break;case ui.ShadowDom:return new fy(c,t,r,o,a,this.nonce,g,T,d);case ui.ExperimentalIsolatedShadowDom:return new fy(c,t,r,o,a,this.nonce,g,T);default:s=new qh(c,d,r,h,o,a,g,T);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(KT),me(QT),me(Pm),me(oz),me(Ut),me(We),me(Mm),me(oc,8))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),Hh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(GT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(dO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(dO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=GT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=GT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Bi.DashCase|Bi.Important)?e.style.setProperty(t,r,i&Bi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Bi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Hr().getGlobalEventTarget(this.doc,e),!e))throw new ee(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function dO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var fy=class extends Hh{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=d,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=fO(r.id,h);for(let T of h){let C=document.createElement("style");o&&C.setAttribute("nonce",o),C.textContent=T,this.shadowRoot.appendChild(C)}let g=r.getExternalStyles?.();if(g)for(let T of g){let C=WT(T,i);o&&C.setAttribute("nonce",o),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},qh=class extends Hh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?fO(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Hu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},py=class extends qh{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=az(h),this.hostAttr=cz(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var my=class n extends Lh{supportsDOMEvents=!0;static makeCurrent(){MT(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=uz();return t==null?null:lz(t)}resetBaseElement(){zh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return HT(document.cookie,e)}},zh=null;function uz(){return zh=zh||document.head.querySelector("base"),zh?zh.getAttribute("href"):null}function lz(n){return new URL(n,document.baseURI).pathname}var dz=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),pO=["alt","control","meta","shift"],hz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},gO=(()=>{class n extends $h{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),pO.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=hz[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),pO.forEach(o=>{if(o!==i){let a=fz[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(Ut))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();function ZT(n,e,t){let r=q({rootComponent:n,platformRef:t?.platformRef},pz(e));return VM(r)}function pz(n){return{appProviders:[...vz,...n?.providers??[]],platformProviders:_z}}function gz(){my.makeCurrent()}function mz(){return new ki}function yz(){return Gw(document),document}var _z=[{provide:sc,useValue:aO},{provide:km,useValue:gz,multi:!0},{provide:Ut,useFactory:yz}];var vz=[{provide:oh,useValue:"root"},{provide:ki,useFactory:mz},{provide:gy,useClass:hy,multi:!0},{provide:gy,useClass:gO,multi:!0},JT,QT,KT,{provide:ec,useExisting:JT},{provide:Bh,useClass:dz},[]];var mO=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(Ut))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Se="primary",nf=Symbol("RouteTitle"),rb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function pc(n){return new rb(n)}function DO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wy(n){return new Promise((e,t)=>{n.pipe(vs()).subscribe({next:r=>e(r),error:r=>t(r)})})}function wz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hi(n[t],e[t]))return!1;return!0}function Hi(n,e){let t=n?ib(n):void 0,r=e?ib(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!CO(n[i],e[i]))return!1;return!0}function ib(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function CO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function SO(n){return n.length>0?n[n.length-1]:null}function gc(n){return Pg(n)?n:Ns(n)?wt(Promise.resolve(n)):Ne(n)}function AO(n){return Pg(n)?wy(n):Promise.resolve(n)}var Tz={exact:NO,subset:PO},RO={exact:bz,subset:Dz,ignored:()=>!0};function yO(n,e,t){return Tz[t.paths](n.root,e.root,t.matrixParams)&&RO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function bz(n,e){return Hi(n,e)}function NO(n,e,t){if(!hc(n.segments,e.segments)||!vy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!NO(n.children[r],e.children[r],t))return!1;return!0}function Dz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CO(n[t],e[t]))}function PO(n,e,t){return kO(n,e,e.segments,t)}function kO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!hc(i,t)||e.hasChildren()||!vy(i,t,r))}else if(n.segments.length===t.length){if(!hc(n.segments,t)||!vy(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!PO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!hc(n.segments,i)||!vy(n.segments,i,r)||!n.children[Se]?!1:kO(n.children[Se],e,s,r)}}function vy(n,e,t){return e.every((r,i)=>RO[t](n[i].parameters,r.parameters))}var mi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ct([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=pc(this.queryParams),this._queryParamMap}toString(){return Az.serialize(this)}},ct=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ey(this)}},Ho=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=pc(this.parameters),this._parameterMap}toString(){return OO(this)}};function Cz(n,e){return hc(n,e)&&n.every((t,r)=>Hi(t.parameters,e[r].parameters))}function hc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Sz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Se&&(t=t.concat(e(i,r)))}),t}var mc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>new xs,providedIn:"root"})}return n})(),xs=class{parse(e){let t=new ob(e);return new mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Gh(e.root,!0)}`,r=Pz(e.queryParams),i=typeof e.fragment=="string"?`#${Rz(e.fragment)}`:"";return`${t}${r}${i}`}},Az=new xs;function Ey(n){return n.segments.map(e=>OO(e)).join("/")}function Gh(n,e){if(!n.hasChildren())return Ey(n);if(e){let t=n.children[Se]?Gh(n.children[Se],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Se&&r.push(`${i}:${Gh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Sz(n,(r,i)=>i===Se?[Gh(n.children[Se],!1)]:[`${i}:${Gh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Se]!=null?`${Ey(n)}/${t[0]}`:`${Ey(n)}/(${t.join("//")})`}}function MO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yy(n){return MO(n).replace(/%3B/gi,";")}function Rz(n){return encodeURI(n)}function sb(n){return MO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Iy(n){return decodeURIComponent(n)}function _O(n){return Iy(n.replace(/\+/g,"%20"))}function OO(n){return`${sb(n.path)}${Nz(n.parameters)}`}function Nz(n){return Object.entries(n).map(([e,t])=>`;${sb(e)}=${sb(t)}`).join("")}function Pz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${yy(t)}=${yy(i)}`).join("&"):`${yy(t)}=${yy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var kz=/^[^\/()?;#]+/;function XT(n){let e=n.match(kz);return e?e[0]:""}var Mz=/^[^\/()?;=#]+/;function Oz(n){let e=n.match(Mz);return e?e[0]:""}var xz=/^[^=?&#]+/;function Lz(n){let e=n.match(xz);return e?e[0]:""}var Fz=/^[^&#]+/;function Vz(n){let e=n.match(Fz);return e?e[0]:""}var ob=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Se]=new ct(e,t)),r}parseSegment(){let e=XT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Ho(Iy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Oz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=XT(this.remaining);i&&(r=i,this.capture(r))}e[Iy(t)]=Iy(r)}parseQueryParam(e){let t=Lz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=Vz(this.remaining);o&&(r=o,this.capture(r))}let i=_O(t),s=_O(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=XT(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Se);let o=this.parseChildren();t[s??Se]=Object.keys(o).length===1&&o[Se]?o[Se]:new ct([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function xO(n){return n.segments.length>0?new ct([],{[Se]:n}):n}function LO(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=LO(i);if(r===Se&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ct(n.segments,e);return Uz(t)}function Uz(n){if(n.numberOfChildren===1&&n.children[Se]){let e=n.children[Se];return new ct(n.segments.concat(e.segments),e.children)}return n}function qo(n){return n instanceof mi}function FO(n,e,t=null,r=null,i=new xs){let s=VO(n);return UO(s,e,t,r,i)}function VO(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new ct(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=xO(r);return e??i}function UO(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return eb(s,s,s,t,r,i);let o=jz(e);if(o.toRoot())return eb(s,s,new ct([],{}),t,r,i);let a=Bz(o,s,n),c=a.processChildren?Kh(a.segmentGroup,a.index,o.commands):BO(a.segmentGroup,a.index,o.commands);return eb(s,a.segmentGroup,c,t,r,i)}function Ty(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yh(n){return typeof n=="object"&&n!=null&&n.outlets}function vO(n,e,t){n||="\u0275";let r=new mi;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function eb(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(g=>vO(d,g,s)):vO(d,h,s);let a;n===e?a=t:a=jO(n,e,t);let c=xO(LO(a));return new mi(c,o,i)}function jO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=jO(s,e,t)}),new ct(n.segments,r)}var by=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ty(r[0]))throw new ee(4003,!1);let i=r.find(Yh);if(i&&i!==SO(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new by(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new by(t,e,r)}var el=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Bz(n,e,t){if(n.isAbsolute)return new el(e,!0,0);if(!t)return new el(e,!1,NaN);if(t.parent===null)return new el(t,!0,0);let r=Ty(n.commands[0])?0:1,i=t.segments.length-1+r;return $z(t,i,n.numberOfDoubleDots)}function $z(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new el(r,!1,i-s)}function Hz(n){return Yh(n[0])?n[0].outlets:{[Se]:n}}function BO(n,e,t){if(n??=new ct([],{}),n.segments.length===0&&n.hasChildren())return Kh(n,e,t);let r=qz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ct(n.segments.slice(0,r.pathIndex),{});return s.children[Se]=new ct(n.segments.slice(r.pathIndex),n.children),Kh(s,0,i)}else return r.match&&i.length===0?new ct(n.segments,{}):r.match&&!n.hasChildren()?ab(n,e,t):r.match?Kh(n,0,i):ab(n,e,t)}function Kh(n,e,t){if(t.length===0)return new ct(n.segments,{});{let r=Hz(t),i={};if(Object.keys(r).some(s=>s!==Se)&&n.children[Se]&&n.numberOfChildren===1&&n.children[Se].segments.length===0){let s=Kh(n.children[Se],e,t);return new ct(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=BO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ct(n.segments,i)}}function qz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Yh(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!IO(c,d,o))return s;r+=2}else{if(!IO(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ab(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Yh(s)){let c=zz(s.outlets);return new ct(r,c)}if(i===0&&Ty(t[0])){let c=n.segments[e];r.push(new Ho(c.path,EO(t[0]))),i++;continue}let o=Yh(s)?s.outlets[Se]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ty(a)?(r.push(new Ho(o,EO(a))),i+=2):(r.push(new Ho(o,{})),i++)}return new ct(r,{})}function zz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ab(new ct([],{}),0,r))}),e}function EO(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function IO(n,e,t){return n==t.path&&Hi(e,t.parameters)}var tl="imperative",cn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(cn||{}),Dr=class{id;url;constructor(e,t){this.id=e,this.url=t}},zo=class extends Dr{type=cn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cr=class extends Dr{urlAfterRedirects;type=cn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},er=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(er||{}),rl=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(rl||{}),qi=class extends Dr{reason;code;type=cn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zi=class extends Dr{reason;code;type=cn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},il=class extends Dr{error;target;type=cn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jh=class extends Dr{urlAfterRedirects;state;type=cn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dy=class extends Dr{urlAfterRedirects;state;type=cn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cy=class extends Dr{urlAfterRedirects;state;shouldActivate;type=cn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sy=class extends Dr{urlAfterRedirects;state;type=cn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ay=class extends Dr{urlAfterRedirects;state;type=cn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ry=class{route;type=cn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ny=class{route;type=cn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Py=class{snapshot;type=cn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ky=class{snapshot;type=cn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},My=class{snapshot;type=cn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oy=class{snapshot;type=cn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sl=class{routerEvent;position;anchor;type=cn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Zh=class{},ol=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Gz(n){return!(n instanceof Zh)&&!(n instanceof ol)}function Wz(n,e){return n.providers&&!n._injector&&(n._injector=Wu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gi(n){return n.outlet||Se}function Kz(n,e){let t=n.filter(r=>gi(r)===e);return t.push(...n.filter(r=>gi(r)!==e)),t}function ul(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var xy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ul(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new yc(this.rootInjector)}},yc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(Vt))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ly=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=cb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=cb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ub(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ub(e,this._root).map(t=>t.value)}};function cb(n,e){if(n===e.value)return e;for(let t of e.children){let r=cb(n,t);if(r)return r}return null}function ub(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ub(n,t);if(r.length)return r.unshift(e),r}return[]}var br=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Xu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xh=class extends Ly{snapshot;constructor(e,t){super(e),this.snapshot=t,gb(this,e)}toString(){return this.snapshot.toString()}};function $O(n){let e=Qz(n),t=new wn([new Ho("",{})]),r=new wn({}),i=new wn({}),s=new wn({}),o=new wn(""),a=new Gi(t,r,s,o,i,Se,n,e.root);return a.snapshot=e.root,new Xh(new br(a,[]),e)}function Qz(n){let e={},t={},r={},s=new fc([],e,r,"",t,Se,n,null,{});return new ef("",new br(s,[]))}var Gi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ve(d=>d[nf]))??Ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>pc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>pc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},i&&qO(i)&&(r.resolve[nf]=i.title),r}var fc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nf]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=pc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=pc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ef=class extends Ly{url;constructor(e,t){super(t),this.url=e,gb(this,t)}toString(){return HO(this._root)}};function gb(n,e){e.value._routerState=n,e.children.forEach(t=>gb(n,t))}function HO(n){let e=n.children.length>0?` { ${n.children.map(HO).join(", ")} } `:"";return`${n.value}${e}`}function tb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hi(e.params,t.params)||n.paramsSubject.next(t.params),wz(e.url,t.url)||n.urlSubject.next(t.url),Hi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function lb(n,e){let t=Hi(n.params,e.params)&&Cz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||lb(n.parent,e.parent))}function qO(n){return typeof n.title=="string"||n.title===null}var zO=new ne(""),rf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Se;activateEvents=new Wt;deactivateEvents=new Wt;attachEvents=new Wt;detachEvents=new Wt;routerOutletData=xM();parentContexts=V(yc);location=V(As);changeDetector=V(ks);inputBinder=V(sf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new db(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Xn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ds]})}return n})(),db=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Gi?this.route:e===yc?this.childContexts:e===zO?this.outletData:this.parent.get(e,t)}},sf=new ne(""),mb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=xg([r.queryParams,r.params,r.data]).pipe(xn(([s,o,a],c)=>(a=q(q(q({},s),o),a),c===0?Ne(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=UM(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),yb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=wr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&$i(0,"router-outlet")},dependencies:[rf],encapsulation:2})}return n})();function _b(n){let e=n.children&&n.children.map(_b),t=e?ve(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Se&&(t.component=yb),t}function Yz(n,e,t){let r=tf(n,e._root,t?t._root:void 0);return new Xh(r,e)}function tf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Jz(n,e,t);return new br(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>tf(n,a)),o}}let r=Zz(e.value),i=e.children.map(s=>tf(n,s));return new br(r,i)}}function Jz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return tf(n,r,i);return tf(n,r)})}function Zz(n){return new Gi(new wn(n.url),new wn(n.params),new wn(n.queryParams),new wn(n.fragment),new wn(n.data),n.outlet,n.component,n)}var al=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},GO="ngNavigationCancelingError";function Vy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WO(!1,er.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function WO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[GO]=!0,t.cancellationCode=e,t}function Xz(n){return KO(n)&&qo(n.url)}function KO(n){return!!n&&n[GO]}var e3=(n,e,t,r)=>Ve(i=>(new hb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),hb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),tb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Xu(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Xu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Oy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ky(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(tb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),tb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Uy=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},nl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function t3(n,e,t){let r=n._root,i=e?e._root:null;return Wh(r,i,t,[r.value])}function n3(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ll(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!II(n)?n:e.get(n):r}function Wh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Xu(e);return n.children.forEach(o=>{r3(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Qh(a,t.getContext(o),i)),i}function r3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=i3(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Uy(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Wh(n,e,a?a.children:null,r,i):Wh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new nl(a.outlet.component,o))}else o&&Qh(e,a,i),i.canActivateChecks.push(new Uy(r)),s.component?Wh(n,null,a?a.children:null,r,i):Wh(n,null,t,r,i);return i}function i3(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!hc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hc(n.url,e.url)||!Hi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lb(n,e)||!Hi(n.queryParams,e.queryParams);case"paramsChange":default:return!lb(n,e)}}function Qh(n,e,t){let r=Xu(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Qh(o,e.children.getContext(s),t):Qh(o,null,t):Qh(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new nl(e.outlet.component,i)):t.canDeactivateChecks.push(new nl(null,i)):t.canDeactivateChecks.push(new nl(null,i))}function of(n){return typeof n=="function"}function s3(n){return typeof n=="boolean"}function o3(n){return n&&of(n.canLoad)}function a3(n){return n&&of(n.canActivate)}function c3(n){return n&&of(n.canActivateChild)}function u3(n){return n&&of(n.canDeactivate)}function l3(n){return n&&of(n.canMatch)}function QO(n){return n instanceof Va||n?.name==="EmptyError"}var _y=Symbol("INITIAL_VALUE");function cl(){return xn(n=>xg(n.map(e=>e.pipe(bn(1),Fg(_y)))).pipe(Ve(e=>{for(let t of e)if(t!==!0){if(t===_y)return _y;if(t===!1||d3(t))return t}return!0}),On(e=>e!==_y),bn(1)))}function d3(n){return qo(n)||n instanceof al}function YO(n){return n.aborted?Ne(void 0).pipe(bn(1)):new ge(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function JO(n){return Jd(YO(n))}function h3(n,e){return Tn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Ne(ve(q({},t),{guardsResult:!0})):f3(o,r,i,n).pipe(Tn(a=>a&&s3(a)?p3(r,s,n,e):Ne(a)),Ve(a=>ve(q({},t),{guardsResult:a})))})}function f3(n,e,t,r){return wt(n).pipe(Tn(i=>v3(i.component,i.route,t,e,r)),vs(i=>i!==!0,!0))}function p3(n,e,t,r){return wt(e).pipe(Au(i=>Cu(m3(i.route.parent,r),g3(i.route,r),_3(n,i.path,t),y3(n,i.route,t))),vs(i=>i!==!0,!0))}function g3(n,e){return n!==null&&e&&e(new My(n)),Ne(!0)}function m3(n,e){return n!==null&&e&&e(new Py(n)),Ne(!0)}function y3(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Ne(!0);let i=r.map(s=>Yd(()=>{let o=ul(e)??t,a=ll(s,o),c=a3(a)?a.canActivate(e,n):Kt(o,()=>a(e,n));return gc(c).pipe(vs())}));return Ne(i).pipe(cl())}function _3(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>n3(o)).filter(o=>o!==null).map(o=>Yd(()=>{let a=o.guards.map(c=>{let d=ul(o.node)??t,h=ll(c,d),g=c3(h)?h.canActivateChild(r,n):Kt(d,()=>h(r,n));return gc(g).pipe(vs())});return Ne(a).pipe(cl())}));return Ne(s).pipe(cl())}function v3(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Ne(!0);let o=s.map(a=>{let c=ul(e)??i,d=ll(a,c),h=u3(d)?d.canDeactivate(n,e,t,r):Kt(c,()=>d(n,e,t,r));return gc(h).pipe(vs())});return Ne(o).pipe(cl())}function E3(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Ne(!0);let o=s.map(a=>{let c=ll(a,n),d=o3(c)?c.canLoad(e,t):Kt(n,()=>c(e,t)),h=gc(d);return i?h.pipe(JO(i)):h});return Ne(o).pipe(cl(),ZO(r))}function ZO(n){return pg(Dn(e=>{if(typeof e!="boolean")throw Vy(n,e)}),Ve(e=>e===!0))}function I3(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Ne(!0);let o=s.map(a=>{let c=ll(a,n),d=l3(c)?c.canMatch(e,t):Kt(n,()=>c(e,t)),h=gc(d);return i?h.pipe(JO(i)):h});return Ne(o).pipe(cl(),ZO(r))}var dc=class XO extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,XO.prototype)}},fb=class ex extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,ex.prototype)}};function w3(n){throw new ee(4e3,!1)}function T3(n){throw WO(!1,er.GuardRejected)}var b3=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Se])throw w3(`${e.redirectTo}`);i=i.children[Se]}}async applyRedirectCommands(e,t,r,i,s){let o=await D3(t,i,s);if(o instanceof mi)throw new fb(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new fb(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new mi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ct(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function D3(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:g}=e;return wy(gc(Kt(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:g}))))}var pb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function C3(n,e,t,r,i,s){let o=tx(n,e,t);return o.matched?(r=Wz(e,r),I3(r,e,t,i,s).pipe(Ve(a=>a===!0?o:q({},pb)))):Ne(o)}function tx(n,e,t){if(e.path==="**")return S3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},pb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||DO)(t,n,e);if(!i)return q({},pb);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?q(q({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function S3(n){return{matched:!0,parameters:n.length>0?SO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wO(n,e,t,r){return t.length>0&&N3(n,t,r)?{segmentGroup:new ct(e,R3(r,new ct(t,n.children))),slicedSegments:[]}:t.length===0&&P3(n,t,r)?{segmentGroup:new ct(n.segments,A3(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ct(n.segments,n.children),slicedSegments:t}}function A3(n,e,t,r){let i={};for(let s of t)if(By(n,e,s)&&!r[gi(s)]){let o=new ct([],{});i[gi(s)]=o}return q(q({},r),i)}function R3(n,e){let t={};t[Se]=e;for(let r of n)if(r.path===""&&gi(r)!==Se){let i=new ct([],{});t[gi(r)]=i}return t}function N3(n,e,t){return t.some(r=>By(n,e,r)&&gi(r)!==Se)}function P3(n,e,t){return t.some(r=>By(n,e,r))}function By(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function k3(n,e,t){return e.length===0&&!n.children[t]}var M3=class{};async function O3(n,e,t,r,i,s,o="emptyOnly",a){return new L3(n,e,t,r,i,o,s,a).recognize()}var x3=31,L3=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new b3(this.urlSerializer,this.urlTree)}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}async recognize(){let e=wO(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new br(r,t),s=new ef("",i),o=FO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new fc([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Se,t),rootSnapshot:t}}catch(r){if(r instanceof fb)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dc?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof br?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=Kz(t,c),g=await this.processSegmentGroup(e,h,d,c,i);o.push(...g)}let a=nx(o);return F3(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof dc||QO(d))continue;throw d}if(k3(r,i,s))return new M3;throw new dc(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(gi(r)!==o&&(o===Se||!By(i,s,r)))throw new dc(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new dc(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:T}=tx(t,i,s);if(!c)throw new dc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>x3&&(this.allowRedirects=!1));let C=new fc(s,d,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,TO(i),gi(i),i.component??i._loadedComponent??null,i,bO(i)),R=Fy(C,a,this.paramsInheritanceStrategy);if(C.params=Object.freeze(R.params),C.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let M=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,C,e),k=await this.applyRedirects.lineralizeSegments(i,M);return this.processSegment(e,r,t,k.concat(T),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await wy(C3(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new dc(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:T}=a,C=new fc(g,h,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,TO(r),gi(r),r.component??r._loadedComponent??null,r,bO(r)),R=Fy(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(R.params),C.data=Object.freeze(R.data);let{segmentGroup:M,slicedSegments:k}=wO(t,g,T,c);if(k.length===0&&M.hasChildren()){let B=await this.processChildren(d,c,M,C);return new br(C,B)}if(c.length===0&&k.length===0)return new br(C,[]);let H=gi(r)===s,$=await this.processSegment(d,c,M,k,H?Se:s,!0,C);return new br(C,$ instanceof br?[$]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await wy(E3(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw T3(t)}return{routes:[],injector:e}}};function F3(n){n.sort((e,t)=>e.value.outlet===Se?-1:t.value.outlet===Se?1:e.value.outlet.localeCompare(t.value.outlet))}function V3(n){let e=n.value.routeConfig;return e&&e.path===""}function nx(n){let e=[],t=new Set;for(let r of n){if(!V3(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=nx(r.children);e.push(new br(r.value,i))}return e.filter(r=>!t.has(r))}function TO(n){return n.data||{}}function bO(n){return n.resolve||{}}var U3=new ne("",{factory:()=>O3});function j3(n,e,t,r,i,s,o){let a=n.get(U3);return Tn(c=>Ne(c).pipe(xn(d=>a(n,e,t,r,d.extractedUrl,i,s,o)),Ve(({state:d,tree:h})=>ve(q({},c),{targetSnapshot:d,urlAfterRedirects:h}))))}function B3(n,e){return Tn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ne(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of rx(c))o.add(d);let a=0;return wt(o).pipe(Au(c=>s.has(c)?$3(c,r,n,e):(c.data=Fy(c,c.parent,n).resolve,Ne(void 0))),Dn(()=>a++),Lg(1),Tn(c=>a===o.size?Ne(t):cr))})}function rx(n){let e=n.children.map(t=>rx(t)).flat();return[n,...e]}function $3(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!qO(i)&&(s[nf]=i.title),Yd(()=>(n.data=Fy(n,n.parent,t).resolve,H3(s,n,e,r).pipe(Ve(o=>(n._resolvedData=o,n.data=q(q({},n.data),o),null)))))}function H3(n,e,t,r){let i=ib(n);if(i.length===0)return Ne({});let s={};return wt(i).pipe(Tn(o=>q3(n[o],e,t,r).pipe(vs(),Dn(a=>{if(a instanceof al)throw Vy(new xs,a);s[o]=a}))),Lg(1),Ve(()=>s),Su(o=>QO(o)?cr:ZE(o)))}function q3(n,e,t,r){let i=ul(e)??r,s=ll(n,i),o=s.resolve?s.resolve(e,t):Kt(i,()=>s(e,t));return gc(o)}function nb(n){return xn(e=>{let t=n(e);return t?wt(t).pipe(Ve(()=>e)):Ne(e)})}var vb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Se);return r}getResolvedTitleForRoute(t){return t.data[nf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>V(ix),providedIn:"root"})}return n})(),ix=(()=>{class n extends vb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(mO))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Go=new ne("",{factory:()=>({})}),_c=new ne(""),$y=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=V(CT);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await AO(Kt(t,()=>r.loadComponent())),o=await ax(ox(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await sx(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function sx(n,e,t,r){let i=await AO(Kt(t,()=>n.loadChildren())),s=await ax(ox(i)),o;s instanceof $m||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,c=a.get(_c,[],{optional:!0,self:!0}).flat()),{routes:c.map(_b),injector:a}}function z3(n){return n&&typeof n=="object"&&"default"in n}function ox(n){return z3(n)?n.default:n}async function ax(n){return n}var Hy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>V(G3),providedIn:"root"})}return n})(),G3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Eb=new ne(""),Ib=new ne("");function cx(n,e,t){let r=n.get(Ib),i=n.get(Ut);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=i.startViewTransition(()=>(s(),W3(n)));a.ready.catch(d=>{}),a.finished.catch(d=>{});let{onViewTransitionCreated:c}=r;return c&&Kt(n,()=>c({transition:a,from:e,to:t})),o}function W3(n){return new Promise(e=>{Vm({read:()=>setTimeout(e)},{injector:n})})}var K3=()=>{},wb=new ne(""),qy=(()=>{class n{currentNavigation=jt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=jt(null);events=new It;transitionAbortWithErrorSubject=new It;configLoader=V($y);environmentInjector=V(Vt);destroyRef=V(Vi);urlSerializer=V(mc);rootContexts=V(yc);location=V(Bo);inputBindingEnabled=V(sf,{optional:!0})!==null;titleStrategy=V(vb);options=V(Go,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=V(Hy);createViewTransition=V(Eb,{optional:!0});navigationErrorHandler=V(wb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ne(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ry(i)),r=i=>this.events.next(new Ny(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Bt(()=>{this.transitions?.next(ve(q({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new wn(null),this.transitions.pipe(On(r=>r!==null),xn(r=>{let i=!1,s=new AbortController;return Ne(r).pipe(xn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",er.SupersededByNewNavigation),cr;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ve(q({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload")return this.events.next(new zi(o.id,this.urlSerializer.serialize(o.rawUrl),"",rl.IgnoredSameUrlNavigation)),o.resolve(!1),cr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Ne(o).pipe(xn(h=>(this.events.next(new zo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?cr:Promise.resolve(h))),j3(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Dn(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(T=>(T.finalUrl=h.urlAfterRedirects,T));let g=new Jh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:g,source:T,restoredState:C,extras:R}=o,M=new zo(h,this.urlSerializer.serialize(g),T,C);this.events.next(M);let k=$O(this.rootComponentType).snapshot;return this.currentTransition=r=ve(q({},o),{targetSnapshot:k,urlAfterRedirects:g,extras:ve(q({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=g,H)),Ne(r)}else return this.events.next(new zi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",rl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),cr}),Dn(o=>{let a=new Dy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ve(o=>(this.currentTransition=r=ve(q({},o),{guards:t3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),h3(this.environmentInjector,o=>this.events.next(o)),Dn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Vy(this.urlSerializer,o.guardsResult);let a=new Cy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),On(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",er.GuardRejected),!1)),nb(o=>{if(o.guards.canActivateChecks.length!==0)return Ne(o).pipe(Dn(a=>{let c=new Sy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),xn(a=>{let c=!1;return Ne(a).pipe(B3(this.paramsInheritanceStrategy,this.environmentInjector),Dn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",er.NoDataFromResolver)}}))}),Dn(a=>{let c=new Ay(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),nb(o=>{let a=d=>{let h=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let g=ul(d)??this.environmentInjector;h.push(this.configLoader.loadComponent(g,d.routeConfig).then(T=>{d.component=T}))}for(let g of d.children)h.push(...a(g));return h},c=a(o.targetSnapshot.root);return c.length===0?Ne(o):wt(Promise.all(c).then(()=>o))}),nb(()=>this.afterPreactivation()),xn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?wt(c).pipe(Ve(()=>r)):Ne(r)}),Ve(o=>{let a=Yz(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ve(q({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Dn(()=>{this.events.next(new Zh)}),e3(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),bn(1),Jd(YO(s.signal).pipe(On(()=>!i&&!r.targetRouterState),Dn(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",er.Aborted)}))),Dn({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=K3,a)),this.lastSuccessfulNavigation.set(Bt(this.currentNavigation)),this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Jd(this.transitionAbortWithErrorSubject.pipe(Dn(o=>{throw o}))),tI(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",er.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Su(o=>{if(this.destroyed)return r.resolve(!1),cr;if(i=!0,KO(o))this.events.next(new qi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Xz(o)?this.events.next(new ol(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new il(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Kt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof al){let{message:d,cancellationCode:h}=Vy(this.urlSerializer,c);this.events.next(new qi(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new ol(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return cr}))}))}cancelNavigationTransition(t,r,i){let s=new qi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Bt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q3(n){return n!==tl}var ux=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>V(Y3),providedIn:"root"})}return n})(),jy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Y3=(()=>{class n extends jy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ic(n)))(i||n)}})();static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tb=(()=>{class n{urlSerializer=V(mc);options=V(Go,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=V(Bo);urlHandlingStrategy=V(Hy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof mi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=$O(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:()=>V(lx),providedIn:"root"})}return n})(),lx=(()=>{class n extends Tb{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof zo?this.updateStateMemento():t instanceof zi?this.commitTransition(r):t instanceof Jh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof qi&&t.code!==er.SupersededByNewNavigation&&t.code!==er.Redirect?this.restoreHistory(r):t instanceof il?this.restoreHistory(r,!0):t instanceof Cr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=q(q({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=q(q({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ic(n)))(i||n)}})();static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zy(n,e){n.events.pipe(On(t=>t instanceof Cr||t instanceof qi||t instanceof il||t instanceof zi),Ve(t=>t instanceof Cr||t instanceof zi?0:(t instanceof qi?t.code===er.Redirect||t.code===er.SupersededByNewNavigation:!1)?2:1),On(t=>t!==2),bn(1)).subscribe(()=>{e()})}var J3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=V(gT);stateManager=V(Tb);options=V(Go,{optional:!0})||{};pendingTasks=V(Ui);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=V(qy);urlSerializer=V(mc);location=V(Bo);urlHandlingStrategy=V(Hy);injector=V(Vt);_events=new It;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=V(ux);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=V(_c,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!V(sf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ft;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Bt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof qi&&r.code!==er.Redirect&&r.code!==er.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cr)this.navigated=!0;else if(r instanceof ol){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Q3(i.source)},o);this.scheduleNavigation(a,tl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Gz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),tl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=q({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(lr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Bt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_b),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=q(q({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let T=i?i.snapshot:this.routerState.snapshot.root;g=VO(T)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return UO(g,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=qo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,tl,null,r)}navigate(t,r={skipLocationChange:!1}){return X3(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Mi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=q({},J3):r===!1?i=q({},Z3):i=r,qo(t))return yO(this.currentUrlTree,t,i);let s=this.parseUrl(t);return yO(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,T)=>{a=g,c=T});let h=this.pendingTasks.add();return zy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}var dl=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=jt(null);get href(){return Bt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new It;applicationErrorHandler=V(lr);options=V(Go,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(V(new Jm("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Cr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(qo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:qo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(je(pn),je(Gi),Th("tabindex"),je(Ss),je(Ir),je(fi))};static \u0275dir=Xn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&St("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Sh("href",i.reactiveHref(),Yw)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",uc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",uc],replaceUrl:[2,"replaceUrl","replaceUrl",uc],routerLink:"routerLink"},features:[Ds]})}return n})(),Db=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Wt;link=V(dl,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof Cr&&this.update()})}ngAfterContentInit(){Ne(this.links.changes,Ne(null)).pipe(So()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=wt(t).pipe(So()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=e9(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(je(pn),je(Ir),je(Ss),je(ks))};static \u0275dir=Xn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&ET(s,dl,5),r&2){let o;IT(o=wT())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Ds]})}return n})();function e9(n){return!!n.paths}var af=class{};var dx=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(On(t=>t instanceof Cr),Au(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Wu(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return wt(i).pipe(So())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=wt(this.loader.loadChildren(t,r)):i=Ne(null);let s=i.pipe(Tn(o=>o===null?Ne(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(t,r);return wt([s,o]).pipe(So())}else return s})}static \u0275fac=function(r){return new(r||n)(me(pn),me(Vt),me(af),me($y))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hx=new ne(""),t9=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=tl;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof zi&&t.code===rl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof sl))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new sl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){hT()};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();function Cb(n,...e){return Jn([{provide:_c,multi:!0,useValue:n},[],{provide:Gi,useFactory:fx},{provide:Ch,multi:!0,useFactory:px},e.map(t=>t.\u0275providers)])}function fx(){return V(pn).routerState.root}function cf(n,e){return{\u0275kind:n,\u0275providers:e}}function px(){let n=V(Ct);return e=>{let t=n.get(di);if(e!==t.components[0])return;let r=n.get(pn),i=n.get(gx);n.get(Sb)===1&&r.initialNavigation(),n.get(_x,null,{optional:!0})?.setUpPreloading(),n.get(hx,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gx=new ne("",{factory:()=>new It}),Sb=new ne("",{factory:()=>1});function mx(){let n=[{provide:Ww,useValue:!0},{provide:Sb,useValue:0},Ku(()=>{let e=V(Ct);return e.get(OT,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(pn),s=e.get(gx);zy(i,()=>{r(!0)}),e.get(qy).afterPreactivation=()=>(r(!0),s.closed?Ne(void 0):s),i.initialNavigation()}))})];return cf(2,n)}function yx(){let n=[Ku(()=>{V(pn).setUpLocationChangeListener()}),{provide:Sb,useValue:2}];return cf(3,n)}var _x=new ne("");function vx(n){return cf(0,[{provide:_x,useExisting:dx},{provide:af,useExisting:n}])}function Ex(){return cf(8,[mb,{provide:sf,useExisting:mb}])}function Ix(n){ac("NgRouterViewTransitions");let e=[{provide:Eb,useValue:cx},{provide:Ib,useValue:q({skipNextTransition:!!n?.skipInitialTransition},n)}];return cf(9,e)}var wx=[Bo,{provide:mc,useClass:xs},pn,yc,{provide:Gi,useFactory:fx},$y,[]],Ab=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[wx,[],{provide:_c,multi:!0,useValue:t},[],r?.errorHandler?{provide:wb,useValue:r.errorHandler}:[],{provide:Go,useValue:r||{}},r?.useHash?r9():i9(),n9(),r?.preloadingStrategy?vx(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?s9(r):[],r?.bindToComponentInputs?Ex().\u0275providers:[],r?.enableViewTransitions?Ix().\u0275providers:[],o9()]}}static forChild(t){return{ngModule:n,providers:[{provide:_c,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=li({type:n});static \u0275inj=Fr({})}return n})();function n9(){return{provide:hx,useFactory:()=>{let n=V(cO),e=V(We),t=V(Go),r=V(qy),i=V(mc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new t9(i,r,n,e,t)}}}function r9(){return{provide:fi,useClass:jT}}function i9(){return{provide:fi,useClass:ty}}function s9(n){return[n.initialNavigation==="disabled"?yx().\u0275providers:[],n.initialNavigation==="enabledBlocking"?mx().\u0275providers:[]]}var bb=new ne("");function o9(){return[{provide:bb,useFactory:px},{provide:Ch,multi:!0,useExisting:bb}]}var Tx=()=>{};var Cx=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},c9=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,T=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(T=64)),r.push(t[h],t[g],t[T],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Cx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):c9(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new Nb;let T=s<<2|a>>4;if(r.push(T),d!==64){let C=a<<4&240|d>>2;if(r.push(C),g!==64){let R=d<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Nb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},u9=function(n){let e=Cx(n);return Gy.encodeByteArray(e,!0)},lf=function(n){return u9(n).replace(/\./g,"")},Wy=function(n){try{return Gy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var l9=()=>kb().__FIREBASE_DEFAULTS__,d9=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Wy(n[1]);return e&&JSON.parse(e)},Ky=()=>{try{return Tx()||l9()||d9()||h9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Mb=n=>{var e,t;return(t=(e=Ky())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Sx=n=>{let e=Mb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ob=()=>{var n;return(n=Ky())===null||n===void 0?void 0:n.config},xb=n=>{var e;return(e=Ky())===null||e===void 0?void 0:e[`_${n}`]};var vc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Wo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qy(n){return(await fetch(n,{credentials:"include"})).ok}function Ax(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lf(JSON.stringify(t)),lf(JSON.stringify(o)),""].join(".")}var uf={};function f9(){let n={prod:[],emulator:[]};for(let e of Object.keys(uf))uf[e]?n.emulator.push(e):n.prod.push(e);return n}function p9(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var bx=!1;function Yy(n,e){if(typeof window>"u"||typeof document>"u"||!Wo(window.location.host)||uf[n]===e||uf[n]||bx)return;uf[n]=e;function t(T){return`__firebase__banner__${T}`}let r="__firebase__banner",s=f9().prod.length>0;function o(){let T=document.getElementById(r);T&&T.remove()}function a(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function c(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function d(){let T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{bx=!0,o()},T}function h(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function g(){let T=p9(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),M=t("learnmore"),k=document.getElementById(M)||document.createElement("a"),H=t("preprendIcon"),$=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){let B=T.element;a(B),h(k,M);let se=d();c($,H),B.append($,R,k,se),document.body.appendChild(B)}s?(R.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function g9(){var n;let e=(n=Ky())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Px(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mx(){let n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ox(){return!g9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function df(){try{return typeof indexedDB=="object"}catch{return!1}}function xx(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var m9="FirebaseError",Sr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=m9,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yi.prototype.create)}},yi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?y9(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sr(i,a,r)}};function y9(n,e){return n.replace(_9,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _9=/\{\$([^}]+)}/g;function Lx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Dx(s)&&Dx(o)){if(!Wi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Dx(n){return n!==null&&typeof n=="object"}function hl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fx(n,e){let t=new Pb(n,e);return t.subscribe.bind(t)}var Pb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");v9(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Rb),i.error===void 0&&(i.error=Rb),i.complete===void 0&&(i.complete=Rb);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function v9(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rb(){}var $ge=14400*1e3;function tr(n){return n&&n._delegate?n._delegate:n}var nr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ec="[DEFAULT]";var Lb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new vc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I9(e))try{this.getOrInitializeService({instanceIdentifier:Ec})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ec){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ec){return this.instances.has(e)}getOptions(e=Ec){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:E9(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ec){return this.component?this.component.multipleInstances?e:Ec:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function E9(n){return n===Ec?void 0:n}function I9(n){return n.instantiationMode==="EAGER"}var Jy=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Lb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var w9=[],He=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(He||{}),T9={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},b9=He.INFO,D9={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},C9=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=D9[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ki=class{constructor(e){this.name=e,this._logLevel=b9,this._logHandler=C9,this._userLogHandler=null,w9.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?T9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}};var S9=(n,e)=>e.some(t=>n instanceof t),Vx,Ux;function A9(){return Vx||(Vx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R9(){return Ux||(Ux=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jx=new WeakMap,Vb=new WeakMap,Bx=new WeakMap,Fb=new WeakMap,jb=new WeakMap;function N9(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Qi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&jx.set(t,n)}).catch(()=>{}),jb.set(e,n),e}function P9(n){if(Vb.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Vb.set(n,e)}var Ub={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $x(n){Ub=n(Ub)}function k9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Zy(this),e,...t);return Bx.set(r,e.sort?e.sort():[e]),Qi(r)}:R9().includes(n)?function(...e){return n.apply(Zy(this),e),Qi(jx.get(this))}:function(...e){return Qi(n.apply(Zy(this),e))}}function M9(n){return typeof n=="function"?k9(n):(n instanceof IDBTransaction&&P9(n),S9(n,A9())?new Proxy(n,Ub):n)}function Qi(n){if(n instanceof IDBRequest)return N9(n);if(Fb.has(n))return Fb.get(n);let e=M9(n);return e!==n&&(Fb.set(n,e),jb.set(e,n)),e}var Zy=n=>jb.get(n);function qx(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Qi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Qi(o.result),c.oldVersion,c.newVersion,Qi(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var O9=["get","getKey","getAll","getAllKeys","count"],x9=["put","add","delete","clear"],Bb=new Map;function Hx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bb.get(e))return Bb.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=x9.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||O9.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return Bb.set(e,s),s}$x(n=>ve(q({},n),{get:(e,t,r)=>Hx(e,t)||n.get(e,t,r),has:(e,t)=>!!Hx(e,t)||n.has(e,t)}));var Hb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(L9(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function L9(n){let e=n.getComponent();return e?.type==="VERSION"}var qb="@firebase/app",zx="0.13.2";var Ls=new Ki("@firebase/app"),F9="@firebase/app-compat",V9="@firebase/analytics-compat",U9="@firebase/analytics",j9="@firebase/app-check-compat",B9="@firebase/app-check",$9="@firebase/auth",H9="@firebase/auth-compat",q9="@firebase/database",z9="@firebase/data-connect",G9="@firebase/database-compat",W9="@firebase/functions",K9="@firebase/functions-compat",Q9="@firebase/installations",Y9="@firebase/installations-compat",J9="@firebase/messaging",Z9="@firebase/messaging-compat",X9="@firebase/performance",eG="@firebase/performance-compat",tG="@firebase/remote-config",nG="@firebase/remote-config-compat",rG="@firebase/storage",iG="@firebase/storage-compat",sG="@firebase/firestore",oG="@firebase/ai",aG="@firebase/firestore-compat",cG="firebase",uG="11.10.0";var zb="[DEFAULT]",lG={[qb]:"fire-core",[F9]:"fire-core-compat",[U9]:"fire-analytics",[V9]:"fire-analytics-compat",[B9]:"fire-app-check",[j9]:"fire-app-check-compat",[$9]:"fire-auth",[H9]:"fire-auth-compat",[q9]:"fire-rtdb",[z9]:"fire-data-connect",[G9]:"fire-rtdb-compat",[W9]:"fire-fn",[K9]:"fire-fn-compat",[Q9]:"fire-iid",[Y9]:"fire-iid-compat",[J9]:"fire-fcm",[Z9]:"fire-fcm-compat",[X9]:"fire-perf",[eG]:"fire-perf-compat",[tG]:"fire-rc",[nG]:"fire-rc-compat",[rG]:"fire-gcs",[iG]:"fire-gcs-compat",[sG]:"fire-fst",[aG]:"fire-fst-compat",[oG]:"fire-vertex","fire-js":"fire-js",[cG]:"fire-js-all"};var hf=new Map,dG=new Map,Gb=new Map;function Gx(n,e){try{n.container.addComponent(e)}catch(t){Ls.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _i(n){let e=n.name;if(Gb.has(e))return Ls.debug(`There were multiple attempts to register component ${e}.`),!1;Gb.set(e,n);for(let t of hf.values())Gx(t,n);for(let t of dG.values())Gx(t,n);return!0}function fl(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ar(n){return n==null?!1:n.settings!==void 0}var hG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ko=new yi("app","Firebase",hG);var Wb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ko.create("app-deleted",{appName:this._name})}};var Qo=uG;function Yb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:zb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ko.create("bad-app-name",{appName:String(i)});if(t||(t=Ob()),!t)throw Ko.create("no-options");let s=hf.get(i);if(s){if(Wi(t,s.options)&&Wi(r,s.config))return s;throw Ko.create("duplicate-app",{appName:i})}let o=new Jy(i);for(let c of Gb.values())o.addComponent(c);let a=new Wb(t,r,o);return hf.set(i,a),a}function Ic(n=zb){let e=hf.get(n);if(!e&&n===zb&&Ob())return Yb();if(!e)throw Ko.create("no-app",{appName:n});return e}function Xy(){return Array.from(hf.values())}function kt(n,e,t){var r;let i=(r=lG[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ls.warn(a.join(" "));return}_i(new nr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var fG="firebase-heartbeat-database",pG=1,ff="firebase-heartbeat-store",$b=null;function Yx(){return $b||($b=qx(fG,pG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ff)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ko.create("idb-open",{originalErrorMessage:n.message})})),$b}async function gG(n){try{let t=(await Yx()).transaction(ff),r=await t.objectStore(ff).get(Jx(n));return await t.done,r}catch(e){if(e instanceof Sr)Ls.warn(e.message);else{let t=Ko.create("idb-get",{originalErrorMessage:e?.message});Ls.warn(t.message)}}}async function Wx(n,e){try{let r=(await Yx()).transaction(ff,"readwrite");await r.objectStore(ff).put(e,Jx(n)),await r.done}catch(t){if(t instanceof Sr)Ls.warn(t.message);else{let r=Ko.create("idb-set",{originalErrorMessage:t?.message});Ls.warn(r.message)}}}function Jx(n){return`${n.name}!${n.options.appId}`}var mG=1024,yG=30,Kb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Qb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>yG){let o=vG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Kx(),{heartbeatsToSend:r,unsentEntries:i}=_G(this._heartbeatsCache.heartbeats),s=lf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ls.warn(t),""}}};function Kx(){return new Date().toISOString().substring(0,10)}function _G(n,e=mG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Qx(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Qx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Qb=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return df()?xx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await gG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Wx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Wx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function Qx(n){return lf(JSON.stringify({version:2,heartbeats:n})).length}function vG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function EG(n){_i(new nr("platform-logger",e=>new Hb(e),"PRIVATE")),_i(new nr("heartbeat",e=>new Kb(e),"PRIVATE")),kt(qb,zx,n),kt(qb,zx,"esm2017"),kt("fire-js","")}EG("");var IG="firebase",wG="11.10.0";kt(IG,wG,"app");function Zx(n){n===void 0&&(n=V(Ct));let e=n.get(Vu);return t=>new ge(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Yo=new Ao("ANGULARFIRE2_VERSION");function pf(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var gl=(n,e)=>{let t=e?[e]:Xy(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},pl=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(pl||{}),Xx=Ju()&&typeof Zone<"u"?pl.WARN:pl.SILENT;var e_=class{zone;delegate;constructor(e,t=JE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Jo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=V(We);this.outsideAngular=t.runOutsideAngular(()=>new e_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new e_(typeof Zone>"u"?void 0:Zone.current,YE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e1=!1;function TG(n,e){!e1&&(Xx>pl.SILENT||Ju())&&(e1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Xx>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function bG(n){let e=V(We,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function wc(n){let e=V(We,{optional:!0});return e?e.run(()=>n()):n()}var DG=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Kt(t,()=>wc(()=>n.apply(void 0,r)))),rr=(n,e,t)=>(t||=e?pl.WARN:pl.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=V(Jo),o=V(Vu),a=V(Vt)}catch{return TG(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=wc(()=>o.add())),i[d]=DG(i[d],r,a));let c=bG(()=>n.apply(this,i));return e?c instanceof ge?c.pipe(Co(s.outsideAngular),Do(s.insideAngular),Zx(a)):c instanceof Promise?wc(()=>{let d=o.add();return new Promise((h,g)=>{c.then(T=>Kt(a,()=>wc(()=>h(T))),T=>Kt(a,()=>wc(()=>g(T)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:wc(()=>c):c instanceof ge?c.pipe(Co(s.outsideAngular),Do(s.insideAngular)):wc(()=>c)});var Fs=class{constructor(e){return e}},Tc=class{constructor(){return Xy()}};function CG(n){return n&&n.length===1?n[0]:new Fs(Ic())}var Jb=new ne("angularfire2._apps"),SG={provide:Fs,useFactory:CG,deps:[[new Er,Jb]]},AG={provide:Tc,deps:[[new Er,Jb]]};function RG(n){return(e,t)=>{let r=t.get(sc);kt("angularfire",Yo.full,"core"),kt("angularfire",Yo.full,"app"),kt("angular",_I.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Fs(i)}}function t1(n,...e){return Jn([SG,AG,{provide:Jb,useFactory:RG(n),multi:!0,deps:[We,Ct,Jo,...e]}])}var n1=rr(Yb,!0);var NG=new Map,PG={activated:!1,tokenObservers:[]},kG={initialized:!1,enabled:!1};function vi(n){return NG.get(n)||Object.assign({},PG)}function o1(){return kG}var MG="https://content-firebaseappcheck.googleapis.com/v1";var OG="exchangeDebugToken",r1={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},$me=1440*60*1e3;var eD=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new vc,this.pending.promise.catch(t=>{}),await xG(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new vc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function xG(n){return new Promise(e=>{setTimeout(e,n)})}var LG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Zo=new yi("appCheck","AppCheck",LG);function a1(n){if(!vi(n).activated)throw Zo.create("use-before-activation",{appName:n.name})}async function c1({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let g=await i.getHeartbeatsHeader();g&&(r["X-Firebase-Client"]=g)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(g){throw Zo.create("fetch-network-error",{originalErrorMessage:g?.message})}if(o.status!==200)throw Zo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(g){throw Zo.create("fetch-parse-error",{originalErrorMessage:g?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Zo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function u1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${MG}/projects/${t}/apps/${r}:${OG}?key=${i}`,body:{debug_token:e}}}var FG="firebase-app-check-database",VG=1,tD="firebase-app-check-store";var t_=null;function UG(){return t_||(t_=new Promise((n,e)=>{try{let t=indexedDB.open(FG,VG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Zo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(tD,{keyPath:"compositeKey"})}}}catch(t){e(Zo.create("storage-open",{originalErrorMessage:t?.message}))}}),t_)}function jG(n,e){return BG($G(n),e)}async function BG(n,e){let r=(await UG()).transaction(tD,"readwrite"),s=r.objectStore(tD).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(Zo.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function $G(n){return`${n.options.appId}-${n.name}`}var gf=new Ki("@firebase/app-check");function Zb(n,e){return df()?jG(n,e).catch(t=>{gf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function l1(){return o1().enabled}async function d1(){let n=o1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var HG={error:"UNKNOWN_ERROR"};function qG(n){return Gy.encodeString(JSON.stringify(n),!1)}async function nD(n,e=!1,t=!1){let r=n.app;a1(r);let i=vi(r),s=i.token,o;if(s&&!mf(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(mf(d)?s=d:await Zb(r,void 0))}if(!e&&s&&mf(s))return{token:s.token};let a=!1;if(l1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=c1(u1(r,await d1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await Zb(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?gf.warn(d.message):t&&gf.error(d),Xb(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await vi(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?gf.warn(d.message):t&&gf.error(d),o=d}let c;return s?o?mf(s)?c={token:s.token,internalError:o}:c=Xb(o):(c={token:s.token},i.token=s,await Zb(r,s)):c=Xb(o),a&&KG(r,c),c}async function zG(n){let e=n.app;a1(e);let{provider:t}=vi(e);if(l1()){let r=await d1(),{token:i}=await c1(u1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function GG(n,e,t,r){let{app:i}=n,s=vi(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&mf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),i1(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>i1(n))}function h1(n,e){let t=vi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function i1(n){let{app:e}=n,t=vi(e),r=t.tokenRefresher;r||(r=WG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WG(n){let{app:e}=n;return new eD(async()=>{let t=vi(e),r;if(t.token?r=await nD(n,!0):r=await nD(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},r1.RETRIAL_MIN_WAIT,r1.RETRIAL_MAX_WAIT)}function KG(n,e){let t=vi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mf(n){return n.expireTimeMillis-Date.now()>0}function Xb(n){return{token:qG(HG),error:n}}var rD=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=vi(this.app);for(let t of e)h1(this.app,t.next);return Promise.resolve()}};function QG(n,e){return new rD(n,e)}function YG(n){return{getToken:e=>nD(n,e),getLimitedUseToken:()=>zG(n),addTokenListener:e=>GG(n,"INTERNAL",e),removeTokenListener:e=>h1(n.app,e)}}var JG="@firebase/app-check",ZG="0.10.1";var XG="app-check",s1="app-check-internal";function e5(){_i(new nr(XG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return QG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(s1).initialize()})),_i(new nr(s1,n=>{let e=n.getProvider("app-check").getImmediate();return YG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),kt(JG,ZG)}e5();var t5="app-check";var ml=class{constructor(){return gl(t5)}};var n5=["localhost","0.0.0.0","127.0.0.1"],eye=typeof window<"u"&&n5.includes(window.location.hostname);var f1=()=>{};var p1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},r5=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},g1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,T=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(T=64)),r.push(t[h],t[g],t[T],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(p1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):r5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new sD;let T=s<<2|a>>4;if(r.push(T),d!==64){let C=a<<4&240|d>>2;if(r.push(C),g!==64){let R=d<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},sD=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},i5=function(n){let e=p1(n);return g1.encodeByteArray(e,!0)},aD=function(n){return i5(n).replace(/\./g,"")},n_=function(n){try{return g1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var s5=()=>m1().__FIREBASE_DEFAULTS__,o5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},a5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&n_(n[1]);return e&&JSON.parse(e)},y1=()=>{try{return f1()||s5()||o5()||a5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var _1=n=>y1()?.[`_${n}`];function yf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rr())}function c5(){let n=y1()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I1(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function w1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T1(){return!c5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cD(){try{return typeof indexedDB=="object"}catch{return!1}}function b1(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var u5="FirebaseError",zr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=u5,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vs.prototype.create)}},Vs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?l5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new zr(i,a,r)}};function l5(n,e){return n.replace(d5,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var d5=/\{\$([^}]+)}/g;function uD(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function D1(n,e){let t=new oD(n,e);return t.subscribe.bind(t)}var oD=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");h5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=iD),i.error===void 0&&(i.error=iD),i.complete===void 0&&(i.complete=iD);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function h5(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function iD(){}var sye=14400*1e3;function Xo(n){return n&&n._delegate?n._delegate:n}var Ei=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var f5=[],qe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(qe||{}),p5={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},g5=qe.INFO,m5={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},y5=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=m5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ea=class{constructor(e){this.name=e,this._logLevel=g5,this._logHandler=y5,this._userLogHandler=null,f5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}};var _5=(n,e)=>e.some(t=>n instanceof t),C1,S1;function v5(){return C1||(C1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E5(){return S1||(S1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var A1=new WeakMap,dD=new WeakMap,R1=new WeakMap,lD=new WeakMap,fD=new WeakMap;function I5(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Yi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&A1.set(t,n)}).catch(()=>{}),fD.set(e,n),e}function w5(n){if(dD.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});dD.set(n,e)}var hD={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dD.get(n);if(e==="objectStoreNames")return n.objectStoreNames||R1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function N1(n){hD=n(hD)}function T5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(r_(this),e,...t);return R1.set(r,e.sort?e.sort():[e]),Yi(r)}:E5().includes(n)?function(...e){return n.apply(r_(this),e),Yi(A1.get(this))}:function(...e){return Yi(n.apply(r_(this),e))}}function b5(n){return typeof n=="function"?T5(n):(n instanceof IDBTransaction&&w5(n),_5(n,v5())?new Proxy(n,hD):n)}function Yi(n){if(n instanceof IDBRequest)return I5(n);if(lD.has(n))return lD.get(n);let e=b5(n);return e!==n&&(lD.set(n,e),fD.set(e,n)),e}var r_=n=>fD.get(n);function k1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Yi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Yi(o.result),c.oldVersion,c.newVersion,Yi(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var D5=["get","getKey","getAll","getAllKeys","count"],C5=["put","add","delete","clear"],pD=new Map;function P1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pD.get(e))return pD.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=C5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||D5.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return pD.set(e,s),s}N1(n=>ve(q({},n),{get:(e,t,r)=>P1(e,t)||n.get(e,t,r),has:(e,t)=>!!P1(e,t)||n.has(e,t)}));var mD=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S5(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function S5(n){return n.getComponent()?.type==="VERSION"}var yD="@firebase/app",M1="0.14.6";var js=new ea("@firebase/app"),A5="@firebase/app-compat",R5="@firebase/analytics-compat",N5="@firebase/analytics",P5="@firebase/app-check-compat",k5="@firebase/app-check",M5="@firebase/auth",O5="@firebase/auth-compat",x5="@firebase/database",L5="@firebase/data-connect",F5="@firebase/database-compat",V5="@firebase/functions",U5="@firebase/functions-compat",j5="@firebase/installations",B5="@firebase/installations-compat",$5="@firebase/messaging",H5="@firebase/messaging-compat",q5="@firebase/performance",z5="@firebase/performance-compat",G5="@firebase/remote-config",W5="@firebase/remote-config-compat",K5="@firebase/storage",Q5="@firebase/storage-compat",Y5="@firebase/firestore",J5="@firebase/ai",Z5="@firebase/firestore-compat",X5="firebase",eW="12.6.0";var tW={[yD]:"fire-core",[A5]:"fire-core-compat",[N5]:"fire-analytics",[R5]:"fire-analytics-compat",[k5]:"fire-app-check",[P5]:"fire-app-check-compat",[M5]:"fire-auth",[O5]:"fire-auth-compat",[x5]:"fire-rtdb",[L5]:"fire-data-connect",[F5]:"fire-rtdb-compat",[V5]:"fire-fn",[U5]:"fire-fn-compat",[j5]:"fire-iid",[B5]:"fire-iid-compat",[$5]:"fire-fcm",[H5]:"fire-fcm-compat",[q5]:"fire-perf",[z5]:"fire-perf-compat",[G5]:"fire-rc",[W5]:"fire-rc-compat",[K5]:"fire-gcs",[Q5]:"fire-gcs-compat",[Y5]:"fire-fst",[Z5]:"fire-fst-compat",[J5]:"fire-vertex","fire-js":"fire-js",[X5]:"fire-js-all"};var nW=new Map,rW=new Map,O1=new Map;function x1(n,e){try{n.container.addComponent(e)}catch(t){js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ta(n){let e=n.name;if(O1.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;O1.set(e,n);for(let t of nW.values())x1(t,n);for(let t of rW.values())x1(t,n);return!0}function Bs(n){return n==null?!1:n.settings!==void 0}var iW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ED=new Vs("app","Firebase",iW);var yl=eW;function Us(n,e,t){let r=tW[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(o.join(" "));return}ta(new Ei(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var sW="firebase-heartbeat-database",oW=1,_f="firebase-heartbeat-store",gD=null;function j1(){return gD||(gD=k1(sW,oW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_f)}catch(t){console.warn(t)}}}}).catch(n=>{throw ED.create("idb-open",{originalErrorMessage:n.message})})),gD}async function aW(n){try{let t=(await j1()).transaction(_f),r=await t.objectStore(_f).get(B1(n));return await t.done,r}catch(e){if(e instanceof zr)js.warn(e.message);else{let t=ED.create("idb-get",{originalErrorMessage:e?.message});js.warn(t.message)}}}async function L1(n,e){try{let r=(await j1()).transaction(_f,"readwrite");await r.objectStore(_f).put(e,B1(n)),await r.done}catch(t){if(t instanceof zr)js.warn(t.message);else{let r=ED.create("idb-set",{originalErrorMessage:t?.message});js.warn(r.message)}}}function B1(n){return`${n.name}!${n.options.appId}`}var cW=1024,uW=30,_D=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new vD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>uW){let i=dW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){js.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=F1(),{heartbeatsToSend:t,unsentEntries:r}=lW(this._heartbeatsCache.heartbeats),i=aD(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return js.warn(e),""}}};function F1(){return new Date().toISOString().substring(0,10)}function lW(n,e=cW){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),V1(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),V1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var vD=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cD()?b1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await aW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return L1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return L1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function V1(n){return aD(JSON.stringify({version:2,heartbeats:n})).length}function dW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function hW(n){ta(new Ei("platform-logger",e=>new mD(e),"PRIVATE")),ta(new Ei("heartbeat",e=>new _D(e),"PRIVATE")),Us(yD,M1,n),Us(yD,M1,"esm2020"),Us("fire-js","")}hW("");function Q1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Y1=Q1,J1=new Vs("auth","Firebase",Q1());var a_=new ea("@firebase/auth");function yW(n,...e){a_.logLevel<=qe.WARN&&a_.warn(`Auth (${yl}): ${n}`,...e)}function s_(n,...e){a_.logLevel<=qe.ERROR&&a_.error(`Auth (${yl}): ${n}`,...e)}function $1(n,...e){throw kD(n,...e)}function PD(n,...e){return kD(n,...e)}function Z1(n,e,t){let r=ve(q({},Y1()),{[e]:t});return new Vs("auth","Firebase",r).create(e,{appName:n.name})}function o_(n){return Z1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kD(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return J1.create(n,...e)}function ut(n,e,...t){if(!n)throw kD(e,...t)}function vf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw s_(e),new Error(e)}function c_(n,e){n||vf(e)}function _W(){return H1()==="http:"||H1()==="https:"}function H1(){return typeof self<"u"&&self.location?.protocol||null}function vW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_W()||I1()||"connection"in navigator)?navigator.onLine:!0}function EW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Cc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,c_(t>e,"Short delay should be less than long delay!"),this.isMobile=v1()||w1()}get(){return vW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function IW(n,e){c_(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var u_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var wW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var TW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bW=new Cc(3e4,6e4);function X1(n,e){return n.tenantId&&!e.tenantId?ve(q({},e),{tenantId:n.tenantId}):e}async function p_(n,e,t,r,i={}){return eL(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=uD(q({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=q({method:e,headers:c},s);return E1()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&yf(n.emulatorConfig.host)&&(d.credentials="include"),u_.fetch()(await tL(n,n.config.apiHost,t,a),d)})}async function eL(n,e,t){n._canInitEmulator=!1;let r=q(q({},wW),e);try{let i=new TD(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw i_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw i_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw i_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw i_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Z1(n,h,d);$1(n,h)}}catch(i){if(i instanceof zr)throw i;$1(n,"network-request-failed",{message:String(i)})}}async function tL(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?IW(n.config,i):`${n.config.apiScheme}://${i}`;return TW.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var TD=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(PD(this.auth,"network-request-failed")),bW.get())})}};function i_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=PD(n,e,r);return i.customData._tokenResponse=t,i}async function DW(n,e){return p_(n,"POST","/v1/accounts:delete",e)}async function l_(n,e){return p_(n,"POST","/v1/accounts:lookup",e)}function Ef(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nL(n,e=!1){let t=Xo(n),r=await t.getIdToken(e),i=rL(r);ut(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ef(ID(i.auth_time)),issuedAtTime:Ef(ID(i.iat)),expirationTime:Ef(ID(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function ID(n){return Number(n)*1e3}function rL(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return s_("JWT malformed, contained fewer than 3 sections"),null;try{let i=n_(t);return i?JSON.parse(i):(s_("Failed to decode base64 JWT payload"),null)}catch(i){return s_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function q1(n){let e=rL(n);return ut(e,"internal-error"),ut(typeof e.exp<"u","internal-error"),ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bD(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof zr&&CW(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function CW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var DD=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var wf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ef(this.lastLoginAt),this.creationTime=Ef(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function d_(n){let e=n.auth,t=await n.getIdToken(),r=await bD(n,l_(e,{idToken:t}));ut(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?sL(i.providerUserInfo):[],o=SW(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function iL(n){let e=Xo(n);await d_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sL(n){return n.map(r=>{var i=r,{providerId:e}=i,t=gE(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function AW(n,e){let t=await eL(n,{},async()=>{let r=uD({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await tL(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&yf(n.emulatorConfig.host)&&(c.credentials="include"),u_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RW(n,e){return p_(n,"POST","/v2/accounts:revokeToken",X1(n,e))}var If=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut(typeof e.idToken<"u","internal-error"),ut(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ut(e.length!==0,"internal-error");let t=q1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await AW(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ut(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ut(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ut(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return vf("not implemented")}};function na(n,e){ut(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var bc=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=gE(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await bD(this,this.stsTokenManager.getToken(this.auth,e));return ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nL(this,e)}reload(){return iL(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>q({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ve(q({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await d_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bs(this.auth.app))return Promise.reject(o_(this.auth));let e=await this.getIdToken();return await bD(this,DW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ve(q({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>q({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:T,isAnonymous:C,providerData:R,stsTokenManager:M}=t;ut(g&&M,e,"internal-error");let k=If.fromJSON(this.name,M);ut(typeof g=="string",e,"internal-error"),na(r,e.name),na(i,e.name),ut(typeof T=="boolean",e,"internal-error"),ut(typeof C=="boolean",e,"internal-error"),na(s,e.name),na(o,e.name),na(a,e.name),na(c,e.name),na(d,e.name),na(h,e.name);let H=new n({uid:g,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:C,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:k,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&(H.providerData=R.map($=>q({},$))),c&&(H._redirectEventId=c),H}static async _fromIdTokenResponse(e,t,r=!1){let i=new If;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await d_(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ut(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?sL(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new If;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var z1=new Map;function Dc(n){c_(n instanceof Function,"Expected a class definition");let e=z1.get(n);return e?(c_(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,z1.set(n,e),e)}var NW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),CD=NW;function wD(n,e,t){return`firebase:${n}:${e}:${t}`}var h_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=wD(this.userKey,i.apiKey,s),this.fullPersistenceKey=wD("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await l_(this.auth,{idToken:e}).catch(()=>{});return t?bc._fromGetAccountInfoResponse(this.auth,t,e):null}return bc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Dc(CD),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Dc(CD),o=wD(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let g;if(typeof h=="string"){let T=await l_(e,{idToken:h}).catch(()=>{});if(!T)break;g=await bc._fromGetAccountInfoResponse(e,T,h)}else g=bc._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function G1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LW(e))return"Blackberry";if(FW(e))return"Webos";if(kW(e))return"Safari";if((e.includes("chrome/")||MW(e))&&!e.includes("edge/"))return"Chrome";if(xW(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function PW(n=Rr()){return/firefox\//i.test(n)}function kW(n=Rr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MW(n=Rr()){return/crios\//i.test(n)}function OW(n=Rr()){return/iemobile/i.test(n)}function xW(n=Rr()){return/android/i.test(n)}function LW(n=Rr()){return/blackberry/i.test(n)}function FW(n=Rr()){return/webos/i.test(n)}function oL(n,e=[]){let t;switch(n){case"Browser":t=G1(Rr());break;case"Worker":t=`${G1(Rr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yl}/${r}`}var SD=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function VW(n,e={}){return p_(n,"GET","/v2/passwordPolicy",X1(n,e))}var UW=6,AD=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??UW,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var RD=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new SD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dc(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await h_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await l_(this,{idToken:e}),r=await bc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Bs(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await d_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bs(this.app))return Promise.reject(o_(this));let t=e?Xo(e):null;return t&&ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bs(this.app)?Promise.reject(o_(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bs(this.app)?Promise.reject(o_(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await VW(this),t=new AD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await RW(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Dc(e)||this._popupRedirectResolver;ut(t,this,"argument-error"),this.redirectPersistenceManager=await h_.create(this,[Dc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Bs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yW(`Error while retrieving App Check token: ${e.error}`),e?.token}};function jW(n){return Xo(n)}var f_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=D1(t=>this.observer=t)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var BW={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $W(n){BW=n}function HW(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function qW(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Dc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function MD(n,e,t,r){return Xo(n).onIdTokenChanged(e,t,r)}var Uye=HW("rcb"),jye=new Cc(3e4,6e4);var Bye=new Cc(2e3,1e4);var $ye=600*1e3;var Hye=new Cc(3e4,6e4);var qye=new Cc(5e3,15e3);var zye=encodeURIComponent("fac");var W1="@firebase/auth",K1="1.11.1";var ND=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function zW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GW(n){ta(new Ei("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ut(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oL(n)},d=new RD(r,i,s,c);return qW(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ta(new Ei("auth-internal",e=>{let t=jW(e.getProvider("auth").getImmediate());return(r=>new ND(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Us(W1,K1,zW(n)),Us(W1,K1,"esm2020")}var WW=300,Gye=_1("authIdTokenMaxAge")||WW;function KW(){return document.getElementsByTagName("head")?.[0]??document}$W({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=PD("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",KW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GW("Browser");function aL(n){return new ge(function(e){var t=MD(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function wL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var TL=wL,bL=new yi("auth","Firebase",wL());var E_=new Ki("@firebase/auth");function JW(n,...e){E_.logLevel<=He.WARN&&E_.warn(`Auth (${Qo}): ${n}`,...e)}function m_(n,...e){E_.logLevel<=He.ERROR&&E_.error(`Auth (${Qo}): ${n}`,...e)}function Zi(n,...e){throw JD(n,...e)}function Ii(n,...e){return JD(n,...e)}function YD(n,e,t){let r=Object.assign(Object.assign({},TL()),{[e]:t});return new yi("auth","Firebase",r).create(e,{appName:n.name})}function Sc(n){return YD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZW(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zi(n,"argument-error"),YD(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function JD(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bL.create(n,...e)}function Ie(n,e,...t){if(!n)throw JD(e,...t)}function $s(n){let e="INTERNAL ASSERTION FAILED: "+n;throw m_(e),new Error(e)}function qs(n,e){n||$s(e)}function LD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function XW(){return cL()==="http:"||cL()==="https:"}function cL(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function e8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XW()||Px()||"connection"in navigator)?navigator.onLine:!0}function t8(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ac=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,qs(t>e,"Short delay should be less than long delay!"),this.isMobile=Rx()||kx()}get(){return e8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ZD(n,e){qs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var I_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var n8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var r8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i8=new Ac(3e4,6e4);function XD(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function vl(n,e,t,r,i={}){return DL(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=hl(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return Nx()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Wo(n.emulatorConfig.host)&&(d.credentials="include"),I_.fetch()(await CL(n,n.config.apiHost,t,a),d)})}async function DL(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},n8),e);try{let i=new FD(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw g_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw g_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw g_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw g_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw YD(n,h,d);Zi(n,h)}}catch(i){if(i instanceof Sr)throw i;Zi(n,"network-request-failed",{message:String(i)})}}async function s8(n,e,t,r,i={}){let s=await vl(n,e,t,r,i);return"mfaPendingCredential"in s&&Zi(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function CL(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?ZD(n.config,i):`${n.config.apiScheme}://${i}`;return r8.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var FD=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ii(this.auth,"network-request-failed")),i8.get())})}};function g_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ii(n,e,r);return i.customData._tokenResponse=t,i}async function o8(n,e){return vl(n,"POST","/v1/accounts:delete",e)}async function w_(n,e){return vl(n,"POST","/v1/accounts:lookup",e)}function Tf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eC(n,e=!1){let t=tr(n),r=await t.getIdToken(e),i=tC(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Tf(OD(i.auth_time)),issuedAtTime:Tf(OD(i.iat)),expirationTime:Tf(OD(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function OD(n){return Number(n)*1e3}function tC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return m_("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wy(t);return i?JSON.parse(i):(m_("Failed to decode base64 JWT payload"),null)}catch(i){return m_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function uL(n){let e=tC(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Df(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Sr&&a8(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function a8({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var VD=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Cf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tf(this.lastLoginAt),this.creationTime=Tf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function T_(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Df(n,w_(t,{idToken:r}));Ie(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?SL(s.providerUserInfo):[],a=c8(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)}async function nC(n){let e=tr(n);await T_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c8(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SL(n){return n.map(e=>{var{providerId:t}=e,r=Eg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function u8(n,e){let t=await DL(n,{},async()=>{let r=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await CL(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Wo(n.emulatorConfig.host)&&(c.credentials="include"),I_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function l8(n,e){return vl(n,"POST","/v2/accounts:revokeToken",XD(n,e))}var bf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let t=uL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await u8(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return $s("not implemented")}};function ra(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ia=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Eg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Cf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Df(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eC(this,e)}reload(){return nC(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await T_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(Sc(this.auth));let e=await this.getIdToken();return await Df(this,o8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(d=t.createdAt)!==null&&d!==void 0?d:void 0,$=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:se,isAnonymous:le,providerData:oe,stsTokenManager:b}=t;Ie(B&&b,e,"internal-error");let m=bf.fromJSON(this.name,b);Ie(typeof B=="string",e,"internal-error"),ra(g,e.name),ra(T,e.name),Ie(typeof se=="boolean",e,"internal-error"),Ie(typeof le=="boolean",e,"internal-error"),ra(C,e.name),ra(R,e.name),ra(M,e.name),ra(k,e.name),ra(H,e.name),ra($,e.name);let E=new n({uid:B,auth:e,email:T,emailVerified:se,displayName:g,isAnonymous:le,photoURL:R,phoneNumber:C,tenantId:M,stsTokenManager:m,createdAt:H,lastLoginAt:$});return oe&&Array.isArray(oe)&&(E.providerData=oe.map(w=>Object.assign({},w))),k&&(E._redirectEventId=k),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new bf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await T_(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Ie(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?SL(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new bf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Cf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var lL=new Map;function Hs(n){qs(n instanceof Function,"Expected a class definition");let e=lL.get(n);return e?(qs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lL.set(n,e),e)}var d8=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),UD=d8;function y_(n,e,t){return`firebase:${n}:${e}:${t}`}var b_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=y_(this.userKey,i.apiKey,s),this.fullPersistenceKey=y_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await w_(this.auth,{idToken:e}).catch(()=>{});return t?ia._fromGetAccountInfoResponse(this.auth,t,e):null}return ia._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Hs(UD),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Hs(UD),o=y_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let g;if(typeof h=="string"){let T=await w_(e,{idToken:h}).catch(()=>{});if(!T)break;g=await ia._fromGetAccountInfoResponse(e,T,h)}else g=ia._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function dL(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ML(e))return"Blackberry";if(OL(e))return"Webos";if(RL(e))return"Safari";if((e.includes("chrome/")||NL(e))&&!e.includes("edge/"))return"Chrome";if(kL(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function AL(n=gn()){return/firefox\//i.test(n)}function RL(n=gn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NL(n=gn()){return/crios\//i.test(n)}function PL(n=gn()){return/iemobile/i.test(n)}function kL(n=gn()){return/android/i.test(n)}function ML(n=gn()){return/blackberry/i.test(n)}function OL(n=gn()){return/webos/i.test(n)}function rC(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function h8(n=gn()){var e;return rC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function f8(){return Mx()&&document.documentMode===10}function xL(n=gn()){return rC(n)||kL(n)||OL(n)||ML(n)||/windows phone/i.test(n)||PL(n)}function LL(n,e=[]){let t;switch(n){case"Browser":t=dL(gn());break;case"Worker":t=`${dL(gn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qo}/${r}`}var jD=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function p8(n,e={}){return vl(n,"GET","/v2/passwordPolicy",XD(n,e))}var g8=6,BD=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:g8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var $D=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D_(this),this.idTokenSubscription=new D_(this),this.beforeStateQueue=new jD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hs(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await b_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await w_(this,{idToken:e}),r=await ia._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ar(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await T_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(Sc(this));let t=e?tr(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(Sc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(Sc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await p8(this),t=new BD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await l8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Hs(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await b_.create(this,[Hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&JW(`Error while retrieving App Check token: ${t.error}`),t?.token}};function M_(n){return tr(n)}var D_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fx(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var iC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m8(n){iC=n}function y8(n){return iC.loadJS(n)}function _8(){return iC.gapiScript}function FL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function sC(n,e){let t=fl(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Wi(s,e??{}))return i;Zi(i,"already-initialized")}return t.initialize({options:e})}function v8(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Hs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function oC(n,e,t){let r=M_(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=VL(e),{host:o,port:a}=E8(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Wi(d,r.config.emulator)&&Wi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Wo(o)?(Qy(`${s}//${o}${c}`),Yy("Auth",!0)):i||I8()}function VL(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function E8(n){let e=VL(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:hL(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:hL(o)}}}function hL(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function I8(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Sf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $s("not implemented")}_getIdTokenResponse(e){return $s("not implemented")}_linkToIdToken(e,t){return $s("not implemented")}_getReauthenticationResolver(e){return $s("not implemented")}};async function _l(n,e){return s8(n,"POST","/v1/accounts:signInWithIdp",XD(n,e))}var w8="http://localhost",C_=class n extends Sf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Eg(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return _l(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,_l(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,_l(e,t)}buildRequest(){let e={requestUri:w8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hl(t)}return e}};var Af=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var S_=class extends Af{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var aC=(()=>{class n extends S_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return C_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Rf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await ia._fromIdTokenResponse(e,r,i),o=fL(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=fL(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function fL(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var HD=class n extends Sr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function UL(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?HD._fromErrorAndOperation(n,s,e,r):s})}async function T8(n,e,t=!1){let r=await Df(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rf._forOperation(n,"link",r)}async function b8(n,e,t=!1){let{auth:r}=n;if(Ar(r.app))return Promise.reject(Sc(r));let i="reauthenticate";try{let s=await Df(n,UL(r,i,e,n),t);Ie(s.idToken,r,"internal-error");let o=tC(s.idToken);Ie(o,r,"internal-error");let{sub:a}=o;return Ie(n.uid===a,r,"user-mismatch"),Rf._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Zi(r,"user-mismatch"),s}}async function D8(n,e,t=!1){if(Ar(n.app))return Promise.reject(Sc(n));let r="signIn",i=await UL(n,r,e),s=await Rf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function cC(n,e,t,r){return tr(n).onIdTokenChanged(e,t,r)}function uC(n,e,t){return tr(n).beforeAuthStateChanged(e,t)}function lC(n){return tr(n).signOut()}var A_="__sak";var R_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(A_,"1"),this.storage.removeItem(A_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var C8=1e3,S8=10,A8=(()=>{class n extends R_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xL(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);f8()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,S8):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},C8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),jL=A8;var R8=(()=>{class n extends R_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),dC=R8;function N8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var P8=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await N8(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function hC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var qD=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=hC("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let T=g;if(T.data.eventId===d)switch(T.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(T.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ji(){return window}function k8(n){Ji().location.href=n}function BL(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function M8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O8(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function x8(){return BL()?self:null}var $L="firebaseLocalStorageDb",L8=1,N_="firebaseLocalStorage",HL="fbase_key",Rc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function O_(n,e){return n.transaction([N_],e?"readwrite":"readonly").objectStore(N_)}function F8(){let n=indexedDB.deleteDatabase($L);return new Rc(n).toPromise()}function zD(){let n=indexedDB.open($L,L8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(N_,{keyPath:HL})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(N_)?e(r):(r.close(),await F8(),e(await zD()))})})}async function pL(n,e,t){let r=O_(n,!0).put({[HL]:e,value:t});return new Rc(r).toPromise()}async function V8(n,e){let t=O_(n,!1).get(e),r=await new Rc(t).toPromise();return r===void 0?null:r.value}function gL(n,e){let t=O_(n,!0).delete(e);return new Rc(t).toPromise()}var U8=800,j8=3,B8=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zD(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>j8)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=P8._getInstance(x8()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await M8(),!this.activeServiceWorker)return;this.sender=new qD(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||O8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await zD();return await pL(t,A_,"1"),await gL(t,A_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>pL(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>V8(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gL(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=O_(s,!1).getAll();return new Rc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),qL=B8;var Fve=FL("rcb"),Vve=new Ac(3e4,6e4);function zL(n,e){return e?Hs(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Nf=class extends Sf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _l(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _l(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _l(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function $8(n){return D8(n.auth,new Nf(n),n.bypassAuthState)}function H8(n){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),b8(t,new Nf(n),n.bypassAuthState)}async function q8(n){let{auth:e,user:t}=n;return Ie(t,e,"internal-error"),T8(t,new Nf(n),n.bypassAuthState)}var P_=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $8;case"linkViaPopup":case"linkViaRedirect":return q8;case"reauthViaPopup":case"reauthViaRedirect":return H8;default:Zi(this.auth,"internal-error")}}resolve(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var z8=new Ac(2e3,1e4);async function fC(n,e,t){if(Ar(n.app))return Promise.reject(Ii(n,"operation-not-supported-in-this-environment"));let r=M_(n);ZW(n,e,Af);let i=zL(r,t);return new G8(r,"signInViaPopup",e,i).executeNotNull()}var G8=(()=>{class n extends P_{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return Ie(t,this.auth,"internal-error"),t}async onExecution(){qs(this.filter.length===1,"Popup operations only handle one event");let t=hC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,z8.get())};t()}}n.currentPopupAction=null;return n})(),W8="pendingRedirect",__=new Map,GD=class extends P_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=__.get(this.auth._key());if(!e){try{let r=await K8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}__.set(this.auth._key(),e)}return this.bypassAuthState||__.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function K8(n,e){let t=J8(e),r=Y8(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Q8(n,e){__.set(n._key(),e)}function Y8(n){return Hs(n._redirectPersistence)}function J8(n){return y_(W8,n.config.apiKey,n.name)}async function Z8(n,e,t=!1){if(Ar(n.app))return Promise.reject(Sc(n));let r=M_(n),i=zL(r,e),o=await new GD(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var X8=600*1e3,WD=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eK(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GL(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ii(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X8&&this.cachedEventUids.clear(),this.cachedEventUids.has(mL(e))}saveEventToCache(e){this.cachedEventUids.add(mL(e)),this.lastProcessedEventTime=Date.now()}};function mL(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GL({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function eK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GL(n);default:return!1}}async function tK(n,e={}){return vl(n,"GET","/v1/projects",e)}var nK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rK=/^https?/;async function iK(n){if(n.config.emulator)return;let{authorizedDomains:e}=await tK(n);for(let t of e)try{if(sK(t))return}catch{}Zi(n,"unauthorized-domain")}function sK(n){let e=LD(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!rK.test(t))return!1;if(nK.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var oK=new Ac(3e4,6e4);function yL(){let n=Ji().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aK(n){return new Promise((e,t)=>{var r,i,s;function o(){yL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yL(),t(Ii(n,"network-request-failed"))},timeout:oK.get()})}if(!((i=(r=Ji().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ji().gapi)===null||s===void 0)&&s.load)o();else{let a=FL("iframefcb");return Ji()[a]=()=>{gapi.load?o():t(Ii(n,"network-request-failed"))},y8(`${_8()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw v_=null,e})}var v_=null;function cK(n){return v_=v_||aK(n),v_}var uK=new Ac(5e3,15e3),lK="__/auth/iframe",dK="emulator/auth/iframe",hK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pK(n){let e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ZD(e,dK):`https://${n.config.authDomain}/${lK}`,r={apiKey:e.apiKey,appName:n.name,v:Qo},i=fK.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${hl(r).slice(1)}`}async function gK(n){let e=await cK(n),t=Ji().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:pK(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Ii(n,"network-request-failed"),a=Ji().setTimeout(()=>{s(o)},uK.get());function c(){Ji().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var mK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yK=500,_K=600,vK="_blank",EK="http://localhost",k_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function IK(n,e,t,r=yK,i=_K){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},mK),{width:r.toString(),height:i.toString(),top:s,left:o}),d=gn().toLowerCase();t&&(a=NL(d)?vK:t),AL(d)&&(e=e||EK,c.scrollbars="yes");let h=Object.entries(c).reduce((T,[C,R])=>`${T}${C}=${R},`,"");if(h8(d)&&a!=="_self")return wK(e||"",a),new k_(null);let g=window.open(e||"",a,h);Ie(g,n,"popup-blocked");try{g.focus()}catch{}return new k_(g)}function wK(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var TK="__/auth/handler",bK="emulator/auth/handler",DK=encodeURIComponent("fac");async function _L(n,e,t,r,i,s){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qo,eventId:i};if(e instanceof Af){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Lx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof S_){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${DK}=${encodeURIComponent(c)}`:"";return`${CK(n)}?${hl(a).slice(1)}${d}`}function CK({config:n}){return n.emulator?ZD(n,bK):`https://${n.authDomain}/${TK}`}var xD="webStorageSupport",KD=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dC,this._completeRedirectFn=Z8,this._overrideRedirectResult=Q8}async _openPopup(e,t,r,i){var s;qs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await _L(e,t,r,LD(),i);return IK(e,o,hC())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await _L(e,t,r,LD(),i);return k8(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(qs(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await gK(e),r=new WD(e);return t.register("authEvent",i=>(Ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xD,{type:xD},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[xD];o!==void 0&&t(!!o),Zi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iK(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xL()||RL()||rC()}},WL=KD;var vL="@firebase/auth",EL="1.10.8";var QD=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function SK(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AK(n){_i(new nr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LL(n)},d=new $D(r,i,s,c);return v8(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_i(new nr("auth-internal",e=>{let t=M_(e.getProvider("auth").getImmediate());return(r=>new QD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kt(vL,EL,SK(n)),kt(vL,EL,"esm2017")}var RK=300,NK=xb("authIdTokenMaxAge")||RK,IL=null,PK=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>NK)return;let i=t?.token;IL!==i&&(IL=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pC(n=Ic()){let e=fl(n,"auth");if(e.isInitialized())return e.getImmediate();let t=sC(n,{popupRedirectResolver:WL,persistence:[qL,jL,dC]}),r=xb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=PK(s.toString());uC(t,o,()=>o(t.currentUser)),cC(t,a=>o(a))}}let i=Mb("auth");return i&&oC(t,`http://${i}`),t}function kK(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}m8({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Ii("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",kK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AK("Browser");var KL="auth",Nc=class{constructor(e){return e}},Pf=class{constructor(){return gl(KL)}};var gC=new ne("angularfire2.auth-instances");function T7(n,e){let t=pf(KL,n,e);return t&&new Nc(t)}function b7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Nc(r)}}var D7={provide:Pf,deps:[[new Er,gC]]},C7={provide:Nc,useFactory:T7,deps:[[new Er,gC],Fs]};function QL(n,...e){return kt("angularfire",Yo.full,"auth"),Jn([C7,D7,{provide:gC,useFactory:b7(n),multi:!0,deps:[We,Ct,Jo,Tc,[new Er,ml],...e]}])}var YL=rr(aL,!0);var JL=rr(pC,!0);var ZL=rr(fC,!0,2);var XL=rr(lC,!0,2);var eF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tF={};var zs,mC;(function(){var n;function e(b,m){function E(){}E.prototype=m.prototype,b.F=m.prototype,b.prototype=new E,b.prototype.constructor=b,b.D=function(w,I,D){for(var _=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)_[xe-2]=arguments[xe];return m.prototype[I].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,m,E){E||(E=0);let w=Array(16);if(typeof m=="string")for(var I=0;I<16;++I)w[I]=m.charCodeAt(E++)|m.charCodeAt(E++)<<8|m.charCodeAt(E++)<<16|m.charCodeAt(E++)<<24;else for(I=0;I<16;++I)w[I]=m[E++]|m[E++]<<8|m[E++]<<16|m[E++]<<24;m=b.g[0],E=b.g[1],I=b.g[2];let D=b.g[3],_;_=m+(D^E&(I^D))+w[0]+3614090360&4294967295,m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[1]+3905402710&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[2]+606105819&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(D^E&(I^D))+w[4]+4118548399&4294967295,m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[5]+1200080426&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[6]+2821735955&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(D^E&(I^D))+w[8]+1770035416&4294967295,m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[9]+2336552879&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[10]+4294925233&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(D^E&(I^D))+w[12]+1804603682&4294967295,m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[13]+4254626195&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[14]+2792965006&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(I^D&(E^I))+w[1]+4129170786&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[6]+3225465664&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[11]+643717713&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(I^D&(E^I))+w[5]+3593408605&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[10]+38016083&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[15]+3634488961&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(I^D&(E^I))+w[9]+568446438&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[14]+3275163606&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[3]+4107603335&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(I^D&(E^I))+w[13]+2850285829&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[2]+4243563512&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[7]+1735328473&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(E^I^D)+w[5]+4294588738&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[8]+2272392833&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[11]+1839030562&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(E^I^D)+w[1]+2763975236&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[4]+1272893353&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[7]+4139469664&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(E^I^D)+w[13]+681279174&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[0]+3936430074&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[3]+3572445317&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(E^I^D)+w[9]+3654602809&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[12]+3873151461&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[15]+530742520&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(I^(E|~D))+w[0]+4096336452&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[7]+1126891415&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[14]+2878612391&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=m+(I^(E|~D))+w[12]+1700485571&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[3]+2399980690&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[10]+4293915773&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=m+(I^(E|~D))+w[8]+1873313359&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[15]+4264355552&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[6]+2734768916&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=m+(I^(E|~D))+w[4]+4149444226&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[11]+3174756917&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[2]+718787259&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+m&4294967295,b.g[1]=b.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.v=function(b,m){m===void 0&&(m=b.length);let E=m-this.blockSize,w=this.C,I=this.h,D=0;for(;D<m;){if(I==0)for(;D<=E;)i(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<m;)if(w[I++]=b.charCodeAt(D++),I==this.blockSize){i(this,w),I=0;break}}else for(;D<m;)if(w[I++]=b[D++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=m},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var m=1;m<b.length-8;++m)b[m]=0;m=this.o*8;for(var E=b.length-8;E<b.length;++E)b[E]=m&255,m/=256;for(this.v(b),b=Array(16),m=0,E=0;E<4;++E)for(let w=0;w<32;w+=8)b[m++]=this.g[E]>>>w&255;return b};function s(b,m){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=m(b)}function o(b,m){this.h=m;let E=[],w=!0;for(let I=b.length-1;I>=0;I--){let D=b[I]|0;w&&D==m||(E[I]=D,w=!1)}this.g=E}var a={};function c(b){return-128<=b&&b<128?s(b,function(m){return new o([m|0],m<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return k(d(-b));let m=[],E=1;for(let w=0;b>=E;w++)m[w]=b/E|0,E*=4294967296;return new o(m,0)}function h(b,m){if(b.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(b.charAt(0)=="-")return k(h(b.substring(1),m));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(m,8)),w=g;for(let D=0;D<b.length;D+=8){var I=Math.min(8,b.length-D);let _=parseInt(b.substring(D,D+I),m);I<8?(I=d(Math.pow(m,I)),w=w.j(I).add(d(_))):(w=w.j(E),w=w.add(d(_)))}return w}var g=c(0),T=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();let b=0,m=1;for(let E=0;E<this.g.length;E++){let w=this.i(E);b+=(w>=0?w:4294967296+w)*m,m*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(M(this))return"-"+k(this).toString(b);let m=d(Math.pow(b,6));var E=this;let w="";for(;;){let I=se(E,m).g;E=H(E,I.j(m));let D=((E.g.length>0?E.g[0]:E.h)>>>0).toString(b);if(E=I,R(E))return D+w;for(;D.length<6;)D="0"+D;w=D+w}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(let m=0;m<b.g.length;m++)if(b.g[m]!=0)return!1;return!0}function M(b){return b.h==-1}n.l=function(b){return b=H(this,b),M(b)?-1:R(b)?0:1};function k(b){let m=b.g.length,E=[];for(let w=0;w<m;w++)E[w]=~b.g[w];return new o(E,~b.h).add(T)}n.abs=function(){return M(this)?k(this):this},n.add=function(b){let m=Math.max(this.g.length,b.g.length),E=[],w=0;for(let I=0;I<=m;I++){let D=w+(this.i(I)&65535)+(b.i(I)&65535),_=(D>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);w=_>>>16,D&=65535,_&=65535,E[I]=_<<16|D}return new o(E,E[E.length-1]&-2147483648?-1:0)};function H(b,m){return b.add(k(m))}n.j=function(b){if(R(this)||R(b))return g;if(M(this))return M(b)?k(this).j(k(b)):k(k(this).j(b));if(M(b))return k(this.j(k(b)));if(this.l(C)<0&&b.l(C)<0)return d(this.m()*b.m());let m=this.g.length+b.g.length,E=[];for(var w=0;w<2*m;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(let I=0;I<b.g.length;I++){let D=this.i(w)>>>16,_=this.i(w)&65535,xe=b.i(I)>>>16,gt=b.i(I)&65535;E[2*w+2*I]+=_*gt,$(E,2*w+2*I),E[2*w+2*I+1]+=D*gt,$(E,2*w+2*I+1),E[2*w+2*I+1]+=_*xe,$(E,2*w+2*I+1),E[2*w+2*I+2]+=D*xe,$(E,2*w+2*I+2)}for(b=0;b<m;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=m;b<2*m;b++)E[b]=0;return new o(E,0)};function $(b,m){for(;(b[m]&65535)!=b[m];)b[m+1]+=b[m]>>>16,b[m]&=65535,m++}function B(b,m){this.g=b,this.h=m}function se(b,m){if(R(m))throw Error("division by zero");if(R(b))return new B(g,g);if(M(b))return m=se(k(b),m),new B(k(m.g),k(m.h));if(M(m))return m=se(b,k(m)),new B(k(m.g),m.h);if(b.g.length>30){if(M(b)||M(m))throw Error("slowDivide_ only works with positive integers.");for(var E=T,w=m;w.l(b)<=0;)E=le(E),w=le(w);var I=oe(E,1),D=oe(w,1);for(w=oe(w,2),E=oe(E,2);!R(w);){var _=D.add(w);_.l(b)<=0&&(I=I.add(E),D=_),w=oe(w,1),E=oe(E,1)}return m=H(b,I.j(m)),new B(I,m)}for(I=g;b.l(m)>=0;){for(E=Math.max(1,Math.floor(b.m()/m.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),D=d(E),_=D.j(m);M(_)||_.l(b)>0;)E-=w,D=d(E),_=D.j(m);R(D)&&(D=T),I=I.add(D),b=H(b,_)}return new B(I,b)}n.B=function(b){return se(this,b).h},n.and=function(b){let m=Math.max(this.g.length,b.g.length),E=[];for(let w=0;w<m;w++)E[w]=this.i(w)&b.i(w);return new o(E,this.h&b.h)},n.or=function(b){let m=Math.max(this.g.length,b.g.length),E=[];for(let w=0;w<m;w++)E[w]=this.i(w)|b.i(w);return new o(E,this.h|b.h)},n.xor=function(b){let m=Math.max(this.g.length,b.g.length),E=[];for(let w=0;w<m;w++)E[w]=this.i(w)^b.i(w);return new o(E,this.h^b.h)};function le(b){let m=b.g.length+1,E=[];for(let w=0;w<m;w++)E[w]=b.i(w)<<1|b.i(w-1)>>>31;return new o(E,b.h)}function oe(b,m){let E=m>>5;m%=32;let w=b.g.length-E,I=[];for(let D=0;D<w;D++)I[D]=m>0?b.i(D+E)>>>m|b.i(D+E+1)<<32-m:b.i(D+E);return new o(I,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,mC=tF.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,zs=tF.Integer=o}).apply(typeof eF<"u"?eF:typeof self<"u"?self:typeof window<"u"?window:{});var x_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gs={};var yC,S7,El,_C,kf,L_,vC,EC,IC;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof x_=="object"&&x_];for(var p=0;p<l.length;++p){var v=l[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var v=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var N=l[A];if(!(N in v))break e;v=v[N]}l=l[l.length-1],A=v[l],p=p(A),p!=A&&p!=null&&e(v,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var v=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&v.push([A,p[A]]);return v}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,v){return l.call.apply(l.bind,arguments)}function d(l,p,v){return d=c,d.apply(null,arguments)}function h(l,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function g(l,p){function v(){}v.prototype=p.prototype,l.Z=p.prototype,l.prototype=new v,l.prototype.constructor=l,l.Ob=function(A,N,O){for(var Z=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)Z[_e-2]=arguments[_e];return p.prototype[N].apply(A,Z)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function C(l){let p=l.length;if(p>0){let v=Array(p);for(let A=0;A<p;A++)v[A]=l[A];return v}return[]}function R(l,p){for(let A=1;A<arguments.length;A++){let N=arguments[A];var v=typeof N;if(v=v!="object"?v:N?Array.isArray(N)?"array":v:"null",v=="array"||v=="object"&&typeof N.length=="number"){v=l.length||0;let O=N.length||0;l.length=v+O;for(let Z=0;Z<O;Z++)l[v+Z]=N[Z]}else l.push(N)}}class M{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(l){o.setTimeout(()=>{throw l},0)}function H(){var l=b;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ${constructor(){this.h=this.g=null}add(p,v){let A=B.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var B=new M(()=>new se,l=>l.reset());class se{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let le,oe=!1,b=new $,m=()=>{let l=Promise.resolve(void 0);le=()=>{l.then(E)}};function E(){for(var l;l=H();){try{l.h.call(l.g)}catch(v){k(v)}var p=B;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}oe=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};o.addEventListener("test",v,p),o.removeEventListener("test",v,p)}catch{}return l})();function _(l){return/^[\s\xa0]*$/.test(l)}function xe(l,p){I.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}g(xe,I),xe.prototype.init=function(l,p){let v=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(v=="mouseover"?p=l.fromElement:v=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),st=0;function $e(l,p,v,A,N){this.listener=l,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=N,this.key=++st,this.da=this.fa=!1}function L(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function F(l,p,v){for(let A in l)p.call(v,l[A],A,l)}function U(l,p){for(let v in l)p.call(void 0,l[v],v,l)}function ue(l){let p={};for(let v in l)p[v]=l[v];return p}let Me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(l,p){let v,A;for(let N=1;N<arguments.length;N++){A=arguments[N];for(v in A)l[v]=A[v];for(let O=0;O<Me.length;O++)v=Me[O],Object.prototype.hasOwnProperty.call(A,v)&&(l[v]=A[v])}}function vn(l){this.src=l,this.g={},this.h=0}vn.prototype.add=function(l,p,v,A,N){let O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);let Z=Wn(l,p,A,N);return Z>-1?(p=l[Z],v||(p.fa=!1)):(p=new $e(p,this.src,O,!!A,N),p.fa=v,l.push(p)),p};function sn(l,p){let v=p.type;if(v in l.g){var A=l.g[v],N=Array.prototype.indexOf.call(A,p,void 0),O;(O=N>=0)&&Array.prototype.splice.call(A,N,1),O&&(L(p),l.g[v].length==0&&(delete l.g[v],l.h--))}}function Wn(l,p,v,A){for(let N=0;N<l.length;++N){let O=l[N];if(!O.da&&O.listener==p&&O.capture==!!v&&O.ha==A)return N}return-1}var xt="closure_lm_"+(Math.random()*1e6|0),J={};function K(l,p,v,A,N){if(A&&A.once)return ae(l,p,v,A,N);if(Array.isArray(p)){for(let O=0;O<p.length;O++)K(l,p[O],v,A,N);return null}return v=Je(v),l&&l[gt]?l.J(p,v,a(A)?!!A.capture:!!A,N):j(l,p,v,!1,A,N)}function j(l,p,v,A,N,O){if(!p)throw Error("Invalid event type");let Z=a(N)?!!N.capture:!!N,_e=Te(l);if(_e||(l[xt]=_e=new vn(l)),v=_e.add(p,v,A,Z,O),v.proxy)return v;if(A=Y(),v.proxy=A,A.src=l,A.listener=v,l.addEventListener)D||(N=Z),N===void 0&&(N=!1),l.addEventListener(p.toString(),A,N);else if(l.attachEvent)l.attachEvent(ye(p.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Y(){function l(v){return p.call(l.src,l.listener,v)}let p=De;return l}function ae(l,p,v,A,N){if(Array.isArray(p)){for(let O=0;O<p.length;O++)ae(l,p[O],v,A,N);return null}return v=Je(v),l&&l[gt]?l.K(p,v,a(A)?!!A.capture:!!A,N):j(l,p,v,!0,A,N)}function he(l,p,v,A,N){if(Array.isArray(p))for(var O=0;O<p.length;O++)he(l,p[O],v,A,N);else A=a(A)?!!A.capture:!!A,v=Je(v),l&&l[gt]?(l=l.i,O=String(p).toString(),O in l.g&&(p=l.g[O],v=Wn(p,v,A,N),v>-1&&(L(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete l.g[O],l.h--)))):l&&(l=Te(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Wn(p,v,A,N)),(v=l>-1?p[l]:null)&&ie(v))}function ie(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[gt])sn(p.i,l);else{var v=l.type,A=l.proxy;p.removeEventListener?p.removeEventListener(v,A,l.capture):p.detachEvent?p.detachEvent(ye(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=Te(p))?(sn(v,l),v.h==0&&(v.src=null,p[xt]=null)):L(l)}}}function ye(l){return l in J?J[l]:J[l]="on"+l}function De(l,p){if(l.da)l=!0;else{p=new xe(p,this);let v=l.listener,A=l.ha||l.src;l.fa&&ie(l),l=v.call(A,p)}return l}function Te(l){return l=l[xt],l instanceof vn?l:null}var tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Je(l){return typeof l=="function"?l:(l[tt]||(l[tt]=function(p){return l.handleEvent(p)}),l[tt])}function mt(){w.call(this),this.i=new vn(this),this.M=this,this.G=null}g(mt,w),mt.prototype[gt]=!0,mt.prototype.removeEventListener=function(l,p,v,A){he(this,l,p,v,A)};function ot(l,p){var v,A=l.G;if(A)for(v=[];A;A=A.G)v.push(A);if(l=l.M,A=p.type||p,typeof p=="string")p=new I(p,l);else if(p instanceof I)p.target=p.target||l;else{var N=p;p=new I(A,l),de(p,N)}N=!0;let O,Z;if(v)for(Z=v.length-1;Z>=0;Z--)O=p.g=v[Z],N=Kn(O,A,!0,p)&&N;if(O=p.g=l,N=Kn(O,A,!0,p)&&N,N=Kn(O,A,!1,p)&&N,v)for(Z=0;Z<v.length;Z++)O=p.g=v[Z],N=Kn(O,A,!1,p)&&N}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let v=l.g[p];for(let A=0;A<v.length;A++)L(v[A]);delete l.g[p],l.h--}}this.G=null},mt.prototype.J=function(l,p,v,A){return this.i.add(String(l),p,!1,v,A)},mt.prototype.K=function(l,p,v,A){return this.i.add(String(l),p,!0,v,A)};function Kn(l,p,v,A){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let O=0;O<p.length;++O){let Z=p[O];if(Z&&!Z.da&&Z.capture==v){let _e=Z.listener,u=Z.ha||Z.src;Z.fa&&sn(l.i,Z),N=_e.call(u,A)!==!1&&N}}return N&&!A.defaultPrevented}function ga(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function as(l){l.g=ga(()=>{l.g=null,l.i&&(l.i=!1,as(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class ma extends w{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:as(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(l){w.call(this),this.h=l,this.g={}}g(fr,w);var Pt=[];function Dt(l){F(l.g,function(p,v){this.g.hasOwnProperty(v)&&ie(p)},l),l.g={}}fr.prototype.N=function(){fr.Z.N.call(this),Dt(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qr=o.JSON.stringify,cs=o.JSON.parse,ya=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function _a(){}function sr(){}var zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function En(){I.call(this,"d")}g(En,I);function va(){I.call(this,"c")}g(va,I);var us={},Pp=null;function io(){return Pp=Pp||new mt}us.Ia="serverreachability";function wd(l){I.call(this,us.Ia,l)}g(wd,I);function so(l){let p=io();ot(p,new wd(p))}us.STAT_EVENT="statevent";function oo(l,p){I.call(this,us.STAT_EVENT,l),this.stat=p}g(oo,I);function on(l){let p=io();ot(p,new oo(p,l))}us.Ja="timingevent";function Xc(l,p){I.call(this,us.Ja,l),this.size=p}g(Xc,I);function pr(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function ao(){this.g=!0}ao.prototype.ua=function(){this.g=!1};function eu(l,p,v,A,N,O){l.info(function(){if(l.g)if(O){var Z="",_e=O.split("&");for(let f=0;f<_e.length;f++){var u=_e[f].split("=");if(u.length>1){let y=u[0];u=u[1];let S=y.split("_");Z=S.length>=2&&S[1]=="type"?Z+(y+"="+u+"&"):Z+(y+"=redacted&")}}}else Z=null;else Z=O;return"XMLHTTP REQ ("+A+") [attempt "+N+"]: "+p+`
`+v+`
`+Z})}function kp(l,p,v,A,N,O,Z){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+N+"]: "+p+`
`+v+`
`+O+" "+Z})}function Mr(l,p,v,A){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+In(l,v)+(A?" "+A:"")})}function Mp(l,p){l.info(function(){return"TIMEOUT: "+p})}ao.prototype.info=function(){};function In(l,p){if(!l.g)return p;if(!p)return null;try{let O=JSON.parse(p);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var v=O[l];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(let Z=1;Z<A.length;Z++)A[Z]=""}}}}return Qr(O)}catch{return p}}var Ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},co={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},uo;function Td(){}g(Td,_a),Td.prototype.g=function(){return new XMLHttpRequest},uo=new Td;function Ia(l){return encodeURIComponent(String(l))}function lo(l){var p=1;l=l.split(":");let v=[];for(;p>0&&l.length;)v.push(l.shift()),p--;return l.length&&v.push(l.join(":")),v}function bi(l,p,v,A){this.j=l,this.i=p,this.l=v,this.S=A||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Op}function Op(){this.i=null,this.g="",this.h=!1}var wa={},tu={};function Ta(l,p,v){l.M=1,l.A=Sa(gr(p)),l.u=v,l.R=!0,ba(l,null)}function ba(l,p){l.F=Date.now(),ho(l),l.B=gr(l.A);var v=l.B,A=l.S;Array.isArray(A)||(A=[String(A)]),jp(v.i,"t",A),l.C=0,v=l.j.L,l.h=new Op,l.g=pu(l.j,v?p:null,!l.u),l.P>0&&(l.O=new ma(d(l.Y,l,l.g),l.P)),p=l.V,v=l.g,A=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(Pt[0]=N.toString()),N=Pt);for(let O=0;O<N.length;O++){let Z=K(v,N[O],A||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=l.J?ue(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),so(),eu(l.i,l.v,l.B,l.l,l.S,l.u)}bi.prototype.ba=function(l){l=l.target;let p=this.O;p&&at(l)==3?p.j():this.Y(l)},bi.prototype.Y=function(l){try{if(l==this.g)e:{let _e=at(this.g),u=this.g.ya(),f=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Wp(this.g)))){this.K||_e!=4||u==7||(u==8||f<=0?so(3):so(2)),ru(this);var p=this.g.ca();this.X=p;var v=Di(this);if(this.o=p==200,kp(this.i,this.v,this.B,this.l,this.S,_e,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,N=this.g;if((A=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(A)){var O=A;break t}}O=null}if(l=O)Mr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,po(this,l);else{this.o=!1,this.m=3,on(12),ls(this),fo(this);break e}}if(this.R){l=!0;let y;for(;!this.K&&this.C<v.length;)if(y=xp(this,v),y==tu){_e==4&&(this.m=4,on(14),l=!1),Mr(this.i,this.l,null,"[Incomplete Response]");break}else if(y==wa){this.m=4,on(15),Mr(this.i,this.l,v,"[Invalid Chunk]"),l=!1;break}else Mr(this.i,this.l,y,null),po(this,y);if(bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||v.length!=0||this.h.h||(this.m=1,on(16),l=!1),this.o=this.o&&l,!l)Mr(this.i,this.l,v,"[Invalid Chunked Response]"),ls(this),fo(this);else if(v.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),du(Z),Z.P=!0,on(11))}}else Mr(this.i,this.l,v,null),po(this,v);_e==4&&ls(this),this.o&&!this.K&&(_e==4?Fd(this.j,this):(this.o=!1,ho(this)))}else fE(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),ls(this),fo(this)}}}catch{}finally{}};function Di(l){if(!bd(l))return l.g.la();let p=Wp(l.g);if(p==="")return"";let v="",A=p.length,N=at(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ls(l),fo(l),"";l.h.i=new o.TextDecoder}for(let O=0;O<A;O++)l.h.h=!0,v+=l.h.i.decode(p[O],{stream:!(N&&O==A-1)});return p.length=0,l.h.g+=v,l.C=0,l.h.g}function bd(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function xp(l,p){var v=l.C,A=p.indexOf(`
`,v);return A==-1?tu:(v=Number(p.substring(v,A)),isNaN(v)?wa:(A+=1,A+v>p.length?tu:(p=p.slice(A,A+v),l.C=A+v,p)))}bi.prototype.cancel=function(){this.K=!0,ls(this)};function ho(l){l.T=Date.now()+l.H,nu(l,l.H)}function nu(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=pr(d(l.aa,l),p)}function ru(l){l.D&&(o.clearTimeout(l.D),l.D=null)}bi.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(Mp(this.i,this.B),this.M!=2&&(so(),on(17)),ls(this),this.m=2,fo(this)):nu(this,this.T-l)};function fo(l){l.j.I==0||l.K||Fd(l.j,l)}function ls(l){ru(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Dt(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function po(l,p){try{var v=l.j;if(v.I!=0&&(v.g==l||Da(v.h,l))){if(!l.L&&Da(v.h,l)&&v.I==3){try{var A=v.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var N=A;if(N[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<l.F)hu(v),ds(v);else break e;wo(v),on(18)}}else v.xa=N[1],0<v.xa-v.K&&N[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=pr(d(v.Va,v),6e3));Ci(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ai(v,11)}else if((l.L||v.g==l)&&hu(v),!_(p))for(N=v.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],y=f[0];if(!(y<=v.K))if(v.K=y,f=f[1],v.I==2)if(f[0]=="c"){v.M=f[1],v.ba=f[2];let S=f[3];S!=null&&(v.ka=S,v.j.info("VER="+v.ka));let P=f[4];P!=null&&(v.za=P,v.j.info("SVER="+v.za));let x=f[5];x!=null&&typeof x=="number"&&x>0&&(A=1.5*x,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;let Q=l.g;if(Q){let nt=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nt){var O=A.h;O.g||nt.indexOf("spdy")==-1&&nt.indexOf("quic")==-1&&nt.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Dd(O,O.h),O.h=null))}if(A.G){let Lt=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Lt&&(A.wa=Lt,yt(A.J,A.G,Lt))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-l.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var Z=l;if(A.na=fu(A,A.L?A.ba:null,A.W),Z.L){Cd(A.h,Z);var _e=Z,u=A.O;u&&(_e.H=u),_e.D&&(ru(_e),ho(_e)),A.g=Z}else lu(A);v.i.length>0&&ar(v)}else f[0]!="stop"&&f[0]!="close"||Ai(v,7);else v.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Ai(v,7):uu(v):f[0]!="noop"&&v.l&&v.l.qa(f),v.A=0)}}so(4)}catch{}}var Lp=class{constructor(l,p){this.g=l,this.map=p}};function iu(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function go(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ci(l){return l.h?1:l.g?l.g.size:0}function Da(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Dd(l,p){l.g?l.g.add(p):l.h=p}function Cd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}iu.prototype.cancel=function(){if(this.i=Sd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Sd(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let v of l.g.values())p=p.concat(v.G);return p}return C(l.i)}var Ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(l,p){if(l){l=l.split("&");for(let v=0;v<l.length;v++){let A=l[v].indexOf("="),N,O=null;A>=0?(N=l[v].substring(0,A),O=l[v].substring(A+1)):N=l[v],p(N,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Or(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Or?(this.l=l.l,mo(this,l.j),this.o=l.o,this.g=l.g,Ca(this,l.u),this.h=l.h,Nd(this,Bp(l.i)),this.m=l.m):l&&(p=String(l).match(Ad))?(this.l=!1,mo(this,p[1]||"",!0),this.o=Aa(p[2]||""),this.g=Aa(p[3]||"",!0),Ca(this,p[4]),this.h=Aa(p[5]||"",!0),Nd(this,p[6]||"",!0),this.m=Aa(p[7]||"")):(this.l=!1,this.i=new Jr(null,this.l))}Or.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(mr(p,Ra,!0),":");var v=this.g;return(v||p=="file")&&(l.push("//"),(p=this.o)&&l.push(mr(p,Ra,!0),"@"),l.push(Ia(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&l.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(mr(v,v.charAt(0)=="/"?Fp:su,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",mr(v,ou)),l.join("")},Or.prototype.resolve=function(l){let p=gr(this),v=!!l.j;v?mo(p,l.j):v=!!l.o,v?p.o=l.o:v=!!l.g,v?p.g=l.g:v=l.u!=null;var A=l.h;if(v)Ca(p,l.u);else if(v=!!l.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var N=p.h.lastIndexOf("/");N!=-1&&(A=p.h.slice(0,N+1)+A)}if(N=A,N==".."||N==".")A="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){A=N.lastIndexOf("/",0)==0,N=N.split("/");let O=[];for(let Z=0;Z<N.length;){let _e=N[Z++];_e=="."?A&&Z==N.length&&O.push(""):_e==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),A&&Z==N.length&&O.push("")):(O.push(_e),A=!0)}A=O.join("/")}else A=N}return v?p.h=A:v=l.i.toString()!=="",v?Nd(p,Bp(l.i)):v=!!l.m,v&&(p.m=l.m),p};function gr(l){return new Or(l)}function mo(l,p,v){l.j=v?Aa(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ca(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Nd(l,p,v){p instanceof Jr?(l.i=p,Na(l.i,l.l)):(v||(p=mr(p,Et)),l.i=new Jr(p,l.l))}function yt(l,p,v){l.i.set(p,v)}function Sa(l){return yt(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Aa(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function mr(l,p,v){return typeof l=="string"?(l=encodeURI(l).replace(p,Yr),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Yr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ra=/[#\/\?@]/g,su=/[#\?:]/g,Fp=/[#\?]/g,Et=/[#\?@]/g,ou=/#/g;function Jr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function yr(l){l.g||(l.g=new Map,l.h=0,l.i&&Rd(l.i,function(p,v){l.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}n=Jr.prototype,n.add=function(l,p){yr(this),this.i=null,l=yo(this,l);let v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(p),this.h+=1,this};function Vp(l,p){yr(l),p=yo(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Pd(l,p){return yr(l),p=yo(l,p),l.g.has(p)}n.forEach=function(l,p){yr(this),this.g.forEach(function(v,A){v.forEach(function(N){l.call(p,N,A,this)},this)},this)};function Up(l,p){yr(l);let v=[];if(typeof p=="string")Pd(l,p)&&(v=v.concat(l.g.get(yo(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)v=v.concat(l[p]);return v}n.set=function(l,p){return yr(this),this.i=null,l=yo(this,l),Pd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=Up(this,l),l.length>0?String(l[0]):p):p};function jp(l,p,v){Vp(l,p),v.length>0&&(l.i=null,l.g.set(yo(l,p),C(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var v=p[A];let N=Ia(v);v=Up(this,v);for(let O=0;O<v.length;O++){let Z=N;v[O]!==""&&(Z+="="+Ia(v[O])),l.push(Z)}}return this.i=l.join("&")};function Bp(l){let p=new Jr;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function yo(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Na(l,p){p&&!l.j&&(yr(l),l.i=null,l.g.forEach(function(v,A){let N=A.toLowerCase();A!=N&&(Vp(this,A),jp(this,N,v))},l)),l.j=p}function Si(l,p){let v=new ao;if(o.Image){let A=new Image;A.onload=h(Zr,v,"TestLoadImage: loaded",!0,p,A),A.onerror=h(Zr,v,"TestLoadImage: error",!1,p,A),A.onabort=h(Zr,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=h(Zr,v,"TestLoadImage: timeout",!1,p,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else p(!1)}function $p(l,p){let v=new ao,A=new AbortController,N=setTimeout(()=>{A.abort(),Zr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:A.signal}).then(O=>{clearTimeout(N),O.ok?Zr(v,"TestPingServer: ok",!0,p):Zr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Zr(v,"TestPingServer: error",!1,p)})}function Zr(l,p,v,A,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),A(v)}catch{}}function Hp(){this.g=new ya}function Xr(l){this.i=l.Sb||null,this.h=l.ab||!1}g(Xr,_a),Xr.prototype.g=function(){return new au(this.i,this.h)};function au(l,p){mt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(au,mt),n=au.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,or(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function qp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Pa(this):or(this),this.readyState==3&&qp(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Pa(this))},n.Na=function(l){this.g&&(this.response=l,Pa(this))},n.ga=function(){this.g&&Pa(this)};function Pa(l){l.readyState=4,l.l=null,l.j=null,l.B=null,or(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=p.next();return l.join(`\r
`)};function or(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zp(l){let p="";return F(l,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function kd(l,p,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=zp(v),typeof l=="string"?v!=null&&Ia(v):yt(l,p,v))}function _t(l){mt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(_t,mt);var cu=/^https?$/i,Gp=["POST","PUT"];n=_t.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():uo.g(),this.g.onreadystatechange=T(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(O){_o(this,O);return}if(l=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var N in A)v.set(N,A[N]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let O of A.keys())v.set(O,A.get(O));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(O=>O.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Gp,p,void 0)>=0)||A||N||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,Z]of v)this.g.setRequestHeader(O,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){_o(this,O)}};function _o(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,vo(l),Eo(l)}function vo(l){l.A||(l.A=!0,ot(l,"complete"),ot(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ot(this,"complete"),ot(this,"abort"),Eo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eo(this,!0)),_t.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Md(this):this.Xa())},n.Xa=function(){Md(this)};function Md(l){if(l.h&&typeof s<"u"){if(l.v&&at(l)==4)setTimeout(l.Ca.bind(l),0);else if(ot(l,"readystatechange"),at(l)==4){l.h=!1;try{let O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var A;if(A=O===0){let Z=String(l.D).match(Ad)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),A=!cu.test(Z?Z.toLowerCase():"")}v=A}if(v)ot(l,"complete"),ot(l,"success");else{l.o=6;try{var N=at(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",vo(l)}}finally{Eo(l)}}}}function Eo(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let v=l.g;l.g=null,p||ot(l,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function at(l){return l.g?l.g.readyState:0}n.ca=function(){try{return at(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),cs(p)}};function Wp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fE(l){let p={};l=(l.g&&at(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(_(l[A]))continue;var v=lo(l[A]);let N=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let O=p[N]||[];p[N]=O,O.push(v)}U(p,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(l,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||p}function Od(l){this.za=0,this.i=[],this.j=new ao,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Io("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Io("baseRetryDelayMs",5e3,l),this.Za=Io("retryDelaySeedMs",1e4,l),this.Ta=Io("forwardChannelMaxRetries",2,l),this.va=Io("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new iu(l&&l.concurrentRequestLimit),this.Ba=new Hp,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Od.prototype,n.ka=8,n.I=1,n.connect=function(l,p,v,A){on(0),this.W=l,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=fu(this,null,this.W),ar(this)};function uu(l){if(xd(l),l.I==3){var p=l.V++,v=gr(l.J);if(yt(v,"SID",l.M),yt(v,"RID",p),yt(v,"TYPE","terminate"),ei(l,v),p=new bi(l,l.j,p),p.M=2,p.A=Sa(gr(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=p.A,v=!0),v||(p.g=pu(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ho(p)}Vd(l)}function ds(l){l.g&&(du(l),l.g.cancel(),l.g=null)}function xd(l){ds(l),l.v&&(o.clearTimeout(l.v),l.v=null),hu(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function ar(l){if(!go(l.h)&&!l.m){l.m=!0;var p=l.Ea;le||m(),oe||(le(),oe=!0),b.add(p,l),l.D=0}}function Kp(l,p){return Ci(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=pr(d(l.Ea,l,p),To(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new bi(this,this.j,l),O=this.o;if(this.U&&(O?(O=ue(O),de(O,this.U)):O=this.U),this.u!==null||this.R||(N.J=O,O=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Ld(this,N,p),v=gr(this.J),yt(v,"RID",l),yt(v,"CVER",22),this.G&&yt(v,"X-HTTP-Session-Id",this.G),ei(this,v),O&&(this.R?p="headers="+Ia(zp(O))+"&"+p:this.u&&kd(v,this.u,O)),Dd(this.h,N),this.Ra&&yt(v,"TYPE","init"),this.S?(yt(v,"$req",p),yt(v,"SID","null"),N.U=!0,Ta(N,v,null)):Ta(N,v,p),this.I=2}}else this.I==3&&(l?Qp(this,l):this.i.length==0||go(this.h)||Qp(this))};function Qp(l,p){var v;p?v=p.l:v=l.V++;let A=gr(l.J);yt(A,"SID",l.M),yt(A,"RID",v),yt(A,"AID",l.K),ei(l,A),l.u&&l.o&&kd(A,l.u,l.o),v=new bi(l,l.j,v,l.D+1),l.u===null&&(v.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Ld(l,v,1e3),v.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Dd(l.h,v),Ta(v,A,p)}function ei(l,p){l.H&&F(l.H,function(v,A){yt(p,A,v)}),l.l&&F({},function(v,A){yt(p,A,v)})}function Ld(l,p,v){v=Math.min(l.i.length,v);let A=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let _e=-1;for(;;){let u=["count="+v];_e==-1?v>0?(_e=N[0].g,u.push("ofs="+_e)):_e=0:u.push("ofs="+_e);let f=!0;for(let y=0;y<v;y++){var O=N[y].g;let S=N[y].map;if(O-=_e,O<0)_e=Math.max(0,N[y].g-100),f=!1;else try{O="req"+O+"_"||"";try{var Z=S instanceof Map?S:Object.entries(S);for(let[P,x]of Z){let Q=x;a(x)&&(Q=Qr(x)),u.push(O+P+"="+encodeURIComponent(Q))}}catch(P){throw u.push(O+"type="+encodeURIComponent("_badmap")),P}}catch{A&&A(S)}}if(f){Z=u.join("&");break e}}Z=void 0}return l=l.i.splice(0,v),p.G=l,Z}function lu(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;le||m(),oe||(le(),oe=!0),b.add(p,l),l.A=0}}function wo(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=pr(d(l.Da,l),To(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,ka(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=pr(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),ds(this),ka(this))};function du(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function ka(l){l.g=new bi(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=gr(l.na);yt(p,"RID","rpc"),yt(p,"SID",l.M),yt(p,"AID",l.K),yt(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&yt(p,"TO",l.ia),yt(p,"TYPE","xmlhttp"),ei(l,p),l.u&&l.o&&kd(p,l.u,l.o),l.O&&(l.g.H=l.O);var v=l.g;l=l.ba,v.M=1,v.A=Sa(gr(p)),v.u=null,v.R=!0,ba(v,l)}n.Va=function(){this.C!=null&&(this.C=null,ds(this),wo(this),on(19))};function hu(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Fd(l,p){var v=null;if(l.g==p){hu(l),du(l),l.g=null;var A=2}else if(Da(l.h,p))v=p.G,Cd(l.h,p),A=1;else return;if(l.I!=0){if(p.o)if(A==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;A=io(),ot(A,new Xc(A,v)),ar(l)}else lu(l);else if(N=p.m,N==3||N==0&&p.X>0||!(A==1&&Kp(l,p)||A==2&&wo(l)))switch(v&&v.length>0&&(p=l.h,p.i=p.i.concat(v)),N){case 1:Ai(l,5);break;case 4:Ai(l,10);break;case 3:Ai(l,6);break;default:Ai(l,2)}}}function To(l,p){let v=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(v*=2),v*p}function Ai(l,p){if(l.j.info("Error code "+p),p==2){var v=d(l.bb,l),A=l.Ua;let N=!A;A=new Or(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||mo(A,"https"),Sa(A),N?Si(A.toString(),v):$p(A.toString(),v)}else on(2);l.I=0,l.l&&l.l.pa(p),Vd(l),xd(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Vd(l){if(l.I=0,l.ja=[],l.l){let p=Sd(l.h);(p.length!=0||l.i.length!=0)&&(R(l.ja,p),R(l.ja,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.oa()}}function fu(l,p,v){var A=v instanceof Or?gr(v):new Or(v);if(A.g!="")p&&(A.g=p+"."+A.g),Ca(A,A.u);else{var N=o.location;A=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let O=new Or(null);A&&mo(O,A),p&&(O.g=p),N&&Ca(O,N),v&&(O.h=v),A=O}return v=l.G,p=l.wa,v&&p&&yt(A,v,p),yt(A,"VER",l.ka),ei(l,A),A}function pu(l,p,v){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new _t(new Xr({ab:v})):new _t(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ud(){}n=Ud.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function hs(){}hs.prototype.g=function(l,p){return new Nn(l,p)};function Nn(l,p){mt.call(this),this.g=new Od(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!_(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new fs(this)}g(Nn,mt),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){uu(this.g)},Nn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.v&&(v={},v.__data__=Qr(l),l=v);p.i.push(new Lp(p.Ya++,l)),p.I==3&&ar(p)},Nn.prototype.N=function(){this.g.l=null,delete this.j,uu(this.g),delete this.g,Nn.Z.N.call(this)};function jd(l){En.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let v in p){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}g(jd,En);function Ri(){va.call(this),this.status=1}g(Ri,va);function fs(l){this.g=l}g(fs,Ud),fs.prototype.ra=function(){ot(this.g,"a")},fs.prototype.qa=function(l){ot(this.g,new jd(l))},fs.prototype.pa=function(l){ot(this.g,new Ri)},fs.prototype.oa=function(){ot(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,IC=Gs.createWebChannelTransport=function(){return new hs},EC=Gs.getStatEventTarget=function(){return io()},vC=Gs.Event=us,L_=Gs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,kf=Gs.ErrorCode=Ea,co.COMPLETE="complete",_C=Gs.EventType=co,sr.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",mt.prototype.listen=mt.prototype.J,El=Gs.WebChannel=sr,S7=Gs.FetchXmlHttpFactory=Xr,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,yC=Gs.XhrIo=_t}).apply(typeof x_<"u"?x_:typeof self<"u"?self:typeof window<"u"?window:{});var nF="@firebase/firestore",rF="4.9.2";var $n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");var zl="12.3.0";var Lc=new ea("@firebase/firestore");function Il(){return Lc.logLevel}function re(n,...e){if(Lc.logLevel<=qe.DEBUG){let t=e.map(oA);Lc.debug(`Firestore (${zl}): ${n}`,...t)}}function Qs(n,...e){if(Lc.logLevel<=qe.ERROR){let t=e.map(oA);Lc.error(`Firestore (${zl}): ${n}`,...t)}}function Uf(n,...e){if(Lc.logLevel<=qe.WARN){let t=e.map(oA);Lc.warn(`Firestore (${zl}): ${n}`,...t)}}function oA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,zF(n,r,t)}function zF(n,e,t){let r=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qs(r),new Error(r)}function Nt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||zF(e,i,r)}function Qe(n,e){return n}var X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},pe=class extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sa=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var RC=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},NC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($n.UNAUTHENTICATED))}shutdown(){}};var PC=class{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Nt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sa,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sa)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt(typeof r.accessToken=="string",31837,{l:r}),new RC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new $n(e)}},kC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},MC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new kC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t($n.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},OC=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Nt(this.o===void 0,3512);let r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function A7(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var H_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=A7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ge(n,e){return n<e?-1:n>e?1:0}function xC(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return wC(i)===wC(s)?Ge(i,s):wC(i)?1:-1}return Ge(n.length,e.length)}var R7=55296,N7=57343;function wC(n){let e=n.charCodeAt(0);return e>=R7&&e<=N7}function Ml(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var iF="__name__",q_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ge(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):xC(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}},un=class n extends q_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new pe(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},P7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wi=class n extends q_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return P7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iF}static keyField(){return new n([iF])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new pe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new pe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new pe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var we=class n{constructor(e){this.path=e}static fromPath(e){return new n(un.fromString(e))}static fromName(e){return new n(un.fromString(e).popFirst(5))}static empty(){return new n(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new un(e.slice()))}};function k7(n,e,t,r){if(e===!0&&r===!0)throw new pe(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function M7(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function O7(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function TC(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=O7(n);throw new pe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Xf(n,e){if(!M7(n))throw new pe(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new pe(X.INVALID_ARGUMENT,t);return!0}var sF=-62135596800,oF=1e6,ir=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*oF);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sF)throw new pe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oF}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:Xt("string",ir._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};var ke=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ir(0,0))}static max(){return new n(new ir(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jf=-1,LC=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};LC.UNKNOWN_ID=-1;function x7(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new ir(t+1,0):new ir(t,r));return new Fc(i,we.empty(),e)}function L7(n){return new Fc(n.readTime,n.key,jf)}var Fc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ke.min(),we.empty(),jf)}static max(){return new n(ke.max(),we.empty(),jf)}};function F7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}var V7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",FC=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function mv(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==V7)throw n;re("LocalStore","Unexpectedly lost primary lease")}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function U7(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gl(n){return n.name==="IndexedDbTransactionError"}var aA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),j7=-1;function yv(n){return n==null}function z_(n){return n===0&&1/n==-1/0}var GF="";function B7(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aF(e)),e=$7(n.get(t),e);return aF(e)}function $7(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case GF:t+="";break;default:t+=s}}return t}function aF(n){return n+GF+""}var H7="remoteDocuments",WF="owner";var KF="mutationQueues";var QF="mutations";var YF="documentMutations",q7="remoteDocumentsV14";var JF="remoteDocumentGlobal";var ZF="targets";var XF="targetDocuments";var eV="targetGlobal",tV="collectionParents";var nV="clientMetadata";var rV="bundles";var iV="namedQueries";var z7="indexConfiguration";var G7="indexState";var W7="indexEntries";var sV="documentOverlays";var K7="globals";var Q7=[KF,QF,YF,H7,ZF,WF,eV,XF,nV,JF,tV,rV,iV],HEe=[...Q7,sV],Y7=[KF,QF,YF,q7,ZF,WF,eV,XF,nV,JF,tV,rV,iV,sV],J7=Y7,Z7=[...J7,z7,G7,W7];var qEe=[...Z7,K7];function cF(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ep(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function X7(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ht=class n{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dl(this.root,e,this.comparator,!0)}},Dl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}};Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1;Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mn=class n{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new G_(this.data.getIterator())}getIteratorFrom(e){return new G_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},G_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pc=class n{constructor(e){this.fields=e,e.sort(wi.comparator)}static empty(){return new n([])}unionWith(e){let t=new mn(wi.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var W_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Hn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new W_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Hn.EMPTY_BYTE_STRING=new Hn("");var eQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(n){if(Nt(!!n,39018),typeof n=="string"){let e=0,t=eQ.exec(n);if(Nt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Js(n){return typeof n=="string"?Hn.fromBase64String(n):Hn.fromUint8Array(n)}var oV="server_timestamp",aV="__type__",cV="__previous_value__",uV="__local_write_time__";function cA(n){return(n?.mapValue?.fields||{})[aV]?.stringValue===oV}function _v(n){let e=n.mapValue.fields[cV];return cA(e)?_v(e):e}function Bf(n){let e=Ys(n.mapValue.fields[uV].timestampValue);return new ir(e.seconds,e.nanos)}var VC=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},UC="(default)",K_=class n{constructor(e,t){this.projectId=e,this.database=t||UC}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===UC}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var lV="__type__",dV="__max__",F_={mapValue:{fields:{__type__:{stringValue:dV}}}},hV="__vector__",$f="value";function oa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cA(n)?4:pV(n)?9007199254740991:fV(n)?10:11:Ae(28295,{value:n})}function ts(n,e){if(n===e)return!0;let t=oa(n);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bf(n).isEqual(Bf(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ys(i.timestampValue),a=Ys(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Js(i.bytesValue).isEqual(Js(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=At(i.doubleValue),a=At(s.doubleValue);return o===a?z_(o)===z_(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Ml(n.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(cF(o)!==cF(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ts(o[c],a[c])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function Hf(n,e){return(n.values||[]).find(t=>ts(t,e))!==void 0}function Ol(n,e){if(n===e)return 0;let t=oa(n),r=oa(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=At(s.integerValue||s.doubleValue),c=At(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return uF(n.timestampValue,e.timestampValue);case 4:return uF(Bf(n),Bf(e));case 5:return xC(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Js(s),c=Js(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ge(a[d],c[d]);if(h!==0)return h}return Ge(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ge(At(s.latitude),At(o.latitude));return a!==0?a:Ge(At(s.longitude),At(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lF(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[$f]?.arrayValue,h=c[$f]?.arrayValue,g=Ge(d?.values?.length||0,h?.values?.length||0);return g!==0?g:lF(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===F_.mapValue&&o===F_.mapValue)return 0;if(s===F_.mapValue)return 1;if(o===F_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let T=xC(c[g],h[g]);if(T!==0)return T;let C=Ol(a[c[g]],d[h[g]]);if(C!==0)return C}return Ge(c.length,h.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function uF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);let t=Ys(n),r=Ys(e),i=Ge(t.seconds,r.seconds);return i!==0?i:Ge(t.nanos,r.nanos)}function lF(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ol(t[i],r[i]);if(s)return s}return Ge(t.length,r.length)}function xl(n){return jC(n)}function jC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ys(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Js(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=jC(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${jC(t.fields[o])}`;return i+"}"})(n.mapValue):Ae(61005,{value:n})}function j_(n){switch(oa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=_v(n);return e?16+j_(e):16;case 5:return 2*n.stringValue.length;case 6:return Js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+j_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ep(r.fields,(s,o)=>{i+=s.length+j_(o)}),i})(n.mapValue);default:throw Ae(13486,{value:n})}}function BC(n){return!!n&&"integerValue"in n}function uA(n){return!!n&&"arrayValue"in n}function dF(n){return!!n&&"nullValue"in n}function hF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bC(n){return!!n&&"mapValue"in n}function fV(n){return(n?.mapValue?.fields||{})[lV]?.stringValue===hV}function Of(n){if(n.geoPointValue)return{geoPointValue:q({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:q({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ep(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Of(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Of(n.arrayValue.values[t]);return e}return q({},n)}function pV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dV}var GEe={mapValue:{fields:{[lV]:{stringValue:hV},[$f]:{arrayValue:{}}}}};var Ws=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Of(t)}setAll(e){let t=wi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Of(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());bC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ep(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Of(this.value))}};var Ti=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ke.min(),ke.min(),ke.min(),Ws.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ke.min(),ke.min(),Ws.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ke.min(),ke.min(),Ws.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ll=class{constructor(e,t){this.position=e,this.inclusive=t}};function fF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=we.comparator(we.fromName(o.referenceValue),t.key):r=Ol(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ts(n.position[t],e.position[t]))return!1;return!0}var Fl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function tQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Q_=class{},ln=class n extends Q_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new HC(e,t,r):t==="array-contains"?new GC(e,r):t==="in"?new WC(e,r):t==="not-in"?new KC(e,r):t==="array-contains-any"?new QC(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qC(e,r):new zC(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ol(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(Ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ns=class n extends Q_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return gV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function gV(n){return n.op==="and"}function mV(n){return nQ(n)&&gV(n)}function nQ(n){for(let e of n.filters)if(e instanceof ns)return!1;return!0}function $C(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+xl(n.value);if(mV(n))return n.filters.map(e=>$C(e)).join(",");{let e=n.filters.map(t=>$C(t)).join(",");return`${n.op}(${e})`}}function yV(n,e){return n instanceof ln?(function(r,i){return i instanceof ln&&r.op===i.op&&r.field.isEqual(i.field)&&ts(r.value,i.value)})(n,e):n instanceof ns?(function(r,i){return i instanceof ns&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&yV(o,i.filters[a]),!0):!1})(n,e):void Ae(19439)}function _V(n){return n instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${xl(t.value)}`})(n):n instanceof ns?(function(t){return t.op.toString()+" {"+t.getFilters().map(_V).join(" ,")+"}"})(n):"Filter"}var HC=class extends ln{constructor(e,t,r){super(e,t,r),this.key=we.fromName(r.referenceValue)}matches(e){let t=we.comparator(e.key,this.key);return this.matchesComparison(t)}},qC=class extends ln{constructor(e,t){super(e,"in",t),this.keys=vV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},zC=class extends ln{constructor(e,t){super(e,"not-in",t),this.keys=vV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vV(n,e){return(e.arrayValue?.values||[]).map(t=>we.fromName(t.referenceValue))}var GC=class extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return uA(t)&&Hf(t.arrayValue,this.value)}},WC=class extends ln{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Hf(this.value.arrayValue,t)}},KC=class extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hf(this.value.arrayValue,t)}},QC=class extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!uA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hf(this.value.arrayValue,r))}};var YC=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function gF(n,e=null,t=[],r=[],i=null,s=null,o=null){return new YC(n,e,t,r,i,s,o)}function lA(n){let e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>$C(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),yv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xl(r)).join(",")),e.Te=t}return e.Te}function dA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tQ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pF(n.startAt,e.startAt)&&pF(n.endAt,e.endAt)}function JC(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Vl=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function rQ(n,e,t,r,i,s,o,a){return new Vl(n,e,t,r,i,s,o,a)}function hA(n){return new Vl(n)}function mF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iQ(n){return n.collectionGroup!==null}function xf(n){let e=Qe(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mn(wi.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Fl(s,r))}),t.has(wi.keyField().canonicalString())||e.Ie.push(new Fl(wi.keyField(),r))}return e.Ie}function es(n){let e=Qe(n);return e.Ee||(e.Ee=sQ(e,xf(n))),e.Ee}function sQ(n,e){if(n.limitType==="F")return gF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Fl(i.field,s)});let t=n.endAt?new Ll(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ll(n.startAt.position,n.startAt.inclusive):null;return gF(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ZC(n,e,t){return new Vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vv(n,e){return dA(es(n),es(e))&&n.limitType===e.limitType}function EV(n){return`${lA(es(n))}|lt:${n.limitType}`}function wl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_V(i)).join(", ")}]`),yv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>xl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>xl(i)).join(",")),`Target(${r})`})(es(n))}; limitType=${n.limitType})`}function Ev(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):we.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of xf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=fF(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,xf(r),i)||r.endAt&&!(function(o,a,c){let d=fF(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,xf(r),i))})(n,e)}function oQ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IV(n){return(e,t)=>{let r=!1;for(let i of xf(n)){let s=aQ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aQ(n,e,t){let r=n.field.isKeyField()?we.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Ol(c,d):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:n.dir})}}var Zs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ep(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return X7(this.inner)}size(){return this.innerSize}};var cQ=new Ht(we.comparator);function aa(){return cQ}var wV=new Ht(we.comparator);function Mf(...n){let e=wV;for(let t of n)e=e.insert(t.key,t);return e}function uQ(n){let e=wV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kc(){return Lf()}function TV(){return Lf()}function Lf(){return new Zs(n=>n.toString(),(n,e)=>n.isEqual(e))}var WEe=new Ht(we.comparator),lQ=new mn(we.comparator);function Xe(...n){let e=lQ;for(let t of n)e=e.add(t);return e}var dQ=new mn(Ge);function hQ(){return dQ}function fQ(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z_(e)?"-0":e}}function pQ(n){return{integerValue:""+n}}var Ul=class{constructor(){this._=void 0}};function gQ(n,e,t){return n instanceof qf?(function(i,s){let o={fields:{[aV]:{stringValue:oV},[uV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cA(s)&&(s=_v(s)),s&&(o.fields[cV]=s),{mapValue:o}})(t,e):n instanceof jl?bV(n,e):n instanceof Bl?DV(n,e):(function(i,s){let o=yQ(i,s),a=yF(o)+yF(i.Ae);return BC(o)&&BC(i.Ae)?pQ(a):fQ(i.serializer,a)})(n,e)}function mQ(n,e,t){return n instanceof jl?bV(n,e):n instanceof Bl?DV(n,e):t}function yQ(n,e){return n instanceof zf?(function(r){return BC(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var qf=class extends Ul{},jl=class extends Ul{constructor(e){super(),this.elements=e}};function bV(n,e){let t=CV(e);for(let r of n.elements)t.some(i=>ts(i,r))||t.push(r);return{arrayValue:{values:t}}}var Bl=class extends Ul{constructor(e){super(),this.elements=e}};function DV(n,e){let t=CV(e);for(let r of n.elements)t=t.filter(i=>!ts(i,r));return{arrayValue:{values:t}}}var zf=class extends Ul{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function yF(n){return At(n.integerValue||n.doubleValue)}function CV(n){return uA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _Q(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof jl&&i instanceof jl||r instanceof Bl&&i instanceof Bl?Ml(r.elements,i.elements,ts):r instanceof zf&&i instanceof zf?ts(r.Ae,i.Ae):r instanceof qf&&i instanceof qf})(n.transform,e.transform)}var Ff=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function B_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Gf=class{};function SV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new XC(n.key,Ff.none()):new Wf(n.key,n.data,Ff.none());{let t=n.data,r=Ws.empty(),i=new mn(wi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $l(n.key,r,new Pc(i.toArray()),Ff.none())}}function vQ(n,e,t){n instanceof Wf?(function(i,s,o){let a=i.value.clone(),c=vF(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof $l?(function(i,s,o){if(!B_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=vF(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(AV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Vf(n,e,t,r){return n instanceof Wf?(function(s,o,a,c){if(!B_(s.precondition,o))return a;let d=s.value.clone(),h=EF(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof $l?(function(s,o,a,c){if(!B_(s.precondition,o))return a;let d=EF(s.fieldTransforms,c,o),h=o.data;return h.setAll(AV(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return B_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function _F(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ml(r,i,(s,o)=>_Q(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wf=class extends Gf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$l=class extends Gf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function AV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function vF(n,e,t){let r=new Map;Nt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mQ(o,a,t[i]))}return r}function EF(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,gQ(s,o,e))}return r}var XC=class extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var eS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&vQ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=TV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=SV(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,(t,r)=>_F(t,r))&&Ml(this.baseMutations,e.baseMutations,(t,r)=>_F(t,r))}};var tS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var nS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Jt,Ke;function RV(n){if(n===void 0)return Qs("GRPC error has no .code"),X.UNKNOWN;switch(n){case Jt.OK:return X.OK;case Jt.CANCELLED:return X.CANCELLED;case Jt.UNKNOWN:return X.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return X.INTERNAL;case Jt.UNAVAILABLE:return X.UNAVAILABLE;case Jt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Jt.NOT_FOUND:return X.NOT_FOUND;case Jt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Jt.ABORTED:return X.ABORTED;case Jt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Jt.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:n})}}(Ke=Jt||(Jt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";var EQ=null;function IQ(){return new TextEncoder}var wQ=new zs([4294967295,4294967295],0);function IF(n){let e=IQ().encode(n),t=new mC;return t.update(e),new Uint8Array(t.digest())}function wF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zs([t,r],0),new zs([i,s],0)]}var rS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mc(`Invalid padding: ${t}`);if(r<0)throw new Mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=zs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(zs.fromNumber(r)));return i.compare(wQ)===1&&(i=new zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=IF(e),[r,i]=wF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=IF(e),[r,i]=wF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Mc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Y_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Kf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ke.min(),i,new Ht(Ge),aa(),Xe())}},Kf=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Xe(),Xe(),Xe())}};var Cl=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},J_=class{constructor(e,t){this.targetId=e,this.Ce=t}},Z_=class{constructor(e,t,r=Hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},X_=class{constructor(){this.ve=0,this.Fe=TF(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),r=Xe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae(38017,{changeType:s})}}),new Kf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=TF()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},iS=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=aa(),this.Je=V_(),this.He=V_(),this.Ye=new Ht(Ge)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(JC(s))if(r===0){let o=new we(s.path);this.et(t,o,Ti.newNoDocument(o,ke.min()))}else Nt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}EQ?.lt((function(h,g,T,C,R){let M={localCacheCount:h,existenceFilterCount:g.count,databaseId:T.database,projectId:T.projectId},k=g.unchangedNames;return k&&(M.bloomFilter={applied:R===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:H=>C?.mightContain(H)??!1}),M})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Js(r).toUint8Array()}catch(c){if(c instanceof W_)return Uf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new rS(o,i,s)}catch(c){return Uf(c instanceof Mc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&JC(a.target)){let c=new we(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ti.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Xe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Y_(e,t,this.Ye,this.je,r);return this.je=aa(),this.Je=V_(),this.He=V_(),this.Ye=new Ht(Ge),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new X_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mn(Ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mn(Ge),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new X_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function V_(){return new Ht(we.comparator)}function TF(){return new Ht(we.comparator)}var TQ={asc:"ASCENDING",desc:"DESCENDING"},bQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DQ={and:"AND",or:"OR"},sS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function oS(n,e){return n.useProto3Json||yv(e)?e:{value:e}}function CQ(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SQ(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Sl(n){return Nt(!!n,49232),ke.fromTimestamp((function(t){let r=Ys(t);return new ir(r.seconds,r.nanos)})(n))}function AQ(n,e){return aS(n,e).canonicalString()}function aS(n,e){let t=(function(i){return new un(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function NV(n){let e=un.fromString(n);return Nt(xV(e),10190,{key:e.toString()}),e}function DC(n,e){let t=NV(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(kV(t))}function PV(n,e){return AQ(n.databaseId,e)}function RQ(n){let e=NV(n);return e.length===4?un.emptyPath():kV(e)}function bF(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kV(n){return Nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ae(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(Nt(h===void 0||typeof h=="string",58123),Hn.fromBase64String(h||"")):(Nt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Hn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?X.UNKNOWN:RV(d.code);return new pe(h,d.message||"")})(o);t=new Z_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=DC(n,r.document.name),s=Sl(r.document.updateTime),o=r.document.createTime?Sl(r.document.createTime):ke.min(),a=new Ws({mapValue:{fields:r.document.fields}}),c=Ti.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Cl(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=DC(n,r.document),s=r.readTime?Sl(r.readTime):ke.min(),o=Ti.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Cl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=DC(n,r.document),s=r.removedTargetIds||[];t=new Cl([],s,i,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new nS(i,s),a=r.targetId;t=new J_(a,o)}}return t}function PQ(n,e){return{documents:[PV(n,e.path)]}}function kQ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PV(n,i);let s=(function(d){if(d.length!==0)return OV(ns.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(T){return{field:Tl(T.field),direction:xQ(T.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=oS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function MQ(n){let e=RQ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Nt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let T=MV(g);return T instanceof ns&&mV(T)?T.getFilters():[T]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(T=>(function(R){return new Fl(bl(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let T;return T=typeof g=="object"?g.value:g,yv(T)?null:T})(t.limit));let c=null;t.startAt&&(c=(function(g){let T=!!g.before,C=g.values||[];return new Ll(C,T)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let T=!g.before,C=g.values||[];return new Ll(C,T)})(t.endAt)),rQ(e,i,o,s,a,"F",c,d)}function OQ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=bl(t.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=bl(t.unaryFilter.field);return ln.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=bl(t.unaryFilter.field);return ln.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=bl(t.unaryFilter.field);return ln.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ln.create(bl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ns.create(t.compositeFilter.filters.map(r=>MV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function xQ(n){return TQ[n]}function LQ(n){return bQ[n]}function FQ(n){return DQ[n]}function Tl(n){return{fieldPath:n.canonicalString()}}function bl(n){return wi.fromServerFormat(n.fieldPath)}function OV(n){return n instanceof ln?(function(t){if(t.op==="=="){if(hF(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NAN"}};if(dF(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hF(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NAN"}};if(dF(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(t.field),op:LQ(t.op),value:t.value}}})(n):n instanceof ns?(function(t){let r=t.getFilters().map(i=>OV(i));return r.length===1?r[0]:{compositeFilter:{op:FQ(t.op),filters:r}}})(n):Ae(54877,{filter:n})}function xV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Qf=class n{constructor(e,t,r,i,s=ke.min(),o=ke.min(),a=Hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cS=class{constructor(e){this.yt=e}};function VQ(n){let e=MQ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ZC(e,e.limit,"L"):e}var ev=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(At(e.integerValue));else if("doubleValue"in e){let r=At(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),z_(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ys(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Js(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?pV(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):fV(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=$f,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(At(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};ev.Kt=new ev;var uS=class{constructor(){this.Cn=new lS}addToCollectionParentIndex(e,t){return this.Cn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Fc.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Fc.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},lS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(un.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(un.comparator)).toArray()}};var KEe=new Uint8Array(0);var DF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LV=41943040,Gr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(LV,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);var Yf=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var CF="LruGarbageCollector",UQ=1048576;function SF([n,e],[t,r]){let i=Ge(n,t);return i===0?Ge(e,r):i}var dS=class{constructor(e){this.Ir=e,this.buffer=new mn(SF),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();SF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},hS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(CF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gl(t)?re(CF,"Ignoring IndexedDB error during garbage collection: ",t):await mv(t)}await this.Vr(3e5)})}},fS=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(aA.ce);let r=new dS(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(DF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DF):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Il()<=qe.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function jQ(n,e){return new fS(n,e)}var pS=class{constructor(){this.changes=new Zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var gS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var mS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vf(r.mutation,i,Pc.empty(),ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xe()){let i=kc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Mf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=kc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=aa(),o=Lf(),a=(function(){return Lf()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof $l)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Vf(h.mutation,d,h.mutation.getFieldMask(),ir.now())):o.set(d.key,Pc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new gS(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Lf(),i=new Ht((o,a)=>o-a),s=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Pc.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Xe()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=TV();h.forEach(T=>{if(!s.has(T)){let C=SV(t.get(T),r.get(T));C!==null&&g.set(T,C),s=s.add(T)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return we.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iQ(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):z.resolve(kc()),a=jf,c=s;return o.next(d=>z.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(T=>{c=c.insert(h,T)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Xe())).next(h=>({batchId:a,changes:uQ(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(r=>{let i=Mf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Mf();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,c=>{let d=(function(g,T){return new Vl(T,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,T)=>{o=o.insert(g,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ti.newInvalidDocument(h)))});let a=Mf();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Vf(h.mutation,d,Pc.empty(),ir.now()),Ev(t,d)&&(a=a.insert(c,d))}),a})}};var yS=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Sl(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:VQ(i.bundledQuery),readTime:Sl(i.readTime)}})(t)),z.resolve()}};var _S=class{constructor(){this.overlays=new Ht(we.comparator),this.qr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=kc();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=kc(),s=t.length+1,o=new we(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ht((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=kc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=kc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return z.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tS(t,r));let s=this.qr.get(t);s===void 0&&(s=Xe(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var vS=class{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var Jf=class{constructor(){this.Qr=new mn(Zt.$r),this.Ur=new mn(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Zt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new we(new un([])),r=new Zt(t,e),i=new Zt(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new we(new un([])),r=new Zt(t,e),i=new Zt(t,e+1),s=Xe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Zt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Zt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Ge(e.Yr,t.Yr)}static Kr(e,t){return Ge(e.Yr,t.Yr)||we.comparator(e.key,t.key)}};var ES=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mn(Zt.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new eS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Zt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?j7:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Zt(t,0),i=new Zt(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Ge);return t.forEach(i=>{let s=new Zt(i,0),o=new Zt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;we.isDocumentKey(s)||(s=s.child(""));let o=new Zt(new we(s),0),a=new mn(Ge);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),z.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(t.mutations,i=>{let s=new Zt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Zt(t,0),i=this.Zr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var IS=class{constructor(e){this.ri=e,this.docs=(function(){return new Ht(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let r=aa();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ti.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=aa(),o=t.path,a=new we(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||F7(L7(h),r)<=0||(i.has(h.key)||Ev(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ae(9500)}ii(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wS(this)}getSize(e){return z.resolve(this.size)}},wS=class extends pS{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var TS=class{constructor(e){this.persistence=e,this.si=new Zs(t=>lA(t),dA),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new Jf,this.targetCount=0,this.ai=Yf.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),z.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Yf(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Pr(t),z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this._i.containsKey(t))}};var tv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new aA(0),this.li=!1,this.li=!0,this.hi=new vS,this.referenceDelegate=e(this),this.Pi=new TS(this),this.indexManager=new uS,this.remoteDocumentCache=(function(i){return new IS(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new cS(t),this.Ii=new yS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _S,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new ES(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);let i=new bS(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},bS=class extends FC{constructor(e){super(),this.currentSequenceNumber=e}},DS=class n{constructor(e){this.persistence=e,this.Ri=new Jf,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,r=>{let i=we.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,ke.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},nv=class n{constructor(e,t){this.persistence=e,this.pi=new Zs(r=>B7(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jQ(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return z.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ke.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=j_(e.data.value)),t}br(e,t,r){return z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var CS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Xe(),i=Xe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var SS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var AS=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return T1()?8:U7(Rr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new SS;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Il()<=qe.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",wl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(Il()<=qe.DEBUG&&re("QueryEngine","Query:",wl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Il()<=qe.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",wl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(t))):z.resolve())}ys(e,t){if(mF(t))return z.resolve(null);let r=es(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ZC(t,null,"F"),r=es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Xe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,ZC(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return mF(t)||i.isEqual(ke.min())?z.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?z.resolve(null):(Il()<=qe.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wl(t)),this.vs(e,o,t,x7(i,jf)).next(a=>a))})}Ds(e,t){let r=new mn(IV(e));return t.forEach((i,s)=>{Ev(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Il()<=qe.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",wl(t)),this.ps.getDocumentsMatchingQuery(e,t,Fc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var fA="LocalStore",BQ=3e8,RS=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ht(Ge),this.xs=new Zs(s=>lA(s),dA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function $Q(n,e,t,r){return new RS(n,e,t,r)}async function FV(n,e){let t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Xe();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function VV(n){let e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function HQ(n,e){let t=Qe(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let T=i.get(g);if(!T)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,g)));let C=T.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(Hn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,r)),i=i.insert(g,C),(function(M,k,H){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=BQ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,C,h)&&a.push(t.Pi.updateTargetData(s,C))});let c=aa(),d=Xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(qQ(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ke.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function qQ(n,e,t){let r=Xe(),i=Xe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=aa();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):re(fA,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function zQ(n,e){let t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Qf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function NS(n,e,t){let r=Qe(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gl(o))throw o;re(fA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function AF(n,e,t){let r=Qe(n),i=ke.min(),s=Xe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let g=Qe(c),T=g.xs.get(h);return T!==void 0?z.resolve(g.Ms.get(T)):g.Pi.getTargetData(d,h)})(r,o,es(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:ke.min(),t?s:Xe())).next(a=>(GQ(r,oQ(e),a),{documents:a,Qs:s})))}function GQ(n,e,t){let r=n.Os.get(e)||ke.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var rv=class{constructor(){this.activeTargetIds=hQ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var PS=class{constructor(){this.Mo=new rv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var kS=class{Oo(e){}shutdown(){}};var RF="ConnectivityMonitor",iv=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(RF,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){re(RF,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var U_=null;function MS(){return U_===null?U_=(function(){return 268435456+Math.round(2147483648*Math.random())})():U_++,"0x"+U_.toString(16)}var CC="RestConnection",WQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},OS=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===UC?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=MS(),a=this.zo(e,t.toUriEncodedString());re(CC,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=yf(d);return this.Jo(e,a,c,r,h).then(g=>(re(CC,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Uf(CC,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=WQ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var xS=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Bn="WebChannelConnection",LS=class extends OS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=MS();return new Promise((a,c)=>{let d=new yC;d.setWithCredentials(!0),d.listenOnce(_C.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case kf.NO_ERROR:let g=d.getResponseJson();re(Bn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case kf.TIMEOUT:re(Bn,`RPC '${e}' ${o} timed out`),c(new pe(X.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:let T=d.getStatus();if(re(Bn,`RPC '${e}' ${o} failed with status:`,T,"response text:",d.getResponseText()),T>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let R=C?.error;if(R&&R.status&&R.message){let M=(function(H){let $=H.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf($)>=0?$:X.UNKNOWN})(R.status);c(new pe(M,R.message))}else c(new pe(X.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new pe(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{re(Bn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);re(Bn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=MS(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IC(),a=EC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");re(Bn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.I_(g);let T=!1,C=!1,R=new xS({Yo:k=>{C?re(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(T||(re(Bn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),T=!0),re(Bn,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Zo:()=>g.close()}),M=(k,H,$)=>{k.listen(H,B=>{try{$(B)}catch(se){setTimeout(()=>{throw se},0)}})};return M(g,El.EventType.OPEN,()=>{C||(re(Bn,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),M(g,El.EventType.CLOSE,()=>{C||(C=!0,re(Bn,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(g))}),M(g,El.EventType.ERROR,k=>{C||(C=!0,Uf(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),R.a_(new pe(X.UNAVAILABLE,"The operation could not be completed")))}),M(g,El.EventType.MESSAGE,k=>{if(!C){let H=k.data[0];Nt(!!H,16349);let $=H,B=$?.error||$[0]?.error;if(B){re(Bn,`RPC '${e}' stream ${i} received error:`,B);let se=B.status,le=(function(m){let E=Jt[m];if(E!==void 0)return RV(E)})(se),oe=B.message;le===void 0&&(le=X.INTERNAL,oe="Unknown error status: "+se+" with message "+B.message),C=!0,R.a_(new pe(le,oe)),g.close()}else re(Bn,`RPC '${e}' stream ${i} received:`,H),R.u_(H)}}),M(a,vC.STAT_EVENT,k=>{k.stat===L_.PROXY?re(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===L_.NOPROXY&&re(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function SC(){return typeof document<"u"?document:null}function UV(n){return new sS(n,!0)}var sv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var NF="PersistentStream",FS=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Qs(t.toString()),Qs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new pe(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(NF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(re(NF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},VS=class extends FS{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=NQ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ke.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?Sl(o.readTime):ke.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=bF(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=JC(c)?{documents:PQ(s,c)}:{query:kQ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SQ(s,o.resumeToken);let d=oS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=CQ(s,o.snapshotVersion.toTimestamp());let d=oS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=OQ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=bF(this.serializer),t.removeTarget=e,this.q_(t)}};var US=class{},jS=class extends US{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,aS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(X.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,aS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(X.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},BS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qs(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Hl="RemoteStore",$S=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{np(this)&&(re(Hl,"Restarting streams for network reachability change."),await(async function(c){let d=Qe(c);d.Ea.add(4),await tp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Iv(d)})(this))})}),this.Ra=new BS(r,i)}};async function Iv(n){if(np(n))for(let e of n.da)await e(!0)}async function tp(n){for(let e of n.da)await e(!1)}function jV(n,e){let t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yA(t)?mA(t):Wl(t).O_()&&gA(t,e))}function pA(n,e){let t=Qe(n),r=Wl(t);t.Ia.delete(e),r.O_()&&BV(t,e),t.Ia.size===0&&(r.O_()?r.L_():np(t)&&t.Ra.set("Unknown"))}function gA(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wl(n).Y_(e)}function BV(n,e){n.Va.Ue(e),Wl(n).Z_(e)}function mA(n){n.Va=new iS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wl(n).start(),n.Ra.ua()}function yA(n){return np(n)&&!Wl(n).x_()&&n.Ia.size>0}function np(n){return Qe(n).Ea.size===0}function $V(n){n.Va=void 0}async function KQ(n){n.Ra.set("Online")}async function QQ(n){n.Ia.forEach((e,t)=>{gA(n,e)})}async function YQ(n,e){$V(n),yA(n)?(n.Ra.ha(e),mA(n)):n.Ra.set("Unknown")}async function JQ(n,e,t){if(n.Ra.set("Online"),e instanceof Z_&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){re(Hl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await PF(n,r)}else if(e instanceof Cl?n.Va.Ze(e):e instanceof J_?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{let r=await VV(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Hn.EMPTY_BYTE_STRING,h.snapshotVersion)),BV(s,c);let g=new Qf(h.target,c,d,h.sequenceNumber);gA(s,g)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){re(Hl,"Failed to raise snapshot:",r),await PF(n,r)}}async function PF(n,e,t){if(!Gl(e))throw e;n.Ea.add(1),await tp(n),n.Ra.set("Offline"),t||(t=()=>VV(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re(Hl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Iv(n)})}async function kF(n,e){let t=Qe(n);t.asyncQueue.verifyOperationInProgress(),re(Hl,"RemoteStore received new credentials");let r=np(t);t.Ea.add(3),await tp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Iv(t)}async function ZQ(n,e){let t=Qe(n);e?(t.Ea.delete(2),await Iv(t)):e||(t.Ea.add(2),await tp(t),t.Ra.set("Unknown"))}function Wl(n){return n.ma||(n.ma=(function(t,r,i){let s=Qe(t);return s.sa(),new VS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:KQ.bind(null,n),t_:QQ.bind(null,n),r_:YQ.bind(null,n),H_:JQ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),yA(n)?mA(n):n.Ra.set("Unknown")):(await n.ma.stop(),$V(n))})),n.ma}var HS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function HV(n,e){if(Qs("AsyncQueue",`${e}: ${n}`),Gl(n))return new pe(X.UNAVAILABLE,`${e}: ${n}`);throw n}var ov=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||we.comparator(t.key,r.key):(t,r)=>we.comparator(t.key,r.key),this.keyedMap=Mf(),this.sortedSet=new Ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var av=class{constructor(){this.ga=new Ht(we.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},ql=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,ov.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var qS=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},zS=class{constructor(){this.queries=MF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Qe(t),s=i.queries;i.queries=MF(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new pe(X.ABORTED,"Firestore shutting down"))}};function MF(){return new Zs(n=>EV(n),vv)}async function XQ(n,e){let t=Qe(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new qS,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=HV(o,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&_A(t)}async function eY(n,e){let t=Qe(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function tY(n,e){let t=Qe(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&_A(t)}function nY(n,e,t){let r=Qe(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function _A(n){n.Ca.forEach(e=>{e.next()})}var GS,OF;(OF=GS||(GS={})).Ma="default",OF.Cache="cache";var WS=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ql(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==GS.Cache}};var cv=class{constructor(e){this.key=e}},uv=class{constructor(e){this.key=e}},KS=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=IV(e),this.tu=new ov(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new av,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let T=i.get(h),C=Ev(this.query,g)?g:null,R=!!T&&this.mutatedKeys.has(T.key),M=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),k=!1;T&&C?T.data.isEqual(C.data)?R!==M&&(r.track({type:3,doc:C}),k=!0):this.su(T,C)||(r.track({type:2,doc:C}),k=!0,(c&&this.eu(C,c)>0||d&&this.eu(C,d)<0)&&(a=!0)):!T&&C?(r.track({type:0,doc:C}),k=!0):T&&!C&&(r.track({type:1,doc:T}),k=!0,(c||d)&&(a=!0)),k&&(C?(o=o.add(C),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>(function(C,R){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:k})}};return M(C)-M(R)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new ql(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new av,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new uv(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new cv(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Xe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},vA="SyncEngine",QS=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},YS=class{constructor(e){this.key=e,this.hu=!1}},JS=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zs(a=>EV(a),vv),this.Iu=new Map,this.Eu=new Set,this.du=new Ht(we.comparator),this.Au=new Map,this.Ru=new Jf,this.Vu={},this.mu=new Map,this.fu=Yf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function rY(n,e,t=!0){let r=KV(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await qV(r,e,t,!0),i}async function iY(n,e){let t=KV(n);await qV(t,e,!0,!1)}async function qV(n,e,t,r){let i=await zQ(n.localStore,es(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await sY(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&jV(n.remoteStore,i),a}async function sY(n,e,t,r,i){n.pu=(g,T,C)=>(async function(M,k,H,$){let B=k.view.ru(H);B.Cs&&(B=await AF(M.localStore,k.query,!1).then(({documents:b})=>k.view.ru(b,B)));let se=$&&$.targetChanges.get(k.targetId),le=$&&$.targetMismatches.get(k.targetId)!=null,oe=k.view.applyChanges(B,M.isPrimaryClient,se,le);return LF(M,k.targetId,oe.au),oe.snapshot})(n,g,T,C);let s=await AF(n.localStore,e,!0),o=new KS(e,s.Qs),a=o.ru(s.documents),c=Kf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);LF(n,t,d.au);let h=new QS(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function oY(n,e,t){let r=Qe(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!vv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await NS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&pA(r.remoteStore,i.targetId),ZS(r,i.targetId)}).catch(mv)):(ZS(r,i.targetId),await NS(r.localStore,i.targetId,!0))}async function aY(n,e){let t=Qe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pA(t.remoteStore,r.targetId))}async function zV(n,e){let t=Qe(n);try{let r=await HQ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Nt(o.hu,14607):i.removedDocuments.size>0&&(Nt(o.hu,42227),o.hu=!1))}),await WV(t,r,e)}catch(r){await mv(r)}}function xF(n,e,t){let r=Qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Qe(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let T of g.Sa)T.va(a)&&(d=!0)}),d&&_A(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cY(n,e,t){let r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ht(we.comparator);o=o.insert(s,Ti.newNoDocument(s,ke.min()));let a=Xe().add(s),c=new Y_(ke.min(),new Map,new Ht(Ge),o,a);await zV(r,c),r.du=r.du.remove(s),r.Au.delete(e),EA(r)}else await NS(r.localStore,e,!1).then(()=>ZS(r,e,t)).catch(mv)}function ZS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||GV(n,r)})}function GV(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(pA(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),EA(n))}function LF(n,e,t){for(let r of t)r instanceof cv?(n.Ru.addReference(r.key,e),uY(n,r)):r instanceof uv?(re(vA,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||GV(n,r.key)):Ae(19791,{wu:r})}function uY(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(re(vA,"New document in limbo: "+t),n.Eu.add(r),EA(n))}function EA(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new we(un.fromString(e)),r=n.fu.next();n.Au.set(r,new YS(t)),n.du=n.du.insert(t,r),jV(n.remoteStore,new Qf(es(hA(t.path)),r,"TargetPurposeLimboResolution",aA.ce))}}async function WV(n,e,t){let r=Qe(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=CS.As(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,d){let h=Qe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(d,T=>z.forEach(T.Es,C=>h.persistence.referenceDelegate.addReference(g,T.targetId,C)).next(()=>z.forEach(T.ds,C=>h.persistence.referenceDelegate.removeReference(g,T.targetId,C)))))}catch(g){if(!Gl(g))throw g;re(fA,"Failed to update sequence numbers: "+g)}for(let g of d){let T=g.targetId;if(!g.fromCache){let C=h.Ms.get(T),R=C.snapshotVersion,M=C.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(T,M)}}})(r.localStore,s))}async function lY(n,e){let t=Qe(n);if(!t.currentUser.isEqual(e)){re(vA,"User change. New user:",e.toKey());let r=await FV(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new pe(X.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await WV(t,r.Ls)}}function dY(n,e){let t=Qe(n),r=t.Au.get(e);if(r&&r.hu)return Xe().add(r.key);{let i=Xe(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function KV(n){let e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cY.bind(null,e),e.Pu.H_=tY.bind(null,e.eventManager),e.Pu.yu=nY.bind(null,e.eventManager),e}var QV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=UV(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return $Q(this.persistence,new AS,t.initialUser,this.serializer)}Cu(t){return new tv(DS.mi,this.serializer)}Du(t){return new PS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),XS=class extends QV{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Nt(this.persistence.referenceDelegate instanceof nv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new hS(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Gr.withCacheSize(this.cacheSizeBytes):Gr.DEFAULT;return new tv(r=>nv.mi(r,t),this.serializer)}};var hY=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lY.bind(null,this.syncEngine),await ZQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new zS})()}createDatastore(t){let r=UV(t.databaseInfo.databaseId),i=(function(o){return new LS(o)})(t.databaseInfo);return(function(o,a,c,d){return new jS(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new $S(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>xF(this.syncEngine,r,0),(function(){return iv.v()?new iv:new kS})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let T=new JS(s,o,a,c,d,h);return g&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Qe(r);re(Hl,"RemoteStore shutting down."),i.Ea.add(5),await tp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var eA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ca="FirestoreClient",tA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=$n.UNAUTHENTICATED,this.clientId=H_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(ca,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(ca,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=HV(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function AC(n,e){n.asyncQueue.verifyOperationInProgress(),re(ca,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await FV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function FF(n,e){n.asyncQueue.verifyOperationInProgress();let t=await fY(n);re(ca,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>kF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>kF(e.remoteStore,i)),n._onlineComponents=e}async function fY(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(ca,"Using user provided OfflineComponentProvider");try{await AC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===X.FAILED_PRECONDITION||i.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Uf("Error using user provided cache. Falling back to memory cache: "+t),await AC(n,new QV)}}else re(ca,"Using default OfflineComponentProvider"),await AC(n,new XS(void 0));return n._offlineComponents}async function pY(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(ca,"Using user provided OnlineComponentProvider"),await FF(n,n._uninitializedComponentsProvider._online)):(re(ca,"Using default OnlineComponentProvider"),await FF(n,new hY))),n._onlineComponents}async function VF(n){let e=await pY(n),t=e.eventManager;return t.onListen=rY.bind(null,e.syncEngine),t.onUnlisten=oY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aY.bind(null,e.syncEngine),t}function YV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var UF=new Map;var gY="firestore.googleapis.com",jF=!0,lv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gY,this.ssl=jF}else this.host=e.host,this.ssl=e.ssl??jF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UQ)throw new pe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},nA=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new NC;switch(r.type){case"firstParty":return new MC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=UF.get(t);r&&(re("ComponentProvider","Removing Datastore"),UF.delete(t),r.terminate())})(this),Promise.resolve()}};var dv=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ks=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Xf(t,n._jsonSchema))return new n(e,r||null,new we(un.fromString(t.referencePath)))}};Ks._jsonSchemaVersion="firestore/documentReference/1.0",Ks._jsonSchema={type:Xt("string",Ks._jsonSchemaVersion),referencePath:Xt("string")};var rA=class n extends dv{constructor(e,t,r){super(e,t,hA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ks(this.firestore,null,new we(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var BF="AsyncQueue",hv=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sv(this,"async_queue_retry"),this._c=()=>{let r=SC();r&&re(BF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=SC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=SC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new sa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gl(e))throw e;re(BF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Qs("INTERNAL UNHANDLED ERROR: ",$F(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=HS.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Ae(47125,{Pc:$F(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function $F(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function HF(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Zf=class extends nA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new hv(e),this._firestoreClient=void 0,await e}}};function mY(n){if(n._terminated)throw new pe(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yY(n),n._firestoreClient}function yY(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new VC(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,YV(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new tA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Al=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Hn.fromBase64String(e))}catch(t){throw new pe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Al._jsonSchemaVersion="firestore/bytes/1.0",Al._jsonSchema={type:Xt("string",Al._jsonSchemaVersion),bytes:Xt("string")};var fv=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Rl=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Xf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Rl._jsonSchemaVersion="firestore/geoPoint/1.0",Rl._jsonSchema={type:Xt("string",Rl._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};var Nl=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new pe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Nl._jsonSchemaVersion="firestore/vectorValue/1.0",Nl._jsonSchema={type:Xt("string",Nl._jsonSchemaVersion),vectorValues:Xt("object")};var _Y=new RegExp("[~\\*/\\[\\]]");function vY(n,e,t){if(e.search(_Y)>=0)throw qF(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fv(...e.split("."))._internalPath}catch{throw qF(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qF(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new pe(X.INVALID_ARGUMENT,a+n+c)}var pv=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ks(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(JV("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},iA=class extends pv{data(){return super.data()}};function JV(n,e){return typeof e=="string"?vY(n,e):e instanceof fv?e._internalPath:e._delegate._internalPath}function EY(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sA=class{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ep(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[$f].arrayValue?.values?.map(r=>At(r.doubleValue));return new Nl(t)}convertGeoPoint(e){return new Rl(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_v(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bf(e));default:return null}}convertTimestamp(e){let t=Ys(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=un.fromString(e);Nt(xV(r),9688,{name:e});let i=new K_(r.get(1),r.get(3)),s=new we(r.popFirst(5));return i.isEqual(t)||Qs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Oc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xc=class n extends pv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(JV("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xc._jsonSchemaVersion="firestore/documentSnapshot/1.0",xc._jsonSchema={type:Xt("string",xc._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};var Pl=class extends xc{data(e={}){return super.data(e)}},kl=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Oc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pl(this._firestore,this._userDataWriter,r.key,r,new Oc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Pl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Pl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:IY(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=H_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function IY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}kl._jsonSchemaVersion="firestore/querySnapshot/1.0",kl._jsonSchema={type:Xt("string",kl._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};var gv=class extends sA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Al(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ks(this.firestore,null,t)}};function ZV(n,...e){n=Xo(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||HF(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(HF(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Ks)o=TC(n.firestore,Zf),a=hA(n._key.path),s={next:c=>{e[r]&&e[r](wY(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=TC(n,dv);o=TC(c.firestore,Zf),a=c._query;let d=new gv(o);s={next:h=>{e[r]&&e[r](new kl(o,d,c,h))},error:e[r+1],complete:e[r+2]},EY(n._query)}return(function(d,h,g,T){let C=new eA(T),R=new WS(h,C,g);return d.asyncQueue.enqueueAndForget(async()=>XQ(await VF(d),R)),()=>{C.Nu(),d.asyncQueue.enqueueAndForget(async()=>eY(await VF(d),R))}})(mY(o),a,i,s)}function wY(n,e,t){let r=t.docs.get(e._key),i=new gv(n);return new xc(n,i,e._key,r,new Oc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){zl=i})(yl),ta(new Ei("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Zf(new PC(r.getProvider("auth-internal")),new OC(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new pe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new K_(d.options.projectId,h)})(o,i),o);return s=q({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Us(nF,rF,e),Us(nF,rF,"esm2020")})();var wv=function(){return wv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wv.apply(this,arguments)};var TY={includeMetadataChanges:!1};function XV(n,e){return e===void 0&&(e=TY),new ge(function(t){var r=ZV(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function e2(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:wv(wv({},r),(t={},t[e.idField]=n.id,t))}function t2(n){return XV(n,{includeMetadataChanges:!0}).pipe(Ve(function(e){return e.docs}))}function n2(n,e){return e===void 0&&(e={}),t2(n).pipe(Ve(function(t){return t.map(function(r){return e2(r,e)})}))}var r2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i2={};var Tv,s2;(function(){var n;function e(b,m){function E(){}E.prototype=m.prototype,b.D=m.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(w,I,D){for(var _=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)_[xe-2]=arguments[xe];return m.prototype[I].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,m,E){E||(E=0);var w=Array(16);if(typeof m=="string")for(var I=0;16>I;++I)w[I]=m.charCodeAt(E++)|m.charCodeAt(E++)<<8|m.charCodeAt(E++)<<16|m.charCodeAt(E++)<<24;else for(I=0;16>I;++I)w[I]=m[E++]|m[E++]<<8|m[E++]<<16|m[E++]<<24;m=b.g[0],E=b.g[1],I=b.g[2];var D=b.g[3],_=m+(D^E&(I^D))+w[0]+3614090360&4294967295;m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[1]+3905402710&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[2]+606105819&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(D^E&(I^D))+w[4]+4118548399&4294967295,m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[5]+1200080426&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[6]+2821735955&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(D^E&(I^D))+w[8]+1770035416&4294967295,m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[9]+2336552879&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[10]+4294925233&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(D^E&(I^D))+w[12]+1804603682&4294967295,m=E+(_<<7&4294967295|_>>>25),_=D+(I^m&(E^I))+w[13]+4254626195&4294967295,D=m+(_<<12&4294967295|_>>>20),_=I+(E^D&(m^E))+w[14]+2792965006&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(m^I&(D^m))+w[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=m+(I^D&(E^I))+w[1]+4129170786&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[6]+3225465664&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[11]+643717713&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(I^D&(E^I))+w[5]+3593408605&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[10]+38016083&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[15]+3634488961&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(I^D&(E^I))+w[9]+568446438&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[14]+3275163606&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[3]+4107603335&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(I^D&(E^I))+w[13]+2850285829&4294967295,m=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(m^E))+w[2]+4243563512&4294967295,D=m+(_<<9&4294967295|_>>>23),_=I+(m^E&(D^m))+w[7]+1735328473&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^m&(I^D))+w[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=m+(E^I^D)+w[5]+4294588738&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[8]+2272392833&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[11]+1839030562&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(E^I^D)+w[1]+2763975236&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[4]+1272893353&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[7]+4139469664&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(E^I^D)+w[13]+681279174&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[0]+3936430074&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[3]+3572445317&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(E^I^D)+w[9]+3654602809&4294967295,m=E+(_<<4&4294967295|_>>>28),_=D+(m^E^I)+w[12]+3873151461&4294967295,D=m+(_<<11&4294967295|_>>>21),_=I+(D^m^E)+w[15]+530742520&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^m)+w[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=m+(I^(E|~D))+w[0]+4096336452&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[7]+1126891415&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[14]+2878612391&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=m+(I^(E|~D))+w[12]+1700485571&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[3]+2399980690&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[10]+4293915773&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=m+(I^(E|~D))+w[8]+1873313359&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[15]+4264355552&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[6]+2734768916&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=m+(I^(E|~D))+w[4]+4149444226&4294967295,m=E+(_<<6&4294967295|_>>>26),_=D+(E^(m|~I))+w[11]+3174756917&4294967295,D=m+(_<<10&4294967295|_>>>22),_=I+(m^(D|~E))+w[2]+718787259&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~m))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+m&4294967295,b.g[1]=b.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.u=function(b,m){m===void 0&&(m=b.length);for(var E=m-this.blockSize,w=this.B,I=this.h,D=0;D<m;){if(I==0)for(;D<=E;)i(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<m;)if(w[I++]=b.charCodeAt(D++),I==this.blockSize){i(this,w),I=0;break}}else for(;D<m;)if(w[I++]=b[D++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=m},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var m=1;m<b.length-8;++m)b[m]=0;var E=8*this.o;for(m=b.length-8;m<b.length;++m)b[m]=E&255,E/=256;for(this.u(b),b=Array(16),m=E=0;4>m;++m)for(var w=0;32>w;w+=8)b[E++]=this.g[m]>>>w&255;return b};function s(b,m){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=m(b)}function o(b,m){this.h=m;for(var E=[],w=!0,I=b.length-1;0<=I;I--){var D=b[I]|0;w&&D==m||(E[I]=D,w=!1)}this.g=E}var a={};function c(b){return-128<=b&&128>b?s(b,function(m){return new o([m|0],0>m?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return k(d(-b));for(var m=[],E=1,w=0;b>=E;w++)m[w]=b/E|0,E*=4294967296;return new o(m,0)}function h(b,m){if(b.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(b.charAt(0)=="-")return k(h(b.substring(1),m));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(m,8)),w=g,I=0;I<b.length;I+=8){var D=Math.min(8,b.length-I),_=parseInt(b.substring(I,I+D),m);8>D?(D=d(Math.pow(m,D)),w=w.j(D).add(d(_))):(w=w.j(E),w=w.add(d(_)))}return w}var g=c(0),T=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();for(var b=0,m=1,E=0;E<this.g.length;E++){var w=this.i(E);b+=(0<=w?w:4294967296+w)*m,m*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(M(this))return"-"+k(this).toString(b);for(var m=d(Math.pow(b,6)),E=this,w="";;){var I=se(E,m).g;E=H(E,I.j(m));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=I,R(E))return D+w;for(;6>D.length;)D="0"+D;w=D+w}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(var m=0;m<b.g.length;m++)if(b.g[m]!=0)return!1;return!0}function M(b){return b.h==-1}n.l=function(b){return b=H(this,b),M(b)?-1:R(b)?0:1};function k(b){for(var m=b.g.length,E=[],w=0;w<m;w++)E[w]=~b.g[w];return new o(E,~b.h).add(T)}n.abs=function(){return M(this)?k(this):this},n.add=function(b){for(var m=Math.max(this.g.length,b.g.length),E=[],w=0,I=0;I<=m;I++){var D=w+(this.i(I)&65535)+(b.i(I)&65535),_=(D>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);w=_>>>16,D&=65535,_&=65535,E[I]=_<<16|D}return new o(E,E[E.length-1]&-2147483648?-1:0)};function H(b,m){return b.add(k(m))}n.j=function(b){if(R(this)||R(b))return g;if(M(this))return M(b)?k(this).j(k(b)):k(k(this).j(b));if(M(b))return k(this.j(k(b)));if(0>this.l(C)&&0>b.l(C))return d(this.m()*b.m());for(var m=this.g.length+b.g.length,E=[],w=0;w<2*m;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<b.g.length;I++){var D=this.i(w)>>>16,_=this.i(w)&65535,xe=b.i(I)>>>16,gt=b.i(I)&65535;E[2*w+2*I]+=_*gt,$(E,2*w+2*I),E[2*w+2*I+1]+=D*gt,$(E,2*w+2*I+1),E[2*w+2*I+1]+=_*xe,$(E,2*w+2*I+1),E[2*w+2*I+2]+=D*xe,$(E,2*w+2*I+2)}for(w=0;w<m;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=m;w<2*m;w++)E[w]=0;return new o(E,0)};function $(b,m){for(;(b[m]&65535)!=b[m];)b[m+1]+=b[m]>>>16,b[m]&=65535,m++}function B(b,m){this.g=b,this.h=m}function se(b,m){if(R(m))throw Error("division by zero");if(R(b))return new B(g,g);if(M(b))return m=se(k(b),m),new B(k(m.g),k(m.h));if(M(m))return m=se(b,k(m)),new B(k(m.g),m.h);if(30<b.g.length){if(M(b)||M(m))throw Error("slowDivide_ only works with positive integers.");for(var E=T,w=m;0>=w.l(b);)E=le(E),w=le(w);var I=oe(E,1),D=oe(w,1);for(w=oe(w,2),E=oe(E,2);!R(w);){var _=D.add(w);0>=_.l(b)&&(I=I.add(E),D=_),w=oe(w,1),E=oe(E,1)}return m=H(b,I.j(m)),new B(I,m)}for(I=g;0<=b.l(m);){for(E=Math.max(1,Math.floor(b.m()/m.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),D=d(E),_=D.j(m);M(_)||0<_.l(b);)E-=w,D=d(E),_=D.j(m);R(D)&&(D=T),I=I.add(D),b=H(b,_)}return new B(I,b)}n.A=function(b){return se(this,b).h},n.and=function(b){for(var m=Math.max(this.g.length,b.g.length),E=[],w=0;w<m;w++)E[w]=this.i(w)&b.i(w);return new o(E,this.h&b.h)},n.or=function(b){for(var m=Math.max(this.g.length,b.g.length),E=[],w=0;w<m;w++)E[w]=this.i(w)|b.i(w);return new o(E,this.h|b.h)},n.xor=function(b){for(var m=Math.max(this.g.length,b.g.length),E=[],w=0;w<m;w++)E[w]=this.i(w)^b.i(w);return new o(E,this.h^b.h)};function le(b){for(var m=b.g.length+1,E=[],w=0;w<m;w++)E[w]=b.i(w)<<1|b.i(w-1)>>>31;return new o(E,b.h)}function oe(b,m){var E=m>>5;m%=32;for(var w=b.g.length-E,I=[],D=0;D<w;D++)I[D]=0<m?b.i(D+E)>>>m|b.i(D+E+1)<<32-m:b.i(D+E);return new o(I,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s2=i2.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Tv=i2.Integer=o}).apply(typeof r2<"u"?r2:typeof self<"u"?self:typeof window<"u"?window:{});var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xs={};var IA,bY,Kl,wA,rp,Dv,TA,bA,DA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,y){return u==Array.prototype||u==Object.prototype||(u[f]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bv=="object"&&bv];for(var f=0;f<u.length;++f){var y=u[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var y=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var P=u[S];if(!(P in y))break e;y=y[P]}u=u[u.length-1],S=y[u],f=f(S),f!=S&&f!=null&&e(y,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var y=0,S=!1,P={next:function(){if(!S&&y<u.length){var x=y++;return{value:f(x,u[x]),done:!1}}return S=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,y){return y})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,y){return u.call.apply(u.bind,arguments)}function g(u,f,y){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,S),u.apply(f,P)}}return function(){return u.apply(f,arguments)}}function T(u,f,y){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,T.apply(null,arguments)}function C(u,f){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function R(u,f){function y(){}y.prototype=f.prototype,u.aa=f.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(S,P,x){for(var Q=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Q[nt-2]=arguments[nt];return f.prototype[P].apply(S,Q)}}function M(u){let f=u.length;if(0<f){let y=Array(f);for(let S=0;S<f;S++)y[S]=u[S];return y}return[]}function k(u,f){for(let y=1;y<arguments.length;y++){let S=arguments[y];if(c(S)){let P=u.length||0,x=S.length||0;u.length=P+x;for(let Q=0;Q<x;Q++)u[P+Q]=S[Q]}else u.push(S)}}class H{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function $(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function se(u){return se[" "](u),u}se[" "]=function(){};var le=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function oe(u,f,y){for(let S in u)f.call(y,u[S],S,u)}function b(u,f){for(let y in u)f.call(void 0,u[y],y,u)}function m(u){let f={};for(let y in u)f[y]=u[y];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(u,f){let y,S;for(let P=1;P<arguments.length;P++){S=arguments[P];for(y in S)u[y]=S[y];for(let x=0;x<E.length;x++)y=E[x],Object.prototype.hasOwnProperty.call(S,y)&&(u[y]=S[y])}}function I(u){var f=1;u=u.split(":");let y=[];for(;0<f&&u.length;)y.push(u.shift()),f--;return u.length&&y.push(u.join(":")),y}function D(u){a.setTimeout(()=>{throw u},0)}function _(){var u=F;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class xe{constructor(){this.h=this.g=null}add(f,y){let S=gt.get();S.set(f,y),this.h?this.h.next=S:this.g=S,this.h=S}}var gt=new H(()=>new st,u=>u.reset());class st{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,L=!1,F=new xe,U=()=>{let u=a.Promise.resolve(void 0);$e=()=>{u.then(ue)}};var ue=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(y){D(y)}var f=gt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}L=!1};function Me(){this.s=this.s,this.C=this.C}Me.prototype.s=!1,Me.prototype.ma=function(){this.s||(this.s=!0,this.N())},Me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var vn=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let y=()=>{};a.addEventListener("test",y,f),a.removeEventListener("test",y,f)}catch{}return u})();function sn(u,f){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(le){e:{try{se(f.nodeName);var P=!0;break e}catch{}P=!1}P||(f=null)}}else y=="mouseover"?f=u.fromElement:y=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Wn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&sn.aa.h.call(this)}}R(sn,de);var Wn={2:"touch",3:"pen",4:"mouse"};sn.prototype.h=function(){sn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),J=0;function K(u,f,y,S,P){this.listener=u,this.proxy=null,this.src=f,this.type=y,this.capture=!!S,this.ha=P,this.key=++J,this.da=this.fa=!1}function j(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Y(u){this.src=u,this.g={},this.h=0}Y.prototype.add=function(u,f,y,S,P){var x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);var Q=he(u,f,S,P);return-1<Q?(f=u[Q],y||(f.fa=!1)):(f=new K(f,this.src,x,!!S,P),f.fa=y,u.push(f)),f};function ae(u,f){var y=f.type;if(y in u.g){var S=u.g[y],P=Array.prototype.indexOf.call(S,f,void 0),x;(x=0<=P)&&Array.prototype.splice.call(S,P,1),x&&(j(f),u.g[y].length==0&&(delete u.g[y],u.h--))}}function he(u,f,y,S){for(var P=0;P<u.length;++P){var x=u[P];if(!x.da&&x.listener==f&&x.capture==!!y&&x.ha==S)return P}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),ye={};function De(u,f,y,S,P){if(S&&S.once)return Je(u,f,y,S,P);if(Array.isArray(f)){for(var x=0;x<f.length;x++)De(u,f[x],y,S,P);return null}return y=fr(y),u&&u[xt]?u.K(f,y,d(S)?!!S.capture:!!S,P):Te(u,f,y,!1,S,P)}function Te(u,f,y,S,P,x){if(!f)throw Error("Invalid event type");var Q=d(P)?!!P.capture:!!P,nt=as(u);if(nt||(u[ie]=nt=new Y(u)),y=nt.add(f,y,S,Q,x),y.proxy)return y;if(S=tt(),y.proxy=S,S.src=u,S.listener=y,u.addEventListener)vn||(P=Q),P===void 0&&(P=!1),u.addEventListener(f.toString(),S,P);else if(u.attachEvent)u.attachEvent(Kn(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function tt(){function u(y){return f.call(u.src,u.listener,y)}let f=ga;return u}function Je(u,f,y,S,P){if(Array.isArray(f)){for(var x=0;x<f.length;x++)Je(u,f[x],y,S,P);return null}return y=fr(y),u&&u[xt]?u.L(f,y,d(S)?!!S.capture:!!S,P):Te(u,f,y,!0,S,P)}function mt(u,f,y,S,P){if(Array.isArray(f))for(var x=0;x<f.length;x++)mt(u,f[x],y,S,P);else S=d(S)?!!S.capture:!!S,y=fr(y),u&&u[xt]?(u=u.i,f=String(f).toString(),f in u.g&&(x=u.g[f],y=he(x,y,S,P),-1<y&&(j(x[y]),Array.prototype.splice.call(x,y,1),x.length==0&&(delete u.g[f],u.h--)))):u&&(u=as(u))&&(f=u.g[f.toString()],u=-1,f&&(u=he(f,y,S,P)),(y=-1<u?f[u]:null)&&ot(y))}function ot(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[xt])ae(f.i,u);else{var y=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(y,S,u.capture):f.detachEvent?f.detachEvent(Kn(y),S):f.addListener&&f.removeListener&&f.removeListener(S),(y=as(f))?(ae(y,u),y.h==0&&(y.src=null,f[ie]=null)):j(u)}}}function Kn(u){return u in ye?ye[u]:ye[u]="on"+u}function ga(u,f){if(u.da)u=!0;else{f=new sn(f,this);var y=u.listener,S=u.ha||u.src;u.fa&&ot(u),u=y.call(S,f)}return u}function as(u){return u=u[ie],u instanceof Y?u:null}var ma="__closure_events_fn_"+(1e9*Math.random()>>>0);function fr(u){return typeof u=="function"?u:(u[ma]||(u[ma]=function(f){return u.handleEvent(f)}),u[ma])}function Pt(){Me.call(this),this.i=new Y(this),this.M=this,this.F=null}R(Pt,Me),Pt.prototype[xt]=!0,Pt.prototype.removeEventListener=function(u,f,y,S){mt(this,u,f,y,S)};function Dt(u,f){var y,S=u.F;if(S)for(y=[];S;S=S.F)y.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new de(f,u);else if(f instanceof de)f.target=f.target||u;else{var P=f;f=new de(S,u),w(f,P)}if(P=!0,y)for(var x=y.length-1;0<=x;x--){var Q=f.g=y[x];P=Qr(Q,S,!0,f)&&P}if(Q=f.g=u,P=Qr(Q,S,!0,f)&&P,P=Qr(Q,S,!1,f)&&P,y)for(x=0;x<y.length;x++)Q=f.g=y[x],P=Qr(Q,S,!1,f)&&P}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var y=u.g[f],S=0;S<y.length;S++)j(y[S]);delete u.g[f],u.h--}}this.F=null},Pt.prototype.K=function(u,f,y,S){return this.i.add(String(u),f,!1,y,S)},Pt.prototype.L=function(u,f,y,S){return this.i.add(String(u),f,!0,y,S)};function Qr(u,f,y,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var P=!0,x=0;x<f.length;++x){var Q=f[x];if(Q&&!Q.da&&Q.capture==y){var nt=Q.listener,Lt=Q.ha||Q.src;Q.fa&&ae(u.i,Q),P=nt.call(Lt,S)!==!1&&P}}return P&&!S.defaultPrevented}function cs(u,f,y){if(typeof u=="function")y&&(u=T(u,y));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function ya(u){u.g=cs(()=>{u.g=null,u.i&&(u.i=!1,ya(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class _a extends Me{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ya(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(u){Me.call(this),this.h=u,this.g={}}R(sr,Me);var zt=[];function En(u){oe(u.g,function(f,y){this.g.hasOwnProperty(y)&&ot(f)},u),u.g={}}sr.prototype.N=function(){sr.aa.N.call(this),En(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var va=a.JSON.stringify,us=a.JSON.parse,Pp=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function io(){}io.prototype.h=null;function wd(u){return u.h||(u.h=u.i())}function so(){}var oo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function on(){de.call(this,"d")}R(on,de);function Xc(){de.call(this,"c")}R(Xc,de);var pr={},ao=null;function eu(){return ao=ao||new Pt}pr.La="serverreachability";function kp(u){de.call(this,pr.La,u)}R(kp,de);function Mr(u){let f=eu();Dt(f,new kp(f))}pr.STAT_EVENT="statevent";function Mp(u,f){de.call(this,pr.STAT_EVENT,u),this.stat=f}R(Mp,de);function In(u){let f=eu();Dt(f,new Mp(f,u))}pr.Ma="timingevent";function Ea(u,f){de.call(this,pr.Ma,u),this.size=f}R(Ea,de);function co(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function uo(){this.g=!0}uo.prototype.xa=function(){this.g=!1};function Td(u,f,y,S,P,x){u.info(function(){if(u.g)if(x)for(var Q="",nt=x.split("&"),Lt=0;Lt<nt.length;Lt++){var rt=nt[Lt].split("=");if(1<rt.length){var Pn=rt[0];rt=rt[1];var kn=Pn.split("_");Q=2<=kn.length&&kn[1]=="type"?Q+(Pn+"="+rt+"&"):Q+(Pn+"=redacted&")}}else Q=null;else Q=x;return"XMLHTTP REQ ("+S+") [attempt "+P+"]: "+f+`
`+y+`
`+Q})}function Ia(u,f,y,S,P,x,Q){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+P+"]: "+f+`
`+y+`
`+x+" "+Q})}function lo(u,f,y,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Op(u,y)+(S?" "+S:"")})}function bi(u,f){u.info(function(){return"TIMEOUT: "+f})}uo.prototype.info=function(){};function Op(u,f){if(!u.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var S=y[u];if(!(2>S.length)){var P=S[1];if(Array.isArray(P)&&!(1>P.length)){var x=P[0];if(x!="noop"&&x!="stop"&&x!="close")for(var Q=1;Q<P.length;Q++)P[Q]=""}}}}return va(y)}catch{return f}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ta;function ba(){}R(ba,io),ba.prototype.g=function(){return new XMLHttpRequest},ba.prototype.i=function(){return{}},Ta=new ba;function Di(u,f,y,S){this.j=u,this.i=f,this.l=y,this.R=S||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bd}function bd(){this.i=null,this.g="",this.h=!1}var xp={},ho={};function nu(u,f,y){u.L=1,u.v=ou(Yr(f)),u.m=y,u.P=!0,ru(u,null)}function ru(u,f){u.F=Date.now(),po(u),u.A=Yr(u.v);var y=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Hp(y.i,"t",S),u.C=0,y=u.j.J,u.h=new bd,u.g=p(u.j,y?f:null,!u.m),0<u.O&&(u.M=new _a(T(u.Y,u,u.g),u.O)),f=u.U,y=u.g,S=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(zt[0]=P.toString()),P=zt);for(var x=0;x<P.length;x++){var Q=De(y,P[x],S||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=u.H?m(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Mr(),Td(u.i,u.u,u.A,u.l,u.R,u.m)}Di.prototype.ca=function(u){u=u.target;let f=this.M;f&&ar(u)==3?f.j():this.Y(u)},Di.prototype.Y=function(u){try{if(u==this.g)e:{let kn=ar(this.g);var f=this.g.Ba();let gu=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||Kp(this.g)))){this.J||kn!=4||f==7||(f==8||0>=gu?Mr(3):Mr(2)),iu(this);var y=this.g.Z();this.X=y;t:if(fo(this)){var S=Kp(this.g);u="";var P=S.length,x=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ci(this),go(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<P;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(x&&f==P-1)});S.length=0,this.h.g+=u,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=y==200,Ia(this.i,this.u,this.A,this.l,this.R,kn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Lt=this.g;if((nt=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(nt)){var rt=nt;break t}}rt=null}if(y=rt)lo(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Da(this,y);else{this.o=!1,this.s=3,In(12),Ci(this),go(this);break e}}if(this.P){y=!0;let ti;for(;!this.J&&this.C<Q.length;)if(ti=ls(this,Q),ti==ho){kn==4&&(this.s=4,In(14),y=!1),lo(this.i,this.l,null,"[Incomplete Response]");break}else if(ti==xp){this.s=4,In(15),lo(this.i,this.l,Q,"[Invalid Chunk]"),y=!1;break}else lo(this.i,this.l,ti,null),Da(this,ti);if(fo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||Q.length!=0||this.h.h||(this.s=1,In(16),y=!1),this.o=this.o&&y,!y)lo(this.i,this.l,Q,"[Invalid Chunked Response]"),Ci(this),go(this);else if(0<Q.length&&!this.W){this.W=!0;var Pn=this.j;Pn.g==this&&Pn.ba&&!Pn.M&&(Pn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),pu(Pn),Pn.M=!0,In(11))}}else lo(this.i,this.l,Q,null),Da(this,Q);kn==4&&Ci(this),this.o&&!this.J&&(kn==4?Nn(this.j,this):(this.o=!1,po(this)))}else Qp(this.g),y==400&&0<Q.indexOf("Unknown SID")?(this.s=3,In(12)):(this.s=0,In(13)),Ci(this),go(this)}}}catch{}finally{}};function fo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ls(u,f){var y=u.C,S=f.indexOf(`
`,y);return S==-1?ho:(y=Number(f.substring(y,S)),isNaN(y)?xp:(S+=1,S+y>f.length?ho:(f=f.slice(S,S+y),u.C=S+y,f)))}Di.prototype.cancel=function(){this.J=!0,Ci(this)};function po(u){u.S=Date.now()+u.I,Lp(u,u.I)}function Lp(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=co(T(u.ba,u),f)}function iu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Di.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(bi(this.i,this.A),this.L!=2&&(Mr(),In(17)),Ci(this),this.s=2,go(this)):Lp(this,this.S-u)};function go(u){u.j.G==0||u.J||Nn(u.j,u)}function Ci(u){iu(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,En(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Da(u,f){try{var y=u.j;if(y.G!=0&&(y.g==u||Rd(y.h,u))){if(!u.K&&Rd(y.h,u)&&y.G==3){try{var S=y.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var P=S;if(P[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)hs(y),wo(y);else break e;fu(y),In(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=co(T(y.Za,y),6e3));if(1>=Ad(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ri(y,11)}else if((u.K||y.g==u)&&hs(y),!$(f))for(P=y.Da.g.parse(f),f=0;f<P.length;f++){let rt=P[f];if(y.T=rt[0],rt=rt[1],y.G==2)if(rt[0]=="c"){y.K=rt[1],y.ia=rt[2];let Pn=rt[3];Pn!=null&&(y.la=Pn,y.j.info("VER="+y.la));let kn=rt[4];kn!=null&&(y.Aa=kn,y.j.info("SVER="+y.Aa));let gu=rt[5];gu!=null&&typeof gu=="number"&&0<gu&&(S=1.5*gu,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;let ti=u.g;if(ti){let Yp=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yp){var x=S.h;x.g||Yp.indexOf("spdy")==-1&&Yp.indexOf("quic")==-1&&Yp.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Or(x,x.h),x.h=null))}if(S.D){let pE=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;pE&&(S.ya=pE,Et(S.I,S.D,pE))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var Q=u;if(S.qa=l(S,S.J?S.ia:null,S.W),Q.K){gr(S.h,Q);var nt=Q,Lt=S.L;Lt&&(nt.I=Lt),nt.B&&(iu(nt),po(nt)),S.g=Q}else Vd(S);0<y.i.length&&ka(y)}else rt[0]!="stop"&&rt[0]!="close"||Ri(y,7);else y.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Ri(y,7):lu(y):rt[0]!="noop"&&y.l&&y.l.ta(rt),y.v=0)}}Mr(4)}catch{}}var Dd=class{constructor(u,f){this.g=u,this.map=f}};function Cd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ad(u){return u.h?1:u.g?u.g.size:0}function Rd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Or(u,f){u.g?u.g.add(f):u.h=f}function gr(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Cd.prototype.cancel=function(){if(this.i=mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function mo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let y of u.g.values())f=f.concat(y.D);return f}return M(u.i)}function Ca(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],y=u.length,S=0;S<y;S++)f.push(u[S]);return f}f=[],y=0;for(S in u)f[y++]=u[S];return f}function Nd(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var y=0;y<u;y++)f.push(y);return f}f=[],y=0;for(let S in u)f[y++]=S;return f}}}function yt(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var y=Nd(u),S=Ca(u),P=S.length,x=0;x<P;x++)f.call(void 0,S[x],y&&y[x],u)}var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aa(u,f){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var S=u[y].indexOf("="),P=null;if(0<=S){var x=u[y].substring(0,S);P=u[y].substring(S+1)}else x=u[y];f(x,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function mr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof mr){this.h=u.h,Ra(this,u.j),this.o=u.o,this.g=u.g,su(this,u.s),this.l=u.l;var f=u.i,y=new Na;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Fp(this,y),this.m=u.m}else u&&(f=String(u).match(Sa))?(this.h=!1,Ra(this,f[1]||"",!0),this.o=Jr(f[2]||""),this.g=Jr(f[3]||"",!0),su(this,f[4]),this.l=Jr(f[5]||"",!0),Fp(this,f[6]||"",!0),this.m=Jr(f[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}mr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(yr(f,Pd,!0),":");var y=this.g;return(y||f=="file")&&(u.push("//"),(f=this.o)&&u.push(yr(f,Pd,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(yr(y,y.charAt(0)=="/"?jp:Up,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",yr(y,yo)),u.join("")};function Yr(u){return new mr(u)}function Ra(u,f,y){u.j=y?Jr(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function su(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Fp(u,f,y){f instanceof Na?(u.i=f,au(u.i,u.h)):(y||(f=yr(f,Bp)),u.i=new Na(f,u.h))}function Et(u,f,y){u.i.set(f,y)}function ou(u){return Et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Jr(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yr(u,f,y){return typeof u=="string"?(u=encodeURI(u).replace(f,Vp),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Vp(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Pd=/[#\/\?@]/g,Up=/[#\?:]/g,jp=/[#\?]/g,Bp=/[#\?@]/g,yo=/#/g;function Na(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Si(u){u.g||(u.g=new Map,u.h=0,u.i&&Aa(u.i,function(f,y){u.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}n=Na.prototype,n.add=function(u,f){Si(this),this.i=null,u=Xr(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(f),this.h+=1,this};function $p(u,f){Si(u),f=Xr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Zr(u,f){return Si(u),f=Xr(u,f),u.g.has(f)}n.forEach=function(u,f){Si(this),this.g.forEach(function(y,S){y.forEach(function(P){u.call(f,P,S,this)},this)},this)},n.na=function(){Si(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let S=0;S<f.length;S++){let P=u[S];for(let x=0;x<P.length;x++)y.push(f[S])}return y},n.V=function(u){Si(this);let f=[];if(typeof u=="string")Zr(this,u)&&(f=f.concat(this.g.get(Xr(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)f=f.concat(u[y])}return f},n.set=function(u,f){return Si(this),this.i=null,u=Xr(this,u),Zr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Hp(u,f,y){$p(u,f),0<y.length&&(u.i=null,u.g.set(Xr(u,f),M(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var S=f[y];let x=encodeURIComponent(String(S)),Q=this.V(S);for(S=0;S<Q.length;S++){var P=x;Q[S]!==""&&(P+="="+encodeURIComponent(String(Q[S]))),u.push(P)}}return this.i=u.join("&")};function Xr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function au(u,f){f&&!u.j&&(Si(u),u.i=null,u.g.forEach(function(y,S){var P=S.toLowerCase();S!=P&&($p(this,S),Hp(this,P,y))},u)),u.j=f}function qp(u,f){let y=new uo;if(a.Image){let S=new Image;S.onload=C(or,y,"TestLoadImage: loaded",!0,f,S),S.onerror=C(or,y,"TestLoadImage: error",!1,f,S),S.onabort=C(or,y,"TestLoadImage: abort",!1,f,S),S.ontimeout=C(or,y,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function Pa(u,f){let y=new uo,S=new AbortController,P=setTimeout(()=>{S.abort(),or(y,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(x=>{clearTimeout(P),x.ok?or(y,"TestPingServer: ok",!0,f):or(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),or(y,"TestPingServer: error",!1,f)})}function or(u,f,y,S,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),S(y)}catch{}}function zp(){this.g=new Pp}function kd(u,f,y){let S=y||"";try{yt(u,function(P,x){let Q=P;d(P)&&(Q=va(P)),f.push(S+x+"="+encodeURIComponent(Q))})}catch(P){throw f.push(S+"type="+encodeURIComponent("_badmap")),P}}function _t(u){this.l=u.Ub||null,this.j=u.eb||!1}R(_t,io),_t.prototype.g=function(){return new cu(this.l,this.j)},_t.prototype.i=(function(u){return function(){return u}})({});function cu(u,f){Pt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(cu,Pt),n=cu.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,vo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gp(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gp(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?_o(this):vo(this),this.readyState==3&&Gp(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,_o(this))},n.Qa=function(u){this.g&&(this.response=u,_o(this))},n.ga=function(){this.g&&_o(this)};function _o(u){u.readyState=4,u.l=null,u.j=null,u.v=null,vo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=f.next();return u.join(`\r
`)};function vo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Md(u){let f="";return oe(u,function(y,S){f+=S,f+=":",f+=y,f+=`\r
`}),f}function Eo(u,f,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Md(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Et(u,f,y))}function at(u){Pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(at,Pt);var Wp=/^https?$/i,fE=["POST","PUT"];n=at.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ta.g(),this.v=this.o?wd(this.o):wd(Ta),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(x){Io(this,x);return}if(u=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var P in S)y.set(P,S[P]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let x of S.keys())y.set(x,S.get(x));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(x=>x.toLowerCase()=="content-type"),P=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fE,f,void 0))||S||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,Q]of y)this.g.setRequestHeader(x,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xd(this),this.u=!0,this.g.send(u),this.u=!1}catch(x){Io(this,x)}};function Io(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Od(u),ds(u)}function Od(u){u.A||(u.A=!0,Dt(u,"complete"),Dt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Dt(this,"complete"),Dt(this,"abort"),ds(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?uu(this):this.bb())},n.bb=function(){uu(this)};function uu(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ar(u)!=4||u.Z()!=2)){if(u.u&&ar(u)==4)cs(u.Ea,0,u);else if(Dt(u,"readystatechange"),ar(u)==4){u.h=!1;try{let Q=u.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var S;if(S=Q===0){var P=String(u.D).match(Sa)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),S=!Wp.test(P?P.toLowerCase():"")}y=S}if(y)Dt(u,"complete"),Dt(u,"success");else{u.m=6;try{var x=2<ar(u)?u.g.statusText:""}catch{x=""}u.l=x+" ["+u.Z()+"]",Od(u)}}finally{ds(u)}}}}function ds(u,f){if(u.g){xd(u);let y=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Dt(u,"ready");try{y.onreadystatechange=S}catch{}}}function xd(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ar(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),us(f)}};function Kp(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Qp(u){let f={};u=(u.g&&2<=ar(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if($(u[S]))continue;var y=I(u[S]);let P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let x=f[P]||[];f[P]=x,x.push(y)}b(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(u,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||f}function Ld(u){this.Aa=0,this.i=[],this.j=new uo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,u),this.cb=ei("retryDelaySeedMs",1e4,u),this.Wa=ei("forwardChannelMaxRetries",2,u),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Cd(u&&u.concurrentRequestLimit),this.Da=new zp,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ld.prototype,n.la=8,n.G=1,n.connect=function(u,f,y,S){In(0),this.W=u,this.H=f||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=l(this,null,this.W),ka(this)};function lu(u){if(du(u),u.G==3){var f=u.U++,y=Yr(u.I);if(Et(y,"SID",u.K),Et(y,"RID",f),Et(y,"TYPE","terminate"),To(u,y),f=new Di(u,u.j,f),f.L=2,f.v=ou(Yr(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=f.v,y=!0),y||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),po(f)}fs(u)}function wo(u){u.g&&(pu(u),u.g.cancel(),u.g=null)}function du(u){wo(u),u.u&&(a.clearTimeout(u.u),u.u=null),hs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ka(u){if(!Sd(u.h)&&!u.s){u.s=!0;var f=u.Ga;$e||U(),L||($e(),L=!0),F.add(f,u),u.B=0}}function hu(u,f){return Ad(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=co(T(u.Ga,u,f),jd(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let P=new Di(this,this.j,u),x=this.o;if(this.S&&(x?(x=m(x),w(x,this.S)):x=this.S),this.m!==null||this.O||(P.H=x,x=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Ai(this,P,f),y=Yr(this.I),Et(y,"RID",u),Et(y,"CVER",22),this.D&&Et(y,"X-HTTP-Session-Id",this.D),To(this,y),x&&(this.O?f="headers="+encodeURIComponent(String(Md(x)))+"&"+f:this.m&&Eo(y,this.m,x)),Or(this.h,P),this.Ua&&Et(y,"TYPE","init"),this.P?(Et(y,"$req",f),Et(y,"SID","null"),P.T=!0,nu(P,y,null)):nu(P,y,f),this.G=2}}else this.G==3&&(u?Fd(this,u):this.i.length==0||Sd(this.h)||Fd(this))};function Fd(u,f){var y;f?y=f.l:y=u.U++;let S=Yr(u.I);Et(S,"SID",u.K),Et(S,"RID",y),Et(S,"AID",u.T),To(u,S),u.m&&u.o&&Eo(S,u.m,u.o),y=new Di(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Ai(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Or(u.h,y),nu(y,S,f)}function To(u,f){u.H&&oe(u.H,function(y,S){Et(f,S,y)}),u.l&&yt({},function(y,S){Et(f,S,y)})}function Ai(u,f,y){y=Math.min(u.i.length,y);var S=u.l?T(u.l.Na,u.l,u):null;e:{var P=u.i;let x=-1;for(;;){let Q=["count="+y];x==-1?0<y?(x=P[0].g,Q.push("ofs="+x)):x=0:Q.push("ofs="+x);let nt=!0;for(let Lt=0;Lt<y;Lt++){let rt=P[Lt].g,Pn=P[Lt].map;if(rt-=x,0>rt)x=Math.max(0,P[Lt].g-100),nt=!1;else try{kd(Pn,Q,"req"+rt+"_")}catch{S&&S(Pn)}}if(nt){S=Q.join("&");break e}}}return u=u.i.splice(0,y),f.D=u,S}function Vd(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;$e||U(),L||($e(),L=!0),F.add(f,u),u.v=0}}function fu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=co(T(u.Fa,u),jd(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Ud(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=co(T(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,In(10),wo(this),Ud(this))};function pu(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ud(u){u.g=new Di(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Yr(u.qa);Et(f,"RID","rpc"),Et(f,"SID",u.K),Et(f,"AID",u.T),Et(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Et(f,"TO",u.ja),Et(f,"TYPE","xmlhttp"),To(u,f),u.m&&u.o&&Eo(f,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=ou(Yr(f)),y.m=null,y.P=!0,ru(y,u)}n.Za=function(){this.C!=null&&(this.C=null,wo(this),fu(this),In(19))};function hs(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Nn(u,f){var y=null;if(u.g==f){hs(u),pu(u),u.g=null;var S=2}else if(Rd(u.h,f))y=f.D,gr(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var P=u.B;S=eu(),Dt(S,new Ea(S,y)),ka(u)}else Vd(u);else if(P=f.s,P==3||P==0&&0<f.X||!(S==1&&hu(u,f)||S==2&&fu(u)))switch(y&&0<y.length&&(f=u.h,f.i=f.i.concat(y)),P){case 1:Ri(u,5);break;case 4:Ri(u,10);break;case 3:Ri(u,6);break;default:Ri(u,2)}}}function jd(u,f){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*f}function Ri(u,f){if(u.j.info("Error code "+f),f==2){var y=T(u.fb,u),S=u.Xa;let P=!S;S=new mr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ra(S,"https"),ou(S),P?qp(S.toString(),y):Pa(S.toString(),y)}else In(2);u.G=0,u.l&&u.l.sa(f),fs(u),du(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function fs(u){if(u.G=0,u.ka=[],u.l){let f=mo(u.h);(f.length!=0||u.i.length!=0)&&(k(u.ka,f),k(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function l(u,f,y){var S=y instanceof mr?Yr(y):new mr(y);if(S.g!="")f&&(S.g=f+"."+S.g),su(S,S.s);else{var P=a.location;S=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;var x=new mr(null);S&&Ra(x,S),f&&(x.g=f),P&&su(x,P),y&&(x.l=y),S=x}return y=u.D,f=u.ya,y&&f&&Et(S,y,f),Et(S,"VER",u.la),To(u,S),S}function p(u,f,y){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new at(new _t({eb:y})):new at(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function v(){}n=v.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function A(){}A.prototype.g=function(u,f){return new N(u,f)};function N(u,f){Pt.call(this),this.g=new Ld(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!$(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!$(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new _e(this)}R(N,Pt),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){lu(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=va(u),u=y);f.i.push(new Dd(f.Ya++,u)),f.G==3&&ka(f)},N.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,N.aa.N.call(this)};function O(u){on.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let y in f){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}R(O,on);function Z(){Xc.call(this),this.status=1}R(Z,Xc);function _e(u){this.g=u}R(_e,v),_e.prototype.ua=function(){Dt(this.g,"a")},_e.prototype.ta=function(u){Dt(this.g,new O(u))},_e.prototype.sa=function(u){Dt(this.g,new Z)},_e.prototype.ra=function(){Dt(this.g,"b")},A.prototype.createWebChannel=A.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,DA=Xs.createWebChannelTransport=function(){return new A},bA=Xs.getStatEventTarget=function(){return eu()},TA=Xs.Event=pr,Dv=Xs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,rp=Xs.ErrorCode=wa,tu.COMPLETE="complete",wA=Xs.EventType=tu,so.EventType=oo,oo.OPEN="a",oo.CLOSE="b",oo.ERROR="c",oo.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Kl=Xs.WebChannel=so,bY=Xs.FetchXmlHttpFactory=_t,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,IA=Xs.XhrIo=at}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var o2="@firebase/firestore",a2="4.8.0";var yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");var gd="11.10.0";var Hc=new Ki("@firebase/firestore");function Ql(){return Hc.logLevel}function ce(n,...e){if(Hc.logLevel<=He.DEBUG){let t=e.map(Z0);Hc.debug(`Firestore (${gd}): ${n}`,...t)}}function qc(n,...e){if(Hc.logLevel<=He.ERROR){let t=e.map(Z0);Hc.error(`Firestore (${gd}): ${n}`,...t)}}function nd(n,...e){if(Hc.logLevel<=He.WARN){let t=e.map(Z0);Hc.warn(`Firestore (${gd}): ${n}`,...t)}}function Z0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$2(n,r,t)}function $2(n,e,t){let r=`FIRESTORE (${gd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qc(r),new Error(r)}function Ot(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||$2(e,i,r)}function bt(n,e){return n}var G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fe=class extends Sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var eo=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},RA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}},NA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},PA=class{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ot(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new eo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new eo,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new eo)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot(typeof r.accessToken=="string",31837,{l:r}),new kv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new yn(e)}},kA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},MA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new kA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},OA=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ot(this.o===void 0,3512);let r=s=>{s.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function DY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function CY(){return new TextEncoder}var lp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=DY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function et(n,e){return n<e?-1:n>e?1:0}function xA(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return et(r,i);{let s=CY(),o=SY(s.encode(c2(n,t)),s.encode(c2(e,t)));return o!==0?o:et(r,i)}}t+=r>65535?2:1}return et(n.length,e.length)}function c2(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function SY(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return et(n[t],e[t]);return et(n.length,e.length)}function rd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var u2="__name__",Ov=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return et(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):xA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tv.fromString(e.substring(4,e.length-2))}},qt=class n extends Ov{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new fe(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},AY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nr=class n extends Ov{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return AY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u2}static keyField(){return new n([u2])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new fe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new fe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new fe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new fe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(qt.fromString(e))}static fromName(e){return new n(qt.fromString(e).popFirst(5))}static empty(){return new n(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new qt(e.slice()))}};function H2(n,e,t){if(!t)throw new fe(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RY(n,e,t,r){if(e===!0&&r===!0)throw new fe(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function l2(n){if(!Fe.isDocumentKey(n))throw new fe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function d2(n){if(Fe.isDocumentKey(n))throw new fe(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function q2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function X0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function eR(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=X0(n);throw new fe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rn(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ep(n,e){if(!q2(n))throw new fe(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new fe(G.INVALID_ARGUMENT,t);return!0}var h2=-62135596800,f2=1e6,dn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*f2);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<h2)throw new fe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f2}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ep(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-h2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};dn._jsonSchemaVersion="firestore/timestamp/1.0",dn._jsonSchema={type:rn("string",dn._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};var Mt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new dn(0,0))}static max(){return new n(new dn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dp=-1,LA=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};LA.UNKNOWN_ID=-1;function NY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(r===1e9?new dn(t+1,0):new dn(t,r));return new zc(i,Fe.empty(),e)}function PY(n){return new zc(n.readTime,n.key,dp)}var zc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Mt.min(),Fe.empty(),dp)}static max(){return new n(Mt.max(),Fe.empty(),dp)}};function kY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Fe.comparator(n.documentKey,e.documentKey),t!==0?t:et(n.largestBatchId,e.largestBatchId))}var MY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",FA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function tR(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==MY)throw n;ce("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function OY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ip(n){return n.name==="IndexedDbTransactionError"}var z2=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),nR=-1;function rR(n){return n==null}function hp(n){return n===0&&1/n==-1/0}function xY(n){return typeof n=="number"&&Number.isInteger(n)&&!hp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var G2="";function LY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=p2(e)),e=FY(n.get(t),e);return p2(e)}function FY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case G2:t+="";break;default:t+=s}}return t}function p2(n){return n+G2+""}var VY="remoteDocuments",W2="owner";var K2="mutationQueues";var Q2="mutations";var Y2="documentMutations",UY="remoteDocumentsV14";var J2="remoteDocumentGlobal";var Z2="targets";var X2="targetDocuments";var eU="targetGlobal",tU="collectionParents";var nU="clientMetadata";var rU="bundles";var iU="namedQueries";var jY="indexConfiguration";var BY="indexState";var $Y="indexEntries";var sU="documentOverlays";var HY="globals";var qY=[K2,Q2,Y2,VY,Z2,W2,eU,X2,nU,J2,tU,rU,iU],vIe=[...qY,sU],zY=[K2,Q2,Y2,UY,Z2,W2,eU,X2,nU,J2,tU,rU,iU,sU],GY=zY,WY=[...GY,jY,BY,$Y];var EIe=[...WY,HY];function g2(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function md(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oU(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var kr=class n{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jl(this.root,e,this.comparator,!0)}},Jl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ss=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}};ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Gn=class n{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xv(this.data.getIterator())}getIteratorFrom(e){return new xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var is=class n{constructor(e){this.fields=e,e.sort(Nr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Gn(Nr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var VA=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var to=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VA("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};to.EMPTY_BYTE_STRING=new to("");var KY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function da(n){if(Ot(!!n,39018),typeof n=="string"){let e=0,t=KY.exec(n);if(Ot(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gc(n){return typeof n=="string"?to.fromBase64String(n):to.fromUint8Array(n)}var aU="server_timestamp",cU="__type__",uU="__previous_value__",lU="__local_write_time__";function iR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cU])===null||t===void 0?void 0:t.stringValue)===aU}function sR(n){let e=n.mapValue.fields[uU];return iR(e)?sR(e):e}function Lv(n){let e=da(n.mapValue.fields[lU].timestampValue);return new dn(e.seconds,e.nanos)}var UA=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},Fv="(default)",jA=class n{constructor(e,t){this.projectId=e,this.database=t||Fv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Fv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var oR="__type__",dU="__max__",Cv={mapValue:{fields:{__type__:{stringValue:dU}}}},aR="__vector__",fp="value";function Wc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?iR(n)?4:fU(n)?9007199254740991:hU(n)?10:11:Le(28295,{value:n})}function os(n,e){if(n===e)return!0;let t=Wc(n);if(t!==Wc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lv(n).isEqual(Lv(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=da(i.timestampValue),a=da(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Gc(i.bytesValue).isEqual(Gc(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return nn(i.geoPointValue.latitude)===nn(s.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return nn(i.integerValue)===nn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=nn(i.doubleValue),a=nn(s.doubleValue);return o===a?hp(o)===hp(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return rd(n.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(g2(o)!==g2(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!os(o[c],a[c])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function pp(n,e){return(n.values||[]).find(t=>os(t,e))!==void 0}function id(n,e){if(n===e)return 0;let t=Wc(n),r=Wc(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=nn(s.integerValue||s.doubleValue),c=nn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return m2(n.timestampValue,e.timestampValue);case 4:return m2(Lv(n),Lv(e));case 5:return xA(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Gc(s),c=Gc(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=et(a[d],c[d]);if(h!==0)return h}return et(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=et(nn(s.latitude),nn(o.latitude));return a!==0?a:et(nn(s.longitude),nn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return y2(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let g=s.fields||{},T=o.fields||{},C=(a=g[fp])===null||a===void 0?void 0:a.arrayValue,R=(c=T[fp])===null||c===void 0?void 0:c.arrayValue,M=et(((d=C?.values)===null||d===void 0?void 0:d.length)||0,((h=R?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:y2(C,R)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Cv.mapValue&&o===Cv.mapValue)return 0;if(s===Cv.mapValue)return 1;if(o===Cv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let T=xA(c[g],h[g]);if(T!==0)return T;let C=id(a[c[g]],d[h[g]]);if(C!==0)return C}return et(c.length,h.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{le:t})}}function m2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return et(n,e);let t=da(n),r=da(e),i=et(t.seconds,r.seconds);return i!==0?i:et(t.nanos,r.nanos)}function y2(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=id(t[i],r[i]);if(s)return s}return et(t.length,r.length)}function sd(n){return BA(n)}function BA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=da(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gc(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=BA(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${BA(t.fields[o])}`;return i+"}"})(n.mapValue):Le(61005,{value:n})}function Rv(n){switch(Wc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=sR(n);return e?16+Rv(e):16;case 5:return 2*n.stringValue.length;case 6:return Gc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Rv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return md(r.fields,(s,o)=>{i+=s.length+Rv(o)}),i})(n.mapValue);default:throw Le(13486,{value:n})}}function $A(n){return!!n&&"integerValue"in n}function cR(n){return!!n&&"arrayValue"in n}function Nv(n){return!!n&&"mapValue"in n}function hU(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[oR])===null||t===void 0?void 0:t.stringValue)===aR}function sp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return md(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dU}var wIe={mapValue:{fields:{[oR]:{stringValue:aR},[fp]:{arrayValue:{}}}}};var rs=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sp(t)}setAll(e){let t=Nr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=sp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Nv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Nv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){md(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(sp(this.value))}};function pU(n){let e=[];return md(n.fields,(t,r)=>{let i=new Nr([t]);if(Nv(r)){let s=pU(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new is(e)}var od=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Mt.min(),Mt.min(),Mt.min(),rs.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Mt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Mt.min(),Mt.min(),rs.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Mt.min(),Mt.min(),rs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ad=class{constructor(e,t){this.position=e,this.inclusive=t}};function _2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Fe.comparator(Fe.fromName(o.referenceValue),t.key):r=id(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function v2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!os(n.position[t],e.position[t]))return!1;return!0}var cd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function QY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Vv=class{},_n=class n extends Vv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qA(e,t,r):t==="array-contains"?new WA(e,r):t==="in"?new KA(e,r):t==="not-in"?new QA(e,r):t==="array-contains-any"?new YA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zA(e,r):new GA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(id(t,this.value)):t!==null&&Wc(this.value)===Wc(t)&&this.matchesComparison(id(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ha=class n extends Vv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return gU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function gU(n){return n.op==="and"}function mU(n){return YY(n)&&gU(n)}function YY(n){for(let e of n.filters)if(e instanceof ha)return!1;return!0}function HA(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+sd(n.value);if(mU(n))return n.filters.map(e=>HA(e)).join(",");{let e=n.filters.map(t=>HA(t)).join(",");return`${n.op}(${e})`}}function yU(n,e){return n instanceof _n?(function(r,i){return i instanceof _n&&r.op===i.op&&r.field.isEqual(i.field)&&os(r.value,i.value)})(n,e):n instanceof ha?(function(r,i){return i instanceof ha&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&yU(o,i.filters[a]),!0):!1})(n,e):void Le(19439)}function _U(n){return n instanceof _n?(function(t){return`${t.field.canonicalString()} ${t.op} ${sd(t.value)}`})(n):n instanceof ha?(function(t){return t.op.toString()+" {"+t.getFilters().map(_U).join(" ,")+"}"})(n):"Filter"}var qA=class extends _n{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){let t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}},zA=class extends _n{constructor(e,t){super(e,"in",t),this.keys=vU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},GA=class extends _n{constructor(e,t){super(e,"not-in",t),this.keys=vU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vU(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Fe.fromName(r.referenceValue))}var WA=class extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return cR(t)&&pp(t.arrayValue,this.value)}},KA=class extends _n{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&pp(this.value.arrayValue,t)}},QA=class extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(pp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pp(this.value.arrayValue,t)}},YA=class extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!cR(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pp(this.value.arrayValue,r))}};var JA=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function E2(n,e=null,t=[],r=[],i=null,s=null,o=null){return new JA(n,e,t,r,i,s,o)}function uR(n){let e=bt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>HA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),rR(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sd(r)).join(",")),e.Pe=t}return e.Pe}function lR(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!v2(n.startAt,e.startAt)&&v2(n.endAt,e.endAt)}var ud=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function JY(n,e,t,r,i,s,o,a){return new ud(n,e,t,r,i,s,o,a)}function ZY(n){return new ud(n)}function I2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function XY(n){return n.collectionGroup!==null}function op(n){let e=bt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Gn(Nr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new cd(s,r))}),t.has(Nr.keyField().canonicalString())||e.Te.push(new cd(Nr.keyField(),r))}return e.Te}function Uc(n){let e=bt(n);return e.Ie||(e.Ie=eJ(e,op(n))),e.Ie}function eJ(n,e){if(n.limitType==="F")return E2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new cd(i.field,s)});let t=n.endAt?new ad(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ad(n.startAt.position,n.startAt.inclusive):null;return E2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ZA(n,e,t){return new ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function EU(n,e){return lR(Uc(n),Uc(e))&&n.limitType===e.limitType}function IU(n){return`${uR(Uc(n))}|lt:${n.limitType}`}function ip(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_U(i)).join(", ")}]`),rR(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>sd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>sd(i)).join(",")),`Target(${r})`})(Uc(n))}; limitType=${n.limitType})`}function dR(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of op(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=_2(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,op(r),i)||r.endAt&&!(function(o,a,c){let d=_2(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,op(r),i))})(n,e)}function tJ(n){return(e,t)=>{let r=!1;for(let i of op(n)){let s=nJ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nJ(n,e,t){let r=n.field.isKeyField()?Fe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?id(c,d):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}var no=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){md(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return oU(this.inner)}size(){return this.innerSize}};var rJ=new kr(Fe.comparator);function Uv(){return rJ}var wU=new kr(Fe.comparator);function Sv(...n){let e=wU;for(let t of n)e=e.insert(t.key,t);return e}function TU(n){let e=wU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vc(){return ap()}function bU(){return ap()}function ap(){return new no(n=>n.toString(),(n,e)=>n.isEqual(e))}var iJ=new kr(Fe.comparator),sJ=new Gn(Fe.comparator);function zn(...n){let e=sJ;for(let t of n)e=e.add(t);return e}var oJ=new Gn(et);function aJ(){return oJ}function hR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hp(e)?"-0":e}}function DU(n){return{integerValue:""+n}}function cJ(n,e){return xY(e)?DU(e):hR(n,e)}var ld=class{constructor(){this._=void 0}};function uJ(n,e,t){return n instanceof dd?(function(i,s){let o={fields:{[cU]:{stringValue:aU},[lU]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&iR(s)&&(s=sR(s)),s&&(o.fields[uU]=s),{mapValue:o}})(t,e):n instanceof Kc?SU(n,e):n instanceof Qc?AU(n,e):(function(i,s){let o=CU(i,s),a=w2(o)+w2(i.Ee);return $A(o)&&$A(i.Ee)?DU(a):hR(i.serializer,a)})(n,e)}function lJ(n,e,t){return n instanceof Kc?SU(n,e):n instanceof Qc?AU(n,e):t}function CU(n,e){return n instanceof hd?(function(r){return $A(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var dd=class extends ld{},Kc=class extends ld{constructor(e){super(),this.elements=e}};function SU(n,e){let t=RU(e);for(let r of n.elements)t.some(i=>os(i,r))||t.push(r);return{arrayValue:{values:t}}}var Qc=class extends ld{constructor(e){super(),this.elements=e}};function AU(n,e){let t=RU(e);for(let r of n.elements)t=t.filter(i=>!os(i,r));return{arrayValue:{values:t}}}var hd=class extends ld{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function w2(n){return nn(n.integerValue||n.doubleValue)}function RU(n){return cR(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function dJ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Kc&&i instanceof Kc||r instanceof Qc&&i instanceof Qc?rd(r.elements,i.elements,os):r instanceof hd&&i instanceof hd?os(r.Ee,i.Ee):r instanceof dd&&i instanceof dd})(n.transform,e.transform)}var XA=class{constructor(e,t){this.version=e,this.transformResults=t}},ua=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var fd=class{};function NU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gp(n.key,ua.none()):new Yc(n.key,n.data,ua.none());{let t=n.data,r=rs.empty(),i=new Gn(Nr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ro(n.key,r,new is(i.toArray()),ua.none())}}function hJ(n,e,t){n instanceof Yc?(function(i,s,o){let a=i.value.clone(),c=b2(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ro?(function(i,s,o){if(!Pv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=b2(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(PU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function cp(n,e,t,r){return n instanceof Yc?(function(s,o,a,c){if(!Pv(s.precondition,o))return a;let d=s.value.clone(),h=D2(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof ro?(function(s,o,a,c){if(!Pv(s.precondition,o))return a;let d=D2(s.fieldTransforms,c,o),h=o.data;return h.setAll(PU(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return Pv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function fJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=CU(r.transform,i||null);s!=null&&(t===null&&(t=rs.empty()),t.set(r.field,s))}return t||null}function T2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rd(r,i,(s,o)=>dJ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yc=class extends fd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ro=class extends fd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function PU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function b2(n,e,t){let r=new Map;Ot(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lJ(o,a,t[i]))}return r}function D2(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,uJ(s,o,e))}return r}var gp=class extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},e0=class extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var t0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&hJ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=bU();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=NU(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zn())}isEqual(e){return this.batchId===e.batchId&&rd(this.mutations,e.mutations,(t,r)=>T2(t,r))&&rd(this.baseMutations,e.baseMutations,(t,r)=>T2(t,r))}},n0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ot(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return iJ})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var r0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var en,Ye;function pJ(n){switch(n){case G.OK:return Le(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function gJ(n){if(n===void 0)return qc("GRPC error has no .code"),G.UNKNOWN;switch(n){case en.OK:return G.OK;case en.CANCELLED:return G.CANCELLED;case en.UNKNOWN:return G.UNKNOWN;case en.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case en.INTERNAL:return G.INTERNAL;case en.UNAVAILABLE:return G.UNAVAILABLE;case en.UNAUTHENTICATED:return G.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case en.NOT_FOUND:return G.NOT_FOUND;case en.ALREADY_EXISTS:return G.ALREADY_EXISTS;case en.PERMISSION_DENIED:return G.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case en.ABORTED:return G.ABORTED;case en.OUT_OF_RANGE:return G.OUT_OF_RANGE;case en.UNIMPLEMENTED:return G.UNIMPLEMENTED;case en.DATA_LOSS:return G.DATA_LOSS;default:return Le(39323,{code:n})}}(Ye=en||(en={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";var TIe=new Tv([4294967295,4294967295],0);var i0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function s0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mJ(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yJ(n,e){return s0(n,e.toTimestamp())}function Xl(n){return Ot(!!n,49232),Mt.fromTimestamp((function(t){let r=da(t);return new dn(r.seconds,r.nanos)})(n))}function kU(n,e){return o0(n,e).canonicalString()}function o0(n,e){let t=(function(i){return new qt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _J(n){let e=qt.fromString(n);return Ot(CJ(e),10190,{key:e.toString()}),e}function a0(n,e){return kU(n.databaseId,e.path)}function vJ(n){let e=_J(n);return e.length===4?qt.emptyPath():IJ(e)}function EJ(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IJ(n){return Ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function C2(n,e,t){return{name:a0(n,e),fields:t.value.mapValue.fields}}function wJ(n,e){let t;if(e instanceof Yc)t={update:C2(n,e.key,e.value)};else if(e instanceof gp)t={delete:a0(n,e.key)};else if(e instanceof ro)t={update:C2(n,e.key,e.data),updateMask:DJ(e.fieldMask)};else{if(!(e instanceof e0))return Le(16599,{Rt:e.type});t={verify:a0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof dd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Kc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Le(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:yJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Le(27497)})(n,e.precondition)),t}function TJ(n,e){return n&&n.length>0?(Ot(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Xl(i.updateTime):Xl(s);return o.isEqual(Mt.min())&&(o=Xl(s)),new XA(o,i.transformResults||[])})(t,e))):[]}function bJ(n){let e=vJ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ot(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let T=MU(g);return T instanceof ha&&mU(T)?T.getFilters():[T]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(T=>(function(R){return new cd(Yl(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let T;return T=typeof g=="object"?g.value:g,rR(T)?null:T})(t.limit));let c=null;t.startAt&&(c=(function(g){let T=!!g.before,C=g.values||[];return new ad(C,T)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let T=!g.before,C=g.values||[];return new ad(C,T)})(t.endAt)),JY(e,i,o,s,a,"F",c,d)}function MU(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Yl(t.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Yl(t.unaryFilter.field);return _n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Yl(t.unaryFilter.field);return _n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Yl(t.unaryFilter.field);return _n.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return _n.create(Yl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ha.create(t.compositeFilter.filters.map(r=>MU(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function Yl(n){return Nr.fromServerFormat(n.fieldPath)}function DJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CJ(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var c0=class{constructor(e){this.gt=e}};function SJ(n){let e=bJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ZA(e,e.limit,"L"):e}var jv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(nn(e.integerValue));else if("doubleValue"in e){let r=nn(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),hp(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=da(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Gc(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?fU(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):hU(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Le(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=fp,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(nn(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Fe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};jv.Ut=new jv;var u0=class{constructor(){this.Dn=new l0}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(zc.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(zc.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},l0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gn(qt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gn(qt.comparator)).toArray()}};var bIe=new Uint8Array(0);var S2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OU=41943040,Wr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Wr.DEFAULT_COLLECTION_PERCENTILE=10,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wr.DEFAULT=new Wr(OU,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wr.DISABLED=new Wr(-1,0,0);var mp=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var A2="LruGarbageCollector",AJ=1048576;function R2([n,e],[t,r]){let i=et(n,t);return i===0?et(e,r):i}var d0=class{constructor(e){this.Tr=e,this.buffer=new Gn(R2),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();R2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},h0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(A2,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ip(t)?ce(A2,"Ignoring IndexedDB error during garbage collection: ",t):await tR(t)}await this.Rr(3e5)})}},f0=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(z2.ue);let r=new d0(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(S2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S2):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ql()<=He.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function RJ(n,e){return new f0(n,e)}var p0=class{constructor(){this.changes=new no(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,od.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var g0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var m0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cp(r.mutation,i,is.empty(),dn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zn()){let i=Vc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Sv();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Vc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zn()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Uv(),o=ap(),a=(function(){return ap()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ro)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),cp(h.mutation,d,h.mutation.getFieldMask(),dn.now())):o.set(d.key,is.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new g0(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ap(),i=new kr((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||is.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||zn()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=bU();h.forEach(T=>{if(!s.has(T)){let C=NU(t.get(T),r.get(T));C!==null&&g.set(T,C),s=s.add(T)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XY(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(Vc()),a=dp,c=s;return o.next(d=>W.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(T=>{c=c.insert(h,T)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,zn())).next(h=>({batchId:a,changes:TU(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next(r=>{let i=Sv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Sv();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let d=(function(g,T){return new ud(T,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,T)=>{o=o.insert(g,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,od.newInvalidDocument(h)))});let a=Sv();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&cp(h.mutation,d,is.empty(),dn.now()),dR(t,d)&&(a=a.insert(c,d))}),a})}};var y0=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Xl(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:SJ(i.bundledQuery),readTime:Xl(i.readTime)}})(t)),W.resolve()}};var _0=class{constructor(){this.overlays=new kr(Fe.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vc();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=Vc(),s=t.length+1,o=new Fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new kr((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Vc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Vc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new r0(t,r));let s=this.kr.get(t);s===void 0&&(s=zn(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var v0=class{constructor(){this.sessionToken=to.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var yp=class{constructor(){this.qr=new Gn(tn.Qr),this.$r=new Gn(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new tn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new tn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Fe(new qt([])),r=new tn(t,e),i=new tn(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Fe(new qt([])),r=new tn(t,e),i=new tn(t,e+1),s=zn();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new tn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tn=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Fe.comparator(e.key,t.key)||et(e.Hr,t.Hr)}static Ur(e,t){return et(e.Hr,t.Hr)||Fe.comparator(e.key,t.key)}};var E0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Gn(tn.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new t0(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new tn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?nR:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tn(t,0),i=new tn(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gn(et);return t.forEach(i=>{let s=new tn(i,0),o=new tn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Fe.isDocumentKey(s)||(s=s.child(""));let o=new tn(new Fe(s),0),a=new Gn(et);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ot(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new tn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new tn(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var I0=class{constructor(e){this.ni=e,this.docs=(function(){return new kr(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():od.newInvalidDocument(t))}getEntries(e,t){let r=Uv();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():od.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Uv(),o=t.path,a=new Fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||kY(PY(h),r)<=0||(i.has(h.key)||dR(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Le(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new w0(this)}getSize(e){return W.resolve(this.size)}},w0=class extends p0{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var T0=class{constructor(e){this.persistence=e,this.ii=new no(t=>uR(t),lR),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.si=0,this.oi=new yp,this.targetCount=0,this._i=mp.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new mp(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var Bv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new z2(0),this.ci=!1,this.ci=!0,this.li=new v0,this.referenceDelegate=e(this),this.hi=new T0(this),this.indexManager=new u0,this.remoteDocumentCache=(function(i){return new I0(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new c0(t),this.Ti=new y0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new E0(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);let i=new b0(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},b0=class extends FA{constructor(e){super(),this.currentSequenceNumber=e}},D0=class n{constructor(e){this.persistence=e,this.Ai=new yp,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Le(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=Fe.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Mt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},$v=class n{constructor(e,t){this.persistence=e,this.gi=new no(r=>LY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=RJ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Mt.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rv(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var C0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=zn(),i=zn();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var S0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var A0=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Ox()?8:OY(gn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new S0;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ql()<=He.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",ip(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Ql()<=He.DEBUG&&ce("QueryEngine","Query:",ip(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ql()<=He.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",ip(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uc(t))):W.resolve())}ps(e,t){if(I2(t))return W.resolve(null);let r=Uc(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ZA(t,null,"F"),r=Uc(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=zn(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,ZA(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return I2(t)||i.isEqual(Mt.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Ql()<=He.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ip(t)),this.vs(e,o,t,NY(i,dp)).next(a=>a))})}bs(e,t){let r=new Gn(tJ(e));return t.forEach((i,s)=>{dR(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Ql()<=He.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",ip(t)),this.gs.getDocumentsMatchingQuery(e,t,zc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var NJ="LocalStore";var R0=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new kr(et),this.Ms=new no(s=>uR(s),lR),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m0(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function PJ(n,e,t,r){return new R0(n,e,t,r)}async function xU(n,e){let t=bt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=zn();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})}function kJ(n,e){let t=bt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let g=d.batch,T=g.keys(),C=W.resolve();return T.forEach(R=>{C=C.next(()=>h.getEntry(c,R)).next(M=>{let k=d.docVersions.get(R);Ot(k!==null,48541),M.version.compareTo(k)<0&&(g.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),h.addEntry(M)))})}),C.next(()=>a.mutationQueue.removeMutationBatch(c,g))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=zn();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MJ(n){let e=bt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function OJ(n,e){let t=bt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nR),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Hv=class{constructor(){this.activeTargetIds=aJ()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var N0=class{constructor(){this.Fo=new Hv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var P0=class{xo(e){}shutdown(){}};var N2="ConnectivityMonitor",qv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(N2,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ce(N2,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Av=null;function k0(){return Av===null?Av=(function(){return 268435456+Math.round(2147483648*Math.random())})():Av++,"0x"+Av.toString(16)}var CA="RestConnection",xJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},M0=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Fv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=k0(),a=this.Go(e,t.toUriEncodedString());ce(CA,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=Wo(d);return this.jo(e,a,c,r,h).then(g=>(ce(CA,`Received RPC '${e}' ${o}: `,g),g),g=>{throw nd(CA,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=xJ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var O0=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var qn="WebChannelConnection",x0=class extends M0{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=k0();return new Promise((a,c)=>{let d=new IA;d.setWithCredentials(!0),d.listenOnce(wA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case rp.NO_ERROR:let g=d.getResponseJson();ce(qn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case rp.TIMEOUT:ce(qn,`RPC '${e}' ${o} timed out`),c(new fe(G.DEADLINE_EXCEEDED,"Request time out"));break;case rp.HTTP_ERROR:let T=d.getStatus();if(ce(qn,`RPC '${e}' ${o} failed with status:`,T,"response text:",d.getResponseText()),T>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let R=C?.error;if(R&&R.status&&R.message){let M=(function(H){let $=H.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf($)>=0?$:G.UNKNOWN})(R.status);c(new fe(M,R.message))}else c(new fe(G.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new fe(G.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ce(qn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ce(qn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=k0(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DA(),a=bA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ce(qn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.T_(g);let T=!1,C=!1,R=new O0({Ho:k=>{C?ce(qn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(T||(ce(qn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),T=!0),ce(qn,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Yo:()=>g.close()}),M=(k,H,$)=>{k.listen(H,B=>{try{$(B)}catch(se){setTimeout(()=>{throw se},0)}})};return M(g,Kl.EventType.OPEN,()=>{C||(ce(qn,`RPC '${e}' stream ${i} transport opened.`),R.s_())}),M(g,Kl.EventType.CLOSE,()=>{C||(C=!0,ce(qn,`RPC '${e}' stream ${i} transport closed`),R.__(),this.I_(g))}),M(g,Kl.EventType.ERROR,k=>{C||(C=!0,nd(qn,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),R.__(new fe(G.UNAVAILABLE,"The operation could not be completed")))}),M(g,Kl.EventType.MESSAGE,k=>{var H;if(!C){let $=k.data[0];Ot(!!$,16349);let B=$,se=B?.error||((H=B[0])===null||H===void 0?void 0:H.error);if(se){ce(qn,`RPC '${e}' stream ${i} received error:`,se);let le=se.status,oe=(function(E){let w=en[E];if(w!==void 0)return gJ(w)})(le),b=se.message;oe===void 0&&(oe=G.INTERNAL,b="Unknown error status: "+le+" with message "+se.message),C=!0,R.__(new fe(oe,b)),g.close()}else ce(qn,`RPC '${e}' stream ${i} received:`,$),R.a_($)}}),M(a,TA.STAT_EVENT,k=>{k.stat===Dv.PROXY?ce(qn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Dv.NOPROXY&&ce(qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function SA(){return typeof document<"u"?document:null}function Jv(n){return new i0(n,!0)}var zv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var P2="PersistentStream",L0=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(qc(t.toString()),qc("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new fe(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ce(P2,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ce(P2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var F0=class extends L0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=TJ(e.writeResults,e.commitTime),r=Xl(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=EJ(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>wJ(this.serializer,r))};this.k_(t)}};var V0=class{},U0=class extends V0{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new fe(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,o0(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(G.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,o0(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(G.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},j0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qc(t),this._a=!1):ce("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var wp="RemoteStore",B0=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{bp(this)&&(ce(wp,"Restarting streams for network reachability change."),await(async function(c){let d=bt(c);d.Ia.add(4),await Tp(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Zv(d)})(this))})}),this.Aa=new j0(r,i)}};async function Zv(n){if(bp(n))for(let e of n.da)await e(!0)}async function Tp(n){for(let e of n.da)await e(!1)}function bp(n){return bt(n).Ia.size===0}async function LU(n,e,t){if(!Ip(e))throw e;n.Ia.add(1),await Tp(n),n.Aa.set("Offline"),t||(t=()=>MJ(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ce(wp,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Zv(n)})}function FU(n,e){return e().catch(t=>LU(n,t,e))}async function Xv(n){let e=bt(n),t=fa(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:nR;for(;LJ(e);)try{let i=await OJ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,FJ(e,i)}catch(i){await LU(e,i)}VU(e)&&UU(e)}function LJ(n){return bp(n)&&n.Pa.length<10}function FJ(n,e){n.Pa.push(e);let t=fa(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function VU(n){return bp(n)&&!fa(n).M_()&&n.Pa.length>0}function UU(n){fa(n).start()}async function VJ(n){fa(n).na()}async function UJ(n){let e=fa(n);for(let t of n.Pa)e.X_(t.mutations)}async function jJ(n,e,t){let r=n.Pa.shift(),i=n0.from(r,e,t);await FU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Xv(n)}async function BJ(n,e){e&&fa(n).Z_&&await(async function(r,i){if((function(o){return pJ(o)&&o!==G.ABORTED})(i.code)){let s=r.Pa.shift();fa(r).N_(),await FU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Xv(r)}})(n,e),VU(n)&&UU(n)}async function k2(n,e){let t=bt(n);t.asyncQueue.verifyOperationInProgress(),ce(wp,"RemoteStore received new credentials");let r=bp(t);t.Ia.add(3),await Tp(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Zv(t)}async function $J(n,e){let t=bt(n);e?(t.Ia.delete(2),await Zv(t)):e||(t.Ia.add(2),await Tp(t),t.Aa.set("Unknown"))}function fa(n){return n.ma||(n.ma=(function(t,r,i){let s=bt(t);return s.ia(),new F0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:VJ.bind(null,n),n_:BJ.bind(null,n),ea:UJ.bind(null,n),ta:jJ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Xv(n)):(await n.ma.stop(),n.Pa.length>0&&(ce(wp,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var $0=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jU(n,e){if(qc("AsyncQueue",`${e}: ${n}`),Ip(n))return new fe(G.UNAVAILABLE,`${e}: ${n}`);throw n}var H0=class{constructor(){this.queries=M2(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=bt(t),s=i.queries;i.queries=M2(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new fe(G.ABORTED,"Firestore shutting down"))}};function M2(){return new no(n=>IU(n),EU)}function HJ(n){n.Da.forEach(e=>{e.next()})}var O2,x2;(x2=O2||(O2={})).Fa="default",x2.Cache="cache";var qJ="SyncEngine";var q0=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new no(a=>IU(a),EU),this.Tu=new Map,this.Iu=new Set,this.du=new kr(Fe.comparator),this.Eu=new Map,this.Au=new yp,this.Ru={},this.Vu=new Map,this.mu=mp.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function zJ(n,e,t){let r=QJ(n);try{let i=await(function(o,a){let c=bt(o),d=dn.now(),h=a.reduce((C,R)=>C.add(R.key),zn()),g,T;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=Uv(),M=zn();return c.Os.getEntries(C,h).next(k=>{R=k,R.forEach((H,$)=>{$.isValidDocument()||(M=M.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,R)).next(k=>{g=k;let H=[];for(let $ of a){let B=fJ($,g.get($.key).overlayedDocument);B!=null&&H.push(new ro($.key,B,pU(B.value.mapValue),ua.exists(!0)))}return c.mutationQueue.addMutationBatch(C,d,H,a)}).next(k=>{T=k;let H=k.applyToLocalDocumentSet(g,M);return c.documentOverlayCache.saveOverlays(C,k.batchId,H)})}).then(()=>({batchId:T.batchId,changes:TU(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new kr(et)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),await eE(r,i.changes),await Xv(r.remoteStore)}catch(i){let s=jU(i,"Failed to persist write");t.reject(s)}}function L2(n,e,t){let r=bt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=bt(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let T of g.wa)T.va(a)&&(d=!0)}),d&&HJ(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GJ(n,e){let t=bt(n),r=e.batch.batchId;try{let i=await kJ(t.localStore,e);$U(t,r,null),BU(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await eE(t,i)}catch(i){await tR(i)}}async function WJ(n,e,t){let r=bt(n);try{let i=await(function(o,a){let c=bt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(Ot(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);$U(r,e,t),BU(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await eE(r,i)}catch(i){await tR(i)}}function BU(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function $U(n,e,t){let r=bt(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}async function eE(n,e,t){let r=bt(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=C0.Es(c.targetId,d);s.push(g)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,d){let h=bt(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>W.forEach(d,T=>W.forEach(T.Is,C=>h.persistence.referenceDelegate.addReference(g,T.targetId,C)).next(()=>W.forEach(T.ds,C=>h.persistence.referenceDelegate.removeReference(g,T.targetId,C)))))}catch(g){if(!Ip(g))throw g;ce(NJ,"Failed to update sequence numbers: "+g)}for(let g of d){let T=g.targetId;if(!g.fromCache){let C=h.Fs.get(T),R=C.snapshotVersion,M=C.withLastLimboFreeSnapshotVersion(R);h.Fs=h.Fs.insert(T,M)}}})(r.localStore,s))}async function KJ(n,e){let t=bt(n);if(!t.currentUser.isEqual(e)){ce(qJ,"User change. New user:",e.toKey());let r=await xU(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new fe(G.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eE(t,r.Bs)}}function QJ(n){let e=bt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WJ.bind(null,e),e}var HU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return PJ(this.persistence,new A0,t.initialUser,this.serializer)}Du(t){return new Bv(D0.Vi,this.serializer)}bu(t){return new N0}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),z0=class extends HU{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ot(this.persistence.referenceDelegate instanceof $v,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new h0(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Wr.withCacheSize(this.cacheSizeBytes):Wr.DEFAULT;return new Bv(r=>$v.Vi(r,t),this.serializer)}};var YJ=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>L2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KJ.bind(null,this.syncEngine),await $J(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new H0})()}createDatastore(t){let r=Jv(t.databaseInfo.databaseId),i=(function(o){return new x0(o)})(t.databaseInfo);return(function(o,a,c,d){return new U0(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new B0(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>L2(this.syncEngine,r,0),(function(){return qv.C()?new qv:new P0})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let T=new q0(s,o,a,c,d,h);return g&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=bt(s);ce(wp,"RemoteStore shutting down."),o.Ia.add(5),await Tp(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var pa="FirestoreClient",G0=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yn.UNAUTHENTICATED,this.clientId=lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ce(pa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ce(pa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=jU(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function AA(n,e){n.asyncQueue.verifyOperationInProgress(),ce(pa,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{nd("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{nd("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function F2(n,e){n.asyncQueue.verifyOperationInProgress();let t=await JJ(n);ce(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>k2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>k2(e.remoteStore,i)),n._onlineComponents=e}async function JJ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(pa,"Using user provided OfflineComponentProvider");try{await AA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;nd("Error using user provided cache. Falling back to memory cache: "+t),await AA(n,new HU)}}else ce(pa,"Using default OfflineComponentProvider"),await AA(n,new z0(void 0));return n._offlineComponents}async function ZJ(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(pa,"Using user provided OnlineComponentProvider"),await F2(n,n._uninitializedComponentsProvider._online)):(ce(pa,"Using default OnlineComponentProvider"),await F2(n,new YJ))),n._onlineComponents}function XJ(n){return ZJ(n).then(e=>e.syncEngine)}function qU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var V2=new Map;var zU="firestore.googleapis.com",U2=!0,Gv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zU,this.ssl=U2}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:U2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AJ)throw new fe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new RA;switch(r.type){case"firstParty":return new MA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=V2.get(t);r&&(ce("ComponentProvider","Removing Datastore"),V2.delete(t),r.terminate())})(this),Promise.resolve()}};function GU(n,e,t,r={}){var i;n=eR(n,pd);let s=Wo(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Qy(`https://${c}`),Yy("Firestore",!0)),o.host!==zU&&o.host!==c&&nd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Wi(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=yn.MOCK_USER;else{h=Ax(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new fe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new yn(T)}n._authCredentials=new NA(new kv(h,g))}}var W0=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pr=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ep(t,n._jsonSchema))return new n(e,r||null,new Fe(qt.fromString(t.referencePath)))}};Pr._jsonSchemaVersion="firestore/documentReference/1.0",Pr._jsonSchema={type:rn("string",Pr._jsonSchemaVersion),referencePath:rn("string")};var la=class n extends W0{constructor(e,t,r){super(e,t,ZY(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new Fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function WU(n,e,...t){if(n=tr(n),H2("collection","path",e),n instanceof pd){let r=qt.fromString(e,...t);return d2(r),new la(n,null,r)}{if(!(n instanceof Pr||n instanceof la))throw new fe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qt.fromString(e,...t));return d2(r),new la(n.firestore,null,r)}}function fR(n,e,...t){if(n=tr(n),arguments.length===1&&(e=lp.newId()),H2("doc","path",e),n instanceof pd){let r=qt.fromString(e,...t);return l2(r),new Pr(n,null,new Fe(r))}{if(!(n instanceof Pr||n instanceof la))throw new fe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qt.fromString(e,...t));return l2(r),new Pr(n.firestore,n instanceof la?n.converter:null,new Fe(r))}}var j2="AsyncQueue",Wv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zv(this,"async_queue_retry"),this.oc=()=>{let r=SA();r&&ce(j2,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=SA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=SA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new eo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ip(e))throw e;ce(j2,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,qc("INTERNAL UNHANDLED ERROR: ",B2(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=$0.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Le(47125,{hc:B2(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function B2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var _p=class extends pd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Wv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}};function KU(n,e){let t=typeof n=="object"?n:Ic(),r=typeof n=="string"?n:e||Fv,i=fl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Sx("firestore");s&&GU(i,...s)}return i}function eZ(n){if(n._terminated)throw new fe(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||tZ(n),n._firestoreClient}function tZ(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new UA(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qU(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new G0(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var jc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(to.fromBase64String(e))}catch(t){throw new fe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(to.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ep(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};jc._jsonSchemaVersion="firestore/bytes/1.0",jc._jsonSchema={type:rn("string",jc._jsonSchemaVersion),bytes:rn("string")};var vp=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Kv=class{constructor(e){this._methodName=e}};var Bc=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ep(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Bc._jsonSchemaVersion="firestore/geoPoint/1.0",Bc._jsonSchema={type:rn("string",Bc._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};var $c=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ep(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new fe(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};$c._jsonSchemaVersion="firestore/vectorValue/1.0",$c._jsonSchema={type:rn("string",$c._jsonSchemaVersion),vectorValues:rn("object")};var nZ=/^__.*__$/,K0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yc(e,this.data,t,this.fieldTransforms)}};function QU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ec:n})}}var Q0=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Qv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(QU(this.Ec)&&nZ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Y0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Jv(e)}Dc(e,t,r,i=!1){return new Q0({Ec:e,methodName:t,bc:r,path:Nr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rZ(n){let e=n._freezeSettings(),t=Jv(n._databaseId);return new Y0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iZ(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);XU("Data must be an object, but it was:",o,r);let a=JU(r,o),c,d;if(s.merge)c=new is(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let T=sZ(e,g,t);if(!o.contains(T))throw new fe(G.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);aZ(h,T)||h.push(T)}c=new is(h),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new K0(new rs(a),c,d)}function YU(n,e){if(ZU(n=tr(n)))return XU("Unsupported field value:",e,n),JU(n,e);if(n instanceof Kv)return(function(r,i){if(!QU(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=YU(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=tr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cJ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=dn.fromDate(r);return{timestampValue:s0(i.serializer,s)}}if(r instanceof dn){let s=new dn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:s0(i.serializer,s)}}if(r instanceof Bc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jc)return{bytesValue:mJ(i.serializer,r._byteString)};if(r instanceof Pr){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kU(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $c)return(function(o,a){return{mapValue:{fields:{[oR]:{stringValue:aR},[fp]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return hR(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${X0(r)}`)})(n,e)}function JU(n,e){let t={};return oU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):md(n,(r,i)=>{let s=YU(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function ZU(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dn||n instanceof Bc||n instanceof jc||n instanceof Pr||n instanceof Kv||n instanceof $c)}function XU(n,e,t){if(!ZU(t)||!q2(t)){let r=X0(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function sZ(n,e,t){if((e=tr(e))instanceof vp)return e._internalPath;if(typeof e=="string")return ej(n,e);throw Qv("Field path arguments must be of type string or ",n,!1,void 0,t)}var oZ=new RegExp("[~\\*/\\[\\]]");function ej(n,e,t){if(e.search(oZ)>=0)throw Qv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vp(...e.split("."))._internalPath}catch{throw Qv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qv(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new fe(G.INVALID_ARGUMENT,a+n+c)}function aZ(n,e){return n.some(t=>t.isEqual(e))}var Yv=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new J0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(tj("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},J0=class extends Yv{data(){return super.data()}};function tj(n,e){return typeof e=="string"?ej(n,e):e instanceof vp?e._internalPath:e._delegate._internalPath}function cZ(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Zl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ed=class n extends Yv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(tj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ed._jsonSchemaVersion="firestore/documentSnapshot/1.0",ed._jsonSchema={type:rn("string",ed._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};var td=class extends ed{data(e={}){return super.data(e)}},up=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new td(this._firestore,this._userDataWriter,r.key,r,new Zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new td(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new td(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:uZ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function uZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}up._jsonSchemaVersion="firestore/querySnapshot/1.0",up._jsonSchema={type:rn("string",up._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};function nj(n){return ij(eR(n.firestore,_p),[new gp(n._key,ua.none())])}function rj(n,e){let t=eR(n.firestore,_p),r=fR(n),i=cZ(n.converter,e);return ij(t,[iZ(rZ(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ua.exists(!1))]).then(()=>r)}function ij(n,e){return(function(r,i){let s=new eo;return r.asyncQueue.enqueueAndForget(async()=>zJ(await XJ(r),i,s)),s.promise})(eZ(n),e)}(function(e,t=!0){(function(i){gd=i})(Qo),_i(new nr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new _p(new PA(r.getProvider("auth-internal")),new OA(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new fe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jA(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),kt(o2,a2,e),kt(o2,a2,"esm2017")})();var Jc=class{constructor(e){return e}},sj="firestore",pR=class{constructor(){return gl(sj)}};var gR=new ne("angularfire2.firestore-instances");function lZ(n,e){let t=pf(sj,n,e);return t&&new Jc(t)}function dZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Jc(r)}}var hZ={provide:pR,deps:[[new Er,gR]]},fZ={provide:Jc,useFactory:lZ,deps:[[new Er,gR],Fs]};function oj(n,...e){return kt("angularfire",Yo.full,"fst"),Jn([fZ,hZ,{provide:gR,useFactory:dZ(n),multi:!0,deps:[We,Ct,Jo,Tc,[new Er,Pf],[new Er,ml],...e]}])}var aj=rr(n2,!0);var cj=rr(rj,!0,2);var uj=rr(WU,!0,2);var lj=rr(nj,!0,2);var dj=rr(fR,!0,2);var hj=rr(KU,!0);var Kr=class n{auth=V(Nc);user$=YL(this.auth);constructor(){}async login(){let e=new aC;try{await ZL(this.auth,e)}catch(t){throw console.error("Login failed",t),t}}async logout(){try{await XL(this.auth)}catch(e){throw console.error("Logout failed",e),e}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};var tE=class n{authService=V(Kr);router=V(pn);async login(){try{await this.authService.login(),this.router.navigate(["/dashboard"])}catch(e){console.error(e)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wr({type:n,selectors:[["app-login"]],decls:5,vars:0,consts:[[1,"login-container"],[3,"click"]],template:function(t,r){t&1&&(Ah(0,"div",0)(1,"h1"),it(2,"Welcome to Imagix"),Rh(),Ah(3,"button",1),zm("click",function(){return r.login()}),it(4,"Sign in with Google"),Rh()())},styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#121212;color:#fff}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;cursor:pointer}"]})};var Ej=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(je(Ss),je(Ir))};static \u0275dir=Xn({type:n})}return n})(),pZ=(()=>{class n extends Ej{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ic(n)))(i||n)}})();static \u0275dir=Xn({type:n,features:[cc]})}return n})(),Ij=new ne("");var gZ={provide:Ij,useExisting:Ha(()=>oE),multi:!0};function mZ(){let n=Hr()?Hr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var yZ=new ne(""),oE=(()=>{class n extends Ej{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!mZ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(je(Ss),je(Ir),je(yZ,8))};static \u0275dir=Xn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&St("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Qm([gZ]),cc]})}return n})();var _Z=new ne(""),vZ=new ne("");function wj(n){return n!=null}function Tj(n){return Ns(n)?wt(n):n}function bj(n){let e={};return n.forEach(t=>{e=t!=null?q(q({},e),t):e}),Object.keys(e).length===0?null:e}function Dj(n,e){return e.map(t=>t(n))}function EZ(n){return!n.validate}function Cj(n){return n.map(e=>EZ(e)?e:t=>e.validate(t))}function IZ(n){if(!n)return null;let e=n.filter(wj);return e.length==0?null:function(t){return bj(Dj(t,e))}}function Sj(n){return n!=null?IZ(Cj(n)):null}function wZ(n){if(!n)return null;let e=n.filter(wj);return e.length==0?null:function(t){let r=Dj(t,e).map(Tj);return XE(r).pipe(Ve(bj))}}function Aj(n){return n!=null?wZ(Cj(n)):null}function fj(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TZ(n){return n._rawValidators}function bZ(n){return n._rawAsyncValidators}function mR(n){return n?Array.isArray(n)?n:[n]:[]}function rE(n,e){return Array.isArray(n)?n.includes(e):n===e}function pj(n,e){let t=mR(e);return mR(n).forEach(i=>{rE(t,i)||t.push(i)}),t}function gj(n,e){return mR(e).filter(t=>!rE(n,t))}var iE=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Sj(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Aj(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},yR=class extends iE{name;get formDirective(){return null}get path(){return null}},Rp=class extends iE{_parent=null;name=null;valueAccessor=null},_R=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Rj=(()=>{class n extends _R{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(je(Rp,2))};static \u0275dir=Xn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Qu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[cc]})}return n})();var Dp="VALID",nE="INVALID",yd="PENDING",Cp="DISABLED",Zc=class{},sE=class extends Zc{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Sp=class extends Zc{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ap=class extends Zc{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},_d=class extends Zc{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var vR=class extends Zc{source;constructor(e){super(),this.source=e}};function DZ(n){return(aE(n)?n.validators:n)||null}function CZ(n){return Array.isArray(n)?Sj(n):n||null}function SZ(n,e){return(aE(e)?e.asyncValidators:n)||null}function AZ(n){return Array.isArray(n)?Aj(n):n||null}function aE(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var ER=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Bt(this.statusReactive)}set status(e){Bt(()=>this.statusReactive.set(e))}_status=Mh(()=>this.statusReactive());statusReactive=jt(void 0);get valid(){return this.status===Dp}get invalid(){return this.status===nE}get pending(){return this.status==yd}get disabled(){return this.status===Cp}get enabled(){return this.status!==Cp}errors;get pristine(){return Bt(this.pristineReactive)}set pristine(e){Bt(()=>this.pristineReactive.set(e))}_pristine=Mh(()=>this.pristineReactive());pristineReactive=jt(!0);get dirty(){return!this.pristine}get touched(){return Bt(this.touchedReactive)}set touched(e){Bt(()=>this.touchedReactive.set(e))}_touched=Mh(()=>this.touchedReactive());touchedReactive=jt(!1);get untouched(){return!this.touched}_events=new It;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(pj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gj(e,this._rawAsyncValidators))}hasValidator(e){return rE(this._rawValidators,e)}hasAsyncValidator(e){return rE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ve(q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ap(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ap(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ve(q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Sp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Sp(!0,r))}markAsPending(e={}){this.status=yd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _d(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ve(q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Cp,this.errors=null,this._forEachChild(i=>{i.disable(ve(q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sE(this.value,r)),this._events.next(new _d(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ve(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Dp,this._forEachChild(r=>{r.enable(ve(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ve(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dp||this.status===yd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sE(this.value,t)),this._events.next(new _d(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ve(q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cp:Dp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=yd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Tj(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new _d(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Wt,this.statusChanges=new Wt}_calculateStatus(){return this._allControlsDisabled()?Cp:this.errors?nE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yd)?yd:this._anyControlsHaveStatus(nE)?nE:Dp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Sp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ap(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){aE(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=CZ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AZ(this._rawAsyncValidators)}};var Nj=new ne("",{factory:()=>IR}),IR="always";function RZ(n,e){return[...e.path,n]}function NZ(n,e,t=IR){kZ(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),MZ(n,e),xZ(n,e),OZ(n,e),PZ(n,e)}function mj(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PZ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kZ(n,e){let t=TZ(n);e.validator!==null?n.setValidators(fj(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=bZ(n);e.asyncValidator!==null?n.setAsyncValidators(fj(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();mj(e._rawValidators,i),mj(e._rawAsyncValidators,i)}function MZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Pj(n,e)})}function OZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Pj(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Pj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xZ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function LZ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function FZ(n){return Object.getPrototypeOf(n.constructor)===pZ}function VZ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===oE?t=s:FZ(s)?r=s:i=s}),i||r||t||null}function yj(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _j(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var UZ=class extends ER{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(DZ(t),SZ(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),aE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_j(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new vR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_j(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jZ={provide:Rp,useExisting:Ha(()=>wR)},vj=Promise.resolve(),wR=(()=>{class n extends Rp{_changeDetectorRef;callSetDisabledState;control=new UZ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Wt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=VZ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),LZ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){NZ(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){vj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&uc(r);vj.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?RZ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(je(yR,9),je(_Z,10),je(vZ,10),je(Ij,10),je(ks,8),je(Nj,8))};static \u0275dir=Xn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Qm([jZ]),cc,Ds]})}return n})();var BZ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=li({type:n});static \u0275inj=Fr({})}return n})();var kj=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Nj,useValue:t.callSetDisabledState??IR}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=li({type:n});static \u0275inj=Fr({imports:[BZ]})}return n})();var cE=class n{firestore=V(Jc);authService=V(Kr);projectsCollection=uj(this.firestore,"projects");async createProject(e){let t=await this.getCurrentUser();if(!t)throw new Error("User not authenticated");let r={name:e,userId:t.uid,createdAt:new Date,updatedAt:new Date};await cj(this.projectsCollection,r)}async deleteProject(e){let t=dj(this.firestore,"projects",e);await lj(t)}getUserProjects(){return new ge(e=>{this.authService.user$.subscribe(t=>{t?aj(this.projectsCollection,{idField:"id"}).subscribe(r=>e.next(r),r=>e.error(r)):e.next([])})})}async getCurrentUser(){return new Promise(e=>{this.authService.user$.subscribe(t=>{e(t)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};var vd=class n{createProjectSubject=new It;createProject$=this.createProjectSubject.asObservable();triggerCreateProject(){this.createProjectSubject.next()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};function HZ(n,e){if(n&1){let t=Ps();Pe(0,"div",9)(1,"div",10)(2,"div",11),it(3,"\u{1F3AC}"),Be(),Pe(4,"button",12),St("click",function(){let i=Fn(t).$implicit,s=Un(2);return Vn(s.deleteProject(i))}),Pe(5,"span",3),it(6,"\xD7"),Be()()(),Pe(7,"h3",13),it(8),Be(),Pe(9,"div",14)(10,"span",15),it(11),Ph(12,"date"),Be()(),Pe(13,"button",16),it(14,"Open Project"),Be()()}if(n&2){let t=e.$implicit;Rn(8),Gm(t.name),Rn(3),Yu("Created: ",DT(12,2,t.createdAt,"short"))}}function qZ(n,e){if(n&1&&(Pe(0,"div",7),Rs(1,HZ,15,5,"div",8),Be()),n&2){let t=Un();Rn(),dr("ngForOf",t.projects())}}function zZ(n,e){if(n&1){let t=Ps();Pe(0,"div",17)(1,"div",18),it(2,"\u{1F4C1}"),Be(),Pe(3,"h2"),it(4,"No projects yet"),Be(),Pe(5,"p"),it(6,"Create your first project to get started with Imagix"),Be(),Pe(7,"button",19),St("click",function(){Fn(t);let i=Un();return Vn(i.openCreateDialog())}),Pe(8,"span",3),it(9,"+"),Be(),it(10," Create Your First Project "),Be()()}}function GZ(n,e){if(n&1){let t=Ps();Pe(0,"div",20),St("click",function(){Fn(t);let i=Un();return Vn(i.closeCreateDialog())}),Pe(1,"div",21),St("click",function(i){return Fn(t),Vn(i.stopPropagation())}),Pe(2,"div",22)(3,"h2"),it(4,"Create New Project"),Be(),Pe(5,"button",23),St("click",function(){Fn(t);let i=Un();return Vn(i.closeCreateDialog())}),it(6,"\xD7"),Be()(),Pe(7,"div",24)(8,"label",25),it(9,"Project Name"),Be(),Pe(10,"input",26),Km("ngModelChange",function(i){Fn(t);let s=Un();return TT(s.newProjectName,i)||(s.newProjectName=i),Vn(i)}),St("keyup.enter",function(){Fn(t);let i=Un();return Vn(i.createProject())}),Be()(),Pe(11,"div",27)(12,"button",28),St("click",function(){Fn(t);let i=Un();return Vn(i.closeCreateDialog())}),it(13," Cancel "),Be(),Pe(14,"button",29),St("click",function(){Fn(t);let i=Un();return Vn(i.createProject())}),it(15),Be()()()()}if(n&2){let t=Un();Rn(10),Wm("ngModel",t.newProjectName),Rn(2),dr("disabled",t.isLoading()),Rn(2),dr("disabled",t.isLoading()),Rn(),Yu(" ",t.isLoading()?"Creating...":"Create Project"," ")}}var uE=class n{authService=V(Kr);projectService=V(cE);eventService=V(vd);router=V(pn);projects=jt([]);showCreateDialog=jt(!1);newProjectName=jt("");isLoading=jt(!1);ngOnInit(){this.loadProjects(),this.eventService.createProject$.subscribe(()=>{this.openCreateDialog()})}loadProjects(){this.projectService.getUserProjects().subscribe({next:e=>{this.projects.set(e)},error:e=>{console.error("Error loading projects:",e)}})}openCreateDialog(){this.showCreateDialog.set(!0),this.newProjectName.set("")}closeCreateDialog(){this.showCreateDialog.set(!1),this.newProjectName.set("")}async createProject(){let e=this.newProjectName().trim();if(!e){alert("Please enter a project name");return}this.isLoading.set(!0);try{await this.projectService.createProject(e),this.closeCreateDialog()}catch(t){console.error("Error creating project:",t),alert("Failed to create project. Please try again.")}finally{this.isLoading.set(!1)}}async deleteProject(e){if(!(!e.id||!confirm(`Are you sure you want to delete "${e.name}"?`)))try{await this.projectService.deleteProject(e.id)}catch(r){console.error("Error deleting project:",r),alert("Failed to delete project. Please try again.")}}async logout(){try{await this.authService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Logout error:",e)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wr({type:n,selectors:[["app-dashboard"]],decls:11,vars:3,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"create-btn",3,"click"],[1,"icon"],["class","projects-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","dialog-overlay",3,"click",4,"ngIf"],[1,"projects-grid"],["class","project-card",4,"ngFor","ngForOf"],[1,"project-card"],[1,"project-header"],[1,"project-icon"],["title","Delete project",1,"delete-btn",3,"click"],[1,"project-name"],[1,"project-meta"],[1,"date"],[1,"open-btn"],[1,"empty-state"],[1,"empty-icon"],[1,"create-btn-large",3,"click"],[1,"dialog-overlay",3,"click"],[1,"dialog",3,"click"],[1,"dialog-header"],[1,"close-btn",3,"click"],[1,"dialog-body"],["for","projectName"],["type","text","id","projectName","placeholder","Enter project name","autofocus","",3,"ngModelChange","keyup.enter","ngModel"],[1,"dialog-footer"],[1,"cancel-btn",3,"click","disabled"],[1,"submit-btn",3,"click","disabled"]],template:function(t,r){t&1&&(Pe(0,"div",0)(1,"div",1)(2,"h1"),it(3,"My Projects"),Be(),Pe(4,"button",2),St("click",function(){return r.openCreateDialog()}),Pe(5,"span",3),it(6,"+"),Be(),it(7," New Project "),Be()(),Rs(8,qZ,2,1,"div",4)(9,zZ,11,0,"div",5)(10,GZ,16,4,"div",6),Be()),t&2&&(Rn(8),dr("ngIf",r.projects().length>0),Rn(),dr("ngIf",r.projects().length===0),Rn(),dr("ngIf",r.showCreateDialog()))},dependencies:[$o,ly,lc,kj,oE,Rj,wR,$T],styles:['.dashboard-container[_ngcontent-%COMP%]{padding:40px;background:linear-gradient(135deg,#0f0f1e,#1a1a2e);color:#fff;min-height:100vh}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px;animation:_ngcontent-%COMP%_fadeInDown .5s ease}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}.create-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.projects-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px;animation:_ngcontent-%COMP%_fadeIn .6s ease}.project-card[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:24px;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden}.project-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2);transform:scaleX(0);transition:transform .3s ease}.project-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 30px #667eea4d;border-color:#667eea80}.project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.project-icon[_ngcontent-%COMP%]{font-size:2.5rem;filter:drop-shadow(0 2px 8px rgba(102,126,234,.4))}.delete-btn[_ngcontent-%COMP%]{background:#ff3b301a;border:1px solid rgba(255,59,48,.3);color:#ff3b30;width:32px;height:32px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;font-size:1.5rem;line-height:1}.delete-btn[_ngcontent-%COMP%]:hover{background:#ff3b3033;transform:scale(1.1)}.project-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 12px;color:#fff}.project-meta[_ngcontent-%COMP%]{margin-bottom:20px}.date[_ngcontent-%COMP%]{font-size:.875rem;color:#fff9}.open-btn[_ngcontent-%COMP%]{width:100%;background:#667eea1a;border:1px solid rgba(102,126,234,.3);color:#667eea;padding:10px;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.open-btn[_ngcontent-%COMP%]:hover{background:#667eea33;border-color:#667eea80}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;animation:_ngcontent-%COMP%_fadeIn .6s ease}.empty-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:24px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin:0 0 12px;color:#ffffffe6}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;color:#fff9;margin:0 0 32px}.create-btn-large[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:16px 32px;border-radius:12px;font-size:1.125rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:10px;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.create-btn-large[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 25px #667eea99}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease}.dialog[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e1e2e,#2a2a3e);border:1px solid rgba(255,255,255,.1);border-radius:16px;width:90%;max-width:500px;box-shadow:0 20px 60px #00000080;animation:_ngcontent-%COMP%_slideUp .3s ease}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#fff}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff9;font-size:2rem;cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .3s ease;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.dialog-body[_ngcontent-%COMP%]{padding:24px}.dialog-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#ffffffe6}.dialog-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;color:#fff;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.dialog-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#ffffff14;box-shadow:0 0 0 3px #667eea1a}.dialog-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff6}.dialog-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 24px 24px;justify-content:flex-end}.cancel-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;border:none}.cancel-btn[_ngcontent-%COMP%]{background:#ffffff0d;color:#ffffffb3;border:1px solid rgba(255,255,255,.1)}.cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff1a;color:#fff}.submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea66}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}.cancel-btn[_ngcontent-%COMP%]:disabled, .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media(max-width:768px){.dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:flex-start}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.projects-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog[_ngcontent-%COMP%]{width:95%;margin:20px}}']})};var Mj=(n,e)=>{let t=V(Kr),r=V(pn);return t.user$.pipe(bn(1),Ve(i=>!!i),Dn(i=>{i||r.navigate(["/login"])}))};var Oj=[{path:"login",component:tE},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:uE,canActivate:[Mj]},{path:"**",redirectTo:"dashboard"}];var xj={production:!0,firebase:{apiKey:"AIzaSyCsHpTewZoHC_ck1pn3pqfBtmB1OPm4Io4",authDomain:"imagix-dev.firebaseapp.com",projectId:"imagix-dev",storageBucket:"imagix-dev.firebasestorage.app",messagingSenderId:"990473235218",appId:"1:990473235218:web:69affd810fd2449672a1cb",measurementId:"G-2NBZ4N1GKG"}};var TR="Service workers are disabled or not supported by this browser",Ed=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new ge(r=>r.error(new ee(5601,!1)));else{let r=null,i=new It;this.worker=new ge(d=>(r!==null&&d.next(r),i.subscribe(h=>d.next(h))));let s=()=>{let{controller:d}=e;d!==null&&(r=d,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(xn(()=>e.getRegistration().then(d=>{if(!d)throw new ee(5601,!1);return d})));let o=new It;this.events=o.asObservable();let a=d=>{let{data:h}=d;h?.type&&o.next(h)};e.addEventListener("message",a),t?.get(di,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(bn(1)).subscribe(i=>{i.postMessage(q({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(On(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(bn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(On(i=>i.nonce===e),bn(1),Ve(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},WZ=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new It;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=_s,this.notificationClicks=_s,this.notificationCloses=_s,this.pushSubscriptionChanges=_s,this.subscription=_s;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Ve(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ve(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Ve(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Ve(i=>i.data)),this.pushManager=this.sw.registration.pipe(Ve(i=>i.pushManager));let r=this.pushManager.pipe(xn(i=>i.getSubscription()));this.subscription=new ge(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(TR));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(xn(c=>c.subscribe(r)),bn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(TR));let t=r=>{if(r===null)throw new ee(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new ee(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(bn(1),xn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(me(Ed))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),KZ=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=_s,this.unrecoverable=_s;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(TR));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new ee(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(me(Ed))};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})(),Fj=new ne("");function QZ(){let n=V(Np);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=V(Fj),t=V(We),r=V(di);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:s}=n;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=Lj(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),Lj(+a[0])]);break;default:throw new ee(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(Mi(5604,!1)))})})}function Lj(n){return new Promise(e=>setTimeout(e,n))}function YZ(){let n=V(Np),e=V(Ct),t=!0;return new Ed(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var Np=class{enabled;updateViaCache;type;scope;registrationStrategy};function bR(n,e={}){return Jn([WZ,KZ,{provide:Fj,useValue:n},{provide:Np,useValue:e},{provide:Ed,useFactory:YZ},Ku(QZ)])}var Vj={providers:[LM({eventCoalescing:!0}),Cb(Oj),t1(()=>n1(xj.firebase)),QL(()=>JL()),oj(()=>hj()),bR("ngsw-worker.js",{enabled:!Ju(),registrationStrategy:"registerWhenStable:30000"}),bR("ngsw-worker.js",{enabled:!Ju(),registrationStrategy:"registerWhenStable:30000"})]};var Id=class n{sidebarOpen=jt(!1);toggleSidebar(){this.sidebarOpen.update(e=>!e)}closeSidebar(){this.sidebarOpen.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};function JZ(n,e){if(n&1){let t=Ps();Pe(0,"div",7)(1,"div",8),$i(2,"img",9),Pe(3,"button",10),St("click",function(){Fn(t);let i=Un();return Vn(i.logout())}),it(4,"Logout"),Be()()()}if(n&2){let t=e.ngIf;Rn(2),dr("src",t.photoURL,xm)}}var lE=class n{authService=V(Kr);layoutService=V(Id);eventService=V(vd);router=V(pn);toggleSidebar(){this.layoutService.toggleSidebar()}createNewProject(){this.eventService.triggerCreateProject()}async logout(){await this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wr({type:n,selectors:[["app-header"]],decls:11,vars:3,consts:[[1,"app-header"],[1,"left-section"],[1,"menu-btn",3,"click"],[1,"logo"],[1,"logo-icon"],[1,"logo-text"],["class","actions",4,"ngIf"],[1,"actions"],[1,"user-profile"],["alt","User",1,"avatar",3,"src"],[1,"logout-btn",3,"click"]],template:function(t,r){t&1&&(Pe(0,"header",0)(1,"div",1)(2,"button",2),St("click",function(){return r.toggleSidebar()}),it(3,"\u2630"),Be(),Pe(4,"div",3)(5,"span",4),it(6,"\u{1F3AC}"),Be(),Pe(7,"span",5),it(8,"Imagix"),Be()()(),Rs(9,JZ,5,1,"div",6),Ph(10,"async"),Be()),t&2&&(Rn(9),dr("ngIf",bT(10,1,r.authService.user$)))},dependencies:[$o,lc,BT],styles:[".app-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 20px;height:60px;background-color:#1e1e1e;border-bottom:1px solid #333;color:#fff}.left-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.menu-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;display:none}@media(max-width:768px){.menu-btn[_ngcontent-%COMP%]{display:block}}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:1.2rem;font-weight:700}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.create-btn[_ngcontent-%COMP%]{background-color:#6200ea;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%}.logout-btn[_ngcontent-%COMP%]{background:none;border:1px solid #555;color:#aaa;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:.8rem}"]})};function ZZ(n,e){if(n&1){let t=Ps();Pe(0,"div",5),St("click",function(){Fn(t);let i=Un();return Vn(i.closeSidebar())}),Be()}}var dE=class n{layoutService=V(Id);closeSidebar(){window.innerWidth<=768&&this.layoutService.closeSidebar()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wr({type:n,selectors:[["app-sidebar"]],decls:12,vars:3,consts:[[1,"sidebar"],["routerLink","/dashboard","routerLinkActive","active",3,"click"],["routerLink","/assets","routerLinkActive","active",3,"click"],["routerLink","/settings","routerLinkActive","active",3,"click"],["class","overlay",3,"click",4,"ngIf"],[1,"overlay",3,"click"]],template:function(t,r){t&1&&(Pe(0,"nav",0)(1,"ul")(2,"li")(3,"a",1),St("click",function(){return r.closeSidebar()}),it(4,"Projects"),Be()(),Pe(5,"li")(6,"a",2),St("click",function(){return r.closeSidebar()}),it(7,"Assets"),Be()(),Pe(8,"li")(9,"a",3),St("click",function(){return r.closeSidebar()}),it(10,"Settings"),Be()()()(),Rs(11,ZZ,1,0,"div",4)),t&2&&(Qu("open",r.layoutService.sidebarOpen()),Rn(11),dr("ngIf",r.layoutService.sidebarOpen()))},dependencies:[$o,lc,Ab,dl,Db],styles:[".sidebar[_ngcontent-%COMP%]{width:250px;background-color:#1e1e1e;border-right:1px solid #333;height:100%;padding-top:20px;transition:transform .3s ease}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{margin-bottom:5px}a[_ngcontent-%COMP%]{display:block;padding:10px 20px;color:#aaa;text-decoration:none;transition:background-color .2s}a[_ngcontent-%COMP%]:hover, a.active[_ngcontent-%COMP%]{background-color:#333;color:#fff}.overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:99}@media(max-width:768px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:60px;left:0;bottom:0;z-index:100;transform:translate(-100%)}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.overlay[_ngcontent-%COMP%]{display:block;top:60px}}"]})};var hE=class n{title=jt("imagix");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wr({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"layout-container"],[1,"content-wrapper"],[1,"main-content"]],template:function(t,r){t&1&&(Pe(0,"div",0),$i(1,"app-header"),Pe(2,"div",1),$i(3,"app-sidebar"),Pe(4,"main",2),$i(5,"router-outlet"),Be()()())},dependencies:[rf,lE,dE],styles:[".layout-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden;position:relative}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background-color:#121212;color:#fff;padding:20px}"]})};ZT(hE,Vj).catch(n=>console.error(n));
