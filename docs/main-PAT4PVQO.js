import{a as z,b as Ce,c as oI}from"./chunk-IMPBB4AK.js";var O$=Object.defineProperty,L$=Object.defineProperties,F$=Object.getOwnPropertyDescriptors,qP=Object.getOwnPropertySymbols,V$=Object.prototype.hasOwnProperty,U$=Object.prototype.propertyIsEnumerable,uI=(n,e,t)=>e in n?O$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zP=(n,e)=>{for(var t in e||(e={}))V$.call(e,t)&&uI(n,t,e[t]);if(qP)for(var t of qP(e))U$.call(e,t)&&uI(n,t,e[t]);return n},j$=(n,e)=>L$(n,F$(e)),ke=(n,e,t)=>(uI(n,typeof e!="symbol"?e+"":e,t),t),qi=globalThis;function Br(n){return(qi.__Zone_symbol_prefix||"__zone_symbol__")+n}function B$(){let n=qi.performance;function e(Ke){n&&n.mark&&n.mark(Ke)}function t(Ke,F){n&&n.measure&&n.measure(Ke,F)}e("Zone");let r=class lI{constructor(F,V){ke(this,"_parent"),ke(this,"_name"),ke(this,"_properties"),ke(this,"_zoneDelegate"),this._parent=F,this._name=V?V.name||"unnamed":"<root>",this._properties=V&&V.properties||{},this._zoneDelegate=new o(this,this._parent&&this._parent._zoneDelegate,V)}static assertZonePatched(){if(qi.Promise!==w.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let F=lI.current;for(;F.parent;)F=F.parent;return F}static get current(){return _.zone}static get currentTask(){return $e}static __load_patch(F,V,U=!1){if(w.hasOwnProperty(F)){let pe=qi[Br("forceDuplicateZoneCheck")]===!0;if(!U&&pe)throw Error("Already loaded patch: "+F)}else if(!qi["__Zone_disable_"+F]){let pe="Zone:"+F;e(pe),w[F]=V(qi,lI,D),t(pe,pe)}}get parent(){return this._parent}get name(){return this._name}get(F){let V=this.getZoneWith(F);if(V)return V._properties[F]}getZoneWith(F){let V=this;for(;V;){if(V._properties.hasOwnProperty(F))return V;V=V._parent}return null}fork(F){if(!F)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,F)}wrap(F,V){if(typeof F!="function")throw new Error("Expecting function got: "+F);let U=this._zoneDelegate.intercept(this,F,V),pe=this;return function(){return pe.runGuarded(U,this,arguments,V)}}run(F,V,U,pe){_={parent:_,zone:this};try{return this._zoneDelegate.invoke(this,F,V,U,pe)}finally{_=_.parent}}runGuarded(F,V=null,U,pe){_={parent:_,zone:this};try{try{return this._zoneDelegate.invoke(this,F,V,U,pe)}catch(je){if(this._zoneDelegate.handleError(this,je))throw je}}finally{_=_.parent}}runTask(F,V,U){if(F.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(F.zone||H).name+"; Execution: "+this.name+")");let pe=F,{type:je,data:{isPeriodic:ge=!1,isRefreshable:xn=!1}={}}=F;if(F.state===$&&(je===T||je===I))return;let yn=F.state!=fe;yn&&pe._transitionTo(fe,oe);let ir=$e;$e=pe,_={parent:_,zone:this};try{je==I&&F.data&&!ge&&!xn&&(F.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,pe,V,U)}catch(Wt){if(this._zoneDelegate.handleError(this,Wt))throw Wt}}finally{let Wt=F.state;if(Wt!==$&&Wt!==b)if(je==T||ge||xn&&Wt===B)yn&&pe._transitionTo(oe,fe,B);else{let X=pe._zoneDelegates;this._updateTaskCount(pe,-1),yn&&pe._transitionTo($,fe,$),xn&&(pe._zoneDelegates=X)}_=_.parent,$e=ir}}scheduleTask(F){if(F.zone&&F.zone!==this){let U=this;for(;U;){if(U===F.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${F.zone.name}`);U=U.parent}}F._transitionTo(B,$);let V=[];F._zoneDelegates=V,F._zone=this;try{F=this._zoneDelegate.scheduleTask(this,F)}catch(U){throw F._transitionTo(b,B,$),this._zoneDelegate.handleError(this,U),U}return F._zoneDelegates===V&&this._updateTaskCount(F,1),F.state==B&&F._transitionTo(oe,B),F}scheduleMicroTask(F,V,U,pe){return this.scheduleTask(new a(m,F,V,U,pe,void 0))}scheduleMacroTask(F,V,U,pe,je){return this.scheduleTask(new a(I,F,V,U,pe,je))}scheduleEventTask(F,V,U,pe,je){return this.scheduleTask(new a(T,F,V,U,pe,je))}cancelTask(F){if(F.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(F.zone||H).name+"; Execution: "+this.name+")");if(!(F.state!==oe&&F.state!==fe)){F._transitionTo(ne,oe,fe);try{this._zoneDelegate.cancelTask(this,F)}catch(V){throw F._transitionTo(b,ne),this._zoneDelegate.handleError(this,V),V}return this._updateTaskCount(F,-1),F._transitionTo($,ne),F.runCount=-1,F}}_updateTaskCount(F,V){let U=F._zoneDelegates;V==-1&&(F._zoneDelegates=null);for(let pe=0;pe<U.length;pe++)U[pe]._updateTaskCount(F.type,V)}};ke(r,"__symbol__",Br);let i=r,s={name:"",onHasTask:(Ke,F,V,U)=>Ke.hasTask(V,U),onScheduleTask:(Ke,F,V,U)=>Ke.scheduleTask(V,U),onInvokeTask:(Ke,F,V,U,pe,je)=>Ke.invokeTask(V,U,pe,je),onCancelTask:(Ke,F,V,U)=>Ke.cancelTask(V,U)};class o{constructor(F,V,U){ke(this,"_zone"),ke(this,"_taskCounts",{microTask:0,macroTask:0,eventTask:0}),ke(this,"_parentDelegate"),ke(this,"_forkDlgt"),ke(this,"_forkZS"),ke(this,"_forkCurrZone"),ke(this,"_interceptDlgt"),ke(this,"_interceptZS"),ke(this,"_interceptCurrZone"),ke(this,"_invokeDlgt"),ke(this,"_invokeZS"),ke(this,"_invokeCurrZone"),ke(this,"_handleErrorDlgt"),ke(this,"_handleErrorZS"),ke(this,"_handleErrorCurrZone"),ke(this,"_scheduleTaskDlgt"),ke(this,"_scheduleTaskZS"),ke(this,"_scheduleTaskCurrZone"),ke(this,"_invokeTaskDlgt"),ke(this,"_invokeTaskZS"),ke(this,"_invokeTaskCurrZone"),ke(this,"_cancelTaskDlgt"),ke(this,"_cancelTaskZS"),ke(this,"_cancelTaskCurrZone"),ke(this,"_hasTaskDlgt"),ke(this,"_hasTaskDlgtOwner"),ke(this,"_hasTaskZS"),ke(this,"_hasTaskCurrZone"),this._zone=F,this._parentDelegate=V,this._forkZS=U&&(U&&U.onFork?U:V._forkZS),this._forkDlgt=U&&(U.onFork?V:V._forkDlgt),this._forkCurrZone=U&&(U.onFork?this._zone:V._forkCurrZone),this._interceptZS=U&&(U.onIntercept?U:V._interceptZS),this._interceptDlgt=U&&(U.onIntercept?V:V._interceptDlgt),this._interceptCurrZone=U&&(U.onIntercept?this._zone:V._interceptCurrZone),this._invokeZS=U&&(U.onInvoke?U:V._invokeZS),this._invokeDlgt=U&&(U.onInvoke?V:V._invokeDlgt),this._invokeCurrZone=U&&(U.onInvoke?this._zone:V._invokeCurrZone),this._handleErrorZS=U&&(U.onHandleError?U:V._handleErrorZS),this._handleErrorDlgt=U&&(U.onHandleError?V:V._handleErrorDlgt),this._handleErrorCurrZone=U&&(U.onHandleError?this._zone:V._handleErrorCurrZone),this._scheduleTaskZS=U&&(U.onScheduleTask?U:V._scheduleTaskZS),this._scheduleTaskDlgt=U&&(U.onScheduleTask?V:V._scheduleTaskDlgt),this._scheduleTaskCurrZone=U&&(U.onScheduleTask?this._zone:V._scheduleTaskCurrZone),this._invokeTaskZS=U&&(U.onInvokeTask?U:V._invokeTaskZS),this._invokeTaskDlgt=U&&(U.onInvokeTask?V:V._invokeTaskDlgt),this._invokeTaskCurrZone=U&&(U.onInvokeTask?this._zone:V._invokeTaskCurrZone),this._cancelTaskZS=U&&(U.onCancelTask?U:V._cancelTaskZS),this._cancelTaskDlgt=U&&(U.onCancelTask?V:V._cancelTaskDlgt),this._cancelTaskCurrZone=U&&(U.onCancelTask?this._zone:V._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let pe=U&&U.onHasTask,je=V&&V._hasTaskZS;(pe||je)&&(this._hasTaskZS=pe?U:s,this._hasTaskDlgt=V,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,U.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=V,this._scheduleTaskCurrZone=this._zone),U.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=V,this._invokeTaskCurrZone=this._zone),U.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=V,this._cancelTaskCurrZone=this._zone))}get zone(){return this._zone}fork(F,V){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,F,V):new i(F,V)}intercept(F,V,U){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,F,V,U):V}invoke(F,V,U,pe,je){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,F,V,U,pe,je):V.apply(U,pe)}handleError(F,V){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,F,V):!0}scheduleTask(F,V){let U=V;if(this._scheduleTaskZS)this._hasTaskZS&&U._zoneDelegates.push(this._hasTaskDlgtOwner),U=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,F,V),U||(U=V);else if(V.scheduleFn)V.scheduleFn(V);else if(V.type==m)N(V);else throw new Error("Task is missing scheduleFn.");return U}invokeTask(F,V,U,pe){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,F,V,U,pe):V.callback.apply(U,pe)}cancelTask(F,V){let U;if(this._cancelTaskZS)U=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,F,V);else{if(!V.cancelFn)throw Error("Task is not cancelable");U=V.cancelFn(V)}return U}hasTask(F,V){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,F,V)}catch(U){this.handleError(F,U)}}_updateTaskCount(F,V){let U=this._taskCounts,pe=U[F],je=U[F]=pe+V;if(je<0)throw new Error("More tasks executed then were scheduled.");if(pe==0||je==0){let ge={microTask:U.microTask>0,macroTask:U.macroTask>0,eventTask:U.eventTask>0,change:F};this.hasTask(this._zone,ge)}}}class a{constructor(F,V,U,pe,je,ge){if(ke(this,"type"),ke(this,"source"),ke(this,"invoke"),ke(this,"callback"),ke(this,"data"),ke(this,"scheduleFn"),ke(this,"cancelFn"),ke(this,"_zone",null),ke(this,"runCount",0),ke(this,"_zoneDelegates",null),ke(this,"_state","notScheduled"),this.type=F,this.source=V,this.data=pe,this.scheduleFn=je,this.cancelFn=ge,!U)throw new Error("callback is not defined");this.callback=U;let xn=this;F===T&&pe&&pe.useG?this.invoke=a.invokeTask:this.invoke=function(){return a.invokeTask.call(qi,xn,this,arguments)}}static invokeTask(F,V,U){F||(F=this),bt++;try{return F.runCount++,F.zone.runTask(F,V,U)}finally{bt==1&&P(),bt--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo($,B)}_transitionTo(F,V,U){if(this._state===V||this._state===U)this._state=F,F==$&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${F}', expecting state '${V}'${U?" or '"+U+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let c=Br("setTimeout"),d=Br("Promise"),h=Br("then"),p=[],E=!1,C;function R(Ke){if(C||qi[d]&&(C=qi[d].resolve(0)),C){let F=C[h];F||(F=C.then),F.call(C,Ke)}else qi[c](Ke,0)}function N(Ke){bt===0&&p.length===0&&R(P),Ke&&p.push(Ke)}function P(){if(!E){for(E=!0;p.length;){let Ke=p;p=[];for(let F=0;F<Ke.length;F++){let V=Ke[F];try{V.zone.runTask(V,null,null)}catch(U){D.onUnhandledError(U)}}}D.microtaskDrainDone(),E=!1}}let H={name:"NO ZONE"},$="notScheduled",B="scheduling",oe="scheduled",fe="running",ne="canceling",b="unknown",m="microTask",I="macroTask",T="eventTask",w={},D={symbol:Br,currentZoneFrame:()=>_,onUnhandledError:ht,microtaskDrainDone:ht,scheduleMicroTask:N,showUncaughtError:()=>!i[Br("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:ht,patchMethod:()=>ht,bindArguments:()=>[],patchThen:()=>ht,patchMacroTask:()=>ht,patchEventPrototype:()=>ht,getGlobalObjects:()=>{},ObjectDefineProperty:()=>ht,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>ht,wrapWithCurrentZone:()=>ht,filterProperties:()=>[],attachOriginToPatched:()=>ht,_redefineProperty:()=>ht,patchCallbacks:()=>ht,nativeScheduleMicroTask:R},_={parent:null,zone:new i(null,null)},$e=null,bt=0;function ht(){}return t("Zone","Zone"),i}function $$(){var n;let e=globalThis,t=e[Br("forceDuplicateZoneCheck")]===!0;if(e.Zone&&(t||typeof e.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return(n=e.Zone)!=null||(e.Zone=B$()),e.Zone}var hh=Object.getOwnPropertyDescriptor,hI=Object.defineProperty,fI=Object.getPrototypeOf,H$=Object.create,q$=Array.prototype.slice,pI="addEventListener",gI="removeEventListener",aI=Br(pI),cI=Br(gI),As="true",Rs="false",fh=Br("");function mI(n,e){return Zone.current.wrap(n,e)}function yI(n,e,t,r,i){return Zone.current.scheduleMacroTask(n,e,t,r,i)}var _t=Br,Dg=typeof window<"u",Sg=Dg?window:void 0,vn=Dg&&Sg||globalThis,z$="removeAttribute";function _I(n,e){for(let t=n.length-1;t>=0;t--)typeof n[t]=="function"&&(n[t]=mI(n[t],e+"_"+t));return n}function G$(n,e){let t=n.constructor.name;for(let r=0;r<e.length;r++){let i=e[r],s=n[i];if(s){let o=hh(n,i);if(!JP(o))continue;n[i]=(a=>{let c=function(){return a.apply(this,_I(arguments,t+"."+i))};return Ns(c,a),c})(s)}}}function JP(n){return n?n.writable===!1?!1:!(typeof n.get=="function"&&typeof n.set>"u"):!0}var ZP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ag=!("nw"in vn)&&typeof vn.process<"u"&&vn.process.toString()==="[object process]",vI=!Ag&&!ZP&&!!(Dg&&Sg.HTMLElement),XP=typeof vn.process<"u"&&vn.process.toString()==="[object process]"&&!ZP&&!!(Dg&&Sg.HTMLElement),Cg={},W$=_t("enable_beforeunload"),GP=function(n){if(n=n||vn.event,!n)return;let e=Cg[n.type];e||(e=Cg[n.type]=_t("ON_PROPERTY"+n.type));let t=this||n.target||vn,r=t[e],i;if(vI&&t===Sg&&n.type==="error"){let s=n;i=r&&r.call(this,s.message,s.filename,s.lineno,s.colno,s.error),i===!0&&n.preventDefault()}else i=r&&r.apply(this,arguments),n.type==="beforeunload"&&vn[W$]&&typeof i=="string"?n.returnValue=i:i!=null&&!i&&n.preventDefault();return i};function WP(n,e,t){let r=hh(n,e);if(!r&&t&&hh(t,e)&&(r={enumerable:!0,configurable:!0}),!r||!r.configurable)return;let i=_t("on"+e+"patched");if(n.hasOwnProperty(i)&&n[i])return;delete r.writable,delete r.value;let s=r.get,o=r.set,a=e.slice(2),c=Cg[a];c||(c=Cg[a]=_t("ON_PROPERTY"+a)),r.set=function(d){let h=this;if(!h&&n===vn&&(h=vn),!h)return;typeof h[c]=="function"&&h.removeEventListener(a,GP),o?.call(h,null),h[c]=d,typeof d=="function"&&h.addEventListener(a,GP,!1)},r.get=function(){let d=this;if(!d&&n===vn&&(d=vn),!d)return null;let h=d[c];if(h)return h;if(s){let p=s.call(this);if(p)return r.set.call(this,p),typeof d[z$]=="function"&&d.removeAttribute(e),p}return null},hI(n,e,r),n[i]=!0}function eN(n,e,t){if(e)for(let r=0;r<e.length;r++)WP(n,"on"+e[r],t);else{let r=[];for(let i in n)i.slice(0,2)=="on"&&r.push(i);for(let i=0;i<r.length;i++)WP(n,r[i],t)}}var hi=_t("originalInstance");function dh(n){let e=vn[n];if(!e)return;vn[_t(n)]=e,vn[n]=function(){let i=_I(arguments,n);switch(i.length){case 0:this[hi]=new e;break;case 1:this[hi]=new e(i[0]);break;case 2:this[hi]=new e(i[0],i[1]);break;case 3:this[hi]=new e(i[0],i[1],i[2]);break;case 4:this[hi]=new e(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},Ns(vn[n],e);let t=new e(function(){}),r;for(r in t)n==="XMLHttpRequest"&&r==="responseBlob"||(function(i){typeof t[i]=="function"?vn[n].prototype[i]=function(){return this[hi][i].apply(this[hi],arguments)}:hI(vn[n].prototype,i,{set:function(s){typeof s=="function"?(this[hi][i]=mI(s,n+"."+i),Ns(this[hi][i],s)):this[hi][i]=s},get:function(){return this[hi][i]}})})(r);for(r in e)r!=="prototype"&&e.hasOwnProperty(r)&&(vn[n][r]=e[r])}function K$(n,e){if(typeof Object.getOwnPropertySymbols!="function")return;Object.getOwnPropertySymbols(n).forEach(r=>{let i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,{get:function(){return n[r]},set:function(s){i&&(!i.writable||typeof i.set!="function")||(n[r]=s)},enumerable:i?i.enumerable:!0,configurable:i?i.configurable:!0})})}var Q$=!1;function Ps(n,e,t){let r=n;for(;r&&!r.hasOwnProperty(e);)r=fI(r);!r&&n[e]&&(r=n);let i=_t(e),s=null;if(r&&(!(s=r[i])||!r.hasOwnProperty(i))){s=r[i]=r[e];let o=r&&hh(r,e);if(JP(o)){let a=t(s,i,e);r[e]=function(){return a(this,arguments)},Ns(r[e],s),Q$&&K$(s,r[e])}}return s}function Y$(n,e,t){let r=null;function i(s){let o=s.data;return o.args[o.cbIdx]=function(){s.invoke.apply(this,arguments)},r.apply(o.target,o.args),s}r=Ps(n,e,s=>function(o,a){let c=t(o,a);return c.cbIdx>=0&&typeof a[c.cbIdx]=="function"?yI(c.name,a[c.cbIdx],c,i):s.apply(o,a)})}function Ns(n,e){n[_t("OriginalDelegate")]=e}function KP(n){return typeof n=="function"}function QP(n){return typeof n=="number"}var J$={useG:!0},$r={},tN={},nN=new RegExp("^"+fh+"(\\w+)(true|false)$"),rN=_t("propagationStopped");function iN(n,e){let t=(e?e(n):n)+Rs,r=(e?e(n):n)+As,i=fh+t,s=fh+r;$r[n]={},$r[n][Rs]=i,$r[n][As]=s}function Z$(n,e,t,r){let i=r&&r.add||pI,s=r&&r.rm||gI,o=r&&r.listeners||"eventListeners",a=r&&r.rmAll||"removeAllListeners",c=_t(i),d="."+i+":",h="prependListener",p="."+h+":",E=function($,B,oe){if($.isRemoved)return;let fe=$.callback;typeof fe=="object"&&fe.handleEvent&&($.callback=m=>fe.handleEvent(m),$.originalDelegate=fe);let ne;try{$.invoke($,B,[oe])}catch(m){ne=m}let b=$.options;if(b&&typeof b=="object"&&b.once){let m=$.originalDelegate?$.originalDelegate:$.callback;B[s].call(B,oe.type,m,b)}return ne};function C($,B,oe){if(B=B||n.event,!B)return;let fe=$||B.target||n,ne=fe[$r[B.type][oe?As:Rs]];if(ne){let b=[];if(ne.length===1){let m=E(ne[0],fe,B);m&&b.push(m)}else{let m=ne.slice();for(let I=0;I<m.length&&!(B&&B[rN]===!0);I++){let T=E(m[I],fe,B);T&&b.push(T)}}if(b.length===1)throw b[0];for(let m=0;m<b.length;m++){let I=b[m];e.nativeScheduleMicroTask(()=>{throw I})}}}let R=function($){return C(this,$,!1)},N=function($){return C(this,$,!0)};function P($,B){if(!$)return!1;let oe=!0;B&&B.useG!==void 0&&(oe=B.useG);let fe=B&&B.vh,ne=!0;B&&B.chkDup!==void 0&&(ne=B.chkDup);let b=!1;B&&B.rt!==void 0&&(b=B.rt);let m=$;for(;m&&!m.hasOwnProperty(i);)m=fI(m);if(!m&&$[i]&&(m=$),!m||m[c])return!1;let I=B&&B.eventNameToString,T={},w=m[c]=m[i],D=m[_t(s)]=m[s],_=m[_t(o)]=m[o],$e=m[_t(a)]=m[a],bt;B&&B.prepend&&(bt=m[_t(B.prepend)]=m[B.prepend]);function ht(j,Z){return Z?typeof j=="boolean"?{capture:j,passive:!0}:j?typeof j=="object"&&j.passive!==!1?j$(zP({},j),{passive:!0}):j:{passive:!0}:j}let Ke=function(j){if(!T.isExisting)return w.call(T.target,T.eventName,T.capture?N:R,T.options)},F=function(j){if(!j.isRemoved){let Z=$r[j.eventName],he;Z&&(he=Z[j.capture?As:Rs]);let me=he&&j.target[he];if(me){for(let de=0;de<me.length;de++)if(me[de]===j){me.splice(de,1),j.isRemoved=!0,j.removeAbortListener&&(j.removeAbortListener(),j.removeAbortListener=null),me.length===0&&(j.allRemoved=!0,j.target[he]=null);break}}}if(j.allRemoved)return D.call(j.target,j.eventName,j.capture?N:R,j.options)},V=function(j){return w.call(T.target,T.eventName,j.invoke,T.options)},U=function(j){return bt.call(T.target,T.eventName,j.invoke,T.options)},pe=function(j){return D.call(j.target,j.eventName,j.invoke,j.options)},je=oe?Ke:V,ge=oe?F:pe,xn=function(j,Z){let he=typeof Z;return he==="function"&&j.callback===Z||he==="object"&&j.originalDelegate===Z},yn=B?.diff||xn,ir=Zone[_t("UNPATCHED_EVENTS")],Wt=n[_t("PASSIVE_EVENTS")];function X(j){if(typeof j=="object"&&j!==null){let Z=zP({},j);return j.signal&&(Z.signal=j.signal),Z}return j}let Q=function(j,Z,he,me,de=!1,Te=!1){return function(){let Ne=this||n,Re=arguments[0];B&&B.transferEventName&&(Re=B.transferEventName(Re));let ct=arguments[1];if(!ct)return j.apply(this,arguments);if(Ag&&Re==="uncaughtException")return j.apply(this,arguments);let it=!1;if(typeof ct!="function"){if(!ct.handleEvent)return j.apply(this,arguments);it=!0}if(fe&&!fe(j,ct,Ne,arguments))return;let Ct=!!Wt&&Wt.indexOf(Re)!==-1,ft=X(ht(arguments[2],Ct)),sr=ft?.signal;if(sr?.aborted)return;if(ir){for(let On=0;On<ir.length;On++)if(Re===ir[On])return Ct?j.call(Ne,Re,ct,ft):j.apply(this,arguments)}let La=ft?typeof ft=="boolean"?!0:ft.capture:!1,Is=ft&&typeof ft=="object"?ft.once:!1,Fa=Zone.current,Ir=$r[Re];Ir||(iN(Re,I),Ir=$r[Re]);let Ht=Ir[La?As:Rs],Ot=Ne[Ht],si=!1;if(Ot){if(si=!0,ne){for(let On=0;On<Ot.length;On++)if(yn(Ot[On],ct))return}}else Ot=Ne[Ht]=[];let ws,Va=Ne.constructor.name,Ua=tN[Va];Ua&&(ws=Ua[Re]),ws||(ws=Va+Z+(I?I(Re):Re)),T.options=ft,Is&&(T.options.once=!1),T.target=Ne,T.capture=La,T.eventName=Re,T.isExisting=si;let pr=oe?J$:void 0;pr&&(pr.taskData=T),sr&&(T.options.signal=void 0);let nn=Fa.scheduleEventTask(ws,ct,pr,he,me);if(sr){T.options.signal=sr;let On=()=>nn.zone.cancelTask(nn);j.call(sr,"abort",On,{once:!0}),nn.removeAbortListener=()=>sr.removeEventListener("abort",On)}if(T.target=null,pr&&(pr.taskData=null),Is&&(T.options.once=!0),typeof nn.options!="boolean"&&(nn.options=ft),nn.target=Ne,nn.capture=La,nn.eventName=Re,it&&(nn.originalDelegate=ct),Te?Ot.unshift(nn):Ot.push(nn),de)return Ne}};return m[i]=Q(w,d,je,ge,b),bt&&(m[h]=Q(bt,p,U,ge,b,!0)),m[s]=function(){let j=this||n,Z=arguments[0];B&&B.transferEventName&&(Z=B.transferEventName(Z));let he=arguments[2],me=he?typeof he=="boolean"?!0:he.capture:!1,de=arguments[1];if(!de)return D.apply(this,arguments);if(fe&&!fe(D,de,j,arguments))return;let Te=$r[Z],Ne;Te&&(Ne=Te[me?As:Rs]);let Re=Ne&&j[Ne];if(Re)for(let ct=0;ct<Re.length;ct++){let it=Re[ct];if(yn(it,de)){if(Re.splice(ct,1),it.isRemoved=!0,Re.length===0&&(it.allRemoved=!0,j[Ne]=null,!me&&typeof Z=="string")){let Ct=fh+"ON_PROPERTY"+Z;j[Ct]=null}return it.zone.cancelTask(it),b?j:void 0}}return D.apply(this,arguments)},m[o]=function(){let j=this||n,Z=arguments[0];B&&B.transferEventName&&(Z=B.transferEventName(Z));let he=[],me=sN(j,I?I(Z):Z);for(let de=0;de<me.length;de++){let Te=me[de],Ne=Te.originalDelegate?Te.originalDelegate:Te.callback;he.push(Ne)}return he},m[a]=function(){let j=this||n,Z=arguments[0];if(Z){B&&B.transferEventName&&(Z=B.transferEventName(Z));let he=$r[Z];if(he){let me=he[Rs],de=he[As],Te=j[me],Ne=j[de];if(Te){let Re=Te.slice();for(let ct=0;ct<Re.length;ct++){let it=Re[ct],Ct=it.originalDelegate?it.originalDelegate:it.callback;this[s].call(this,Z,Ct,it.options)}}if(Ne){let Re=Ne.slice();for(let ct=0;ct<Re.length;ct++){let it=Re[ct],Ct=it.originalDelegate?it.originalDelegate:it.callback;this[s].call(this,Z,Ct,it.options)}}}}else{let he=Object.keys(j);for(let me=0;me<he.length;me++){let de=he[me],Te=nN.exec(de),Ne=Te&&Te[1];Ne&&Ne!=="removeListener"&&this[a].call(this,Ne)}this[a].call(this,"removeListener")}if(b)return this},Ns(m[i],w),Ns(m[s],D),$e&&Ns(m[a],$e),_&&Ns(m[o],_),!0}let H=[];for(let $=0;$<t.length;$++)H[$]=P(t[$],r);return H}function sN(n,e){if(!e){let s=[];for(let o in n){let a=nN.exec(o),c=a&&a[1];if(c&&(!e||c===e)){let d=n[o];if(d)for(let h=0;h<d.length;h++)s.push(d[h])}}return s}let t=$r[e];t||(iN(e),t=$r[e]);let r=n[t[Rs]],i=n[t[As]];return r?i?r.concat(i):r.slice():i?i.slice():[]}function X$(n,e){let t=n.Event;t&&t.prototype&&e.patchMethod(t.prototype,"stopImmediatePropagation",r=>function(i,s){i[rN]=!0,r&&r.apply(i,s)})}function e4(n,e){e.patchMethod(n,"queueMicrotask",t=>function(r,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}var bg=_t("zoneTask");function Lu(n,e,t,r){let i=null,s=null;e+=r,t+=r;let o={};function a(d){let h=d.data;h.args[0]=function(){return d.invoke.apply(this,arguments)};let p=i.apply(n,h.args);return QP(p)?h.handleId=p:(h.handle=p,h.isRefreshable=KP(p.refresh)),d}function c(d){let{handle:h,handleId:p}=d.data;return s.call(n,h??p)}i=Ps(n,e,d=>function(h,p){var E;if(KP(p[0])){let C={isRefreshable:!1,isPeriodic:r==="Interval",delay:r==="Timeout"||r==="Interval"?p[1]||0:void 0,args:p},R=p[0];p[0]=function(){try{return R.apply(this,arguments)}finally{let{handle:fe,handleId:ne,isPeriodic:b,isRefreshable:m}=C;!b&&!m&&(ne?delete o[ne]:fe&&(fe[bg]=null))}};let N=yI(e,p[0],C,a,c);if(!N)return N;let{handleId:P,handle:H,isRefreshable:$,isPeriodic:B}=N.data;if(P)o[P]=N;else if(H&&(H[bg]=N,$&&!B)){let oe=H.refresh;H.refresh=function(){let{zone:fe,state:ne}=N;return ne==="notScheduled"?(N._state="scheduled",fe._updateTaskCount(N,1)):ne==="running"&&(N._state="scheduling"),oe.call(this)}}return(E=H??P)!=null?E:N}else return d.apply(n,p)}),s=Ps(n,t,d=>function(h,p){let E=p[0],C;QP(E)?(C=o[E],delete o[E]):(C=E?.[bg],C?E[bg]=null:C=E),C?.type?C.cancelFn&&C.zone.cancelTask(C):d.apply(n,p)})}function t4(n,e){let{isBrowser:t,isMix:r}=e.getGlobalObjects();if(!t&&!r||!n.customElements||!("customElements"in n))return;let i=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,n.customElements,"customElements","define",i)}function n4(n,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:t,zoneSymbolEventNames:r,TRUE_STR:i,FALSE_STR:s,ZONE_SYMBOL_PREFIX:o}=e.getGlobalObjects();for(let c=0;c<t.length;c++){let d=t[c],h=d+s,p=d+i,E=o+h,C=o+p;r[d]={},r[d][s]=E,r[d][i]=C}let a=n.EventTarget;if(!(!a||!a.prototype))return e.patchEventTarget(n,e,[a&&a.prototype]),!0}function r4(n,e){e.patchEventPrototype(n,e)}function oN(n,e,t){if(!t||t.length===0)return e;let r=t.filter(s=>s.target===n);if(r.length===0)return e;let i=r[0].ignoreProperties;return e.filter(s=>i.indexOf(s)===-1)}function YP(n,e,t,r){if(!n)return;let i=oN(n,e,t);eN(n,i,r)}function dI(n){return Object.getOwnPropertyNames(n).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function i4(n,e){if(Ag&&!XP||Zone[n.symbol("patchEvents")])return;let t=e.__Zone_ignore_on_properties,r=[];if(vI){let i=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]),YP(i,dI(i),t,fI(i))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<r.length;i++){let s=e[r[i]];s?.prototype&&YP(s.prototype,dI(s.prototype),t)}}function s4(n){n.__load_patch("timers",e=>{let r="clear";Lu(e,"set",r,"Timeout"),Lu(e,"set",r,"Interval"),Lu(e,"set",r,"Immediate")}),n.__load_patch("requestAnimationFrame",e=>{Lu(e,"request","cancel","AnimationFrame"),Lu(e,"mozRequest","mozCancel","AnimationFrame"),Lu(e,"webkitRequest","webkitCancel","AnimationFrame")}),n.__load_patch("blocking",(e,t)=>{let r=["alert","prompt","confirm"];for(let i=0;i<r.length;i++){let s=r[i];Ps(e,s,(o,a,c)=>function(d,h){return t.current.run(o,e,h,c)})}}),n.__load_patch("EventTarget",(e,t,r)=>{r4(e,r),n4(e,r);let i=e.XMLHttpRequestEventTarget;i&&i.prototype&&r.patchEventTarget(e,r,[i.prototype])}),n.__load_patch("MutationObserver",(e,t,r)=>{dh("MutationObserver"),dh("WebKitMutationObserver")}),n.__load_patch("IntersectionObserver",(e,t,r)=>{dh("IntersectionObserver")}),n.__load_patch("FileReader",(e,t,r)=>{dh("FileReader")}),n.__load_patch("on_property",(e,t,r)=>{i4(r,e)}),n.__load_patch("customElements",(e,t,r)=>{t4(e,r)}),n.__load_patch("XHR",(e,t)=>{d(e);let r=_t("xhrTask"),i=_t("xhrSync"),s=_t("xhrListener"),o=_t("xhrScheduled"),a=_t("xhrURL"),c=_t("xhrErrorBeforeScheduled");function d(h){let p=h.XMLHttpRequest;if(!p)return;let E=p.prototype;function C(w){return w[r]}let R=E[aI],N=E[cI];if(!R){let w=h.XMLHttpRequestEventTarget;if(w){let D=w.prototype;R=D[aI],N=D[cI]}}let P="readystatechange",H="scheduled";function $(w){let D=w.data,_=D.target;_[o]=!1,_[c]=!1;let $e=_[s];R||(R=_[aI],N=_[cI]),$e&&N.call(_,P,$e);let bt=_[s]=()=>{if(_.readyState===_.DONE)if(!D.aborted&&_[o]&&w.state===H){let Ke=_[t.__symbol__("loadfalse")];if(_.status!==0&&Ke&&Ke.length>0){let F=w.invoke;w.invoke=function(){let V=_[t.__symbol__("loadfalse")];for(let U=0;U<V.length;U++)V[U]===w&&V.splice(U,1);!D.aborted&&w.state===H&&F.call(w)},Ke.push(w)}else w.invoke()}else!D.aborted&&_[o]===!1&&(_[c]=!0)};return R.call(_,P,bt),_[r]||(_[r]=w),I.apply(_,D.args),_[o]=!0,w}function B(){}function oe(w){let D=w.data;return D.aborted=!0,T.apply(D.target,D.args)}let fe=Ps(E,"open",()=>function(w,D){return w[i]=D[2]==!1,w[a]=D[1],fe.apply(w,D)}),ne="XMLHttpRequest.send",b=_t("fetchTaskAborting"),m=_t("fetchTaskScheduling"),I=Ps(E,"send",()=>function(w,D){if(t.current[m]===!0||w[i])return I.apply(w,D);{let _={target:w,url:w[a],isPeriodic:!1,args:D,aborted:!1},$e=yI(ne,B,_,$,oe);w&&w[c]===!0&&!_.aborted&&$e.state===H&&$e.invoke()}}),T=Ps(E,"abort",()=>function(w,D){let _=C(w);if(_&&typeof _.type=="string"){if(_.cancelFn==null||_.data&&_.data.aborted)return;_.zone.cancelTask(_)}else if(t.current[b]===!0)return T.apply(w,D)})}}),n.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&G$(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),n.__load_patch("PromiseRejectionEvent",(e,t)=>{function r(i){return function(s){sN(e,i).forEach(a=>{let c=e.PromiseRejectionEvent;if(c){let d=new c(i,{promise:s.promise,reason:s.rejection});a.invoke(d)}})}}e.PromiseRejectionEvent&&(t[_t("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[_t("rejectionHandledHandler")]=r("rejectionhandled"))}),n.__load_patch("queueMicrotask",(e,t,r)=>{e4(e,r)})}function o4(n){n.__load_patch("ZoneAwarePromise",(e,t,r)=>{let i=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function o(X){if(X&&X.toString===Object.prototype.toString){let Q=X.constructor&&X.constructor.name;return(Q||"")+": "+JSON.stringify(X)}return X?X.toString():Object.prototype.toString.call(X)}let a=r.symbol,c=[],d=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,h=a("Promise"),p=a("then"),E="__creationTrace__";r.onUnhandledError=X=>{if(r.showUncaughtError()){let Q=X&&X.rejection;Q?console.error("Unhandled Promise rejection:",Q instanceof Error?Q.message:Q,"; Zone:",X.zone.name,"; Task:",X.task&&X.task.source,"; Value:",Q,Q instanceof Error?Q.stack:void 0):console.error(X)}},r.microtaskDrainDone=()=>{for(;c.length;){let X=c.shift();try{X.zone.runGuarded(()=>{throw X.throwOriginal?X.rejection:X})}catch(Q){R(Q)}}};let C=a("unhandledPromiseRejectionHandler");function R(X){r.onUnhandledError(X);try{let Q=t[C];typeof Q=="function"&&Q.call(this,X)}catch{}}function N(X){return X&&typeof X.then=="function"}function P(X){return X}function H(X){return ge.reject(X)}let $=a("state"),B=a("value"),oe=a("finally"),fe=a("parentPromiseValue"),ne=a("parentPromiseState"),b="Promise.then",m=null,I=!0,T=!1,w=0;function D(X,Q){return j=>{try{ht(X,Q,j)}catch(Z){ht(X,!1,Z)}}}let _=function(){let X=!1;return function(j){return function(){X||(X=!0,j.apply(null,arguments))}}},$e="Promise resolved with itself",bt=a("currentTaskTrace");function ht(X,Q,j){let Z=_();if(X===j)throw new TypeError($e);if(X[$]===m){let he=null;try{(typeof j=="object"||typeof j=="function")&&(he=j&&j.then)}catch(me){return Z(()=>{ht(X,!1,me)})(),X}if(Q!==T&&j instanceof ge&&j.hasOwnProperty($)&&j.hasOwnProperty(B)&&j[$]!==m)F(j),ht(X,j[$],j[B]);else if(Q!==T&&typeof he=="function")try{he.call(j,Z(D(X,Q)),Z(D(X,!1)))}catch(me){Z(()=>{ht(X,!1,me)})()}else{X[$]=Q;let me=X[B];if(X[B]=j,X[oe]===oe&&Q===I&&(X[$]=X[ne],X[B]=X[fe]),Q===T&&j instanceof Error){let de=t.currentTask&&t.currentTask.data&&t.currentTask.data[E];de&&s(j,bt,{configurable:!0,enumerable:!1,writable:!0,value:de})}for(let de=0;de<me.length;)V(X,me[de++],me[de++],me[de++],me[de++]);if(me.length==0&&Q==T){X[$]=w;let de=j;try{throw new Error("Uncaught (in promise): "+o(j)+(j&&j.stack?`
`+j.stack:""))}catch(Te){de=Te}d&&(de.throwOriginal=!0),de.rejection=j,de.promise=X,de.zone=t.current,de.task=t.currentTask,c.push(de),r.scheduleMicroTask()}}}return X}let Ke=a("rejectionHandledHandler");function F(X){if(X[$]===w){try{let Q=t[Ke];Q&&typeof Q=="function"&&Q.call(this,{rejection:X[B],promise:X})}catch{}X[$]=T;for(let Q=0;Q<c.length;Q++)X===c[Q].promise&&c.splice(Q,1)}}function V(X,Q,j,Z,he){F(X);let me=X[$],de=me?typeof Z=="function"?Z:P:typeof he=="function"?he:H;Q.scheduleMicroTask(b,()=>{try{let Te=X[B],Ne=!!j&&oe===j[oe];Ne&&(j[fe]=Te,j[ne]=me);let Re=Q.run(de,void 0,Ne&&de!==H&&de!==P?[]:[Te]);ht(j,!0,Re)}catch(Te){ht(j,!1,Te)}},j)}let U="function ZoneAwarePromise() { [native code] }",pe=function(){},je=e.AggregateError;class ge{static toString(){return U}static resolve(Q){return Q instanceof ge?Q:ht(new this(null),I,Q)}static reject(Q){return ht(new this(null),T,Q)}static withResolvers(){let Q={};return Q.promise=new ge((j,Z)=>{Q.resolve=j,Q.reject=Z}),Q}static any(Q){if(!Q||typeof Q[Symbol.iterator]!="function")return Promise.reject(new je([],"All promises were rejected"));let j=[],Z=0;try{for(let de of Q)Z++,j.push(ge.resolve(de))}catch{return Promise.reject(new je([],"All promises were rejected"))}if(Z===0)return Promise.reject(new je([],"All promises were rejected"));let he=!1,me=[];return new ge((de,Te)=>{for(let Ne=0;Ne<j.length;Ne++)j[Ne].then(Re=>{he||(he=!0,de(Re))},Re=>{me.push(Re),Z--,Z===0&&(he=!0,Te(new je(me,"All promises were rejected")))})})}static race(Q){let j,Z,he=new this((Te,Ne)=>{j=Te,Z=Ne});function me(Te){j(Te)}function de(Te){Z(Te)}for(let Te of Q)N(Te)||(Te=this.resolve(Te)),Te.then(me,de);return he}static all(Q){return ge.allWithCallback(Q)}static allSettled(Q){return(this&&this.prototype instanceof ge?this:ge).allWithCallback(Q,{thenCallback:Z=>({status:"fulfilled",value:Z}),errorCallback:Z=>({status:"rejected",reason:Z})})}static allWithCallback(Q,j){let Z,he,me=new this((Re,ct)=>{Z=Re,he=ct}),de=2,Te=0,Ne=[];for(let Re of Q){N(Re)||(Re=this.resolve(Re));let ct=Te;try{Re.then(it=>{Ne[ct]=j?j.thenCallback(it):it,de--,de===0&&Z(Ne)},it=>{j?(Ne[ct]=j.errorCallback(it),de--,de===0&&Z(Ne)):he(it)})}catch(it){he(it)}de++,Te++}return de-=2,de===0&&Z(Ne),me}constructor(Q){let j=this;if(!(j instanceof ge))throw new Error("Must be an instanceof Promise.");j[$]=m,j[B]=[];try{let Z=_();Q&&Q(Z(D(j,I)),Z(D(j,T)))}catch(Z){ht(j,!1,Z)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return ge}then(Q,j){var Z;let he=(Z=this.constructor)==null?void 0:Z[Symbol.species];(!he||typeof he!="function")&&(he=this.constructor||ge);let me=new he(pe),de=t.current;return this[$]==m?this[B].push(de,me,Q,j):V(this,de,me,Q,j),me}catch(Q){return this.then(null,Q)}finally(Q){var j;let Z=(j=this.constructor)==null?void 0:j[Symbol.species];(!Z||typeof Z!="function")&&(Z=ge);let he=new Z(pe);he[oe]=oe;let me=t.current;return this[$]==m?this[B].push(me,he,Q,Q):V(this,me,he,Q,Q),he}}ge.resolve=ge.resolve,ge.reject=ge.reject,ge.race=ge.race,ge.all=ge.all;let xn=e[h]=e.Promise;e.Promise=ge;let yn=a("thenPatched");function ir(X){let Q=X.prototype,j=i(Q,"then");if(j&&(j.writable===!1||!j.configurable))return;let Z=Q.then;Q[p]=Z,X.prototype.then=function(he,me){return new ge((Te,Ne)=>{Z.call(this,Te,Ne)}).then(he,me)},X[yn]=!0}r.patchThen=ir;function Wt(X){return function(Q,j){let Z=X.apply(Q,j);if(Z instanceof ge)return Z;let he=Z.constructor;return he[yn]||ir(he),Z}}return xn&&(ir(xn),Ps(e,"fetch",X=>Wt(X))),Promise[t.__symbol__("uncaughtPromiseErrors")]=c,ge})}function a4(n){n.__load_patch("toString",e=>{let t=Function.prototype.toString,r=_t("OriginalDelegate"),i=_t("Promise"),s=_t("Error"),o=function(){if(typeof this=="function"){let h=this[r];if(h)return typeof h=="function"?t.call(h):Object.prototype.toString.call(h);if(this===Promise){let p=e[i];if(p)return t.call(p)}if(this===Error){let p=e[s];if(p)return t.call(p)}}return t.call(this)};o[r]=t,Function.prototype.toString=o;let a=Object.prototype.toString,c="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?c:a.call(this)}})}function c4(n,e,t,r,i){let s=Zone.__symbol__(r);if(e[s])return;let o=e[s]=e[r];e[r]=function(a,c,d){return c&&c.prototype&&i.forEach(function(h){let p=`${t}.${r}::`+h,E=c.prototype;try{if(E.hasOwnProperty(h)){let C=n.ObjectGetOwnPropertyDescriptor(E,h);C&&C.value?(C.value=n.wrapWithCurrentZone(C.value,p),n._redefineProperty(c.prototype,h,C)):E[h]&&(E[h]=n.wrapWithCurrentZone(E[h],p))}else E[h]&&(E[h]=n.wrapWithCurrentZone(E[h],p))}catch{}}),o.call(e,a,c,d)},n.attachOriginToPatched(e[r],o)}function u4(n){n.__load_patch("util",(e,t,r)=>{let i=dI(e);r.patchOnProperties=eN,r.patchMethod=Ps,r.bindArguments=_I,r.patchMacroTask=Y$;let s=t.__symbol__("BLACK_LISTED_EVENTS"),o=t.__symbol__("UNPATCHED_EVENTS");e[o]&&(e[s]=e[o]),e[s]&&(t[s]=t[o]=e[s]),r.patchEventPrototype=X$,r.patchEventTarget=Z$,r.ObjectDefineProperty=hI,r.ObjectGetOwnPropertyDescriptor=hh,r.ObjectCreate=H$,r.ArraySlice=q$,r.patchClass=dh,r.wrapWithCurrentZone=mI,r.filterProperties=oN,r.attachOriginToPatched=Ns,r._redefineProperty=Object.defineProperty,r.patchCallbacks=c4,r.getGlobalObjects=()=>({globalSources:tN,zoneSymbolEventNames:$r,eventNames:i,isBrowser:vI,isMix:XP,isNode:Ag,TRUE_STR:As,FALSE_STR:Rs,ZONE_SYMBOL_PREFIX:fh,ADD_EVENT_LISTENER_STR:pI,REMOVE_EVENT_LISTENER_STR:gI})})}function l4(n){o4(n),a4(n),u4(n)}var aN=$$();l4(aN);s4(aN);var Wn=null,Rg=!1,TI=1,d4=null,or=Symbol("SIGNAL");function Be(n){let e=Wn;return Wn=n,e}function Ng(){return Wn}var ph={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gh(n){if(Rg)throw new Error("");if(Wn===null)return;Wn.consumerOnSignalRead(n);let e=Wn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Wn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Wn.producers,t!==void 0&&t.producer===n)){Wn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Wn&&(!r||f4(i,Wn)))return;let s=Fu(Wn),o={producer:n,consumer:Wn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Wn.producersTail=o,e!==void 0?e.nextProducer=o:Wn.producers=o,s&&dN(n,o)}function cN(){TI++}function bI(n){if(!(Fu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===TI)){if(!n.producerMustRecompute(n)&&!Mg(n)){wI(n);return}n.producerRecomputeValue(n),wI(n)}}function CI(n){if(n.consumers===void 0)return;let e=Rg;Rg=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||h4(r)}}finally{Rg=e}}function DI(){return Wn?.consumerAllowSignalWrites!==!1}function h4(n){n.dirty=!0,CI(n),n.consumerMarkedDirty?.(n)}function wI(n){n.dirty=!1,n.lastCleanEpoch=TI}function mh(n){return n&&uN(n),Be(n)}function uN(n){n.producersTail=void 0,n.recomputing=!0}function kg(n,e){Be(e),n&&lN(n)}function lN(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Fu(n))do t=SI(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Mg(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(bI(t),r!==t.version))return!0}return!1}function yh(n){if(Fu(n)){let e=n.producers;for(;e!==void 0;)e=SI(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function dN(n,e){let t=n.consumersTail,r=Fu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)dN(i.producer,i)}function SI(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Fu(e)){let s=e.producers;for(;s!==void 0;)s=SI(s)}return t}function Fu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function AI(n){d4?.(n)}function f4(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function RI(n,e){return Object.is(n,e)}function xg(n,e){let t=Object.create(p4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(bI(t),gh(t),t.value===Pg)throw t.error;return t.value};return r[or]=t,AI(t),r}var EI=Symbol("UNSET"),II=Symbol("COMPUTING"),Pg=Symbol("ERRORED"),p4=Ce(z({},ph),{value:EI,dirty:!0,error:null,equal:RI,kind:"computed",producerMustRecompute(n){return n.value===EI||n.value===II},producerRecomputeValue(n){if(n.value===II)throw new Error("");let e=n.value;n.value=II;let t=mh(n),r,i=!1;try{r=n.computation(),Be(null),i=e!==EI&&e!==Pg&&r!==Pg&&n.equal(e,r)}catch(s){r=Pg,n.error=s}finally{kg(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function g4(){throw new Error}var hN=g4;function fN(n){hN(n)}function PI(n){hN=n}var m4=null;function NI(n,e){let t=Object.create(Og);t.value=n,e!==void 0&&(t.equal=e);let r=()=>pN(t);return r[or]=t,AI(t),[r,o=>_h(t,o),o=>gN(t,o)]}function pN(n){return gh(n),n.value}function _h(n,e){DI()||fN(n),n.equal(n.value,e)||(n.value=e,y4(n))}function gN(n,e){DI()||fN(n),_h(n,e(n.value))}var Og=Ce(z({},ph),{equal:RI,value:void 0,kind:"signal"});function y4(n){n.version++,cN(),CI(n),m4?.(n)}function kI(n){let e=Be(null);try{return n()}finally{Be(e)}}function Fe(n){return typeof n=="function"}function Vu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Lg=Vu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ec(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Qt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Fe(r))try{r()}catch(s){e=s instanceof Lg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{mN(s)}catch(o){e=e??[],o instanceof Lg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Lg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)mN(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ec(t,e)}remove(e){let{_finalizers:t}=this;t&&ec(t,e),e instanceof n&&e._removeParent(this)}};Qt.EMPTY=(()=>{let n=new Qt;return n.closed=!0,n})();var MI=Qt.EMPTY;function Fg(n){return n instanceof Qt||n&&"closed"in n&&Fe(n.remove)&&Fe(n.add)&&Fe(n.unsubscribe)}function mN(n){Fe(n)?n():n.unsubscribe()}var fi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Uu={setTimeout(n,e,...t){let{delegate:r}=Uu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Uu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Vg(n){Uu.setTimeout(()=>{let{onUnhandledError:e}=fi;if(e)e(n);else throw n})}function tc(){}var yN=xI("C",void 0,void 0);function _N(n){return xI("E",void 0,n)}function vN(n){return xI("N",n,void 0)}function xI(n,e,t){return{kind:n,value:e,error:t}}var nc=null;function ju(n){if(fi.useDeprecatedSynchronousErrorHandling){let e=!nc;if(e&&(nc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=nc;if(nc=null,t)throw r}}else n()}function EN(n){fi.useDeprecatedSynchronousErrorHandling&&nc&&(nc.errorThrown=!0,nc.error=n)}var rc=class extends Qt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Fg(e)&&e.add(this)):this.destination=E4}static create(e,t,r){return new Bu(e,t,r)}next(e){this.isStopped?LI(vN(e),this):this._next(e)}error(e){this.isStopped?LI(_N(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?LI(yN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_4=Function.prototype.bind;function OI(n,e){return _4.call(n,e)}var FI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ug(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ug(r)}else Ug(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ug(t)}}},Bu=class extends rc{constructor(e,t,r){super();let i;if(Fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&fi.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&OI(e.next,s),error:e.error&&OI(e.error,s),complete:e.complete&&OI(e.complete,s)}):i=e}this.destination=new FI(i)}};function Ug(n){fi.useDeprecatedSynchronousErrorHandling?EN(n):Vg(n)}function v4(n){throw n}function LI(n,e){let{onStoppedNotification:t}=fi;t&&Uu.setTimeout(()=>t(n,e))}var E4={closed:!0,next:tc,error:v4,complete:tc};var $u=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pi(n){return n}function jg(...n){return VI(n)}function VI(n){return n.length===0?pi:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=w4(t)?t:new Bu(t,r,i);return ju(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=IN(r),new r((i,s)=>{let o=new Bu({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[$u](){return this}pipe(...t){return VI(t)(this)}toPromise(t){return t=IN(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function IN(n){var e;return(e=n??fi.Promise)!==null&&e!==void 0?e:Promise}function I4(n){return n&&Fe(n.next)&&Fe(n.error)&&Fe(n.complete)}function w4(n){return n&&n instanceof rc||I4(n)&&Fg(n)}function T4(n){return Fe(n?.lift)}function vt(n){return e=>{if(T4(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(n,e,t,r,i){return new UI(n,e,t,r,i)}var UI=class extends rc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var wN=Vu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kt=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Bg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wN}next(t){ju(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ju(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ju(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?MI:(this.currentObservers=null,s.push(t),new Qt(()=>{this.currentObservers=null,ec(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Bg(e,t),n})(),Bg=class extends kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:MI}};var Fn=class extends kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var jI={now(){return(jI.delegate||Date).now()},delegate:void 0};var $g=class extends Qt{constructor(e,t){super()}schedule(e,t=0){return this}};var vh={setInterval(n,e,...t){let{delegate:r}=vh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=vh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Hu=class extends $g{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return vh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&vh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ec(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var qu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};qu.now=jI.now;var zu=class extends qu{constructor(e,t=qu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var BI=new zu(Hu);var Hg=class extends Hu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var qg=class extends zu{};var $I=new qg(Hg);var yr=new Ie(n=>n.complete());function TN(n){return n&&Fe(n.schedule)}function bN(n){return n[n.length-1]}function zg(n){return Fe(bN(n))?n.pop():void 0}function Uo(n){return TN(bN(n))?n.pop():void 0}function Gg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function DN(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function CN(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ic(n){return this instanceof ic?(this.v=n,this):new ic(n)}function SN(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(C){return function(R){return Promise.resolve(R).then(C,p)}}function a(C,R){r[C]&&(i[C]=function(N){return new Promise(function(P,H){s.push([C,N,P,H])>1||c(C,N)})},R&&(i[C]=R(i[C])))}function c(C,R){try{d(r[C](R))}catch(N){E(s[0][3],N)}}function d(C){C.value instanceof ic?Promise.resolve(C.value.v).then(h,p):E(s[0][2],C)}function h(C){c("next",C)}function p(C){c("throw",C)}function E(C,R){C(R),s.shift(),s.length&&c(s[0][0],s[0][1])}}function AN(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof CN=="function"?CN(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Wg=n=>n&&typeof n.length=="number"&&typeof n!="function";function Kg(n){return Fe(n?.then)}function Qg(n){return Fe(n[$u])}function Yg(n){return Symbol.asyncIterator&&Fe(n?.[Symbol.asyncIterator])}function Jg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function b4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zg=b4();function Xg(n){return Fe(n?.[Zg])}function em(n){return SN(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ic(t.read());if(i)return yield ic(void 0);yield yield ic(r)}}finally{t.releaseLock()}})}function tm(n){return Fe(n?.getReader)}function rn(n){if(n instanceof Ie)return n;if(n!=null){if(Qg(n))return C4(n);if(Wg(n))return D4(n);if(Kg(n))return S4(n);if(Yg(n))return RN(n);if(Xg(n))return A4(n);if(tm(n))return R4(n)}throw Jg(n)}function C4(n){return new Ie(e=>{let t=n[$u]();if(Fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function D4(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function S4(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vg)})}function A4(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function RN(n){return new Ie(e=>{P4(n,e).catch(t=>e.error(t))})}function R4(n){return RN(em(n))}function P4(n,e){var t,r,i,s;return DN(this,void 0,void 0,function*(){try{for(t=AN(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function _r(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function jo(n,e=0){return vt((t,r)=>{t.subscribe(Et(r,i=>_r(r,n,()=>r.next(i),e),()=>_r(r,n,()=>r.complete(),e),i=>_r(r,n,()=>r.error(i),e)))})}function Bo(n,e=0){return vt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function PN(n,e){return rn(n).pipe(Bo(e),jo(e))}function NN(n,e){return rn(n).pipe(Bo(e),jo(e))}function kN(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function MN(n,e){return new Ie(t=>{let r;return _r(t,e,()=>{r=n[Zg](),_r(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Fe(r?.return)&&r.return()})}function nm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{_r(t,e,()=>{let r=n[Symbol.asyncIterator]();_r(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function xN(n,e){return nm(em(n),e)}function ON(n,e){if(n!=null){if(Qg(n))return PN(n,e);if(Wg(n))return kN(n,e);if(Kg(n))return NN(n,e);if(Yg(n))return nm(n,e);if(Xg(n))return MN(n,e);if(tm(n))return xN(n,e)}throw Jg(n)}function Mt(n,e){return e?ON(n,e):rn(n)}function Me(...n){let e=Uo(n);return Mt(n,e)}function HI(n,e){let t=Fe(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function rm(n){return!!n&&(n instanceof Ie||Fe(n.lift)&&Fe(n.subscribe))}var sc=Vu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ge(n,e){return vt((t,r)=>{let i=0;t.subscribe(Et(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:N4}=Array;function k4(n,e){return N4(e)?n(...e):n(e)}function im(n){return Ge(e=>k4(n,e))}var{isArray:M4}=Array,{getPrototypeOf:x4,prototype:O4,keys:L4}=Object;function sm(n){if(n.length===1){let e=n[0];if(M4(e))return{args:e,keys:null};if(F4(e)){let t=L4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function F4(n){return n&&typeof n=="object"&&x4(n)===O4}function om(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function am(...n){let e=Uo(n),t=zg(n),{args:r,keys:i}=sm(n);if(r.length===0)return Mt([],e);let s=new Ie(V4(r,e,i?o=>om(i,o):pi));return t?s.pipe(im(t)):s}function V4(n,e,t=pi){return r=>{LN(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)LN(e,()=>{let d=Mt(n[c],e),h=!1;d.subscribe(Et(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function LN(n,e,t){n?_r(t,n,e):e()}function FN(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,p=!1,E=()=>{p&&!c.length&&!d&&e.complete()},C=N=>d<r?R(N):c.push(N),R=N=>{s&&e.next(N),d++;let P=!1;rn(t(N,h++)).subscribe(Et(e,H=>{i?.(H),s?C(H):e.next(H)},()=>{P=!0},void 0,()=>{if(P)try{for(d--;c.length&&d<r;){let H=c.shift();o?_r(e,o,()=>R(H)):R(H)}E()}catch(H){e.error(H)}}))};return n.subscribe(Et(e,C,()=>{p=!0,E()})),()=>{a?.()}}function Vn(n,e,t=1/0){return Fe(e)?Vn((r,i)=>Ge((s,o)=>e(r,s,i,o))(rn(n(r,i))),t):(typeof e=="number"&&(t=e),vt((r,i)=>FN(r,i,n,t)))}function $o(n=1/0){return Vn(pi,n)}function VN(){return $o(1)}function Gu(...n){return VN()(Mt(n,Uo(n)))}function Eh(n){return new Ie(e=>{rn(n()).subscribe(e)})}function qI(...n){let e=zg(n),{args:t,keys:r}=sm(n),i=new Ie(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let p=!1;rn(t[h]).subscribe(Et(s,E=>{p||(p=!0,d--),a[h]=E},()=>c--,void 0,()=>{(!c||!p)&&(d||s.next(r?om(r,a):a),s.complete())}))}});return e?i.pipe(im(e)):i}var ks=new Ie(tc);function Kn(n,e){return vt((t,r)=>{let i=0;t.subscribe(Et(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Wu(n){return vt((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Et(t,void 0,void 0,o=>{s=rn(n(o,Wu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Ku(n,e){return Fe(e)?Vn(n,e,1):Vn(n,1)}function zI(n){return vt((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Un(n){return n<=0?()=>yr:vt((e,t)=>{let r=0;e.subscribe(Et(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function UN(n=U4){return vt((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function U4(){return new sc}function GI(n){return vt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ms(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Kn((i,s)=>n(i,s,r)):pi,Un(1),t?zI(e):UN(()=>new sc))}function cm(n){return n<=0?()=>yr:vt((e,t)=>{let r=[];e.subscribe(Et(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function um(...n){let e=Uo(n);return vt((t,r)=>{(e?Gu(n,t,e):Gu(n,t)).subscribe(r)})}function bn(n,e){return vt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Et(r,c=>{i?.unsubscribe();let d=0,h=s++;rn(n(c,h)).subscribe(i=Et(r,p=>r.next(e?e(c,p,h,d++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ih(n){return vt((e,t)=>{rn(n).subscribe(Et(t,()=>t.complete(),tc)),!t.closed&&e.subscribe(t)})}function jn(n,e,t){let r=Fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?vt((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Et(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):pi}var WI;function lm(){return WI}function zi(n){let e=WI;return WI=n,e}var jN=Symbol("NotFound");function Qu(n){return n===jN||n?.name==="\u0275NotFound"}var Ho=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},uw=new Ho("21.0.3");var gm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ie=class extends Error{code;constructor(e,t){super(Wi(e,t)),this.code=e}};function $4(n){return`NG0${Math.abs(n)}`}function Wi(n,e){return`${$4(n)}${e?": "+e:""}`}var Fs=globalThis;function It(n){for(let e in n)if(n[e]===It)return e;throw Error("")}function zN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Os(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Os).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function lw(n,e){return n?e?`${n} ${e}`:n:e||""}var H4=It({__forward_ref__:It});function lc(n){return n.__forward_ref__=lc,n.toString=function(){return Os(this())},n}function Bn(n){return dw(n)?n():n}function dw(n){return typeof n=="function"&&n.hasOwnProperty(H4)&&n.__forward_ref__===lc}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Hr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sh(n){return q4(n,mm)}function hw(n){return Sh(n)!==null}function q4(n,e){return n.hasOwnProperty(e)&&n[e]||null}function z4(n){let e=n?.[mm]??null;return e||null}function QI(n){return n&&n.hasOwnProperty(hm)?n[hm]:null}var mm=It({\u0275prov:It}),hm=It({\u0275inj:It}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fw(n){return n&&!!n.\u0275providers}var pw=It({\u0275cmp:It}),gw=It({\u0275dir:It}),mw=It({\u0275pipe:It}),yw=It({\u0275mod:It}),Th=It({\u0275fac:It}),dc=It({__NG_ELEMENT_ID__:It}),BN=It({__NG_ENV_ID__:It});function Ah(n){return typeof n=="string"?n:n==null?"":String(n)}function GN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ah(n)}var WN=It({ngErrorCode:It}),G4=It({ngErrorMessage:It}),W4=It({ngTokenPath:It});function _w(n,e){return KN("",-200,e)}function ym(n,e){throw new ie(-201,!1)}function KN(n,e,t){let r=new ie(e,n);return r[WN]=e,r[G4]=n,t&&(r[W4]=t),r}function K4(n){return n[WN]}var YI;function QN(){return YI}function ar(n){let e=YI;return YI=n,e}function vw(n,e,t){let r=Sh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ym(n,"Injector")}var Q4={},oc=Q4,JI="__NG_DI_FLAG__",ZI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ac(t)||0;try{return this.injector.get(e,r&8?null:oc,r)}catch(i){if(Qu(i))return i;throw i}}};function Y4(n,e=0){let t=lm();if(t===void 0)throw new ie(-203,!1);if(t===null)return vw(n,void 0,e);{let r=J4(e),i=t.retrieve(n,r);if(Qu(i)){if(r.optional)return null;throw i}return i}}function ve(n,e=0){return(QN()||Y4)(Bn(n),e)}function x(n,e){return ve(n,ac(e))}function ac(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function J4(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function XI(n){let e=[];for(let t=0;t<n.length;t++){let r=Bn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=Z4(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ve(i,s))}else e.push(ve(r))}return e}function YN(n,e){return n[JI]=e,n.prototype[JI]=e,n}function Z4(n){return n[JI]}function qo(n,e){let t=n.hasOwnProperty(Th);return t?n[Th]:null}function JN(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function ZN(n){return n.flat(Number.POSITIVE_INFINITY)}function _m(n,e){n.forEach(t=>Array.isArray(t)?_m(t,e):e(t))}function Ew(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function XN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function ek(n,e,t){let r=Ju(n,e);return r>=0?n[r|1]=t:(r=~r,XN(n,r,e,t)),r}function vm(n,e){let t=Ju(n,e);if(t>=0)return n[t|1]}function Ju(n,e){return X4(n,e,1)}function X4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Go={},Dr=[],Wo=new ae(""),Iw=new ae("",-1),ww=new ae(""),bh=class{get(e,t=oc){if(t===oc){let i=KN("",-201);throw i.name="\u0275NotFound",i}return t}};function Tw(n){return n[yw]||null}function Vs(n){return n[pw]||null}function bw(n){return n[gw]||null}function tk(n){return n[mw]||null}function cr(n){return{\u0275providers:n}}function nk(...n){return{\u0275providers:Cw(!0,n),\u0275fromNgModule:!0}}function Cw(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return _m(e,o=>{let a=o;fm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&rk(i,s),t}function rk(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Dw(i,s=>{e(s,r)})}}function fm(n,e,t,r){if(n=Bn(n),!n)return!1;let i=null,s=QI(n),o=!s&&Vs(n);if(!s&&!o){let c=n.ngModule;if(s=QI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)fm(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{_m(s.imports,h=>{fm(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&rk(d,e)}if(!a){let d=qo(i)||(()=>new i);e({provide:i,useFactory:d,deps:Dr},i),e({provide:ww,useValue:i,multi:!0},i),e({provide:Wo,useValue:()=>ve(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;Dw(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Dw(n,e){for(let t of n)fw(t)&&(t=t.\u0275providers),Array.isArray(t)?Dw(t,e):e(t)}var eH=It({provide:String,useValue:It});function ik(n){return n!==null&&typeof n=="object"&&eH in n}function tH(n){return!!(n&&n.useExisting)}function nH(n){return!!(n&&n.useFactory)}function cc(n){return typeof n=="function"}function sk(n){return!!n.useClass}var Ph=new ae(""),dm={},$N={},KI;function Nh(){return KI===void 0&&(KI=new bh),KI}var Yt=class{},uc=class extends Yt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,tw(e,o=>this.processProvider(o)),this.records.set(Iw,Yu(void 0,this)),i.has("environment")&&this.records.set(Yt,Yu(void 0,this));let s=this.records.get(Ph);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ww,Dr,{self:!0}))}retrieve(e,t){let r=ac(t)||0;try{return this.get(e,oc,r)}catch(i){if(Qu(i))return i;throw i}}destroy(){wh(this),this._destroyed=!0;let e=Be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Be(e)}}onDestroy(e){return wh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){wh(this);let t=zi(this),r=ar(void 0),i;try{return e()}finally{zi(t),ar(r)}}get(e,t=oc,r){if(wh(this),e.hasOwnProperty(BN))return e[BN](this);let i=ac(r),s,o=zi(this),a=ar(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=aH(e)&&Sh(e);h&&this.injectableDefInScope(h)?d=Yu(ew(e),dm):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?Nh():this.parent;return t=i&8&&t===oc?null:t,c.get(e,t)}catch(c){let d=K4(c);throw d===-200||d===-201?new ie(d,null):c}finally{ar(a),zi(o)}}resolveInjectorInitializers(){let e=Be(null),t=zi(this),r=ar(void 0),i;try{let s=this.get(Wo,Dr,{self:!0});for(let o of s)o()}finally{zi(t),ar(r),Be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Os(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Bn(e);let t=cc(e)?e:Bn(e&&e.provide),r=iH(e);if(!cc(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Yu(void 0,dm,!0),i.factory=()=>XI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Be(null);try{if(t.value===$N)throw _w(Os(e));return t.value===dm&&(t.value=$N,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&oH(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Be(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Bn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ew(n){let e=Sh(n),t=e!==null?e.factory:qo(n);if(t!==null)return t;if(n instanceof ae)throw new ie(204,!1);if(n instanceof Function)return rH(n);throw new ie(204,!1)}function rH(n){if(n.length>0)throw new ie(204,!1);let t=z4(n);return t!==null?()=>t.factory(n):()=>new n}function iH(n){if(ik(n))return Yu(void 0,n.useValue);{let e=Sw(n);return Yu(e,dm)}}function Sw(n,e,t){let r;if(cc(n)){let i=Bn(n);return qo(i)||ew(i)}else if(ik(n))r=()=>Bn(n.useValue);else if(nH(n))r=()=>n.useFactory(...XI(n.deps||[]));else if(tH(n))r=(i,s)=>ve(Bn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Bn(n&&(n.useClass||n.provide));if(sH(n))r=()=>new i(...XI(n.deps));else return qo(i)||ew(i)}return r}function wh(n){if(n.destroyed)throw new ie(205,!1)}function Yu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function sH(n){return!!n.deps}function oH(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function aH(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function tw(n,e){for(let t of n)Array.isArray(t)?tw(t,e):t&&fw(t)?tw(t.\u0275providers,e):e(t)}function sn(n,e){let t;n instanceof uc?(wh(n),t=n):t=new ZI(n);let r,i=zi(t),s=ar(void 0);try{return e()}finally{zi(i),ar(s)}}function ok(){return QN()!==void 0||lm()!=null}var gi=0,De=1,Pe=2,Cn=3,qr=4,zr=5,kh=6,Zu=7,Qn=8,Ko=9,Ki=10,jt=11,Xu=12,Aw=13,hc=14,Gr=15,Qo=16,fc=17,Qi=18,Mh=19,Rw=20,xs=21,Em=22,xh=23,Sr=24,pc=25,Oh=26,Dn=27,ak=1;var Yo=7,Lh=8,gc=9,ur=10;function Yi(n){return Array.isArray(n)&&typeof n[ak]=="object"}function mi(n){return Array.isArray(n)&&n[ak]===!0}function Pw(n){return(n.flags&4)!==0}function Jo(n){return n.componentOffset>-1}function Fh(n){return(n.flags&1)===1}function Ji(n){return!!n.template}function el(n){return(n[Pe]&512)!==0}function mc(n){return(n[Pe]&256)===256}var ck="svg",uk="math";function Wr(n){for(;Array.isArray(n);)n=n[gi];return n}function Nw(n,e){return Wr(e[n])}function yi(n,e){return Wr(e[n.index])}function Im(n,e){return n.data[e]}function wm(n,e){return n[e]}function kw(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Kr(n,e){let t=e[n];return Yi(t)?t:t[gi]}function lk(n){return(n[Pe]&4)===4}function Tm(n){return(n[Pe]&128)===128}function dk(n){return mi(n[Cn])}function yc(n,e){return e==null?null:n[e]}function Mw(n){n[fc]=0}function xw(n){n[Pe]&1024||(n[Pe]|=1024,Tm(n)&&tl(n))}function hk(n,e){for(;n>0;)e=e[hc],n--;return e}function Vh(n){return!!(n[Pe]&9216||n[Sr]?.dirty)}function bm(n){n[Ki].changeDetectionScheduler?.notify(8),n[Pe]&64&&(n[Pe]|=1024),Vh(n)&&tl(n)}function tl(n){n[Ki].changeDetectionScheduler?.notify(0);let e=zo(n);for(;e!==null&&!(e[Pe]&8192||(e[Pe]|=8192,!Tm(e)));)e=zo(e)}function Ow(n,e){if(mc(n))throw new ie(911,!1);n[xs]===null&&(n[xs]=[]),n[xs].push(e)}function fk(n,e){if(n[xs]===null)return;let t=n[xs].indexOf(e);t!==-1&&n[xs].splice(t,1)}function zo(n){let e=n[Cn];return mi(e)?e[Cn]:e}function Lw(n){return n[Zu]??=[]}function Fw(n){return n.cleanup??=[]}function pk(n,e,t,r){let i=Lw(e);i.push(t),n.firstCreatePass&&Fw(n).push(r,i.length-1)}var He={lFrame:Ak(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var nw=!1;function gk(){return He.lFrame.elementDepthCount}function mk(){He.lFrame.elementDepthCount++}function Vw(){He.lFrame.elementDepthCount--}function Uw(){return He.bindingsEnabled}function yk(){return He.skipHydrationRootTNode!==null}function jw(n){return He.skipHydrationRootTNode===n}function Bw(){He.skipHydrationRootTNode=null}function Qe(){return He.lFrame.lView}function Sn(){return He.lFrame.tView}function At(n){return He.lFrame.contextLView=n,n[Qn]}function Rt(n){return He.lFrame.contextLView=null,n}function An(){let n=$w();for(;n!==null&&n.type===64;)n=n.parent;return n}function $w(){return He.lFrame.currentTNode}function _k(){let n=He.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function nl(n,e){let t=He.lFrame;t.currentTNode=n,t.isParent=e}function Hw(){return He.lFrame.isParent}function vk(){He.lFrame.isParent=!1}function Ek(){return He.lFrame.contextLView}function qw(){return nw}function zw(n){let e=nw;return nw=n,e}function Cm(){let n=He.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ik(n){return He.lFrame.bindingIndex=n}function Uh(){return He.lFrame.bindingIndex++}function wk(n){let e=He.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Tk(){return He.lFrame.inI18n}function bk(n,e){let t=He.lFrame;t.bindingIndex=t.bindingRootIndex=n,Dm(e)}function Ck(){return He.lFrame.currentDirectiveIndex}function Dm(n){He.lFrame.currentDirectiveIndex=n}function Dk(n){let e=He.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Gw(){return He.lFrame.currentQueryIndex}function Sm(n){He.lFrame.currentQueryIndex=n}function cH(n){let e=n[De];return e.type===2?e.declTNode:e.type===1?n[zr]:null}function Ww(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=cH(s),i===null||(s=s[hc],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=He.lFrame=Sk();return r.currentTNode=e,r.lView=n,!0}function Am(n){let e=Sk(),t=n[De];He.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Sk(){let n=He.lFrame,e=n===null?null:n.child;return e===null?Ak(n):e}function Ak(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Rk(){let n=He.lFrame;return He.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Kw=Rk;function Rm(){let n=Rk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pk(n){return(He.lFrame.contextLView=hk(n,He.lFrame.contextLView))[Qn]}function _c(){return He.lFrame.selectedIndex}function Zo(n){He.lFrame.selectedIndex=n}function Pm(){let n=He.lFrame;return Im(n.tView,n.selectedIndex)}function Nk(){return He.lFrame.currentNamespace}var kk=!0;function Nm(){return kk}function km(n){kk=n}function rw(n,e=null,t=null,r){let i=Qw(n,e,t,r);return i.resolveInjectorInitializers(),i}function Qw(n,e=null,t=null,r,i=new Set){let s=[t||Dr,nk(n)];return r=r||(typeof n=="object"?void 0:Os(n)),new uc(s,e||Nh(),r||null,i)}var Lt=class n{static THROW_IF_NOT_FOUND=oc;static NULL=new bh;static create(e,t){if(Array.isArray(e))return rw({name:""},t,e,"");{let r=e.name??"";return rw({name:r},e.parent,e.providers,r)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>ve(Iw)});static __NG_ELEMENT_ID__=-1},Jt=new ae(""),Zi=(()=>{class n{static __NG_ELEMENT_ID__=uH;static __NG_ENV_ID__=t=>t}return n})(),iw=class extends Zi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return mc(this._lView)}onDestroy(e){let t=this._lView;return Ow(t,e),()=>fk(t,e)}};function uH(){return new iw(Qe())}var Yw=!1,Xi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Fn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),sw=class extends kt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ok()&&(this.destroyRef=x(Zi,{optional:!0})??void 0,this.pendingTasks=x(Xi,{optional:!0})??void 0)}emit(e){let t=Be(null);try{super.next(e)}finally{Be(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Qt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},qt=sw;function pm(...n){}function Jw(n){let e,t;function r(){n=pm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Zw(n){return queueMicrotask(()=>n()),()=>{n=pm}}var Xw="isAngularZone",Ch=Xw+"_ID",lH=0,et=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new qt(!1);onMicrotaskEmpty=new qt(!1);onStable=new qt(!1);onError=new qt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Yw}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,fH(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Xw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dH,pm,pm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},dH={};function eT(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hH(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Jw(()=>{n.callbackScheduled=!1,ow(n),n.isCheckStableRunning=!0,eT(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ow(n)}function fH(n){let e=()=>{hH(n)},t=lH++;n._inner=n._inner.fork({name:"angular",properties:{[Xw]:!0,[Ch]:t,[Ch+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(pH(c))return r.invokeTask(s,o,a,c);try{return HN(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),qN(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return HN(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!gH(c)&&e(),qN(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,ow(n),eT(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function ow(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function HN(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qN(n){n._nesting--,eT(n)}var Dh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new qt;onMicrotaskEmpty=new qt;onStable=new qt;onError=new qt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function pH(n){return Mk(n,"__ignore_ng_zone__")}function gH(n){return Mk(n,"__scheduler_tick__")}function Mk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Gi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},vr=new ae("",{factory:()=>{let n=x(et),e=x(Yt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Gi),t.handleError(r))})}}}),xk={provide:Wo,useValue:()=>{let n=x(Gi,{optional:!0})},multi:!0};function st(n,e){let[t,r,i]=NI(n,e?.equal),s=t,o=s[or];return s.set=r,s.update=i,s.asReadonly=Ok.bind(s),s}function Ok(){let n=this[or];if(n.readonlyFn===void 0){let e=()=>this();e[or]=n,n.readonlyFn=e}return n.readonlyFn}var Mm=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=mH}return n})();function mH(){return new Mm(Qe(),An())}var Ls=class{},rl=new ae("",{factory:()=>!0});var xm=new ae(""),il=(()=>{class n{internalPendingTasks=x(Xi);scheduler=x(Ls);errorHandler=x(vr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),tT=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new aw})}return n})(),aw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},cw=class{[or];constructor(e){this[or]=e}destroy(){this[or].destroy()}};function Zt(n){return kI(n)}function dl(n){return{toString:n}.toString()}var Om="__parameters__";function bH(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function CH(n,e,t){return dl(()=>{let r=bH(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let p=c.hasOwnProperty(Om)?c[Om]:Object.defineProperty(c,Om,{value:[]})[Om];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ar=YN(CH("Optional"),8);function DH(n){return typeof n=="function"}function dM(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Hm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Us=(()=>{let n=()=>hM;return n.ngInherit=!0,n})();function hM(n){return n.type.prototype.ngOnChanges&&(n.setInput=AH),SH}function SH(){let n=pM(this),e=n?.current;if(e){let t=n.previous;if(t===Go)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function AH(n,e,t,r,i){let s=this.declaredInputs[r],o=pM(n)||RH(n,{previous:Go,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new Hm(d&&d.currentValue,t,c===Go),dM(n,e,i,t)}var fM="__ngSimpleChanges__";function pM(n){return n[fM]||null}function RH(n,e){return n[fM]=e}var Lk=[];var wt=function(n,e=null,t){for(let r=0;r<Lk.length;r++){let i=Lk[r];i(n,e,t)}},ot=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ot||{});function PH(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=hM(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function gM(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Vm(n,e,t){mM(n,e,3,t)}function Um(n,e,t,r){(n[Pe]&3)===t&&mM(n,e,t,r)}function nT(n,e){let t=n[Pe];(t&3)===e&&(t&=16383,t+=1,n[Pe]=t)}function mM(n,e,t,r){let i=r!==void 0?n[fc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[fc]+=65536),(a<s||s==-1)&&(NH(n,t,e,c),n[fc]=(n[fc]&4294901760)+c+2),c++}function Fk(n,e){wt(ot.LifecycleHookStart,n,e);let t=Be(null);try{e.call(n)}finally{Be(t),wt(ot.LifecycleHookEnd,n,e)}}function NH(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Pe]>>14<n[fc]>>16&&(n[Pe]&3)===e&&(n[Pe]+=16384,Fk(a,s)):Fk(a,s)}var ol=-1,Ec=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function kH(n){return(n.flags&8)!==0}function MH(n){return(n.flags&16)!==0}function xH(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];OH(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function yM(n){return n===3||n===4||n===6}function OH(n){return n.charCodeAt(0)===64}function al(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Vk(n,t,i,null,e[++r]):Vk(n,t,i,null,null))}}return n}function Vk(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function _M(n){return n!==ol}function qm(n){return n&32767}function LH(n){return n>>16}function zm(n,e){let t=LH(n),r=e;for(;t>0;)r=r[hc],t--;return r}var hT=!0;function Gm(n){let e=hT;return hT=n,e}var FH=256,vM=FH-1,EM=5,VH=0,es={};function UH(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(dc)&&(r=t[dc]),r==null&&(r=t[dc]=VH++);let i=r&vM,s=1<<i;e.data[n+(i>>EM)]|=s}function Wm(n,e){let t=IM(n,e);if(t!==-1)return t;let r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,rT(r.data,n),rT(e,null),rT(r.blueprint,null));let i=kT(n,e),s=n.injectorIndex;if(_M(i)){let o=qm(i),a=zm(i,e),c=a[De].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function rT(n,e){n.push(0,0,0,0,0,0,0,0,e)}function IM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function kT(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=DM(i),r===null)return ol;if(t++,i=i[hc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ol}function fT(n,e,t){UH(n,e,t)}function jH(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(yM(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function wM(n,e,t){if(t&8||n!==void 0)return n;ym(e,"NodeInjector")}function TM(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ko],s=ar(void 0);try{return i?i.get(e,r,t&8):vw(e,r,t&8)}finally{ar(s)}}return wM(r,e,t)}function bM(n,e,t,r=0,i){if(n!==null){if(e[Pe]&2048&&!(r&2)){let o=qH(n,e,t,r,es);if(o!==es)return o}let s=CM(n,e,t,r,es);if(s!==es)return s}return TM(e,t,r,i)}function CM(n,e,t,r,i){let s=$H(t);if(typeof s=="function"){if(!Ww(e,n,r))return r&1?wM(i,t,r):TM(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))ym(t);else return o}finally{Kw()}}else if(typeof s=="number"){let o=null,a=IM(n,e),c=ol,d=r&1?e[Gr][zr]:null;for((a===-1||r&4)&&(c=a===-1?kT(n,e):e[a+8],c===ol||!jk(r,!1)?a=-1:(o=e[De],a=qm(c),e=zm(c,e)));a!==-1;){let h=e[De];if(Uk(s,a,h.data)){let p=BH(a,e,t,o,r,d);if(p!==es)return p}c=e[a+8],c!==ol&&jk(r,e[De].data[a+8]===d)&&Uk(s,a,e)?(o=h,a=qm(c),e=zm(c,e)):a=-1}}return i}function BH(n,e,t,r,i,s){let o=e[De],a=o.data[n+8],c=r==null?Jo(a)&&hT:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=jm(a,o,t,c,d);return h!==null?Hh(e,o,h,a,i):es}function jm(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,p=r?a:a+h,E=i?a+h:d;for(let C=p;C<E;C++){let R=o[C];if(C<c&&t===R||C>=c&&R.type===t)return C}if(i){let C=o[c];if(C&&Ji(C)&&C.type===t)return c}return null}function Hh(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ec){let a=s;if(a.resolving){let C=GN(o[t]);throw _w(C)}let c=Gm(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,p=a.injectImpl?ar(a.injectImpl):null,E=Ww(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&PH(t,o[t],e)}finally{p!==null&&ar(p),Gm(c),a.resolving=!1,Kw()}}return s}function $H(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(dc)?n[dc]:void 0;return typeof e=="number"?e>=0?e&vM:HH:e}function Uk(n,e,t){let r=1<<n;return!!(t[e+(n>>EM)]&r)}function jk(n,e){return!(n&2)&&!(n&1&&e)}var vc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return bM(this._tNode,this._lView,e,ac(r),t)}};function HH(){return new vc(An(),Qe())}function Cc(n){return dl(()=>{let e=n.prototype.constructor,t=e[Th]||pT(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Th]||pT(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function pT(n){return dw(n)?()=>{let e=pT(Bn(n));return e&&e()}:qo(n)}function qH(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Pe]&2048&&!el(o);){let a=CM(s,o,t,r|2,es);if(a!==es)return a;let c=s.parent;if(!c){let d=o[Rw];if(d){let h=d.get(t,es,r);if(h!==es)return h}c=DM(o),o=o[hc]}s=c}return i}function DM(n){let e=n[De],t=e.type;return t===2?e.declTNode:t===1?n[zr]:null}function Wh(n){return jH(An(),n)}function zH(){return hl(An(),Qe())}function hl(n,e){return new Rr(yi(n,e))}var Rr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=zH}return n})();function GH(n){return n instanceof Rr?n.nativeElement:n}function WH(){return this._results[Symbol.iterator]()}var Km=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new kt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=ZN(e);(this._changesDetected=!JN(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=WH};function SM(n){return(n.flags&128)===128}var MT=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(MT||{}),AM=new Map,KH=0;function QH(){return KH++}function YH(n){AM.set(n[Mh],n)}function gT(n){AM.delete(n[Mh])}var Bk="__ngContext__";function cl(n,e){Yi(e)?(n[Bk]=e[Mh],YH(e)):n[Bk]=e}function RM(n){return NM(n[Xu])}function PM(n){return NM(n[qr])}function NM(n){for(;n!==null&&!mi(n);)n=n[qr];return n}var JH;function xT(n){JH=n}var oy=new ae("",{factory:()=>ZH}),ZH="ng";var ay=new ae(""),Dc=new ae("",{providedIn:"platform",factory:()=>"unknown"});var cy=new ae("",{factory:()=>x(Jt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kM=!1,MM=new ae("",{factory:()=>kM});var OT=new ae("");var XH=(n,e,t,r)=>{};function e6(n,e,t,r){XH(n,e,t,r)}function LT(n){return(n.flags&32)===32}var t6=()=>null;function xM(n,e,t=!1){return t6(n,e,t)}function OM(n,e){let t=n.contentQueries;if(t!==null){let r=Be(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Sm(s),a.contentQueries(2,e[o],o)}}}finally{Be(r)}}}function mT(n,e,t){Sm(0);let r=Be(null);try{e(n,t)}finally{Be(r)}}function LM(n,e,t){if(Pw(e)){let r=Be(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Be(r)}}}var vi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(vi||{});var Lm;function n6(){if(Lm===void 0&&(Lm=null,Fs.trustedTypes))try{Lm=Fs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lm}function $k(n){return n6()?.createScriptURL(n)||n}var Qm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gm})`}};function Kh(n){return n instanceof Qm?n.changingThisBreaksApplicationSecurity:n}function FT(n,e){let t=FM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gm})`)}return t===e}function FM(n){return n instanceof Qm&&n.getTypeName()||null}var r6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VM(n){return n=String(n),n.match(r6)?n:"unsafe:"+n}function i6(n,e){return n.createText(e)}function s6(n,e,t){n.setValue(e,t)}function UM(n,e,t){return n.createElement(e,t)}function Ym(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jM(n,e,t){n.appendChild(e,t)}function Hk(n,e,t,r,i){r!==null?Ym(n,e,t,r,i):jM(n,e,t)}function o6(n,e,t,r){n.removeChild(null,e,t,r)}function a6(n,e,t){n.setAttribute(e,"style",t)}function c6(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function BM(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&xH(n,e,r),i!==null&&c6(n,e,i),s!==null&&a6(n,e,s)}var uy=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(uy||{});function na(n){let e=HM();return e?e.sanitize(uy.URL,n)||"":FT(n,"URL")?Kh(n):VM(Ah(n))}function $M(n){let e=HM();if(e)return $k(e.sanitize(uy.RESOURCE_URL,n)||"");if(FT(n,"ResourceURL"))return $k(Kh(n));throw new ie(904,!1)}function u6(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?$M:na}function VT(n,e,t){return u6(e,t)(n)}function HM(){let n=Qe();return n&&n[Ki].sanitizer}function qM(n){return n instanceof Function?n():n}function l6(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var zM="ng-template";function d6(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&l6(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(UT(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function UT(n){return n.type===4&&n.value!==zM}function h6(n,e,t){let r=n.type===4&&!t?zM:n.value;return e===r}function f6(n,e,t){let r=4,i=n.attrs,s=i!==null?m6(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!_i(r)&&!_i(c))return!1;if(o&&_i(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!h6(n,c,t)||c===""&&e.length===1){if(_i(r))return!1;o=!0}}else if(r&8){if(i===null||!d6(n,i,c,t)){if(_i(r))return!1;o=!0}}else{let d=e[++a],h=p6(c,i,UT(n),t);if(h===-1){if(_i(r))return!1;o=!0;continue}if(d!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&d!==p){if(_i(r))return!1;o=!0}}}}return _i(r)||o}function _i(n){return(n&1)===0}function p6(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return y6(e,n)}function g6(n,e,t=!1){for(let r=0;r<e.length;r++)if(f6(n,e[r],t))return!0;return!1}function m6(n){for(let e=0;e<n.length;e++){let t=n[e];if(yM(t))return e}return n.length}function y6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function qk(n,e){return n?":not("+e.trim()+")":e}function _6(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!_i(o)&&(e+=qk(s,i),i=""),r=o,s=s||!_i(r);t++}return i!==""&&(e+=qk(s,i)),e}function v6(n){return n.map(_6).join(",")}function E6(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!_i(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var js={};function jT(n,e,t,r,i,s,o,a,c,d,h){let p=Dn+r,E=p+i,C=I6(p,E),R=typeof d=="function"?d():d;return C[De]={type:n,blueprint:C,template:t,queries:null,viewQuery:a,declTNode:e,data:C.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:R,incompleteFirstPass:!1,ssrId:h}}function I6(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:js);return t}function w6(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function BT(n,e,t,r,i,s,o,a,c,d,h){let p=e.blueprint.slice();return p[gi]=i,p[Pe]=r|4|128|8|64|1024,(d!==null||n&&n[Pe]&2048)&&(p[Pe]|=2048),Mw(p),p[Cn]=p[hc]=n,p[Qn]=t,p[Ki]=o||n&&n[Ki],p[jt]=a||n&&n[jt],p[Ko]=c||n&&n[Ko]||null,p[zr]=s,p[Mh]=QH(),p[kh]=h,p[Rw]=d,p[Gr]=e.type==2?n[Gr]:p,p}function T6(n,e,t){let r=yi(e,n),i=w6(t),s=n[Ki].rendererFactory,o=$T(n,BT(n,i,null,GM(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function GM(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function WM(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $T(n,e){return n[Xu]?n[Aw][qr]=e:n[Xu]=e,n[Aw]=e,e}function we(n=1){KM(Sn(),Qe(),_c()+n,!1)}function KM(n,e,t,r){if(!r)if((e[Pe]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Vm(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Um(e,s,0,t)}Zo(t)}var ly=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ly||{});function yT(n,e,t,r){let i=Be(null);try{let[s,o,a]=n.inputs[t],c=null;(o&ly.SignalBased)!==0&&(c=e[s][or]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):dM(e,c,s,r)}finally{Be(i)}}var ts=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ts||{}),b6;function HT(n,e){return b6(n,e)}var ul=new Set,dy=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(dy||{}),Sc=new ae(""),zk=new Set;function Ac(n){zk.has(n)||(zk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var qT=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),QM=[0,1,2,3],YM=(()=>{class n{ngZone=x(et);scheduler=x(Ls);errorHandler=x(Gi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){x(Sc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&wt(ot.AfterRenderHooksStart),this.executing=!0;for(let r of QM)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&wt(ot.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[pc]??=[]).push(t),tl(r),r[Pe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(dy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),Jm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[pc];e&&(this.view[pc]=e.filter(t=>t!==this))}};function hy(n,e){let t=e?.injector??x(Lt);return Ac("NgAfterNextRender"),D6(n,t,e,!0)}function C6(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function D6(n,e,t,r){let i=e.get(qT);i.impl??=e.get(YM);let s=e.get(Sc,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Zi):null,a=e.get(Mm,null,{optional:!0}),c=new Jm(i.impl,C6(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var S6=new ae("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:x(Yt)})});function JM(n,e,t){let r=n.get(S6);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function A6(n,e){for(let[t,r]of e)JM(n,r.animateFns)}function Gk(n,e,t,r){let i=n?.[Oh]?.enter;e!==null&&i&&i.has(t.index)&&A6(r,i)}function sl(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;mi(i)?c=i:Yi(i)&&(d=!0,i=i[gi]);let h=Wr(i);n===0&&r!==null?(Gk(a,r,s,t),o==null?jM(e,r,h):Ym(e,r,h,o||null,!0)):n===1&&r!==null?(Gk(a,r,s,t),Ym(e,r,h,o||null,!0)):n===2?Wk(a,s,t,p=>{o6(e,h,d,p)}):n===3&&Wk(a,s,t,()=>{e.destroyNode(h)}),c!=null&&B6(e,n,t,c,s,r,o)}}function R6(n,e){ZM(n,e),e[gi]=null,e[zr]=null}function P6(n,e,t,r,i,s){r[gi]=i,r[zr]=e,fy(n,r,t,1,i,s)}function ZM(n,e){e[Ki].changeDetectionScheduler?.notify(9),fy(n,e,e[jt],2,null,null)}function N6(n){let e=n[Xu];if(!e)return iT(n[De],n);for(;e;){let t=null;if(Yi(e))t=e[Xu];else{let r=e[ur];r&&(t=r)}if(!t){for(;e&&!e[qr]&&e!==n;)Yi(e)&&iT(e[De],e),e=e[Cn];e===null&&(e=n),Yi(e)&&iT(e[De],e),t=e&&e[qr]}e=t}}function zT(n,e){let t=n[gc],r=t.indexOf(e);t.splice(r,1)}function XM(n,e){if(mc(e))return;let t=e[jt];t.destroyNode&&fy(n,e,t,3,null,null),N6(e)}function iT(n,e){if(mc(e))return;let t=Be(null);try{e[Pe]&=-129,e[Pe]|=256,e[Sr]&&yh(e[Sr]),x6(n,e),M6(n,e),e[De].type===1&&e[jt].destroy();let r=e[Qo];if(r!==null&&mi(e[Cn])){r!==e[Cn]&&zT(r,e);let i=e[Qi];i!==null&&i.detachView(n)}gT(e)}finally{Be(t)}}function Wk(n,e,t,r){let i=n?.[Oh];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ul.add(n),JM(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),k6(n,r)}else n&&ul.delete(n),r(!1)},i)}function k6(n,e){let t=n[Oh]?.running;if(t){t.then(()=>{n[Oh].running=void 0,ul.delete(n),e(!0)});return}e(!1)}function M6(n,e){let t=n.cleanup,r=e[Zu];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Zu]=null);let i=e[xs];if(i!==null){e[xs]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[xh];if(s!==null){e[xh]=null;for(let o of s)o.destroy()}}function x6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ec)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];wt(ot.LifecycleHookStart,a,c);try{c.call(a)}finally{wt(ot.LifecycleHookEnd,a,c)}}else{wt(ot.LifecycleHookStart,i,s);try{s.call(i)}finally{wt(ot.LifecycleHookEnd,i,s)}}}}}function O6(n,e,t){return L6(n,e.parent,t)}function L6(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[gi];if(Jo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===vi.None||i===vi.Emulated)return null}return yi(r,t)}function F6(n,e,t){return U6(n,e,t)}function V6(n,e,t){return n.type&40?yi(n,t):null}var U6=V6,Kk;function GT(n,e,t,r){let i=O6(n,r,e),s=e[jt],o=r.parent||e[zr],a=F6(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Hk(s,i,t[c],a,!1);else Hk(s,i,t,a,!1);Kk!==void 0&&Kk(s,r,e,t,i)}function Bh(n,e){if(e!==null){let t=e.type;if(t&3)return yi(e,n);if(t&4)return _T(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Bh(n,r);{let i=n[e.index];return mi(i)?_T(-1,i):Wr(i)}}else{if(t&128)return Bh(n,e.next);if(t&32)return HT(e,n)()||Wr(n[e.index]);{let r=ex(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zo(n[Gr]);return Bh(i,r)}else return Bh(n,e.next)}}}return null}function ex(n,e){if(e!==null){let r=n[Gr][zr],i=e.projection;return r.projection[i]}return null}function _T(n,e){let t=ur+n+1;if(t<e.length){let r=e[t],i=r[De].firstChild;if(i!==null)return Bh(r,i)}return e[Yo]}function WT(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Ko];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&cl(Wr(c),r),t.flags|=2),!LT(t))if(d&8)WT(n,e,t.child,r,i,s,!1),sl(e,n,a,i,c,t,s,r);else if(d&32){let h=HT(t,r),p;for(;p=h();)sl(e,n,a,i,p,t,s,r);sl(e,n,a,i,c,t,s,r)}else d&16?j6(n,e,r,t,i,s):sl(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function fy(n,e,t,r,i,s){WT(t,r,n.firstChild,e,i,s,!1)}function j6(n,e,t,r,i,s){let o=t[Gr],c=o[zr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];sl(e,n,t[Ko],i,h,r,s,t)}else{let d=c,h=o[Cn];SM(r)&&(d.flags|=128),WT(n,e,d,h,i,s,!0)}}function B6(n,e,t,r,i,s,o){let a=r[Yo],c=Wr(r);a!==c&&sl(e,n,t,s,a,i,o);for(let d=ur;d<r.length;d++){let h=r[d];fy(h[De],h,n,e,s,a)}}function $6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ts.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ts.Important),n.setStyle(t,r,i,s))}}function tx(n,e,t,r,i){let s=_c(),o=r&2;try{Zo(-1),o&&e.length>Dn&&KM(n,e,Dn,!1);let a=o?ot.TemplateUpdateStart:ot.TemplateCreateStart;wt(a,i,t),t(r,i)}finally{Zo(s);let a=o?ot.TemplateUpdateEnd:ot.TemplateCreateEnd;wt(a,i,t)}}function KT(n,e,t){Q6(n,e,t),(t.flags&64)===64&&Y6(n,e,t)}function QT(n,e,t=yi){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function H6(n,e,t,r){let s=r.get(MM,kM)||t===vi.ShadowDom||t===vi.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return q6(o),o}function q6(n){z6(n)}var z6=()=>null;function G6(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function nx(n,e,t,r,i,s){let o=e[De];if(YT(n,o,e,t,r)){Jo(n)&&K6(e,n.index);return}n.type&3&&(t=G6(t)),W6(n,e,t,r,i,s)}function W6(n,e,t,r,i,s){if(n.type&3){let o=yi(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function K6(n,e){let t=Kr(e,n);t[Pe]&16||(t[Pe]|=64)}function Q6(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Jo(t)&&T6(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Wm(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Hh(e,n,o,t);if(cl(c,e),s!==null&&eq(e,o-r,c,a,t,s),Ji(a)){let d=Kr(t.index,e);d[Qn]=Hh(e,n,o,t)}}}function Y6(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=Ck();try{Zo(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Dm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&J6(c,d)}}finally{Zo(-1),Dm(o)}}function J6(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rx(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];g6(e,s.selectors,!1)&&(r??=[],Ji(s)?r.unshift(s):r.push(s))}return r}function Z6(n,e,t,r,i,s){let o=yi(n,e);X6(e[jt],o,s,n.value,t,r,i)}function X6(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ah(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function eq(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];yT(r,t,c,d)}}function ix(n,e,t,r,i){let s=Dn+t,o=e[De],a=i(o,e,n,r,t);e[s]=a,nl(n,!0);let c=n.type===2;return c?(BM(e[jt],a,n),(gk()===0||Fh(n))&&cl(a,e),mk()):cl(a,e),Nm()&&(!c||!LT(n))&&GT(o,e,a,n),n}function sx(n){let e=n;return Hw()?vk():(e=e.parent,nl(e,!1)),e}function tq(n,e){let t=n[Ko];if(!t)return;let r;try{r=t.get(vr,null)}catch{r=null}r?.(e)}function YT(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],p=e.data[d];yT(p,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];yT(h,d,r,i),a=!0}return a}function nq(n,e){let t=Kr(e,n),r=t[De];rq(r,t);let i=t[gi];i!==null&&t[kh]===null&&(t[kh]=xM(i,t[Ko])),wt(ot.ComponentStart);try{JT(r,t,t[Qn])}finally{wt(ot.ComponentEnd,t[Qn])}}function rq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function JT(n,e,t){Am(e);try{let r=n.viewQuery;r!==null&&mT(1,r,t);let i=n.template;i!==null&&tx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Qi]?.finishViewCreation(n),n.staticContentQueries&&OM(n,e),n.staticViewQueries&&mT(2,n.viewQuery,t);let s=n.components;s!==null&&iq(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Pe]&=-5,Rm()}}function iq(n,e){for(let t=0;t<e.length;t++)nq(n,e[t])}function sq(n,e,t,r){let i=Be(null);try{let s=e.tView,a=n[Pe]&4096?4096:16,c=BT(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Qo]=d;let h=n[Qi];return h!==null&&(c[Qi]=h.createEmbeddedView(s)),JT(s,c,t),c}finally{Be(i)}}function Qk(n,e){return!e||e.firstChild===null||SM(n)}function qh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Wr(s)),mi(s)&&ox(s,r);let o=t.type;if(o&8)qh(n,e,t.child,r);else if(o&32){let a=HT(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ex(e,t);if(Array.isArray(a))r.push(...a);else{let c=zo(e[Gr]);qh(c[De],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function ox(n,e){for(let t=ur;t<n.length;t++){let r=n[t],i=r[De].firstChild;i!==null&&qh(r[De],r,i,e)}n[Yo]!==n[gi]&&e.push(n[Yo])}function ax(n){if(n[pc]!==null){for(let e of n[pc])e.impl.addSequence(e);n[pc].length=0}}var cx=[];function oq(n){return n[Sr]??aq(n)}function aq(n){let e=cx.pop()??Object.create(uq);return e.lView=n,e}function cq(n){n.lView[Sr]!==n&&(n.lView=null,cx.push(n))}var uq=Ce(z({},ph),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{tl(n.lView)},consumerOnSignalRead(){this.lView[Sr]=this}});function lq(n){let e=n[Sr]??Object.create(dq);return e.lView=n,e}var dq=Ce(z({},ph),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=zo(n.lView);for(;e&&!ux(e[De]);)e=zo(e);e&&xw(e)},consumerOnSignalRead(){this.lView[Sr]=this}});function ux(n){return n.type!==2}function lx(n){if(n[xh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[xh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Pe]&8192)}}var hq=100;function dx(n,e=0){let r=n[Ki].rendererFactory,i=!1;i||r.begin?.();try{fq(n,e)}finally{i||r.end?.()}}function fq(n,e){let t=qw();try{zw(!0),vT(n,e);let r=0;for(;Vh(n);){if(r===hq)throw new ie(103,!1);r++,vT(n,1)}}finally{zw(t)}}function pq(n,e,t,r){if(mc(e))return;let i=e[Pe],s=!1,o=!1;Am(e);let a=!0,c=null,d=null;s||(ux(n)?(d=oq(e),c=mh(d)):Ng()===null?(a=!1,d=lq(e),c=mh(d)):e[Sr]&&(yh(e[Sr]),e[Sr]=null));try{Mw(e),Ik(n.bindingStartIndex),t!==null&&tx(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let C=n.preOrderCheckHooks;C!==null&&Vm(e,C,null)}else{let C=n.preOrderHooks;C!==null&&Um(e,C,0,null),nT(e,0)}if(o||gq(e),lx(e),hx(e,0),n.contentQueries!==null&&OM(n,e),!s)if(h){let C=n.contentCheckHooks;C!==null&&Vm(e,C)}else{let C=n.contentHooks;C!==null&&Um(e,C,1),nT(e,1)}yq(n,e);let p=n.components;p!==null&&px(e,p,0);let E=n.viewQuery;if(E!==null&&mT(2,E,r),!s)if(h){let C=n.viewCheckHooks;C!==null&&Vm(e,C)}else{let C=n.viewHooks;C!==null&&Um(e,C,2),nT(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Em]){for(let C of e[Em])C();e[Em]=null}s||(ax(e),e[Pe]&=-73)}catch(h){throw s||tl(e),h}finally{d!==null&&(kg(d,c),a&&cq(d)),Rm()}}function hx(n,e){for(let t=RM(n);t!==null;t=PM(t))for(let r=ur;r<t.length;r++){let i=t[r];fx(i,e)}}function gq(n){for(let e=RM(n);e!==null;e=PM(e)){if(!(e[Pe]&2))continue;let t=e[gc];for(let r=0;r<t.length;r++){let i=t[r];xw(i)}}}function mq(n,e,t){wt(ot.ComponentStart);let r=Kr(e,n);try{fx(r,t)}finally{wt(ot.ComponentEnd,r[Qn])}}function fx(n,e){Tm(n)&&vT(n,e)}function vT(n,e){let r=n[De],i=n[Pe],s=n[Sr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Mg(s)),o||=!1,s&&(s.dirty=!1),n[Pe]&=-9217,o)pq(r,n,r.template,n[Qn]);else if(i&8192){let a=Be(null);try{lx(n),hx(n,1);let c=r.components;c!==null&&px(n,c,1),ax(n)}finally{Be(a)}}}function px(n,e,t){for(let r=0;r<e.length;r++)mq(n,e[r],t)}function yq(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Zo(~i);else{let s=i,o=t[++r],a=t[++r];bk(o,s);let c=e[s];wt(ot.HostBindingsUpdateStart,c);try{a(2,c)}finally{wt(ot.HostBindingsUpdateEnd,c)}}}}finally{Zo(-1)}}function ZT(n,e){let t=qw()?64:1088;for(n[Ki].changeDetectionScheduler?.notify(e);n;){n[Pe]|=t;let r=zo(n);if(el(n)&&!r)return n;n=r}return null}function gx(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function _q(n,e,t,r=!0){let i=e[De];if(vq(i,e,n,t),r){let o=_T(t,n),a=e[jt],c=a.parentNode(n[Yo]);c!==null&&P6(i,n[zr],a,e,c,o)}let s=e[kh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ET(n,e){if(n.length<=ur)return;let t=ur+e,r=n[t];if(r){let i=r[Qo];i!==null&&i!==n&&zT(i,r),e>0&&(n[t-1][qr]=r[qr]);let s=Rh(n,ur+e);R6(r[De],r);let o=s[Qi];o!==null&&o.detachView(s[De]),r[Cn]=null,r[qr]=null,r[Pe]&=-129}return r}function vq(n,e,t,r){let i=ur+r,s=t.length;r>0&&(t[i-1][qr]=e),r<s-ur?(e[qr]=t[i],Ew(t,ur+r,e)):(t.push(e),e[qr]=null),e[Cn]=t;let o=e[Qo];o!==null&&t!==o&&mx(o,e);let a=e[Qi];a!==null&&a.insertView(n),bm(e),e[Pe]|=128}function mx(n,e){let t=n[gc],r=e[Cn];if(Yi(r))n[Pe]|=2;else{let i=r[Cn][Gr];e[Gr]!==i&&(n[Pe]|=2)}t===null?n[gc]=[e]:t.push(e)}var Xo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[De];return qh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Qn]}set context(e){this._lView[Qn]=e}get destroyed(){return mc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Cn];if(mi(e)){let t=e[Lh],r=t?t.indexOf(this):-1;r>-1&&(ET(e,r),Rh(t,r))}this._attachedToViewContainer=!1}XM(this._lView[De],this._lView)}onDestroy(e){Ow(this._lView,e)}markForCheck(){ZT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Pe]&=-129}reattach(){bm(this._lView),this._lView[Pe]|=128}detectChanges(){this._lView[Pe]|=1024,dx(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=el(this._lView),t=this._lView[Qo];t!==null&&!e&&zT(t,this._lView),ZM(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=el(this._lView),r=this._lView[Qo];r!==null&&!t&&mx(r,this._lView),bm(this._lView)}};var ea=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Eq;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=sq(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Xo(s)}}return n})();function Eq(){return XT(An(),Qe())}function XT(n,e){return n.type&4?new ea(e,n,hl(n,e)):null}function py(n,e,t,r,i){let s=n.data[e];if(s===null)s=Iq(n,e,t,r,i),Tk()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=_k();s.injectorIndex=o===null?-1:o.injectorIndex}return nl(s,!0),s}function Iq(n,e,t,r,i){let s=$w(),o=Hw(),a=o?s:s&&s.parent,c=n.data[e]=Tq(n,a,t,e,r,i);return wq(n,c,s,o),c}function wq(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Tq(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return yk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var bq=()=>null;function Yk(n,e){return bq(n,e)}var yx=class{},gy=class{},IT=class{resolveComponentFactory(e){throw new ie(917,!1)}},Qh=class{static NULL=new IT},Ic=class{},Bs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Cq()}return n})();function Cq(){let n=Qe(),e=An(),t=Kr(e.index,n);return(Yi(t)?t:n)[jt]}var _x=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var Bm={},wT=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Bm,r);return i!==Bm||t===Bm?i:this.parentInjector.get(e,t,r)}};function Zm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=lw(i,a);else if(s==2){let c=a,d=e[++o];r=lw(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function We(n,e=0){let t=Qe();if(t===null)return ve(n,e);let r=An();return bM(r,t,Bn(n),e)}function eb(){let n="invalid";throw new Error(n)}function vx(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}Aq(n,e,t,a,s,c,d)}s!==null&&r!==null&&Dq(t,r,s)}function Dq(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ie(-301,!1);r.push(e[i],s)}}function Sq(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Aq(n,e,t,r,i,s,o){let a=r.length,c=null;for(let E=0;E<a;E++){let C=r[E];c===null&&Ji(C)&&(c=C,Sq(n,t,E)),fT(Wm(t,e),n,C.type)}xq(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let E=0;E<a;E++){let C=r[E];C.providersResolver&&C.providersResolver(C)}let d=!1,h=!1,p=WM(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let E=0;E<a;E++){let C=r[E];if(t.mergedAttrs=al(t.mergedAttrs,C.hostAttrs),Pq(n,t,e,p,C),Mq(p,C,i),o!==null&&o.has(C)){let[N,P]=o.get(C);t.directiveToIndex.set(C.type,[p,N+t.directiveStart,P+t.directiveStart])}else(s===null||!s.has(C))&&t.directiveToIndex.set(C.type,p);C.contentQueries!==null&&(t.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(t.flags|=64);let R=C.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}Rq(n,t,s)}function Rq(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Jk(0,e,i,r),Jk(1,e,i,r),Xk(e,r,!1);else{let s=t.get(i);Zk(0,e,s,r),Zk(1,e,s,r),Xk(e,r,!0)}}}function Jk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),Ex(e,s)}}function Zk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),Ex(e,o)}}function Ex(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Xk(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||UT(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function Pq(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=qo(i.type,!0)),o=new Ec(s,Ji(i),We,null);n.blueprint[r]=o,t[r]=o,Nq(n,e,r,WM(n,t,i.hostVars,js),i)}function Nq(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;kq(o)!=a&&o.push(a),o.push(t,r,s)}}function kq(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Mq(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ji(e)&&(t[""]=n)}}function xq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Ix(n,e,t,r,i,s,o,a){let c=e[De],d=c.consts,h=yc(d,o),p=py(c,n,t,r,h);return s&&vx(c,e,p,yc(d,a),i),p.mergedAttrs=al(p.mergedAttrs,p.attrs),p.attrs!==null&&Zm(p,p.attrs,!1),p.mergedAttrs!==null&&Zm(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function wx(n,e){gM(n,e),Pw(e)&&n.queries.elementEnd(e)}function Oq(n,e,t,r,i,s){let o=e.consts,a=yc(o,i),c=py(e,n,t,r,a);if(c.mergedAttrs=al(c.mergedAttrs,c.attrs),s!=null){let d=yc(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&Zm(c,c.attrs,!1),c.mergedAttrs!==null&&Zm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function tb(n){return bx(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Tx(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bx(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Cx(n,e,t){return n[e]=t}function ta(n,e,t){if(t===js)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Lq(n,e,t,r){let i=ta(n,e,t);return ta(n,e+1,r)||i}function $m(n,e,t){return function r(i){let s=Jo(n)?Kr(n.index,e):e;ZT(s,5);let o=e[Qn],a=eM(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=eM(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function eM(n,e,t,r){let i=Be(null);try{return wt(ot.OutputStart,e,t),t(r)!==!1}catch(s){return tq(n,s),!1}finally{wt(ot.OutputEnd,e,t),Be(i)}}function Dx(n,e,t,r,i,s,o,a){let c=Fh(n),d=!1,h=null;if(!r&&c&&(h=Vq(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let p=yi(n,t),E=r?r(p):p;e6(t,E,s,a);let C=i.listen(E,s,a);if(!Fq(s)){let R=r?N=>r(Wr(N[n.index])):n.index;Sx(R,e,t,s,a,C,!1)}}return d}function Fq(n){return n.startsWith("animation")||n.startsWith("transition")}function Vq(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Zu],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Sx(n,e,t,r,i,s,o){let a=e.firstCreatePass?Fw(e):null,c=Lw(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function tM(n,e,t,r,i,s){let o=e[t],a=e[De],d=a.data[t].outputs[r],p=o[d].subscribe(s);Sx(n.index,a,e,i,s,p,!0)}var TT=Symbol("BINDING");var Xm=class extends Qh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Vs(e);return new wc(t,this.ngModule)}};function Uq(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&ly.SignalBased)!==0};return i&&(s.transform=i),s})}function jq(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Bq(n,e,t){let r=e instanceof Yt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new wT(t,r):t}function $q(n){let e=n.get(Ic,null);if(e===null)throw new ie(407,!1);let t=n.get(_x,null),r=n.get(Ls,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Hq(n,e){let t=Ax(n);return UM(e,t,t==="svg"?ck:t==="math"?uk:null)}function Ax(n){return(n.selectors[0][0]||"div").toLowerCase()}var wc=class extends gy{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Uq(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=jq(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=v6(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){wt(ot.DynamicComponentStart);let a=Be(null);try{let c=this.componentDef,d=qq(r,c,o,s),h=Bq(c,i||this.ngModule,e),p=$q(h),E=p.rendererFactory.createRenderer(null,c),C=r?H6(E,r,c.encapsulation,h):Hq(c,E),R=o?.some(nM)||s?.some(H=>typeof H!="function"&&H.bindings.some(nM)),N=BT(null,d,null,512|GM(c),null,null,p,E,h,null,xM(C,h,!0));N[Dn]=C,Am(N);let P=null;try{let H=Ix(Dn,N,2,"#host",()=>d.directiveRegistry,!0,0);BM(E,C,H),cl(C,N),KT(d,N,H),LM(d,H,N),wx(d,H),t!==void 0&&Gq(H,this.ngContentSelectors,t),P=Kr(H.index,N),N[Qn]=P[Qn],JT(d,N,null)}catch(H){throw P!==null&&gT(P),gT(N),H}finally{wt(ot.DynamicComponentEnd),Rm()}return new ey(this.componentType,N,!!R)}finally{Be(a)}}};function qq(n,e,t,r){let i=n?["ng-version","21.0.3"]:E6(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[TT].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let E of p.bindings){a+=E[TT].requiredVars;let C=h+1;E.create&&(E.targetIdx=C,(s??=[]).push(E)),E.update&&(E.targetIdx=C,(o??=[]).push(E))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,E=bw(p);c.push(E)}return jT(0,null,zq(s,o),1,a,c,null,null,null,[i],null)}function zq(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function nM(n){let e=n[TT].kind;return e==="input"||e==="twoWay"}var ey=class extends yx{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Im(t[De],Dn),this.location=hl(this._tNode,t),this.instance=Kr(this._tNode.index,t)[Qn],this.hostView=this.changeDetectorRef=new Xo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=YT(r,i[De],i,e,t);this.previousInputValues.set(e,t);let o=Kr(r.index,i);ZT(o,1)}get injector(){return new vc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Gq(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var $s=(()=>{class n{static __NG_ELEMENT_ID__=Wq}return n})();function Wq(){let n=An();return Px(n,Qe())}var Kq=$s,Rx=class extends Kq{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return hl(this._hostTNode,this._hostLView)}get injector(){return new vc(this._hostTNode,this._hostLView)}get parentInjector(){let e=kT(this._hostTNode,this._hostLView);if(_M(e)){let t=zm(e,this._hostLView),r=qm(e),i=t[De].data[r+8];return new vc(i,t)}else return new vc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=rM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ur}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Yk(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Qk(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!DH(e),d;if(c)d=t;else{let P=t||{};d=P.index,r=P.injector,i=P.projectableNodes,s=P.environmentInjector||P.ngModuleRef,o=P.directives,a=P.bindings}let h=c?e:new wc(Vs(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let H=(c?p:this.parentInjector).get(Yt,null);H&&(s=H)}let E=Vs(h.componentType??{}),C=Yk(this._lContainer,E?.id??null),R=C?.firstChild??null,N=h.create(p,i,R,s,o,a);return this.insertImpl(N.hostView,d,Qk(this._hostTNode,C)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Cn],d=new Rx(c,c[zr],c[Cn]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return _q(o,i,s,r),e.attachToViewContainerRef(),Ew(sT(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=rM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ET(this._lContainer,t);r&&(Rh(sT(this._lContainer),t),XM(r[De],r))}detach(e){let t=this._adjustIndex(e,-1),r=ET(this._lContainer,t);return r&&Rh(sT(this._lContainer),t)!=null?new Xo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function rM(n){return n[Lh]}function sT(n){return n[Lh]||(n[Lh]=[])}function Px(n,e){let t,r=e[n.index];return mi(r)?t=r:(t=gx(r,e,null,n),e[n.index]=t,$T(e,t)),Yq(t,e,n,r),new Rx(t,n,e)}function Qq(n,e){let t=n[jt],r=t.createComment(""),i=yi(e,n),s=t.parentNode(i);return Ym(t,s,r,t.nextSibling(i),!1),r}var Yq=Xq,Jq=()=>!1;function Zq(n,e,t){return Jq(n,e,t)}function Xq(n,e,t,r){if(n[Yo])return;let i;t.type&8?i=Wr(r):i=Qq(e,t),n[Yo]=i}var bT=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},CT=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)nb(e,t).matches!==null&&this.queries[t].setDirty()}},ty=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=a3(e):this.predicate=e}},DT=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ST=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,e3(t,s)),this.matchTNodeWithReadOption(e,t,jm(t,e,s,!1,!1))}else r===ea?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jm(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Rr||i===$s||i===ea&&t.type&4)this.addMatch(t.index,-2);else{let s=jm(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function e3(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function t3(n,e){return n.type&11?hl(n,e):n.type&4?XT(n,e):null}function n3(n,e,t,r){return t===-1?t3(e,n):t===-2?r3(n,e,r):Hh(n,n[De],t,e)}function r3(n,e,t){if(t===Rr)return hl(e,n);if(t===ea)return XT(e,n);if(t===$s)return Px(e,n)}function Nx(n,e,t,r){let i=e[Qi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let d=o[c];if(d<0)a.push(null);else{let h=s[d];a.push(n3(e,h,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function AT(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=Nx(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let d=s[a+1],h=e[-c];for(let p=ur;p<h.length;p++){let E=h[p];E[Qo]===E[Cn]&&AT(E[De],E,d,r)}if(h[gc]!==null){let p=h[gc];for(let E=0;E<p.length;E++){let C=p[E];AT(C[De],C,d,r)}}}}}return r}function i3(n,e){return n[Qi].queries[e].queryList}function kx(n,e,t){let r=new Km((t&4)===4);return pk(n,e,r,r.destroy),(e[Qi]??=new CT).queries.push(new bT(r))-1}function s3(n,e,t){let r=Sn();return r.firstCreatePass&&(Mx(r,new ty(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),kx(r,Qe(),e)}function o3(n,e,t,r){let i=Sn();if(i.firstCreatePass){let s=An();Mx(i,new ty(e,t,r),s.index),c3(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return kx(i,Qe(),t)}function a3(n){return n.split(",").map(e=>e.trim())}function Mx(n,e,t){n.queries===null&&(n.queries=new DT),n.queries.track(new ST(e,t))}function c3(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function nb(n,e){return n.queries.getByIndex(e)}function u3(n,e){let t=n[De],r=nb(t,e);return r.crossesNgTemplate?AT(t,n,e,[]):Nx(t,n,r,e)}var Tc=class{},my=class{};var ny=class extends Tc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Xm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Tw(e);this._bootstrapComponents=qM(s.bootstrap),this._r3Injector=Qw(e,t,[{provide:Tc,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver},...r],Os(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ry=class extends my{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ny(this.moduleType,e,[])}};var zh=class extends Tc{injector;componentFactoryResolver=new Xm(this);instance=null;constructor(e){super();let t=new uc([...e.providers,{provide:Tc,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],e.parent||Nh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function fl(n,e,t=null){return new zh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var l3=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Cw(!1,t.type),i=r.length>0?fl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(ve(Yt))})}return n})();function $n(n){return dl(()=>{let e=xx(n),t=Ce(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===MT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(l3).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vi.Emulated,styles:n.styles||Dr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ac("NgStandalone"),Ox(t);let r=n.dependencies;return t.directiveDefs=iM(r,d3),t.pipeDefs=iM(r,tk),t.id=p3(t),t})}function d3(n){return Vs(n)||bw(n)}function Ei(n){return dl(()=>({type:n.type,bootstrap:n.bootstrap||Dr,declarations:n.declarations||Dr,imports:n.imports||Dr,exports:n.exports||Dr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function h3(n,e){if(n==null)return Go;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=ly.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function f3(n){if(n==null)return Go;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function lr(n){return dl(()=>{let e=xx(n);return Ox(e),e})}function yy(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function xx(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Go,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Dr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:h3(n.inputs,e),outputs:f3(n.outputs),debugInfo:null}}function Ox(n){n.features?.forEach(e=>e(n))}function iM(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function p3(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function g3(n){return Object.getPrototypeOf(n.prototype).constructor}function Rc(n){let e=g3(n.type),t=!0,r=[n];for(;e;){let i;if(Ji(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=oT(n.inputs),o.declaredInputs=oT(n.declaredInputs),o.outputs=oT(n.outputs);let a=i.hostBindings;a&&E3(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&_3(n,c),d&&v3(n,d),m3(n,i),zN(n.outputs,i.outputs),Ji(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Rc&&(t=!1)}}e=Object.getPrototypeOf(e)}y3(r)}function m3(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function y3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=al(i.hostAttrs,t=al(t,i.hostAttrs))}}function oT(n){return n===Go?{}:n===Dr?[]:n}function _3(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function v3(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function E3(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function I3(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=al(n.mergedAttrs,n.attrs);let h=n.tView=jT(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),nl(n,!1);let c=T3(t,e,n,r);Nm()&&GT(t,e,c,n),cl(c,e);let d=gx(c,e,c,n);e[r+Dn]=d,$T(e,d),Zq(d,n,e)}function w3(n,e,t,r,i,s,o,a,c,d,h){let p=t+Dn,E;return e.firstCreatePass?(E=py(e,p,4,o||null,a||null),Uw()&&vx(e,n,E,yc(e.consts,d),rx),gM(e,E)):E=e.data[p],I3(E,n,e,t,r,i,s,c),Fh(E)&&KT(e,n,E),d!=null&&QT(n,E,h),E}function Xt(n,e,t,r,i,s,o,a){let c=Qe(),d=Sn(),h=yc(d.consts,s);return w3(c,d,n,e,t,r,i,h,void 0,o,a),Xt}var T3=b3;function b3(n,e,t,r){return km(!0),e[jt].createComment("")}var rb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Lx(n){return typeof n=="function"&&n[or]!==void 0}function ib(n){return Lx(n)&&typeof n.set=="function"}var sb=new ae("");function Hs(n){return!!n&&typeof n.then=="function"}function _y(n){return!!n&&typeof n.subscribe=="function"}var ob=new ae("");function pl(n){return cr([{provide:ob,multi:!0,useValue:n}])}var ab=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=x(ob,{optional:!0})??[];injector=x(Lt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=sn(this.injector,i);if(Hs(s))t.push(s);else if(_y(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yh=new ae("");function Fx(){PI(()=>{let n="";throw new ie(600,n)})}function Vx(n){return n.isBoundToModule}var C3=10;var Ii=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(vr);afterRenderManager=x(qT);zonelessEnabled=x(rl);rootEffectScheduler=x(tT);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new kt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(Xi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ge(t=>!t))}constructor(){x(Sc,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=x(Yt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Lt.NULL){return this._injector.get(et).run(()=>{wt(ot.BootstrapComponentStart);let o=t instanceof gy;if(!this._injector.get(ab).done){let R="";throw new ie(405,R)}let c;o?c=t:c=this._injector.get(Qh).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=Vx(c)?void 0:this._injector.get(Tc),h=r||c.selector,p=c.create(i,[],h,d),E=p.location.nativeElement,C=p.injector.get(sb,null);return C?.registerApplication(E),p.onDestroy(()=>{this.detachView(p.hostView),$h(this.components,p),C?.unregisterApplication(E)}),this._loadComponent(p),wt(ot.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){wt(ot.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(dy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw wt(ot.ChangeDetectionEnd),new ie(101,!1);let t=Be(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Be(t),this.afterTick.next(),wt(ot.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ic,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<C3;){wt(ot.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{wt(ot.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Vh(i))continue;let s=r&&!this.zonelessEnabled?0:1;dx(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Vh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;$h(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Yh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$h(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $h(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Jh(n,e,t,r){let i=Qe(),s=Uh();if(ta(i,s,e)){let o=Sn(),a=Pm();Z6(a,i,n,e,t,r)}return Jh}var Qce=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function dt(n,e,t){let r=Qe(),i=Uh();if(ta(r,i,e)){let s=Sn(),o=Pm();nx(o,r,n,e,r[jt],t)}return dt}function sM(n,e,t,r,i){YT(e,n,t,i?"class":"style",r)}function K(n,e,t,r){let i=Qe(),s=i[De],o=n+Dn,a=s.firstCreatePass?Ix(o,i,2,e,rx,Uw(),t,r):s.data[o];if(ix(a,i,n,e,Ux),Fh(a)){let c=i[De];KT(c,i,a),LM(c,a,i)}return r!=null&&QT(i,a),K}function J(){let n=Sn(),e=An(),t=sx(e);return n.firstCreatePass&&wx(n,t),jw(t)&&Bw(),Vw(),t.classesWithoutHost!=null&&kH(t)&&sM(n,t,Qe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&MH(t)&&sM(n,t,Qe(),t.stylesWithoutHost,!1),J}function Yn(n,e,t,r){return K(n,e,t,r),J(),Yn}function Zh(n,e,t,r){let i=Qe(),s=i[De],o=n+Dn,a=s.firstCreatePass?Oq(o,s,2,e,t,r):s.data[o];return ix(a,i,n,e,Ux),r!=null&&QT(i,a),Zh}function Xh(){let n=An(),e=sx(n);return jw(e)&&Bw(),Vw(),Xh}var Ux=(n,e,t,r,i)=>(km(!0),UM(e[jt],r,Nk()));function Rn(){return Qe()}var jh=void 0;function D3(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var S3=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",jh,jh,jh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",D3],aT={};function Pr(n){let e=A3(n),t=oM(e);if(t)return t;let r=e.split("-")[0];if(t=oM(r),t)return t;if(r==="en")return S3;throw new ie(701,!1)}function oM(n){return n in aT||(aT[n]=Fs.ng&&Fs.ng.common&&Fs.ng.common.locales&&Fs.ng.common.locales[n]),aT[n]}var en=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(en||{});function A3(n){return n.toLowerCase().replace(/_/g,"-")}var ef="en-US";var R3=ef;function jx(n){typeof n=="string"&&(R3=n.toLowerCase().replace(/_/g,"-"))}function qe(n,e,t){let r=Qe(),i=Sn(),s=An();return Bx(i,r,r[jt],s,n,e,t),qe}function vy(n,e,t){let r=Qe(),i=Sn(),s=An();return(s.type&3||t)&&Dx(s,i,r,t,r[jt],n,e,$m(s,r,e)),vy}function Bx(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=$m(r,e,s),Dx(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let E=h[p],C=h[p+1];c??=$m(r,e,s),tM(r,e,E,C,i,c)}if(d&&d.length)for(let p of d)c??=$m(r,e,s),tM(r,e,p,i,i,c)}}function gt(n=1){return Pk(n)}function cb(n,e,t,r){o3(n,e,t,r)}function ub(n,e,t){s3(n,e,t)}function tf(n){let e=Qe(),t=Sn(),r=Gw();Sm(r+1);let i=nb(t,r);if(n.dirty&&lk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=u3(e,r);n.reset(s,GH),n.notifyOnChanges()}return!0}return!1}function nf(){return i3(Qe(),Gw())}function rf(n){let e=Ek();return wm(e,Dn+n)}function Fm(n,e){return n<<17|e<<2}function bc(n){return n>>17&32767}function P3(n){return(n&2)==2}function N3(n,e){return n&131071|e<<17}function RT(n){return n|2}function ll(n){return(n&131068)>>2}function cT(n,e){return n&-131069|e<<2}function k3(n){return(n&1)===1}function PT(n){return n|1}function M3(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=bc(o),c=ll(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ju(p,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let E=bc(n[a+1]);n[r+1]=Fm(E,a),E!==0&&(n[E+1]=cT(n[E+1],r)),n[a+1]=N3(n[a+1],r)}else n[r+1]=Fm(a,0),a!==0&&(n[a+1]=cT(n[a+1],r)),a=r;else n[r+1]=Fm(c,0),a===0?a=r:n[c+1]=cT(n[c+1],r),c=r;d&&(n[r+1]=RT(n[r+1])),aM(n,h,r,!0),aM(n,h,r,!1),x3(e,h,n,r,s),o=Fm(a,c),s?e.classBindings=o:e.styleBindings=o}function x3(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ju(s,e)>=0&&(t[r+1]=PT(t[r+1]))}function aM(n,e,t,r){let i=n[t+1],s=e===null,o=r?bc(i):ll(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];O3(c,e)&&(a=!0,n[o+1]=r?PT(d):RT(d)),o=r?bc(d):ll(d)}a&&(n[t+1]=r?RT(i):PT(i))}function O3(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ju(n,e)>=0:!1}function gl(n,e){return L3(n,e,null,!0),gl}function L3(n,e,t,r){let i=Qe(),s=Sn(),o=wk(2);if(s.firstUpdatePass&&V3(s,n,o,r),e!==js&&ta(i,o,e)){let a=s.data[_c()];H3(s,a,i,i[jt],n,i[o+1]=q3(e,t),r,o)}}function F3(n,e){return e>=n.expandoStartIndex}function V3(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[_c()],o=F3(n,t);z3(s,r)&&e===null&&!o&&(e=!1),e=U3(i,s,e,r),M3(i,s,e,t,o,r)}}function U3(n,e,t,r){let i=Dk(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=uT(null,n,e,t,r),t=Gh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=uT(i,n,e,t,r),s===null){let c=j3(n,e,r);c!==void 0&&Array.isArray(c)&&(c=uT(null,n,e,c[1],r),c=Gh(c,e.attrs,r),B3(n,e,r,c))}else s=$3(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function j3(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ll(r)!==0)return n[bc(r)]}function B3(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[bc(i)]=r}function $3(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Gh(r,o,t)}return Gh(r,e.attrs,t)}function uT(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Gh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Gh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ek(n,o,t?!0:e[++s]))}return n===void 0?null:n}function H3(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=k3(d)?cM(c,e,t,i,ll(d),o):void 0;if(!iy(h)){iy(s)||P3(d)&&(s=cM(c,null,t,i,a,o));let p=Nw(_c(),t);$6(r,o,p,i,s)}}function cM(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,p=h===null,E=t[i+1];E===js&&(E=p?Dr:void 0);let C=p?vm(E,r):h===r?E:void 0;if(d&&!iy(C)&&(C=vm(c,r)),iy(C)&&(a=C,o))return a;let R=n[i+1];i=o?bc(R):ll(R)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=vm(c,r))}return a}function iy(n){return n!==void 0}function q3(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Os(Kh(n)))),n}function z3(n,e){return(n.flags&(e?8:16))!==0}function ce(n,e=""){let t=Qe(),r=Sn(),i=n+Dn,s=r.firstCreatePass?py(r,i,1,e,null):r.data[i],o=G3(r,t,s,e,n);t[i]=o,Nm()&&GT(r,t,o,s),nl(s,!1)}var G3=(n,e,t,r,i)=>(km(!0),i6(e[jt],r));function W3(n,e,t,r=""){return ta(n,Uh(),t)?e+Ah(t)+r:js}function Jn(n){return ns("",n),Jn}function ns(n,e,t){let r=Qe(),i=W3(r,n,e,t);return i!==js&&K3(r,_c(),i),ns}function K3(n,e,t){let r=Nw(e,n);s6(n[jt],r,t)}function Ey(n,e,t){ib(e)&&(e=e());let r=Qe(),i=Uh();if(ta(r,i,e)){let s=Sn(),o=Pm();nx(o,r,n,e,r[jt],t)}return Ey}function lb(n,e){let t=ib(n);return t&&n.set(e),t}function Iy(n,e){let t=Qe(),r=Sn(),i=An();return Bx(r,t,t[jt],i,n,e),Iy}function uM(n,e,t){let r=Sn();r.firstCreatePass&&$x(e,r.data,r.blueprint,Ji(n),t)}function $x(n,e,t,r,i){if(n=Bn(n),Array.isArray(n))for(let s=0;s<n.length;s++)$x(n[s],e,t,r,i);else{let s=Sn(),o=Qe(),a=An(),c=cc(n)?n:Bn(n.provide),d=Sw(n),h=a.providerIndexes&1048575,p=a.directiveStart,E=a.providerIndexes>>20;if(cc(n)||!n.multi){let C=new Ec(d,i,We,null),R=dT(c,e,i?h:h+E,p);R===-1?(fT(Wm(a,o),s,c),lT(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(C),o.push(C)):(t[R]=C,o[R]=C)}else{let C=dT(c,e,h+E,p),R=dT(c,e,h,h+E),N=C>=0&&t[C],P=R>=0&&t[R];if(i&&!P||!i&&!N){fT(Wm(a,o),s,c);let H=J3(i?Y3:Q3,t.length,i,r,d,n);!i&&P&&(t[R].providerFactory=H),lT(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=Hx(t[i?R:C],d,!i&&r);lT(s,n,C>-1?C:R,H)}!i&&r&&P&&t[R].componentProviders++}}}function lT(n,e,t,r){let i=cc(e),s=sk(e);if(i||s){let c=(s?Bn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function Hx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Q3(n,e,t,r,i){return NT(this.multi,[])}function Y3(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Hh(r,r[De],this.providerFactory.index,i);o=c.slice(0,a),NT(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],NT(s,o);return o}function NT(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function J3(n,e,t,r,i,s){let o=new Ec(n,t,We,null);return o.multi=[],o.index=e,o.componentProviders=0,Hx(o,i,r&&!t),o}function wy(n,e){return t=>{t.providersResolver=(r,i)=>uM(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>uM(r,i?i(e):e,!0))}}function db(n,e,t,r){return zx(Qe(),Cm(),n,e,t,r)}function qx(n,e){let t=n[e];return t===js?void 0:t}function zx(n,e,t,r,i,s){let o=e+t;return ta(n,o,i)?Cx(n,o+1,s?r.call(s,i):r(i)):qx(n,o+1)}function Z3(n,e,t,r,i,s,o){let a=e+t;return Lq(n,a,i,s)?Cx(n,a+2,o?r.call(o,i,s):r(i,s)):qx(n,a+2)}function sf(n,e){let t=Sn(),r,i=n+Dn;t.firstCreatePass?(r=X3(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=qo(r.type,!0)),o,a=ar(We);try{let c=Gm(!1),d=s();return Gm(c),kw(t,Qe(),i,d),d}finally{ar(a)}}function X3(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function hb(n,e,t){let r=n+Dn,i=Qe(),s=wm(i,r);return Gx(i,r)?zx(i,Cm(),e,s.transform,t,s):s.transform(t)}function fb(n,e,t,r){let i=n+Dn,s=Qe(),o=wm(s,i);return Gx(s,i)?Z3(s,Cm(),e,o.transform,t,r,o):o.transform(t,r)}function Gx(n,e){return n[De].data[e].pure}var sy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},pb=(()=>{class n{compileModuleSync(t){return new ry(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Tw(t),s=qM(i.declarations).reduce((o,a)=>{let c=Vs(a);return c&&o.push(new wc(c)),o},[]);return new sy(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wx=(()=>{class n{applicationErrorHandler=x(vr);appRef=x(Ii);taskService=x(Xi);ngZone=x(et);zonelessEnabled=x(rl);tracing=x(Sc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Qt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ch):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(xm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Zw:Jw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ch+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Zw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kx(){return[{provide:Ls,useExisting:Wx},{provide:et,useClass:Dh},{provide:rl,useValue:!0}]}function ez(){return typeof $localize<"u"&&$localize.locale||ef}var of=new ae("",{factory:()=>x(of,{optional:!0,skipSelf:!0})||ez()});function af(n,e){return xg(n,e?.equal)}var Xx=Symbol("InputSignalNode#UNSET"),hz=Ce(z({},Og),{transformFn:void 0,applyValueToInputSignal(n,e){_h(n,e)}});function eO(n,e){let t=Object.create(hz);t.value=n,t.transformFn=e?.transform;function r(){if(gh(t),t.value===Xx){let i=null;throw new ie(-950,i)}return t.value}return r[or]=t,r}var by=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Wh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function Qx(n,e){return eO(n,e)}function fz(n){return eO(Xx,n)}var tO=(Qx.required=fz,Qx);var pz=(()=>{class n{zone=x(et);changeDetectionScheduler=x(Ls);applicationRef=x(Ii);applicationErrorHandler=x(vr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gz=new ae("",{factory:()=>!1});function mz({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new et(Ce(z({},rO()),{scheduleInRootZone:e})),[{provide:rl,useValue:!1},{provide:et,useFactory:n},{provide:Wo,multi:!0,useFactory:()=>{let t=x(pz,{optional:!0});return()=>t.initialize()}},{provide:Wo,multi:!0,useFactory:()=>{let t=x(yz);return()=>{t.initialize()}}},{provide:xm,useValue:e??Yw}]}function nO(n){let e=n?.scheduleInRootZone,t=mz({ngZoneFactory:()=>{let r=rO(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&Ac("NgZone_CoalesceEvent"),new et(r)},scheduleInRootZone:e});return cr([{provide:gz,useValue:!0},t])}function rO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yz=(()=>{class n{subscription=new Qt;initialized=!1;zone=x(et);pendingTasks=x(Xi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{et.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{et.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gb=new ae(""),_z=new ae("");function cf(n){return!n.moduleRef}function vz(n){let e=cf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(et);return t.run(()=>{cf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(vr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),cf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(gb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(gb);o.add(s),n.moduleRef.onDestroy(()=>{$h(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return Iz(r,t,()=>{let s=e.get(Xi),o=s.add(),a=e.get(ab);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(of,ef);if(jx(c||ef),!e.get(_z,!0))return cf(n)?e.get(Ii):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(cf(n)){let h=e.get(Ii);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return Ez?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var Ez;function Iz(n,e,t){try{let r=t();return Hs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ty=null;function wz(n=[],e){return Lt.create({name:e,providers:[{provide:Ph,useValue:"platform"},{provide:gb,useValue:new Set([()=>Ty=null])},...n]})}function Tz(n=[]){if(Ty)return Ty;let e=wz(n);return Ty=e,Fx(),bz(e),e}function bz(n){let e=n.get(ay,null);sn(n,()=>{e?.forEach(t=>t())})}function uf(){return!1}var qs=(()=>{class n{static __NG_ELEMENT_ID__=Cz}return n})();function Cz(n){return Dz(An(),Qe(),(n&16)===16)}function Dz(n,e,t){if(Jo(n)&&!t){let r=Kr(n.index,e);return new Xo(r,r)}else if(n.type&175){let r=e[Gr];return new Xo(r,e)}return null}var mb=class{constructor(){}supports(e){return tb(e)}create(e){return new yb(e)}},Sz=(n,e)=>e,yb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Sz}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<Yx(r,i,s)?t:r,a=Yx(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let E=0;E<d;E++){let C=E<s.length?s[E]:s[E]=0,R=C+E;h<=R&&R<d&&(s[E]=C+1)}let p=o.previousIndex;s[p]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!tb(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Tx(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new _b(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Cy),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},_b=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},vb=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Cy=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new vb,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Yx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Jx(){return new Eb([new mb])}var Eb=(()=>{class n{factories;static \u0275prov=re({token:n,providedIn:"root",factory:Jx});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=x(n,{optional:!0,skipSelf:!0});return n.create(t,r||Jx())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ie(901,!1)}}return n})();function iO(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;wt(ot.BootstrapApplicationStart);try{let s=i?.injector??Tz(r),o=[Kx(),xk,...t||[]],a=new zh({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return vz({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{wt(ot.BootstrapApplicationEnd)}}function Nc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function sO(n){let e=Vs(n);if(!e)return null;let t=new wc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var oO=null;function Qr(){return oO}function Ib(n){oO??=n}var lf=class{},ml=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>x(aO),providedIn:"platform"})}return n})(),wb=new ae(""),aO=(()=>{class n extends ml{_location;_history;_doc=x(Jt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qr().getBaseHref(this._doc)}onPopState(t){let r=Qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Dy(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function cO(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function wi(n){return n&&n[0]!=="?"?`?${n}`:n}var Ti=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>x(Ay),providedIn:"root"})}return n})(),Sy=new ae(""),Ay=(()=>{class n extends Ti{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Dy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+wi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+wi(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+wi(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ve(ml),ve(Sy,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ra=(()=>{class n{_subject=new kt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Pz(cO(uO(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+wi(r))}normalize(t){return n.stripTrailingSlash(Rz(this._basePath,uO(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=wi;static joinWithSlash=Dy;static stripTrailingSlash=cO;static \u0275fac=function(r){return new(r||n)(ve(Ti))};static \u0275prov=re({token:n,factory:()=>Az(),providedIn:"root"})}return n})();function Az(){return new ra(ve(Ti))}function Rz(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function uO(n){return n.replace(/\/index.html$/,"")}function Pz(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ab=(()=>{class n extends Ti{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Dy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+wi(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+wi(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ve(ml),ve(Sy,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var Zn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Zn||{}),Pt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Pt||{}),Er=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Er||{}),Gs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function fO(n){return Pr(n)[en.LocaleId]}function pO(n,e,t){let r=Pr(n),i=[r[en.DayPeriodsFormat],r[en.DayPeriodsStandalone]],s=Yr(i,e);return Yr(s,t)}function gO(n,e,t){let r=Pr(n),i=[r[en.DaysFormat],r[en.DaysStandalone]],s=Yr(i,e);return Yr(s,t)}function mO(n,e,t){let r=Pr(n),i=[r[en.MonthsFormat],r[en.MonthsStandalone]],s=Yr(i,e);return Yr(s,t)}function yO(n,e){let r=Pr(n)[en.Eras];return Yr(r,e)}function df(n,e){let t=Pr(n);return Yr(t[en.DateFormat],e)}function hf(n,e){let t=Pr(n);return Yr(t[en.TimeFormat],e)}function ff(n,e){let r=Pr(n)[en.DateTimeFormat];return Yr(r,e)}function pf(n,e){let t=Pr(n),r=t[en.NumberSymbols][e];if(typeof r>"u"){if(e===Gs.CurrencyDecimal)return t[en.NumberSymbols][Gs.Decimal];if(e===Gs.CurrencyGroup)return t[en.NumberSymbols][Gs.Group]}return r}function _O(n){if(!n[en.ExtraData])throw new ie(2303,!1)}function vO(n){let e=Pr(n);return _O(e),(e[en.ExtraData][2]||[]).map(r=>typeof r=="string"?Tb(r):[Tb(r[0]),Tb(r[1])])}function EO(n,e,t){let r=Pr(n);_O(r);let i=[r[en.ExtraData][0],r[en.ExtraData][1]],s=Yr(i,e)||[];return Yr(s,t)||[]}function Yr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ie(2304,!1)}function Tb(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Nz=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ry={},kz=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function IO(n,e,t,r){let i=Bz(n);e=zs(t,e)||e;let o=[],a;for(;e;)if(a=kz.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=TO(r,c),i=jz(i,r));let d="";return o.forEach(h=>{let p=Vz(h);d+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function xy(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function zs(n,e){let t=fO(n);if(Ry[t]??={},Ry[t][e])return Ry[t][e];let r="";switch(e){case"shortDate":r=df(n,Er.Short);break;case"mediumDate":r=df(n,Er.Medium);break;case"longDate":r=df(n,Er.Long);break;case"fullDate":r=df(n,Er.Full);break;case"shortTime":r=hf(n,Er.Short);break;case"mediumTime":r=hf(n,Er.Medium);break;case"longTime":r=hf(n,Er.Long);break;case"fullTime":r=hf(n,Er.Full);break;case"short":let i=zs(n,"shortTime"),s=zs(n,"shortDate");r=Py(ff(n,Er.Short),[i,s]);break;case"medium":let o=zs(n,"mediumTime"),a=zs(n,"mediumDate");r=Py(ff(n,Er.Medium),[o,a]);break;case"long":let c=zs(n,"longTime"),d=zs(n,"longDate");r=Py(ff(n,Er.Long),[c,d]);break;case"full":let h=zs(n,"fullTime"),p=zs(n,"fullDate");r=Py(ff(n,Er.Full),[h,p]);break}return r&&(Ry[t][e]=r),r}function Py(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function bi(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Mz(n,e){return bi(n,3).substring(0,e)}function on(n,e,t=0,r=!1,i=!1){return function(s,o){let a=xz(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Mz(a,e);let c=pf(o,Gs.MinusSign);return bi(a,e,c,r,i)}}function xz(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ie(2301,!1)}}function xt(n,e,t=Zn.Format,r=!1){return function(i,s){return Oz(i,s,n,e,t,r)}}function Oz(n,e,t,r,i,s){switch(t){case 2:return mO(e,i,r)[n.getMonth()];case 1:return gO(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=vO(e),h=EO(e,i,r),p=d.findIndex(E=>{if(Array.isArray(E)){let[C,R]=E,N=o>=C.hours&&a>=C.minutes,P=o<R.hours||o===R.hours&&a<R.minutes;if(C.hours<R.hours){if(N&&P)return!0}else if(N||P)return!0}else if(E.hours===o&&E.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return pO(e,i,r)[o<12?0:1];case 3:return yO(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new ie(2302,!1)}}function Ny(n){return function(e,t,r){let i=-1*r,s=pf(t,Gs.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+bi(o,2,s)+bi(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+bi(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+bi(o,2,s)+":"+bi(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+bi(o,2,s)+":"+bi(Math.abs(i%60),2,s);default:throw new ie(2310,!1)}}}var Lz=0,My=4;function Fz(n){let e=xy(n,Lz,1).getDay();return xy(n,0,1+(e<=My?My:My+7)-e)}function wO(n){let e=n.getDay(),t=e===0?-3:My-e;return xy(n.getFullYear(),n.getMonth(),n.getDate()+t)}function bb(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=wO(t),o=Fz(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return bi(i,n,pf(r,Gs.MinusSign))}}function ky(n,e=!1){return function(t,r){let s=wO(t).getFullYear();return bi(s,n,pf(r,Gs.MinusSign),e)}}var Cb={};function Vz(n){if(Cb[n])return Cb[n];let e;switch(n){case"G":case"GG":case"GGG":e=xt(3,Pt.Abbreviated);break;case"GGGG":e=xt(3,Pt.Wide);break;case"GGGGG":e=xt(3,Pt.Narrow);break;case"y":e=on(0,1,0,!1,!0);break;case"yy":e=on(0,2,0,!0,!0);break;case"yyy":e=on(0,3,0,!1,!0);break;case"yyyy":e=on(0,4,0,!1,!0);break;case"Y":e=ky(1);break;case"YY":e=ky(2,!0);break;case"YYY":e=ky(3);break;case"YYYY":e=ky(4);break;case"M":case"L":e=on(1,1,1);break;case"MM":case"LL":e=on(1,2,1);break;case"MMM":e=xt(2,Pt.Abbreviated);break;case"MMMM":e=xt(2,Pt.Wide);break;case"MMMMM":e=xt(2,Pt.Narrow);break;case"LLL":e=xt(2,Pt.Abbreviated,Zn.Standalone);break;case"LLLL":e=xt(2,Pt.Wide,Zn.Standalone);break;case"LLLLL":e=xt(2,Pt.Narrow,Zn.Standalone);break;case"w":e=bb(1);break;case"ww":e=bb(2);break;case"W":e=bb(1,!0);break;case"d":e=on(2,1);break;case"dd":e=on(2,2);break;case"c":case"cc":e=on(7,1);break;case"ccc":e=xt(1,Pt.Abbreviated,Zn.Standalone);break;case"cccc":e=xt(1,Pt.Wide,Zn.Standalone);break;case"ccccc":e=xt(1,Pt.Narrow,Zn.Standalone);break;case"cccccc":e=xt(1,Pt.Short,Zn.Standalone);break;case"E":case"EE":case"EEE":e=xt(1,Pt.Abbreviated);break;case"EEEE":e=xt(1,Pt.Wide);break;case"EEEEE":e=xt(1,Pt.Narrow);break;case"EEEEEE":e=xt(1,Pt.Short);break;case"a":case"aa":case"aaa":e=xt(0,Pt.Abbreviated);break;case"aaaa":e=xt(0,Pt.Wide);break;case"aaaaa":e=xt(0,Pt.Narrow);break;case"b":case"bb":case"bbb":e=xt(0,Pt.Abbreviated,Zn.Standalone,!0);break;case"bbbb":e=xt(0,Pt.Wide,Zn.Standalone,!0);break;case"bbbbb":e=xt(0,Pt.Narrow,Zn.Standalone,!0);break;case"B":case"BB":case"BBB":e=xt(0,Pt.Abbreviated,Zn.Format,!0);break;case"BBBB":e=xt(0,Pt.Wide,Zn.Format,!0);break;case"BBBBB":e=xt(0,Pt.Narrow,Zn.Format,!0);break;case"h":e=on(3,1,-12);break;case"hh":e=on(3,2,-12);break;case"H":e=on(3,1);break;case"HH":e=on(3,2);break;case"m":e=on(4,1);break;case"mm":e=on(4,2);break;case"s":e=on(5,1);break;case"ss":e=on(5,2);break;case"S":e=on(6,1);break;case"SS":e=on(6,2);break;case"SSS":e=on(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Ny(0);break;case"ZZZZZ":e=Ny(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ny(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ny(2);break;default:return null}return Cb[n]=e,e}function TO(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Uz(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function jz(n,e,t){let i=n.getTimezoneOffset(),s=TO(e,i);return Uz(n,-1*(s-i))}function Bz(n){if(lO(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return xy(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Nz))return $z(r)}let e=new Date(n);if(!lO(e))throw new ie(2311,!1);return e}function $z(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function lO(n){return n instanceof Date&&!isNaN(n.valueOf())}var Oy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yl=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Oy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),dO(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);dO(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(We($s),We(ea),We(Eb))};static \u0275dir=lr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function dO(n,e){n.context.$implicit=e.item}var Ci=(()=>{class n{_viewContainer;_context=new Ly;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hO(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hO(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(We($s),We(ea))};static \u0275dir=lr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ly=class{$implicit=null;ngIf=null};function hO(n,e){if(n&&!n.createEmbeddedView)throw new ie(2020,!1)}function bO(n,e){return new ie(2100,!1)}var Db=class{createSubscription(e,t,r){return Zt(()=>e.subscribe({next:t,error:r}))}dispose(e){Zt(()=>e.unsubscribe())}},Sb=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},Hz=new Sb,qz=new Db,Rb=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=x(vr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Hs(t))return Hz;if(_y(t))return qz;throw bO(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(We(qs,16))};static \u0275pipe=yy({name:"async",type:n,pure:!1})}return n})();var zz="mediumDate",CO=new ae(""),DO=new ae(""),Pb=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??zz,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return IO(t,o,s||this.locale,a)}catch(o){throw bO(n,o.message)}}static \u0275fac=function(r){return new(r||n)(We(of,16),We(CO,24),We(DO,24))};static \u0275pipe=yy({name:"date",type:n,pure:!0})}return n})();var Jr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ei({type:n});static \u0275inj=Hr({})}return n})();function Nb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var gf=class{};var SO="browser";var AO=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new kb(x(Jt),window)})}return n})(),kb=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Ce(z({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=Gz(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Wi(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(Ce(z({},t),{left:i-o[0],top:s-o[1]}))}};function Gz(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var mf=class{_doc;constructor(e){this._doc=e}manager},Fy=(()=>{class n extends mf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ve(Jt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),jy=new ae(""),Lb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Fy));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Fy);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ve(jy),ve(et))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Mb="ng-app-id";function RO(n){for(let e of n)e.remove()}function PO(n,e){let t=e.createElement("style");return t.textContent=n,t}function Wz(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Mb}="${e}"],link[${Mb}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Mb),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Ob(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Fb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,Wz(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,PO);r?.forEach(i=>this.addUsage(i,this.external,Ob))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(RO(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])RO(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,PO(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Ob(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ve(Jt),ve(oy),ve(cy,8),ve(Dc))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),xb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vb=/%COMP%/g;var kO="%COMP%",Kz=`_nghost-${kO}`,Qz=`_ngcontent-${kO}`,Yz=!0,Jz=new ae("",{factory:()=>Yz});function Zz(n){return Qz.replace(Vb,n)}function Xz(n){return Kz.replace(Vb,n)}function MO(n,e){return e.map(t=>t.replace(Vb,n))}var Ub=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new yf(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Uy?i.applyToHost(t):i instanceof _f&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,E=this.tracingService;switch(r.encapsulation){case vi.Emulated:s=new Uy(c,d,r,this.appId,h,o,a,p,E);break;case vi.ShadowDom:return new Vy(c,t,r,o,a,this.nonce,p,E,d);case vi.ExperimentalIsolatedShadowDom:return new Vy(c,t,r,o,a,this.nonce,p,E);default:s=new _f(c,d,r,h,o,a,p,E);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ve(Lb),ve(Fb),ve(oy),ve(Jz),ve(Jt),ve(et),ve(cy),ve(Sc,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),yf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(xb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(NO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(NO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=xb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=xb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ts.DashCase|ts.Important)?e.style.setProperty(t,r,i&ts.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ts.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Qr().getGlobalEventTarget(this.doc,e),!e))throw new ie(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function NO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vy=class extends yf{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=d,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=MO(r.id,h);for(let E of h){let C=document.createElement("style");o&&C.setAttribute("nonce",o),C.textContent=E,this.shadowRoot.appendChild(C)}let p=r.getExternalStyles?.();if(p)for(let E of p){let C=Ob(E,i);o&&C.setAttribute("nonce",o),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},_f=class extends yf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?MO(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ul.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Uy=class extends _f{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=Zz(h),this.hostAttr=Xz(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var By=class n extends lf{supportsDOMEvents=!0;static makeCurrent(){Ib(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=e9();return t==null?null:t9(t)}resetBaseElement(){vf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Nb(document.cookie,e)}},vf=null;function e9(){return vf=vf||document.head.querySelector("base"),vf?vf.getAttribute("href"):null}function t9(n){return new URL(n,document.baseURI).pathname}var n9=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),xO=["alt","control","meta","shift"],r9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},OO=(()=>{class n extends mf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),xO.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=r9[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),xO.forEach(o=>{if(o!==i){let a=i9[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ve(Jt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function jb(n,e,t){let r=z({rootComponent:n,platformRef:t?.platformRef},s9(e));return iO(r)}function s9(n){return{appProviders:[...l9,...n?.providers??[]],platformProviders:u9}}function o9(){By.makeCurrent()}function a9(){return new Gi}function c9(){return xT(document),document}var u9=[{provide:Dc,useValue:SO},{provide:ay,useValue:o9,multi:!0},{provide:Jt,useFactory:c9}];var l9=[{provide:Ph,useValue:"root"},{provide:Gi,useFactory:a9},{provide:jy,useClass:Fy,multi:!0},{provide:jy,useClass:OO,multi:!0},Ub,Fb,Lb,{provide:Ic,useExisting:Ub},{provide:gf,useClass:n9},[]];var LO=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ve(Jt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xe="primary",Pf=Symbol("RouteTitle"),zb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oc(n){return new zb(n)}function zO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Wy(n){return new Promise((e,t)=>{n.pipe(Ms()).subscribe({next:r=>e(r),error:r=>t(r)})})}function f9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!rs(n[t],e[t]))return!1;return!0}function rs(n,e){let t=n?Gb(n):void 0,r=e?Gb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!GO(n[i],e[i]))return!1;return!0}function Gb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function GO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function WO(n){return n.length>0?n[n.length-1]:null}function Lc(n){return rm(n)?n:Hs(n)?Mt(Promise.resolve(n)):Me(n)}function KO(n){return rm(n)?Wy(n):Promise.resolve(n)}var p9={exact:YO,subset:JO},QO={exact:g9,subset:m9,ignored:()=>!0};function FO(n,e,t){return p9[t.paths](n.root,e.root,t.matrixParams)&&QO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function g9(n,e){return rs(n,e)}function YO(n,e,t){if(!Mc(n.segments,e.segments)||!qy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!YO(n.children[r],e.children[r],t))return!1;return!0}function m9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>GO(n[t],e[t]))}function JO(n,e,t){return ZO(n,e,e.segments,t)}function ZO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Mc(i,t)||e.hasChildren()||!qy(i,t,r))}else if(n.segments.length===t.length){if(!Mc(n.segments,t)||!qy(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!JO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Mc(n.segments,i)||!qy(n.segments,i,r)||!n.children[xe]?!1:ZO(n.children[xe],e,s,r)}}function qy(n,e,t){return e.every((r,i)=>QO[t](n[i].parameters,r.parameters))}var Si=class{root;queryParams;fragment;_queryParamMap;constructor(e=new mt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oc(this.queryParams),this._queryParamMap}toString(){return v9.serialize(this)}},mt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zy(this)}},ia=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oc(this.parameters),this._parameterMap}toString(){return e1(this)}};function y9(n,e){return Mc(n,e)&&n.every((t,r)=>rs(t.parameters,e[r].parameters))}function Mc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _9(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===xe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==xe&&(t=t.concat(e(i,r)))}),t}var Fc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new Ws,providedIn:"root"})}return n})(),Ws=class{parse(e){let t=new Kb(e);return new Si(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ef(e.root,!0)}`,r=w9(e.queryParams),i=typeof e.fragment=="string"?`#${E9(e.fragment)}`:"";return`${t}${r}${i}`}},v9=new Ws;function zy(n){return n.segments.map(e=>e1(e)).join("/")}function Ef(n,e){if(!n.hasChildren())return zy(n);if(e){let t=n.children[xe]?Ef(n.children[xe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==xe&&r.push(`${i}:${Ef(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_9(n,(r,i)=>i===xe?[Ef(n.children[xe],!1)]:[`${i}:${Ef(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[xe]!=null?`${zy(n)}/${t[0]}`:`${zy(n)}/(${t.join("//")})`}}function XO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $y(n){return XO(n).replace(/%3B/gi,";")}function E9(n){return encodeURI(n)}function Wb(n){return XO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gy(n){return decodeURIComponent(n)}function VO(n){return Gy(n.replace(/\+/g,"%20"))}function e1(n){return`${Wb(n.path)}${I9(n.parameters)}`}function I9(n){return Object.entries(n).map(([e,t])=>`;${Wb(e)}=${Wb(t)}`).join("")}function w9(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$y(t)}=${$y(i)}`).join("&"):`${$y(t)}=${$y(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var T9=/^[^\/()?;#]+/;function Bb(n){let e=n.match(T9);return e?e[0]:""}var b9=/^[^\/()?;=#]+/;function C9(n){let e=n.match(b9);return e?e[0]:""}var D9=/^[^=?&#]+/;function S9(n){let e=n.match(D9);return e?e[0]:""}var A9=/^[^&#]+/;function R9(n){let e=n.match(A9);return e?e[0]:""}var Kb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xe]=new mt(e,t)),r}parseSegment(){let e=Bb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new ia(Gy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=C9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Bb(this.remaining);i&&(r=i,this.capture(r))}e[Gy(t)]=Gy(r)}parseQueryParam(e){let t=S9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=R9(this.remaining);o&&(r=o,this.capture(r))}let i=VO(t),s=VO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Bb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=xe);let o=this.parseChildren();t[s??xe]=Object.keys(o).length===1&&o[xe]?o[xe]:new mt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function t1(n){return n.segments.length>0?new mt([],{[xe]:n}):n}function n1(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=n1(i);if(r===xe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new mt(n.segments,e);return P9(t)}function P9(n){if(n.numberOfChildren===1&&n.children[xe]){let e=n.children[xe];return new mt(n.segments.concat(e.segments),e.children)}return n}function sa(n){return n instanceof Si}function r1(n,e,t=null,r=null,i=new Ws){let s=i1(n);return s1(s,e,t,r,i)}function i1(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new mt(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=t1(r);return e??i}function s1(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return $b(s,s,s,t,r,i);let o=N9(e);if(o.toRoot())return $b(s,s,new mt([],{}),t,r,i);let a=k9(o,s,n),c=a.processChildren?wf(a.segmentGroup,a.index,o.commands):a1(a.segmentGroup,a.index,o.commands);return $b(s,a.segmentGroup,c,t,r,i)}function Ky(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function bf(n){return typeof n=="object"&&n!=null&&n.outlets}function UO(n,e,t){n||="\u0275";let r=new Si;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function $b(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(p=>UO(d,p,s)):UO(d,h,s);let a;n===e?a=t:a=o1(n,e,t);let c=t1(n1(a));return new Si(c,o,i)}function o1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=o1(s,e,t)}),new mt(n.segments,r)}var Qy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ky(r[0]))throw new ie(4003,!1);let i=r.find(bf);if(i&&i!==WO(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function N9(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qy(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Qy(t,e,r)}var El=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function k9(n,e,t){if(n.isAbsolute)return new El(e,!0,0);if(!t)return new El(e,!1,NaN);if(t.parent===null)return new El(t,!0,0);let r=Ky(n.commands[0])?0:1,i=t.segments.length-1+r;return M9(t,i,n.numberOfDoubleDots)}function M9(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new El(r,!1,i-s)}function x9(n){return bf(n[0])?n[0].outlets:{[xe]:n}}function a1(n,e,t){if(n??=new mt([],{}),n.segments.length===0&&n.hasChildren())return wf(n,e,t);let r=O9(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new mt(n.segments.slice(0,r.pathIndex),{});return s.children[xe]=new mt(n.segments.slice(r.pathIndex),n.children),wf(s,0,i)}else return r.match&&i.length===0?new mt(n.segments,{}):r.match&&!n.hasChildren()?Qb(n,e,t):r.match?wf(n,0,i):Qb(n,e,t)}function wf(n,e,t){if(t.length===0)return new mt(n.segments,{});{let r=x9(t),i={};if(Object.keys(r).some(s=>s!==xe)&&n.children[xe]&&n.numberOfChildren===1&&n.children[xe].segments.length===0){let s=wf(n.children[xe],e,t);return new mt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=a1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new mt(n.segments,i)}}function O9(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(bf(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!BO(c,d,o))return s;r+=2}else{if(!BO(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(bf(s)){let c=L9(s.outlets);return new mt(r,c)}if(i===0&&Ky(t[0])){let c=n.segments[e];r.push(new ia(c.path,jO(t[0]))),i++;continue}let o=bf(s)?s.outlets[xe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ky(a)?(r.push(new ia(o,jO(a))),i+=2):(r.push(new ia(o,{})),i++)}return new mt(r,{})}function L9(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Qb(new mt([],{}),0,r))}),e}function jO(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function BO(n,e,t){return n==t.path&&rs(e,t.parameters)}var Il="imperative",En=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(En||{}),kr=class{id;url;constructor(e,t){this.id=e,this.url=t}},oa=class extends kr{type=En.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mr=class extends kr{urlAfterRedirects;type=En.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dr=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(dr||{}),Tl=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Tl||{}),is=class extends kr{reason;code;type=En.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ss=class extends kr{reason;code;type=En.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},bl=class extends kr{error;target;type=En.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cf=class extends kr{urlAfterRedirects;state;type=En.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class extends kr{urlAfterRedirects;state;type=En.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jy=class extends kr{urlAfterRedirects;state;shouldActivate;type=En.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zy=class extends kr{urlAfterRedirects;state;type=En.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xy=class extends kr{urlAfterRedirects;state;type=En.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},e_=class{route;type=En.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},t_=class{route;type=En.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},n_=class{snapshot;type=En.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},r_=class{snapshot;type=En.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},i_=class{snapshot;type=En.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},s_=class{snapshot;type=En.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cl=class{routerEvent;position;anchor;type=En.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Df=class{},Dl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function F9(n){return!(n instanceof Df)&&!(n instanceof Dl)}function V9(n,e){return n.providers&&!n._injector&&(n._injector=fl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Di(n){return n.outlet||xe}function U9(n,e){let t=n.filter(r=>Di(r)===e);return t.push(...n.filter(r=>Di(r)!==e)),t}function Rl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var o_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Rl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Vc(this.rootInjector)}},Vc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new o_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ve(Yt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),a_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Yb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Yb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jb(e,this._root).map(t=>t.value)}};function Yb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Yb(n,t);if(r)return r}return null}function Jb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Jb(n,t);if(r.length)return r.unshift(e),r}return[]}var Nr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function vl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Sf=class extends a_{snapshot;constructor(e,t){super(e),this.snapshot=t,rC(this,e)}toString(){return this.snapshot.toString()}};function c1(n){let e=j9(n),t=new Fn([new ia("",{})]),r=new Fn({}),i=new Fn({}),s=new Fn({}),o=new Fn(""),a=new Zr(t,r,s,o,i,xe,n,e.root);return a.snapshot=e.root,new Sf(new Nr(a,[]),e)}function j9(n){let e={},t={},r={},s=new xc([],e,r,"",t,xe,n,null,{});return new Af("",new Nr(s,[]))}var Zr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ge(d=>d[Pf]))??Me(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ge(e=>Oc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ge(e=>Oc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function c_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:z({},n.params),data:z({},n.data),resolve:z(z({},n.data),n._resolvedData??{})},i&&l1(i)&&(r.resolve[Pf]=i.title),r}var xc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Pf]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Af=class extends a_{url;constructor(e,t){super(t),this.url=e,rC(this,t)}toString(){return u1(this._root)}};function rC(n,e){e.value._routerState=n,e.children.forEach(t=>rC(n,t))}function u1(n){let e=n.children.length>0?` { ${n.children.map(u1).join(", ")} } `:"";return`${n.value}${e}`}function Hb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,rs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),rs(e.params,t.params)||n.paramsSubject.next(t.params),f9(e.url,t.url)||n.urlSubject.next(t.url),rs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zb(n,e){let t=rs(n.params,e.params)&&y9(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Zb(n.parent,e.parent))}function l1(n){return typeof n.title=="string"||n.title===null}var d1=new ae(""),Nf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=xe;activateEvents=new qt;deactivateEvents=new qt;attachEvents=new qt;detachEvents=new qt;routerOutletData=tO();parentContexts=x(Vc);location=x($s);changeDetector=x(qs);inputBinder=x(kf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Xb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=lr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Us]})}return n})(),Xb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Zr?this.route:e===Vc?this.childContexts:e===d1?this.outletData:this.parent.get(e,t)}},kf=new ae(""),iC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=am([r.queryParams,r.params,r.data]).pipe(bn(([s,o,a],c)=>(a=z(z(z({},s),o),a),c===0?Me(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=sO(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),sC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$n({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Yn(0,"router-outlet")},dependencies:[Nf],encapsulation:2})}return n})();function oC(n){let e=n.children&&n.children.map(oC),t=e?Ce(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xe&&(t.component=sC),t}function B9(n,e,t){let r=Rf(n,e._root,t?t._root:void 0);return new Sf(r,e)}function Rf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=$9(n,e,t);return new Nr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Rf(n,a)),o}}let r=H9(e.value),i=e.children.map(s=>Rf(n,s));return new Nr(r,i)}}function $9(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Rf(n,r,i);return Rf(n,r)})}function H9(n){return new Zr(new Fn(n.url),new Fn(n.params),new Fn(n.queryParams),new Fn(n.fragment),new Fn(n.data),n.outlet,n.component,n)}var Sl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},h1="ngNavigationCancelingError";function u_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=sa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=f1(!1,dr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function f1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[h1]=!0,t.cancellationCode=e,t}function q9(n){return p1(n)&&sa(n.url)}function p1(n){return!!n&&n[h1]}var z9=(n,e,t,r)=>Ge(i=>(new eC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),eC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=vl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=vl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=vl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new s_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new r_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Hb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Hb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},l_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},wl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function G9(n,e,t){let r=n._root,i=e?e._root:null;return If(r,i,t,[r.value])}function W9(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Pl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!hw(n)?n:e.get(n):r}function If(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=vl(e);return n.children.forEach(o=>{K9(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Tf(a,t.getContext(o),i)),i}function K9(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Q9(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new l_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?If(n,e,a?a.children:null,r,i):If(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new wl(a.outlet.component,o))}else o&&Tf(e,a,i),i.canActivateChecks.push(new l_(r)),s.component?If(n,null,a?a.children:null,r,i):If(n,null,t,r,i);return i}function Q9(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Mc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mc(n.url,e.url)||!rs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zb(n,e)||!rs(n.queryParams,e.queryParams);case"paramsChange":default:return!Zb(n,e)}}function Tf(n,e,t){let r=vl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Tf(o,e.children.getContext(s),t):Tf(o,null,t):Tf(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new wl(e.outlet.component,i)):t.canDeactivateChecks.push(new wl(null,i)):t.canDeactivateChecks.push(new wl(null,i))}function Mf(n){return typeof n=="function"}function Y9(n){return typeof n=="boolean"}function J9(n){return n&&Mf(n.canLoad)}function Z9(n){return n&&Mf(n.canActivate)}function X9(n){return n&&Mf(n.canActivateChild)}function eG(n){return n&&Mf(n.canDeactivate)}function tG(n){return n&&Mf(n.canMatch)}function g1(n){return n instanceof sc||n?.name==="EmptyError"}var Hy=Symbol("INITIAL_VALUE");function Al(){return bn(n=>am(n.map(e=>e.pipe(Un(1),um(Hy)))).pipe(Ge(e=>{for(let t of e)if(t!==!0){if(t===Hy)return Hy;if(t===!1||nG(t))return t}return!0}),Kn(e=>e!==Hy),Un(1)))}function nG(n){return sa(n)||n instanceof Sl}function m1(n){return n.aborted?Me(void 0).pipe(Un(1)):new Ie(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function y1(n){return Ih(m1(n))}function rG(n,e){return Vn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Me(Ce(z({},t),{guardsResult:!0})):iG(o,r,i,n).pipe(Vn(a=>a&&Y9(a)?sG(r,s,n,e):Me(a)),Ge(a=>Ce(z({},t),{guardsResult:a})))})}function iG(n,e,t,r){return Mt(n).pipe(Vn(i=>lG(i.component,i.route,t,e,r)),Ms(i=>i!==!0,!0))}function sG(n,e,t,r){return Mt(e).pipe(Ku(i=>Gu(aG(i.route.parent,r),oG(i.route,r),uG(n,i.path,t),cG(n,i.route,t))),Ms(i=>i!==!0,!0))}function oG(n,e){return n!==null&&e&&e(new i_(n)),Me(!0)}function aG(n,e){return n!==null&&e&&e(new n_(n)),Me(!0)}function cG(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Me(!0);let i=r.map(s=>Eh(()=>{let o=Rl(e)??t,a=Pl(s,o),c=Z9(a)?a.canActivate(e,n):sn(o,()=>a(e,n));return Lc(c).pipe(Ms())}));return Me(i).pipe(Al())}function uG(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>W9(o)).filter(o=>o!==null).map(o=>Eh(()=>{let a=o.guards.map(c=>{let d=Rl(o.node)??t,h=Pl(c,d),p=X9(h)?h.canActivateChild(r,n):sn(d,()=>h(r,n));return Lc(p).pipe(Ms())});return Me(a).pipe(Al())}));return Me(s).pipe(Al())}function lG(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Me(!0);let o=s.map(a=>{let c=Rl(e)??i,d=Pl(a,c),h=eG(d)?d.canDeactivate(n,e,t,r):sn(c,()=>d(n,e,t,r));return Lc(h).pipe(Ms())});return Me(o).pipe(Al())}function dG(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Me(!0);let o=s.map(a=>{let c=Pl(a,n),d=J9(c)?c.canLoad(e,t):sn(n,()=>c(e,t)),h=Lc(d);return i?h.pipe(y1(i)):h});return Me(o).pipe(Al(),_1(r))}function _1(n){return jg(jn(e=>{if(typeof e!="boolean")throw u_(n,e)}),Ge(e=>e===!0))}function hG(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Me(!0);let o=s.map(a=>{let c=Pl(a,n),d=tG(c)?c.canMatch(e,t):sn(n,()=>c(e,t)),h=Lc(d);return i?h.pipe(y1(i)):h});return Me(o).pipe(Al(),_1(r))}var kc=class v1 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,v1.prototype)}},tC=class E1 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,E1.prototype)}};function fG(n){throw new ie(4e3,!1)}function pG(n){throw f1(!1,dr.GuardRejected)}var gG=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[xe])throw fG(`${e.redirectTo}`);i=i.children[xe]}}async applyRedirectCommands(e,t,r,i,s){let o=await mG(t,i,s);if(o instanceof Si)throw new tC(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new tC(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Si(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new mt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function mG(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:p}=e;return Wy(Lc(sn(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var nC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yG(n,e,t,r,i,s){let o=I1(n,e,t);return o.matched?(r=V9(e,r),hG(r,e,t,i,s).pipe(Ge(a=>a===!0?o:z({},nC)))):Me(o)}function I1(n,e,t){if(e.path==="**")return _G(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},nC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zO)(t,n,e);if(!i)return z({},nC);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?z(z({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _G(n){return{matched:!0,parameters:n.length>0?WO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function $O(n,e,t,r){return t.length>0&&IG(n,t,r)?{segmentGroup:new mt(e,EG(r,new mt(t,n.children))),slicedSegments:[]}:t.length===0&&wG(n,t,r)?{segmentGroup:new mt(n.segments,vG(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new mt(n.segments,n.children),slicedSegments:t}}function vG(n,e,t,r){let i={};for(let s of t)if(h_(n,e,s)&&!r[Di(s)]){let o=new mt([],{});i[Di(s)]=o}return z(z({},r),i)}function EG(n,e){let t={};t[xe]=e;for(let r of n)if(r.path===""&&Di(r)!==xe){let i=new mt([],{});t[Di(r)]=i}return t}function IG(n,e,t){return t.some(r=>h_(n,e,r)&&Di(r)!==xe)}function wG(n,e,t){return t.some(r=>h_(n,e,r))}function h_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function TG(n,e,t){return e.length===0&&!n.children[t]}var bG=class{};async function CG(n,e,t,r,i,s,o="emptyOnly",a){return new SG(n,e,t,r,i,o,s,a).recognize()}var DG=31,SG=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new gG(this.urlSerializer,this.urlTree)}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}async recognize(){let e=$O(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Nr(r,t),s=new Af("",i),o=r1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new xc([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),xe,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,xe,t),rootSnapshot:t}}catch(r){if(r instanceof tC)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kc?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Nr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=U9(t,c),p=await this.processSegmentGroup(e,h,d,c,i);o.push(...p)}let a=w1(o);return AG(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof kc||g1(d))continue;throw d}if(TG(r,i,s))return new bG;throw new kc(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Di(r)!==o&&(o===xe||!h_(i,s,r)))throw new kc(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new kc(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:p,remainingSegments:E}=I1(t,i,s);if(!c)throw new kc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>DG&&(this.allowRedirects=!1));let C=new xc(s,d,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,HO(i),Di(i),i.component??i._loadedComponent??null,i,qO(i)),R=c_(C,a,this.paramsInheritanceStrategy);if(C.params=Object.freeze(R.params),C.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let N=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,C,e),P=await this.applyRedirects.lineralizeSegments(i,N);return this.processSegment(e,r,t,P.concat(E),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Wy(yG(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new kc(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:E}=a,C=new xc(p,h,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,HO(r),Di(r),r.component??r._loadedComponent??null,r,qO(r)),R=c_(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(R.params),C.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:P}=$O(t,p,E,c);if(P.length===0&&N.hasChildren()){let B=await this.processChildren(d,c,N,C);return new Nr(C,B)}if(c.length===0&&P.length===0)return new Nr(C,[]);let H=Di(r)===s,$=await this.processSegment(d,c,N,P,H?xe:s,!0,C);return new Nr(C,$ instanceof Nr?[$]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Wy(dG(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw pG(t)}return{routes:[],injector:e}}};function AG(n){n.sort((e,t)=>e.value.outlet===xe?-1:t.value.outlet===xe?1:e.value.outlet.localeCompare(t.value.outlet))}function RG(n){let e=n.value.routeConfig;return e&&e.path===""}function w1(n){let e=[],t=new Set;for(let r of n){if(!RG(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=w1(r.children);e.push(new Nr(r.value,i))}return e.filter(r=>!t.has(r))}function HO(n){return n.data||{}}function qO(n){return n.resolve||{}}var PG=new ae("",{factory:()=>CG});function NG(n,e,t,r,i,s,o){let a=n.get(PG);return Vn(c=>Me(c).pipe(bn(d=>a(n,e,t,r,d.extractedUrl,i,s,o)),Ge(({state:d,tree:h})=>Ce(z({},c),{targetSnapshot:d,urlAfterRedirects:h}))))}function kG(n,e){return Vn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Me(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of T1(c))o.add(d);let a=0;return Mt(o).pipe(Ku(c=>s.has(c)?MG(c,r,n,e):(c.data=c_(c,c.parent,n).resolve,Me(void 0))),jn(()=>a++),cm(1),Vn(c=>a===o.size?Me(t):yr))})}function T1(n){let e=n.children.map(t=>T1(t)).flat();return[n,...e]}function MG(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!l1(i)&&(s[Pf]=i.title),Eh(()=>(n.data=c_(n,n.parent,t).resolve,xG(s,n,e,r).pipe(Ge(o=>(n._resolvedData=o,n.data=z(z({},n.data),o),null)))))}function xG(n,e,t,r){let i=Gb(n);if(i.length===0)return Me({});let s={};return Mt(i).pipe(Vn(o=>OG(n[o],e,t,r).pipe(Ms(),jn(a=>{if(a instanceof Sl)throw u_(new Ws,a);s[o]=a}))),cm(1),Ge(()=>s),Wu(o=>g1(o)?yr:HI(o)))}function OG(n,e,t,r){let i=Rl(e)??r,s=Pl(n,i),o=s.resolve?s.resolve(e,t):sn(i,()=>s(e,t));return Lc(o)}function qb(n){return bn(e=>{let t=n(e);return t?Mt(t).pipe(Ge(()=>e)):Me(e)})}var aC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===xe);return r}getResolvedTitleForRoute(t){return t.data[Pf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>x(b1),providedIn:"root"})}return n})(),b1=(()=>{class n extends aC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ve(LO))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aa=new ae("",{factory:()=>({})}),Uc=new ae(""),f_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(pb);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await KO(sn(t,()=>r.loadComponent())),o=await S1(D1(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await C1(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function C1(n,e,t,r){let i=await KO(sn(t,()=>n.loadChildren())),s=await S1(D1(i)),o;s instanceof my||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,c=a.get(Uc,[],{optional:!0,self:!0}).flat()),{routes:c.map(oC),injector:a}}function LG(n){return n&&typeof n=="object"&&"default"in n}function D1(n){return LG(n)?n.default:n}async function S1(n){return n}var p_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>x(FG),providedIn:"root"})}return n})(),FG=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cC=new ae(""),uC=new ae("");function A1(n,e,t){let r=n.get(uC),i=n.get(Jt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=i.startViewTransition(()=>(s(),VG(n)));a.ready.catch(d=>{}),a.finished.catch(d=>{});let{onViewTransitionCreated:c}=r;return c&&sn(n,()=>c({transition:a,from:e,to:t})),o}function VG(n){return new Promise(e=>{hy({read:()=>setTimeout(e)},{injector:n})})}var UG=()=>{},lC=new ae(""),g_=(()=>{class n{currentNavigation=st(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=st(null);events=new kt;transitionAbortWithErrorSubject=new kt;configLoader=x(f_);environmentInjector=x(Yt);destroyRef=x(Zi);urlSerializer=x(Fc);rootContexts=x(Vc);location=x(ra);inputBindingEnabled=x(kf,{optional:!0})!==null;titleStrategy=x(aC);options=x(aa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(p_);createViewTransition=x(cC,{optional:!0});navigationErrorHandler=x(lC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Me(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new e_(i)),r=i=>this.events.next(new t_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Zt(()=>{this.transitions?.next(Ce(z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Fn(null),this.transitions.pipe(Kn(r=>r!==null),bn(r=>{let i=!1,s=new AbortController;return Me(r).pipe(bn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",dr.SupersededByNewNavigation),yr;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?Ce(z({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload")return this.events.next(new ss(o.id,this.urlSerializer.serialize(o.rawUrl),"",Tl.IgnoredSameUrlNavigation)),o.resolve(!1),yr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Me(o).pipe(bn(h=>(this.events.next(new oa(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?yr:Promise.resolve(h))),NG(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),jn(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(E=>(E.finalUrl=h.urlAfterRedirects,E));let p=new Cf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:p,source:E,restoredState:C,extras:R}=o,N=new oa(h,this.urlSerializer.serialize(p),E,C);this.events.next(N);let P=c1(this.rootComponentType).snapshot;return this.currentTransition=r=Ce(z({},o),{targetSnapshot:P,urlAfterRedirects:p,extras:Ce(z({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=p,H)),Me(r)}else return this.events.next(new ss(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Tl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),yr}),jn(o=>{let a=new Yy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ge(o=>(this.currentTransition=r=Ce(z({},o),{guards:G9(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),rG(this.environmentInjector,o=>this.events.next(o)),jn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw u_(this.urlSerializer,o.guardsResult);let a=new Jy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Kn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",dr.GuardRejected),!1)),qb(o=>{if(o.guards.canActivateChecks.length!==0)return Me(o).pipe(jn(a=>{let c=new Zy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),bn(a=>{let c=!1;return Me(a).pipe(kG(this.paramsInheritanceStrategy,this.environmentInjector),jn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",dr.NoDataFromResolver)}}))}),jn(a=>{let c=new Xy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),qb(o=>{let a=d=>{let h=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let p=Rl(d)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,d.routeConfig).then(E=>{d.component=E}))}for(let p of d.children)h.push(...a(p));return h},c=a(o.targetSnapshot.root);return c.length===0?Me(o):Mt(Promise.all(c).then(()=>o))}),qb(()=>this.afterPreactivation()),bn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?Mt(c).pipe(Ge(()=>r)):Me(r)}),Ge(o=>{let a=B9(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Ce(z({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),jn(()=>{this.events.next(new Df)}),z9(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Un(1),Ih(m1(s.signal).pipe(Kn(()=>!i&&!r.targetRouterState),jn(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",dr.Aborted)}))),jn({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=UG,a)),this.lastSuccessfulNavigation.set(Zt(this.currentNavigation)),this.events.next(new Mr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ih(this.transitionAbortWithErrorSubject.pipe(jn(o=>{throw o}))),GI(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",dr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Wu(o=>{if(this.destroyed)return r.resolve(!1),yr;if(i=!0,p1(o))this.events.next(new is(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),q9(o)?this.events.next(new Dl(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new bl(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=sn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Sl){let{message:d,cancellationCode:h}=u_(this.urlSerializer,c);this.events.next(new is(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new Dl(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return yr}))}))}cancelNavigationTransition(t,r,i){let s=new is(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Zt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jG(n){return n!==Il}var R1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>x(BG),providedIn:"root"})}return n})(),d_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},BG=(()=>{class n extends d_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Cc(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dC=(()=>{class n{urlSerializer=x(Fc);options=x(aa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(ra);urlHandlingStrategy=x(p_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Si;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Si?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=c1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>x(P1),providedIn:"root"})}return n})(),P1=(()=>{class n extends dC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof oa?this.updateStateMemento():t instanceof ss?this.commitTransition(r):t instanceof Cf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Df?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof is&&t.code!==dr.SupersededByNewNavigation&&t.code!==dr.Redirect?this.restoreHistory(r):t instanceof bl?this.restoreHistory(r,!0):t instanceof Mr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=z(z({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=z(z({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Cc(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function m_(n,e){n.events.pipe(Kn(t=>t instanceof Mr||t instanceof is||t instanceof bl||t instanceof ss),Ge(t=>t instanceof Mr||t instanceof ss?0:(t instanceof is?t.code===dr.Redirect||t.code===dr.SupersededByNewNavigation:!1)?2:1),Kn(t=>t!==2),Un(1)).subscribe(()=>{e()})}var $G={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},an=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(rb);stateManager=x(dC);options=x(aa,{optional:!0})||{};pendingTasks=x(Xi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(g_);urlSerializer=x(Fc);location=x(ra);urlHandlingStrategy=x(p_);injector=x(Yt);_events=new kt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(R1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(Uc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(kf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Qt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Zt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof is&&r.code!==dr.Redirect&&r.code!==dr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mr)this.navigated=!0;else if(r instanceof Dl){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=z({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jG(i.source)},o);this.scheduleNavigation(a,Il,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}F9(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Il,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(vr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Zt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(oC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=z(z({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let E=i?i.snapshot:this.routerState.snapshot.root;p=i1(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return s1(p,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=sa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Il,null,r)}navigate(t,r={skipLocationChange:!1}){return qG(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Wi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=z({},$G):r===!1?i=z({},HG):i=r,sa(t))return FO(this.currentUrlTree,t,i);let s=this.parseUrl(t);return FO(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((p,E)=>{a=p,c=E});let h=this.pendingTasks.add();return m_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qG(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}var ca=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=st(null);get href(){return Zt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new kt;applicationErrorHandler=x(vr);options=x(aa,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(x(new by("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Mr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(sa(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:sa(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(We(an),We(Zr),Wh("tabindex"),We(Bs),We(Rr),We(Ti))};static \u0275dir=lr({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&qe("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Jh("href",i.reactiveHref(),VT)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Nc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Nc],replaceUrl:[2,"replaceUrl","replaceUrl",Nc],routerLink:"routerLink"},features:[Us]})}return n})(),fC=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new qt;link=x(ca,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof Mr&&this.update()})}ngAfterContentInit(){Me(this.links.changes,Me(null)).pipe($o()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Mt(t).pipe($o()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=zG(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(We(an),We(Rr),We(Bs),We(qs))};static \u0275dir=lr({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&cb(s,ca,5),r&2){let o;tf(o=nf())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Us]})}return n})();function zG(n){return!!n.paths}var xf=class{};var N1=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Kn(t=>t instanceof Mr),Ku(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=fl(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Mt(i).pipe($o())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=Mt(this.loader.loadChildren(t,r)):i=Me(null);let s=i.pipe(Vn(o=>o===null?Me(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(t,r);return Mt([s,o]).pipe($o())}else return s})}static \u0275fac=function(r){return new(r||n)(ve(an),ve(Yt),ve(xf),ve(f_))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),k1=new ae(""),GG=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Il;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ss&&t.code===Tl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Cl))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Cl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){eb()};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function pC(n,...e){return cr([{provide:Uc,multi:!0,useValue:n},[],{provide:Zr,useFactory:M1},{provide:Yh,multi:!0,useFactory:x1},e.map(t=>t.\u0275providers)])}function M1(){return x(an).routerState.root}function Of(n,e){return{\u0275kind:n,\u0275providers:e}}function x1(){let n=x(Lt);return e=>{let t=n.get(Ii);if(e!==t.components[0])return;let r=n.get(an),i=n.get(O1);n.get(gC)===1&&r.initialNavigation(),n.get(V1,null,{optional:!0})?.setUpPreloading(),n.get(k1,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var O1=new ae("",{factory:()=>new kt}),gC=new ae("",{factory:()=>1});function L1(){let n=[{provide:OT,useValue:!0},{provide:gC,useValue:0},pl(()=>{let e=x(Lt);return e.get(wb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(an),s=e.get(O1);m_(i,()=>{r(!0)}),e.get(g_).afterPreactivation=()=>(r(!0),s.closed?Me(void 0):s),i.initialNavigation()}))})];return Of(2,n)}function F1(){let n=[pl(()=>{x(an).setUpLocationChangeListener()}),{provide:gC,useValue:2}];return Of(3,n)}var V1=new ae("");function U1(n){return Of(0,[{provide:V1,useExisting:N1},{provide:xf,useExisting:n}])}function j1(){return Of(8,[iC,{provide:kf,useExisting:iC}])}function B1(n){Ac("NgRouterViewTransitions");let e=[{provide:cC,useValue:A1},{provide:uC,useValue:z({skipNextTransition:!!n?.skipInitialTransition},n)}];return Of(9,e)}var $1=[ra,{provide:Fc,useClass:Ws},an,Vc,{provide:Zr,useFactory:M1},f_,[]],mC=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[$1,[],{provide:Uc,multi:!0,useValue:t},[],r?.errorHandler?{provide:lC,useValue:r.errorHandler}:[],{provide:aa,useValue:r||{}},r?.useHash?KG():QG(),WG(),r?.preloadingStrategy?U1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?YG(r):[],r?.bindToComponentInputs?j1().\u0275providers:[],r?.enableViewTransitions?B1().\u0275providers:[],JG()]}}static forChild(t){return{ngModule:n,providers:[{provide:Uc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ei({type:n});static \u0275inj=Hr({})}return n})();function WG(){return{provide:k1,useFactory:()=>{let n=x(AO),e=x(et),t=x(aa),r=x(g_),i=x(Fc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new GG(i,r,n,e,t)}}}function KG(){return{provide:Ti,useClass:Ab}}function QG(){return{provide:Ti,useClass:Ay}}function YG(n){return[n.initialNavigation==="disabled"?F1().\u0275providers:[],n.initialNavigation==="enabledBlocking"?L1().\u0275providers:[]]}var hC=new ae("");function JG(){return[{provide:hC,useFactory:x1},{provide:Yh,multi:!0,useExisting:hC}]}var H1=()=>{};var G1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},XG=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(E=64)),r.push(t[h],t[p],t[E],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(G1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XG(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new _C;let E=s<<2|a>>4;if(r.push(E),d!==64){let C=a<<4&240|d>>2;if(r.push(C),p!==64){let R=d<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_C=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},e5=function(n){let e=G1(n);return y_.encodeByteArray(e,!0)},Ff=function(n){return e5(n).replace(/\./g,"")},__=function(n){try{return y_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function EC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var t5=()=>EC().__FIREBASE_DEFAULTS__,n5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},r5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&__(n[1]);return e&&JSON.parse(e)},v_=()=>{try{return H1()||t5()||n5()||r5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IC=n=>{var e,t;return(t=(e=v_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},W1=n=>{let e=IC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wC=()=>{var n;return(n=v_())===null||n===void 0?void 0:n.config},TC=n=>{var e;return(e=v_())===null||e===void 0?void 0:e[`_${n}`]};var jc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ua(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function E_(n){return(await fetch(n,{credentials:"include"})).ok}function K1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ff(JSON.stringify(t)),Ff(JSON.stringify(o)),""].join(".")}var Lf={};function i5(){let n={prod:[],emulator:[]};for(let e of Object.keys(Lf))Lf[e]?n.emulator.push(e):n.prod.push(e);return n}function s5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var q1=!1;function I_(n,e){if(typeof window>"u"||typeof document>"u"||!ua(window.location.host)||Lf[n]===e||Lf[n]||q1)return;Lf[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",s=i5().prod.length>0;function o(){let E=document.getElementById(r);E&&E.remove()}function a(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function c(E,C){E.setAttribute("width","24"),E.setAttribute("id",C),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function d(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{q1=!0,o()},E}function h(E,C){E.setAttribute("id",C),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function p(){let E=s5(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),N=t("learnmore"),P=document.getElementById(N)||document.createElement("a"),H=t("preprendIcon"),$=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let B=E.element;a(B),h(P,N);let oe=d();c($,H),B.append($,R,P,oe),document.body.appendChild(B)}s?(R.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function o5(){var n;let e=(n=v_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J1(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Z1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X1(){let n=Pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eL(){return!o5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vf(){try{return typeof indexedDB=="object"}catch{return!1}}function tL(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var a5="FirebaseError",xr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=a5,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ai.prototype.create)}},Ai=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?c5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new xr(i,a,r)}};function c5(n,e){return n.replace(u5,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var u5=/\{\$([^}]+)}/g;function nL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function os(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(z1(s)&&z1(o)){if(!os(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function z1(n){return n!==null&&typeof n=="object"}function Nl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rL(n,e){let t=new vC(n,e);return t.subscribe.bind(t)}var vC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");l5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yC),i.error===void 0&&(i.error=yC),i.complete===void 0&&(i.complete=yC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function l5(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yC(){}var o_e=14400*1e3;function In(n){return n&&n._delegate?n._delegate:n}var hr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Bc="[DEFAULT]";var bC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new jc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h5(e))try{this.getOrInitializeService({instanceIdentifier:Bc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Bc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bc){return this.instances.has(e)}getOptions(e=Bc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bc){return this.component?this.component.multipleInstances?e:Bc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function d5(n){return n===Bc?void 0:n}function h5(n){return n.instantiationMode==="EAGER"}var w_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new bC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var f5=[],Ye=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ye||{}),p5={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},g5=Ye.INFO,m5={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},y5=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=m5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},as=class{constructor(e){this.name=e,this._logLevel=g5,this._logHandler=y5,this._userLogHandler=null,f5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}};var _5=(n,e)=>e.some(t=>n instanceof t),iL,sL;function v5(){return iL||(iL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E5(){return sL||(sL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var oL=new WeakMap,DC=new WeakMap,aL=new WeakMap,CC=new WeakMap,AC=new WeakMap;function I5(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(cs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&oL.set(t,n)}).catch(()=>{}),AC.set(e,n),e}function w5(n){if(DC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});DC.set(n,e)}var SC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return DC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aL.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cL(n){SC=n(SC)}function T5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(T_(this),e,...t);return aL.set(r,e.sort?e.sort():[e]),cs(r)}:E5().includes(n)?function(...e){return n.apply(T_(this),e),cs(oL.get(this))}:function(...e){return cs(n.apply(T_(this),e))}}function b5(n){return typeof n=="function"?T5(n):(n instanceof IDBTransaction&&w5(n),_5(n,v5())?new Proxy(n,SC):n)}function cs(n){if(n instanceof IDBRequest)return I5(n);if(CC.has(n))return CC.get(n);let e=b5(n);return e!==n&&(CC.set(n,e),AC.set(e,n)),e}var T_=n=>AC.get(n);function lL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=cs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(cs(o.result),c.oldVersion,c.newVersion,cs(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var C5=["get","getKey","getAll","getAllKeys","count"],D5=["put","add","delete","clear"],RC=new Map;function uL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(RC.get(e))return RC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=D5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||C5.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return RC.set(e,s),s}cL(n=>Ce(z({},n),{get:(e,t,r)=>uL(e,t)||n.get(e,t,r),has:(e,t)=>!!uL(e,t)||n.has(e,t)}));var NC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S5(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function S5(n){let e=n.getComponent();return e?.type==="VERSION"}var kC="@firebase/app",dL="0.13.2";var Ks=new as("@firebase/app"),A5="@firebase/app-compat",R5="@firebase/analytics-compat",P5="@firebase/analytics",N5="@firebase/app-check-compat",k5="@firebase/app-check",M5="@firebase/auth",x5="@firebase/auth-compat",O5="@firebase/database",L5="@firebase/data-connect",F5="@firebase/database-compat",V5="@firebase/functions",U5="@firebase/functions-compat",j5="@firebase/installations",B5="@firebase/installations-compat",$5="@firebase/messaging",H5="@firebase/messaging-compat",q5="@firebase/performance",z5="@firebase/performance-compat",G5="@firebase/remote-config",W5="@firebase/remote-config-compat",K5="@firebase/storage",Q5="@firebase/storage-compat",Y5="@firebase/firestore",J5="@firebase/ai",Z5="@firebase/firestore-compat",X5="firebase",eW="11.10.0";var MC="[DEFAULT]",tW={[kC]:"fire-core",[A5]:"fire-core-compat",[P5]:"fire-analytics",[R5]:"fire-analytics-compat",[k5]:"fire-app-check",[N5]:"fire-app-check-compat",[M5]:"fire-auth",[x5]:"fire-auth-compat",[O5]:"fire-rtdb",[L5]:"fire-data-connect",[F5]:"fire-rtdb-compat",[V5]:"fire-fn",[U5]:"fire-fn-compat",[j5]:"fire-iid",[B5]:"fire-iid-compat",[$5]:"fire-fcm",[H5]:"fire-fcm-compat",[q5]:"fire-perf",[z5]:"fire-perf-compat",[G5]:"fire-rc",[W5]:"fire-rc-compat",[K5]:"fire-gcs",[Q5]:"fire-gcs-compat",[Y5]:"fire-fst",[Z5]:"fire-fst-compat",[J5]:"fire-vertex","fire-js":"fire-js",[X5]:"fire-js-all"};var Uf=new Map,nW=new Map,xC=new Map;function hL(n,e){try{n.container.addComponent(e)}catch(t){Ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ri(n){let e=n.name;if(xC.has(e))return Ks.debug(`There were multiple attempts to register component ${e}.`),!1;xC.set(e,n);for(let t of Uf.values())hL(t,n);for(let t of nW.values())hL(t,n);return!0}function kl(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Or(n){return n==null?!1:n.settings!==void 0}var rW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new Ai("app","Firebase",rW);var OC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}};var da=eW;function VC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:MC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw la.create("bad-app-name",{appName:String(i)});if(t||(t=wC()),!t)throw la.create("no-options");let s=Uf.get(i);if(s){if(os(t,s.options)&&os(r,s.config))return s;throw la.create("duplicate-app",{appName:i})}let o=new w_(i);for(let c of xC.values())o.addComponent(c);let a=new OC(t,r,o);return Uf.set(i,a),a}function $c(n=MC){let e=Uf.get(n);if(!e&&n===MC&&wC())return VC();if(!e)throw la.create("no-app",{appName:n});return e}function b_(){return Array.from(Uf.values())}function zt(n,e,t){var r;let i=(r=tW[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ks.warn(a.join(" "));return}Ri(new hr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var iW="firebase-heartbeat-database",sW=1,jf="firebase-heartbeat-store",PC=null;function mL(){return PC||(PC=lL(iW,sW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jf)}catch(t){console.warn(t)}}}}).catch(n=>{throw la.create("idb-open",{originalErrorMessage:n.message})})),PC}async function oW(n){try{let t=(await mL()).transaction(jf),r=await t.objectStore(jf).get(yL(n));return await t.done,r}catch(e){if(e instanceof xr)Ks.warn(e.message);else{let t=la.create("idb-get",{originalErrorMessage:e?.message});Ks.warn(t.message)}}}async function fL(n,e){try{let r=(await mL()).transaction(jf,"readwrite");await r.objectStore(jf).put(e,yL(n)),await r.done}catch(t){if(t instanceof xr)Ks.warn(t.message);else{let r=la.create("idb-set",{originalErrorMessage:t?.message});Ks.warn(r.message)}}}function yL(n){return`${n.name}!${n.options.appId}`}var aW=1024,cW=30,LC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new FC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pL();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>cW){let o=lW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ks.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pL(),{heartbeatsToSend:r,unsentEntries:i}=uW(this._heartbeatsCache.heartbeats),s=Ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ks.warn(t),""}}};function pL(){return new Date().toISOString().substring(0,10)}function uW(n,e=aW){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gL(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var FC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vf()?tL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await oW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return fL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return fL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function gL(n){return Ff(JSON.stringify({version:2,heartbeats:n})).length}function lW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dW(n){Ri(new hr("platform-logger",e=>new NC(e),"PRIVATE")),Ri(new hr("heartbeat",e=>new LC(e),"PRIVATE")),zt(kC,dL,n),zt(kC,dL,"esm2017"),zt("fire-js","")}dW("");var hW="firebase",fW="11.10.0";zt(hW,fW,"app");function _L(n){n===void 0&&(n=x(Lt));let e=n.get(il);return t=>new Ie(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ha=new Ho("ANGULARFIRE2_VERSION");function Bf(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var xl=(n,e)=>{let t=e?[e]:b_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ml=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ml||{}),vL=uf()&&typeof Zone<"u"?Ml.WARN:Ml.SILENT;var C_=class{zone;delegate;constructor(e,t=$I){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},fa=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=x(et);this.outsideAngular=t.runOutsideAngular(()=>new C_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new C_(typeof Zone>"u"?void 0:Zone.current,BI))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EL=!1;function pW(n,e){!EL&&(vL>Ml.SILENT||uf())&&(EL=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),vL>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function gW(n){let e=x(et,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Hc(n){let e=x(et,{optional:!0});return e?e.run(()=>n()):n()}var mW=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),sn(t,()=>Hc(()=>n.apply(void 0,r)))),cn=(n,e,t)=>(t||=e?Ml.WARN:Ml.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=x(fa),o=x(il),a=x(Yt)}catch{return pW(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Hc(()=>o.add())),i[d]=mW(i[d],r,a));let c=gW(()=>n.apply(this,i));return e?c instanceof Ie?c.pipe(Bo(s.outsideAngular),jo(s.insideAngular),_L(a)):c instanceof Promise?Hc(()=>{let d=o.add();return new Promise((h,p)=>{c.then(E=>sn(a,()=>Hc(()=>h(E))),E=>sn(a,()=>Hc(()=>p(E)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Hc(()=>c):c instanceof Ie?c.pipe(Bo(s.outsideAngular),jo(s.insideAngular)):Hc(()=>c)});var Xr=class{constructor(e){return e}},qc=class{constructor(){return b_()}};function yW(n){return n&&n.length===1?n[0]:new Xr($c())}var UC=new ae("angularfire2._apps"),_W={provide:Xr,useFactory:yW,deps:[[new Ar,UC]]},vW={provide:qc,deps:[[new Ar,UC]]};function EW(n){return(e,t)=>{let r=t.get(Dc);zt("angularfire",ha.full,"core"),zt("angularfire",ha.full,"app"),zt("angular",uw.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xr(i)}}function IL(n,...e){return cr([_W,vW,{provide:UC,useFactory:EW(n),multi:!0,deps:[et,Lt,fa,...e]}])}var wL=cn(VC,!0);var IW=new Map,wW={activated:!1,tokenObservers:[]},TW={initialized:!1,enabled:!1};function Pi(n){return IW.get(n)||Object.assign({},wW)}function DL(){return TW}var bW="https://content-firebaseappcheck.googleapis.com/v1";var CW="exchangeDebugToken",TL={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},ove=1440*60*1e3;var $C=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new jc,this.pending.promise.catch(t=>{}),await DW(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new jc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function DW(n){return new Promise(e=>{setTimeout(e,n)})}var SW={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},pa=new Ai("appCheck","AppCheck",SW);function SL(n){if(!Pi(n).activated)throw pa.create("use-before-activation",{appName:n.name})}async function AL({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw pa.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw pa.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw pa.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw pa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function RL(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${bW}/projects/${t}/apps/${r}:${CW}?key=${i}`,body:{debug_token:e}}}var AW="firebase-app-check-database",RW=1,HC="firebase-app-check-store";var D_=null;function PW(){return D_||(D_=new Promise((n,e)=>{try{let t=indexedDB.open(AW,RW);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(pa.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(HC,{keyPath:"compositeKey"})}}}catch(t){e(pa.create("storage-open",{originalErrorMessage:t?.message}))}}),D_)}function NW(n,e){return kW(MW(n),e)}async function kW(n,e){let r=(await PW()).transaction(HC,"readwrite"),s=r.objectStore(HC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(pa.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function MW(n){return`${n.options.appId}-${n.name}`}var $f=new as("@firebase/app-check");function jC(n,e){return Vf()?NW(n,e).catch(t=>{$f.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PL(){return DL().enabled}async function NL(){let n=DL();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var xW={error:"UNKNOWN_ERROR"};function OW(n){return y_.encodeString(JSON.stringify(n),!1)}async function qC(n,e=!1,t=!1){let r=n.app;SL(r);let i=Pi(r),s=i.token,o;if(s&&!Hf(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(Hf(d)?s=d:await jC(r,void 0))}if(!e&&s&&Hf(s))return{token:s.token};let a=!1;if(PL())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=AL(RL(r,await NL()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await jC(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?$f.warn(d.message):t&&$f.error(d),BC(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Pi(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?$f.warn(d.message):t&&$f.error(d),o=d}let c;return s?o?Hf(s)?c={token:s.token,internalError:o}:c=BC(o):(c={token:s.token},i.token=s,await jC(r,s)):c=BC(o),a&&UW(r,c),c}async function LW(n){let e=n.app;SL(e);let{provider:t}=Pi(e);if(PL()){let r=await NL(),{token:i}=await AL(RL(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function FW(n,e,t,r){let{app:i}=n,s=Pi(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Hf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),bL(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>bL(n))}function kL(n,e){let t=Pi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function bL(n){let{app:e}=n,t=Pi(e),r=t.tokenRefresher;r||(r=VW(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function VW(n){let{app:e}=n;return new $C(async()=>{let t=Pi(e),r;if(t.token?r=await qC(n,!0):r=await qC(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Pi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TL.RETRIAL_MIN_WAIT,TL.RETRIAL_MAX_WAIT)}function UW(n,e){let t=Pi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Hf(n){return n.expireTimeMillis-Date.now()>0}function BC(n){return{token:OW(xW),error:n}}var zC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Pi(this.app);for(let t of e)kL(this.app,t.next);return Promise.resolve()}};function jW(n,e){return new zC(n,e)}function BW(n){return{getToken:e=>qC(n,e),getLimitedUseToken:()=>LW(n),addTokenListener:e=>FW(n,"INTERNAL",e),removeTokenListener:e=>kL(n.app,e)}}var $W="@firebase/app-check",HW="0.10.1";var qW="app-check",CL="app-check-internal";function zW(){Ri(new hr(qW,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return jW(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(CL).initialize()})),Ri(new hr(CL,n=>{let e=n.getProvider("app-check").getImmediate();return BW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),zt($W,HW)}zW();var GW="app-check";var Ol=class{constructor(){return xl(GW)}};var WW=["localhost","0.0.0.0","127.0.0.1"],_ve=typeof window<"u"&&WW.includes(window.location.hostname);var ML=()=>{};var xL=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},KW=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},OL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,C=d&63;c||(C=64,o||(E=64)),r.push(t[h],t[p],t[E],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xL(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KW(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new WC;let E=s<<2|a>>4;if(r.push(E),d!==64){let C=a<<4&240|d>>2;if(r.push(C),p!==64){let R=d<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},WC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},QW=function(n){let e=xL(n);return OL.encodeByteArray(e,!0)},QC=function(n){return QW(n).replace(/\./g,"")},S_=function(n){try{return OL.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var YW=()=>LL().__FIREBASE_DEFAULTS__,JW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZW=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&S_(n[1]);return e&&JSON.parse(e)},FL=()=>{try{return ML()||YW()||JW()||ZW()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var VL=n=>FL()?.[`_${n}`];function qf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lr())}function XW(){let n=FL()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BL(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $L(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HL(){return!XW()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YC(){try{return typeof indexedDB=="object"}catch{return!1}}function qL(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var e8="FirebaseError",ei=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=e8,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}},Qs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?t8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ei(i,a,r)}};function t8(n,e){return n.replace(n8,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var n8=/\{\$([^}]+)}/g;function JC(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zL(n,e){let t=new KC(n,e);return t.subscribe.bind(t)}var KC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");r8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=GC),i.error===void 0&&(i.error=GC),i.complete===void 0&&(i.complete=GC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function r8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function GC(){}var Tve=14400*1e3;function ga(n){return n&&n._delegate?n._delegate:n}var Ni=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var i8=[],Je=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Je||{}),s8={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},o8=Je.INFO,a8={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},c8=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=a8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ma=class{constructor(e){this.name=e,this._logLevel=o8,this._logHandler=c8,this._userLogHandler=null,i8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}};var u8=(n,e)=>e.some(t=>n instanceof t),GL,WL;function l8(){return GL||(GL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d8(){return WL||(WL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var KL=new WeakMap,XC=new WeakMap,QL=new WeakMap,ZC=new WeakMap,tD=new WeakMap;function h8(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(us(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&KL.set(t,n)}).catch(()=>{}),tD.set(e,n),e}function f8(n){if(XC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});XC.set(n,e)}var eD={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return XC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QL.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function YL(n){eD=n(eD)}function p8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(A_(this),e,...t);return QL.set(r,e.sort?e.sort():[e]),us(r)}:d8().includes(n)?function(...e){return n.apply(A_(this),e),us(KL.get(this))}:function(...e){return us(n.apply(A_(this),e))}}function g8(n){return typeof n=="function"?p8(n):(n instanceof IDBTransaction&&f8(n),u8(n,l8())?new Proxy(n,eD):n)}function us(n){if(n instanceof IDBRequest)return h8(n);if(ZC.has(n))return ZC.get(n);let e=g8(n);return e!==n&&(ZC.set(n,e),tD.set(e,n)),e}var A_=n=>tD.get(n);function ZL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=us(o);return r&&o.addEventListener("upgradeneeded",c=>{r(us(o.result),c.oldVersion,c.newVersion,us(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var m8=["get","getKey","getAll","getAllKeys","count"],y8=["put","add","delete","clear"],nD=new Map;function JL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nD.get(e))return nD.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=y8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||m8.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return nD.set(e,s),s}YL(n=>Ce(z({},n),{get:(e,t,r)=>JL(e,t)||n.get(e,t,r),has:(e,t)=>!!JL(e,t)||n.has(e,t)}));var iD=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_8(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function _8(n){return n.getComponent()?.type==="VERSION"}var sD="@firebase/app",XL="0.14.6";var Js=new ma("@firebase/app"),v8="@firebase/app-compat",E8="@firebase/analytics-compat",I8="@firebase/analytics",w8="@firebase/app-check-compat",T8="@firebase/app-check",b8="@firebase/auth",C8="@firebase/auth-compat",D8="@firebase/database",S8="@firebase/data-connect",A8="@firebase/database-compat",R8="@firebase/functions",P8="@firebase/functions-compat",N8="@firebase/installations",k8="@firebase/installations-compat",M8="@firebase/messaging",x8="@firebase/messaging-compat",O8="@firebase/performance",L8="@firebase/performance-compat",F8="@firebase/remote-config",V8="@firebase/remote-config-compat",U8="@firebase/storage",j8="@firebase/storage-compat",B8="@firebase/firestore",$8="@firebase/ai",H8="@firebase/firestore-compat",q8="firebase",z8="12.6.0";var G8={[sD]:"fire-core",[v8]:"fire-core-compat",[I8]:"fire-analytics",[E8]:"fire-analytics-compat",[T8]:"fire-app-check",[w8]:"fire-app-check-compat",[b8]:"fire-auth",[C8]:"fire-auth-compat",[D8]:"fire-rtdb",[S8]:"fire-data-connect",[A8]:"fire-rtdb-compat",[R8]:"fire-fn",[P8]:"fire-fn-compat",[N8]:"fire-iid",[k8]:"fire-iid-compat",[M8]:"fire-fcm",[x8]:"fire-fcm-compat",[O8]:"fire-perf",[L8]:"fire-perf-compat",[F8]:"fire-rc",[V8]:"fire-rc-compat",[U8]:"fire-gcs",[j8]:"fire-gcs-compat",[B8]:"fire-fst",[H8]:"fire-fst-compat",[$8]:"fire-vertex","fire-js":"fire-js",[q8]:"fire-js-all"};var W8=new Map,K8=new Map,eF=new Map;function tF(n,e){try{n.container.addComponent(e)}catch(t){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ya(n){let e=n.name;if(eF.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;eF.set(e,n);for(let t of W8.values())tF(t,n);for(let t of K8.values())tF(t,n);return!0}function Zs(n){return n==null?!1:n.settings!==void 0}var Q8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cD=new Qs("app","Firebase",Q8);var Ll=z8;function Ys(n,e,t){let r=G8[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(o.join(" "));return}ya(new Ni(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Y8="firebase-heartbeat-database",J8=1,zf="firebase-heartbeat-store",rD=null;function oF(){return rD||(rD=ZL(Y8,J8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zf)}catch(t){console.warn(t)}}}}).catch(n=>{throw cD.create("idb-open",{originalErrorMessage:n.message})})),rD}async function Z8(n){try{let t=(await oF()).transaction(zf),r=await t.objectStore(zf).get(aF(n));return await t.done,r}catch(e){if(e instanceof ei)Js.warn(e.message);else{let t=cD.create("idb-get",{originalErrorMessage:e?.message});Js.warn(t.message)}}}async function nF(n,e){try{let r=(await oF()).transaction(zf,"readwrite");await r.objectStore(zf).put(e,aF(n)),await r.done}catch(t){if(t instanceof ei)Js.warn(t.message);else{let r=cD.create("idb-set",{originalErrorMessage:t?.message});Js.warn(r.message)}}}function aF(n){return`${n.name}!${n.options.appId}`}var X8=1024,e7=30,oD=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new aD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>e7){let i=n7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Js.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=rF(),{heartbeatsToSend:t,unsentEntries:r}=t7(this._heartbeatsCache.heartbeats),i=QC(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Js.warn(e),""}}};function rF(){return new Date().toISOString().substring(0,10)}function t7(n,e=X8){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var aD=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YC()?qL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Z8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return nF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return nF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function iF(n){return QC(JSON.stringify({version:2,heartbeats:n})).length}function n7(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function r7(n){ya(new Ni("platform-logger",e=>new iD(e),"PRIVATE")),ya(new Ni("heartbeat",e=>new oD(e),"PRIVATE")),Ys(sD,XL,n),Ys(sD,XL,"esm2020"),Ys("fire-js","")}r7("");function gF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var mF=gF,yF=new Qs("auth","Firebase",gF());var k_=new ma("@firebase/auth");function c7(n,...e){k_.logLevel<=Je.WARN&&k_.warn(`Auth (${Ll}): ${n}`,...e)}function P_(n,...e){k_.logLevel<=Je.ERROR&&k_.error(`Auth (${Ll}): ${n}`,...e)}function cF(n,...e){throw ED(n,...e)}function vD(n,...e){return ED(n,...e)}function _F(n,e,t){let r=Ce(z({},mF()),{[e]:t});return new Qs("auth","Firebase",r).create(e,{appName:n.name})}function N_(n){return _F(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ED(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yF.create(n,...e)}function yt(n,e,...t){if(!n)throw ED(e,...t)}function Gf(n){let e="INTERNAL ASSERTION FAILED: "+n;throw P_(e),new Error(e)}function M_(n,e){n||Gf(e)}function u7(){return uF()==="http:"||uF()==="https:"}function uF(){return typeof self<"u"&&self.location?.protocol||null}function l7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u7()||BL()||"connection"in navigator)?navigator.onLine:!0}function d7(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Wc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,M_(t>e,"Short delay should be less than long delay!"),this.isMobile=UL()||$L()}get(){return l7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function h7(n,e){M_(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var x_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var f7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var p7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g7=new Wc(3e4,6e4);function vF(n,e){return n.tenantId&&!e.tenantId?Ce(z({},e),{tenantId:n.tenantId}):e}async function U_(n,e,t,r,i={}){return EF(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=JC(z({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=z({method:e,headers:c},s);return jL()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&qf(n.emulatorConfig.host)&&(d.credentials="include"),x_.fetch()(await IF(n,n.config.apiHost,t,a),d)})}async function EF(n,e,t){n._canInitEmulator=!1;let r=z(z({},f7),e);try{let i=new dD(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw R_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw R_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw R_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw R_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _F(n,h,d);cF(n,h)}}catch(i){if(i instanceof ei)throw i;cF(n,"network-request-failed",{message:String(i)})}}async function IF(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?h7(n.config,i):`${n.config.apiScheme}://${i}`;return p7.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var dD=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vD(this.auth,"network-request-failed")),g7.get())})}};function R_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=vD(n,e,r);return i.customData._tokenResponse=t,i}async function m7(n,e){return U_(n,"POST","/v1/accounts:delete",e)}async function O_(n,e){return U_(n,"POST","/v1/accounts:lookup",e)}function Wf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wF(n,e=!1){let t=ga(n),r=await t.getIdToken(e),i=TF(r);yt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Wf(uD(i.auth_time)),issuedAtTime:Wf(uD(i.iat)),expirationTime:Wf(uD(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function uD(n){return Number(n)*1e3}function TF(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return P_("JWT malformed, contained fewer than 3 sections"),null;try{let i=S_(t);return i?JSON.parse(i):(P_("Failed to decode base64 JWT payload"),null)}catch(i){return P_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function lF(n){let e=TF(n);return yt(e,"internal-error"),yt(typeof e.exp<"u","internal-error"),yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hD(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ei&&y7(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function y7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var fD=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Qf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wf(this.lastLoginAt),this.creationTime=Wf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function L_(n){let e=n.auth,t=await n.getIdToken(),r=await hD(n,O_(e,{idToken:t}));yt(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?CF(i.providerUserInfo):[],o=_7(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function bF(n){let e=ga(n);await L_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function CF(n){return n.map(r=>{var i=r,{providerId:e}=i,t=oI(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function v7(n,e){let t=await EF(n,{},async()=>{let r=JC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await IF(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&qf(n.emulatorConfig.host)&&(c.credentials="include"),x_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function E7(n,e){return U_(n,"POST","/v2/accounts:revokeToken",vF(n,e))}var Kf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt(typeof e.idToken<"u","internal-error"),yt(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){yt(e.length!==0,"internal-error");let t=lF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await v7(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(yt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(yt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(yt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Gf("not implemented")}};function _a(n,e){yt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var zc=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=oI(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await hD(this,this.stsTokenManager.getToken(this.auth,e));return yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wF(this,e)}reload(){return bF(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>z({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Ce(z({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await L_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zs(this.auth.app))return Promise.reject(N_(this.auth));let e=await this.getIdToken();return await hD(this,m7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Ce(z({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>z({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:E,isAnonymous:C,providerData:R,stsTokenManager:N}=t;yt(p&&N,e,"internal-error");let P=Kf.fromJSON(this.name,N);yt(typeof p=="string",e,"internal-error"),_a(r,e.name),_a(i,e.name),yt(typeof E=="boolean",e,"internal-error"),yt(typeof C=="boolean",e,"internal-error"),_a(s,e.name),_a(o,e.name),_a(a,e.name),_a(c,e.name),_a(d,e.name),_a(h,e.name);let H=new n({uid:p,auth:e,email:i,emailVerified:E,displayName:r,isAnonymous:C,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&(H.providerData=R.map($=>z({},$))),c&&(H._redirectEventId=c),H}static async _fromIdTokenResponse(e,t,r=!1){let i=new Kf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await L_(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];yt(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?CF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Kf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Qf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var dF=new Map;function Gc(n){M_(n instanceof Function,"Expected a class definition");let e=dF.get(n);return e?(M_(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dF.set(n,e),e)}var I7=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),pD=I7;function lD(n,e,t){return`firebase:${n}:${e}:${t}`}var F_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=lD(this.userKey,i.apiKey,s),this.fullPersistenceKey=lD("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await O_(this.auth,{idToken:e}).catch(()=>{});return t?zc._fromGetAccountInfoResponse(this.auth,t,e):null}return zc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Gc(pD),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Gc(pD),o=lD(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let p;if(typeof h=="string"){let E=await O_(e,{idToken:h}).catch(()=>{});if(!E)break;p=await zc._fromGetAccountInfoResponse(e,E,h)}else p=zc._fromJSON(e,h);d!==s&&(a=p),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function hF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C7(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w7(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S7(e))return"Blackberry";if(A7(e))return"Webos";if(T7(e))return"Safari";if((e.includes("chrome/")||b7(e))&&!e.includes("edge/"))return"Chrome";if(D7(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function w7(n=Lr()){return/firefox\//i.test(n)}function T7(n=Lr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b7(n=Lr()){return/crios\//i.test(n)}function C7(n=Lr()){return/iemobile/i.test(n)}function D7(n=Lr()){return/android/i.test(n)}function S7(n=Lr()){return/blackberry/i.test(n)}function A7(n=Lr()){return/webos/i.test(n)}function DF(n,e=[]){let t;switch(n){case"Browser":t=hF(Lr());break;case"Worker":t=`${hF(Lr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ll}/${r}`}var gD=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function R7(n,e={}){return U_(n,"GET","/v2/passwordPolicy",vF(n,e))}var P7=6,mD=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??P7,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var yD=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V_(this),this.idTokenSubscription=new V_(this),this.beforeStateQueue=new gD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gc(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await F_.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await O_(this,{idToken:e}),r=await zc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zs(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await L_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zs(this.app))return Promise.reject(N_(this));let t=e?ga(e):null;return t&&yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zs(this.app)?Promise.reject(N_(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zs(this.app)?Promise.reject(N_(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await R7(this),t=new mD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await E7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Gc(e)||this._popupRedirectResolver;yt(t,this,"argument-error"),this.redirectPersistenceManager=await F_.create(this,[Gc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Zs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&c7(`Error while retrieving App Check token: ${e.error}`),e?.token}};function N7(n){return ga(n)}var V_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zL(t=>this.observer=t)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var k7={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M7(n){k7=n}function x7(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function O7(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Gc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ID(n,e,t,r){return ga(n).onIdTokenChanged(e,t,r)}var rEe=x7("rcb"),iEe=new Wc(3e4,6e4);var sEe=new Wc(2e3,1e4);var oEe=600*1e3;var aEe=new Wc(3e4,6e4);var cEe=new Wc(5e3,15e3);var uEe=encodeURIComponent("fac");var fF="@firebase/auth",pF="1.11.1";var _D=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function L7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F7(n){ya(new Ni("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DF(n)},d=new yD(r,i,s,c);return O7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ya(new Ni("auth-internal",e=>{let t=N7(e.getProvider("auth").getImmediate());return(r=>new _D(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(fF,pF,L7(n)),Ys(fF,pF,"esm2020")}var V7=300,lEe=VL("authIdTokenMaxAge")||V7;function U7(){return document.getElementsByTagName("head")?.[0]??document}M7({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=vD("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",U7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F7("Browser");function SF(n){return new Ie(function(e){var t=ID(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function $F(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HF=$F,qF=new Ai("auth","Firebase",$F());var z_=new as("@firebase/auth");function $7(n,...e){z_.logLevel<=Ye.WARN&&z_.warn(`Auth (${da}): ${n}`,...e)}function B_(n,...e){z_.logLevel<=Ye.ERROR&&z_.error(`Auth (${da}): ${n}`,...e)}function ds(n,...e){throw UD(n,...e)}function ki(n,...e){return UD(n,...e)}function VD(n,e,t){let r=Object.assign(Object.assign({},HF()),{[e]:t});return new Ai("auth","Firebase",r).create(e,{appName:n.name})}function Kc(n){return VD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H7(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ds(n,"argument-error"),VD(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function UD(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qF.create(n,...e)}function Se(n,e,...t){if(!n)throw UD(e,...t)}function Xs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw B_(e),new Error(e)}function to(n,e){n||Xs(e)}function bD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function q7(){return AF()==="http:"||AF()==="https:"}function AF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function z7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q7()||J1()||"connection"in navigator)?navigator.onLine:!0}function G7(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Qc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,to(t>e,"Short delay should be less than long delay!"),this.isMobile=Q1()||Z1()}get(){return z7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jD(n,e){to(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var G_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var W7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var K7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Q7=new Qc(3e4,6e4);function BD(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Vl(n,e,t,r,i={}){return zF(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Nl(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return Y1()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&ua(n.emulatorConfig.host)&&(d.credentials="include"),G_.fetch()(await GF(n,n.config.apiHost,t,a),d)})}async function zF(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},W7),e);try{let i=new CD(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw j_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw j_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw j_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw j_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw VD(n,h,d);ds(n,h)}}catch(i){if(i instanceof xr)throw i;ds(n,"network-request-failed",{message:String(i)})}}async function Y7(n,e,t,r,i={}){let s=await Vl(n,e,t,r,i);return"mfaPendingCredential"in s&&ds(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function GF(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?jD(n.config,i):`${n.config.apiScheme}://${i}`;return K7.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var CD=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ki(this.auth,"network-request-failed")),Q7.get())})}};function j_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ki(n,e,r);return i.customData._tokenResponse=t,i}async function J7(n,e){return Vl(n,"POST","/v1/accounts:delete",e)}async function W_(n,e){return Vl(n,"POST","/v1/accounts:lookup",e)}function Yf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $D(n,e=!1){let t=In(n),r=await t.getIdToken(e),i=HD(r);Se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Yf(wD(i.auth_time)),issuedAtTime:Yf(wD(i.iat)),expirationTime:Yf(wD(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function wD(n){return Number(n)*1e3}function HD(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return B_("JWT malformed, contained fewer than 3 sections"),null;try{let i=__(t);return i?JSON.parse(i):(B_("Failed to decode base64 JWT payload"),null)}catch(i){return B_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function RF(n){let e=HD(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Zf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof xr&&Z7(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Z7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var DD=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Xf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yf(this.lastLoginAt),this.creationTime=Yf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function K_(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Zf(n,W_(t,{idToken:r}));Se(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?WF(s.providerUserInfo):[],a=X7(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function qD(n){let e=In(n);await K_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WF(n){return n.map(e=>{var{providerId:t}=e,r=Gg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function eK(n,e){let t=await zF(n,{},async()=>{let r=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await GF(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&ua(n.emulatorConfig.host)&&(c.credentials="include"),G_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tK(n,e){return Vl(n,"POST","/v2/accounts:revokeToken",BD(n,e))}var Jf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");let t=RF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await eK(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xs("not implemented")}};function va(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ea=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Zf(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $D(this,e)}reload(){return qD(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await K_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Or(this.auth.app))return Promise.reject(Kc(this.auth));let e=await this.getIdToken();return await Zf(this,J7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,P=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(d=t.createdAt)!==null&&d!==void 0?d:void 0,$=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:oe,isAnonymous:fe,providerData:ne,stsTokenManager:b}=t;Se(B&&b,e,"internal-error");let m=Jf.fromJSON(this.name,b);Se(typeof B=="string",e,"internal-error"),va(p,e.name),va(E,e.name),Se(typeof oe=="boolean",e,"internal-error"),Se(typeof fe=="boolean",e,"internal-error"),va(C,e.name),va(R,e.name),va(N,e.name),va(P,e.name),va(H,e.name),va($,e.name);let I=new n({uid:B,auth:e,email:E,emailVerified:oe,displayName:p,isAnonymous:fe,photoURL:R,phoneNumber:C,tenantId:N,stsTokenManager:m,createdAt:H,lastLoginAt:$});return ne&&Array.isArray(ne)&&(I.providerData=ne.map(T=>Object.assign({},T))),P&&(I._redirectEventId=P),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new Jf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await K_(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?WF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Jf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var PF=new Map;function eo(n){to(n instanceof Function,"Expected a class definition");let e=PF.get(n);return e?(to(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PF.set(n,e),e)}var nK=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),SD=nK;function $_(n,e,t){return`firebase:${n}:${e}:${t}`}var Q_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=$_(this.userKey,i.apiKey,s),this.fullPersistenceKey=$_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await W_(this.auth,{idToken:e}).catch(()=>{});return t?Ea._fromGetAccountInfoResponse(this.auth,t,e):null}return Ea._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(eo(SD),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||eo(SD),o=$_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let p;if(typeof h=="string"){let E=await W_(e,{idToken:h}).catch(()=>{});if(!E)break;p=await Ea._fromGetAccountInfoResponse(e,E,h)}else p=Ea._fromJSON(e,h);d!==s&&(a=p),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function NF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XF(e))return"Blackberry";if(eV(e))return"Webos";if(QF(e))return"Safari";if((e.includes("chrome/")||YF(e))&&!e.includes("edge/"))return"Chrome";if(ZF(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KF(n=Pn()){return/firefox\//i.test(n)}function QF(n=Pn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YF(n=Pn()){return/crios\//i.test(n)}function JF(n=Pn()){return/iemobile/i.test(n)}function ZF(n=Pn()){return/android/i.test(n)}function XF(n=Pn()){return/blackberry/i.test(n)}function eV(n=Pn()){return/webos/i.test(n)}function zD(n=Pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rK(n=Pn()){var e;return zD(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iK(){return X1()&&document.documentMode===10}function tV(n=Pn()){return zD(n)||ZF(n)||eV(n)||XF(n)||/windows phone/i.test(n)||JF(n)}function nV(n,e=[]){let t;switch(n){case"Browser":t=NF(Pn());break;case"Worker":t=`${NF(Pn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${da}/${r}`}var AD=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function sK(n,e={}){return Vl(n,"GET","/v2/passwordPolicy",BD(n,e))}var oK=6,RD=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:oK,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var PD=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y_(this),this.idTokenSubscription=new Y_(this),this.beforeStateQueue=new AD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=eo(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Q_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await W_(this,{idToken:e}),r=await Ea._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Or(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await K_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=G7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Or(this.app))return Promise.reject(Kc(this));let t=e?In(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Or(this.app)?Promise.reject(Kc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Or(this.app)?Promise.reject(Kc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await sK(this),t=new RD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ai("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&eo(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Q_.create(this,[eo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&$7(`Error while retrieving App Check token: ${t.error}`),t?.token}};function iv(n){return In(n)}var Y_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=rL(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var GD={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aK(n){GD=n}function cK(n){return GD.loadJS(n)}function uK(){return GD.gapiScript}function rV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function WD(n,e){let t=kl(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(os(s,e??{}))return i;ds(i,"already-initialized")}return t.initialize({options:e})}function lK(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(eo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function KD(n,e,t){let r=iv(n);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=iV(e),{host:o,port:a}=dK(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(os(d,r.config.emulator)&&os(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ua(o)?(E_(`${s}//${o}${c}`),I_("Auth",!0)):i||hK()}function iV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dK(n){let e=iV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:kF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:kF(o)}}}function kF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function hK(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ep=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,t){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}};async function Fl(n,e){return Y7(n,"POST","/v1/accounts:signInWithIdp",BD(n,e))}var fK="http://localhost",J_=class n extends ep{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ds("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Gg(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Fl(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Fl(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Fl(e,t)}buildRequest(){let e={requestUri:fK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nl(t)}return e}};var tp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Z_=class extends tp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var QD=(()=>{class n extends Z_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return J_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var np=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Ea._fromIdTokenResponse(e,r,i),o=MF(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=MF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function MF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ND=class n extends xr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function sV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ND._fromErrorAndOperation(n,s,e,r):s})}async function pK(n,e,t=!1){let r=await Zf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return np._forOperation(n,"link",r)}async function gK(n,e,t=!1){let{auth:r}=n;if(Or(r.app))return Promise.reject(Kc(r));let i="reauthenticate";try{let s=await Zf(n,sV(r,i,e,n),t);Se(s.idToken,r,"internal-error");let o=HD(s.idToken);Se(o,r,"internal-error");let{sub:a}=o;return Se(n.uid===a,r,"user-mismatch"),np._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ds(r,"user-mismatch"),s}}async function mK(n,e,t=!1){if(Or(n.app))return Promise.reject(Kc(n));let r="signIn",i=await sV(n,r,e),s=await np._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function YD(n,e,t,r){return In(n).onIdTokenChanged(e,t,r)}function JD(n,e,t){return In(n).beforeAuthStateChanged(e,t)}function ZD(n){return In(n).signOut()}var X_="__sak";var ev=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(X_,"1"),this.storage.removeItem(X_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var yK=1e3,_K=10,vK=(()=>{class n extends ev{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);iK()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,_K):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},yK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),oV=vK;var EK=(()=>{class n extends ev{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),XD=EK;function IK(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var wK=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await IK(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function eS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var kD=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=eS("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let E=p;if(E.data.eventId===d)switch(E.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(E.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function ls(){return window}function TK(n){ls().location.href=n}function aV(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function bK(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CK(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DK(){return aV()?self:null}var cV="firebaseLocalStorageDb",SK=1,tv="firebaseLocalStorage",uV="fbase_key",Yc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function sv(n,e){return n.transaction([tv],e?"readwrite":"readonly").objectStore(tv)}function AK(){let n=indexedDB.deleteDatabase(cV);return new Yc(n).toPromise()}function MD(){let n=indexedDB.open(cV,SK);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(tv,{keyPath:uV})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(tv)?e(r):(r.close(),await AK(),e(await MD()))})})}async function xF(n,e,t){let r=sv(n,!0).put({[uV]:e,value:t});return new Yc(r).toPromise()}async function RK(n,e){let t=sv(n,!1).get(e),r=await new Yc(t).toPromise();return r===void 0?null:r.value}function OF(n,e){let t=sv(n,!0).delete(e);return new Yc(t).toPromise()}var PK=800,NK=3,kK=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await MD(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>NK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wK._getInstance(DK()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await bK(),!this.activeServiceWorker)return;this.sender=new kD(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||CK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await MD();return await xF(t,X_,"1"),await OF(t,X_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>xF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>RK(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>OF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=sv(s,!1).getAll();return new Yc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lV=kK;var twe=rV("rcb"),nwe=new Qc(3e4,6e4);function dV(n,e){return e?eo(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var rp=class extends ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function MK(n){return mK(n.auth,new rp(n),n.bypassAuthState)}function xK(n){let{auth:e,user:t}=n;return Se(t,e,"internal-error"),gK(t,new rp(n),n.bypassAuthState)}async function OK(n){let{auth:e,user:t}=n;return Se(t,e,"internal-error"),pK(t,new rp(n),n.bypassAuthState)}var nv=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MK;case"linkViaPopup":case"linkViaRedirect":return OK;case"reauthViaPopup":case"reauthViaRedirect":return xK;default:ds(this.auth,"internal-error")}}resolve(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var LK=new Qc(2e3,1e4);async function tS(n,e,t){if(Or(n.app))return Promise.reject(ki(n,"operation-not-supported-in-this-environment"));let r=iv(n);H7(n,e,tp);let i=dV(r,t);return new FK(r,"signInViaPopup",e,i).executeNotNull()}var FK=(()=>{class n extends nv{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return Se(t,this.auth,"internal-error"),t}async onExecution(){to(this.filter.length===1,"Popup operations only handle one event");let t=eS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,LK.get())};t()}}n.currentPopupAction=null;return n})(),VK="pendingRedirect",H_=new Map,xD=class extends nv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=H_.get(this.auth._key());if(!e){try{let r=await UK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}H_.set(this.auth._key(),e)}return this.bypassAuthState||H_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function UK(n,e){let t=$K(e),r=BK(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function jK(n,e){H_.set(n._key(),e)}function BK(n){return eo(n._redirectPersistence)}function $K(n){return $_(VK,n.config.apiKey,n.name)}async function HK(n,e,t=!1){if(Or(n.app))return Promise.reject(Kc(n));let r=iv(n),i=dV(r,e),o=await new xD(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var qK=600*1e3,OD=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zK(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ki(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qK&&this.cachedEventUids.clear(),this.cachedEventUids.has(LF(e))}saveEventToCache(e){this.cachedEventUids.add(LF(e)),this.lastProcessedEventTime=Date.now()}};function LF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function zK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hV(n);default:return!1}}async function GK(n,e={}){return Vl(n,"GET","/v1/projects",e)}var WK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KK=/^https?/;async function QK(n){if(n.config.emulator)return;let{authorizedDomains:e}=await GK(n);for(let t of e)try{if(YK(t))return}catch{}ds(n,"unauthorized-domain")}function YK(n){let e=bD(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!KK.test(t))return!1;if(WK.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var JK=new Qc(3e4,6e4);function FF(){let n=ls().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ZK(n){return new Promise((e,t)=>{var r,i,s;function o(){FF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FF(),t(ki(n,"network-request-failed"))},timeout:JK.get()})}if(!((i=(r=ls().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ls().gapi)===null||s===void 0)&&s.load)o();else{let a=rV("iframefcb");return ls()[a]=()=>{gapi.load?o():t(ki(n,"network-request-failed"))},cK(`${uK()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw q_=null,e})}var q_=null;function XK(n){return q_=q_||ZK(n),q_}var eQ=new Qc(5e3,15e3),tQ="__/auth/iframe",nQ="emulator/auth/iframe",rQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sQ(n){let e=n.config;Se(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?jD(e,nQ):`https://${n.config.authDomain}/${tQ}`,r={apiKey:e.apiKey,appName:n.name,v:da},i=iQ.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Nl(r).slice(1)}`}async function oQ(n){let e=await XK(n),t=ls().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:sQ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rQ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=ki(n,"network-request-failed"),a=ls().setTimeout(()=>{s(o)},eQ.get());function c(){ls().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var aQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cQ=500,uQ=600,lQ="_blank",dQ="http://localhost",rv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function hQ(n,e,t,r=cQ,i=uQ){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},aQ),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Pn().toLowerCase();t&&(a=YF(d)?lQ:t),KF(d)&&(e=e||dQ,c.scrollbars="yes");let h=Object.entries(c).reduce((E,[C,R])=>`${E}${C}=${R},`,"");if(rK(d)&&a!=="_self")return fQ(e||"",a),new rv(null);let p=window.open(e||"",a,h);Se(p,n,"popup-blocked");try{p.focus()}catch{}return new rv(p)}function fQ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var pQ="__/auth/handler",gQ="emulator/auth/handler",mQ=encodeURIComponent("fac");async function VF(n,e,t,r,i,s){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:da,eventId:i};if(e instanceof tp){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",nL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Z_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${mQ}=${encodeURIComponent(c)}`:"";return`${yQ(n)}?${Nl(a).slice(1)}${d}`}function yQ({config:n}){return n.emulator?jD(n,gQ):`https://${n.authDomain}/${pQ}`}var TD="webStorageSupport",LD=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XD,this._completeRedirectFn=HK,this._overrideRedirectResult=jK}async _openPopup(e,t,r,i){var s;to((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await VF(e,t,r,bD(),i);return hQ(e,o,eS())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await VF(e,t,r,bD(),i);return TK(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(to(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await oQ(e),r=new OD(e);return t.register("authEvent",i=>(Se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(TD,{type:TD},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[TD];o!==void 0&&t(!!o),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QK(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tV()||QF()||zD()}},fV=LD;var UF="@firebase/auth",jF="1.10.8";var FD=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _Q(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vQ(n){Ri(new hr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nV(n)},d=new PD(r,i,s,c);return lK(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ri(new hr("auth-internal",e=>{let t=iv(e.getProvider("auth").getImmediate());return(r=>new FD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zt(UF,jF,_Q(n)),zt(UF,jF,"esm2017")}var EQ=300,IQ=TC("authIdTokenMaxAge")||EQ,BF=null,wQ=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>IQ)return;let i=t?.token;BF!==i&&(BF=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function nS(n=$c()){let e=kl(n,"auth");if(e.isInitialized())return e.getImmediate();let t=WD(n,{popupRedirectResolver:fV,persistence:[lV,oV,XD]}),r=TC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=wQ(s.toString());JD(t,o,()=>o(t.currentUser)),YD(t,a=>o(a))}}let i=IC("auth");return i&&KD(t,`http://${i}`),t}function TQ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}aK({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ki("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",TQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vQ("Browser");var pV="auth",Jc=class{constructor(e){return e}},ip=class{constructor(){return xl(pV)}};var rS=new ae("angularfire2.auth-instances");function pY(n,e){let t=Bf(pV,n,e);return t&&new Jc(t)}function gY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Jc(r)}}var mY={provide:ip,deps:[[new Ar,rS]]},yY={provide:Jc,useFactory:pY,deps:[[new Ar,rS],Xr]};function gV(n,...e){return zt("angularfire",ha.full,"auth"),cr([yY,mY,{provide:rS,useFactory:gY(n),multi:!0,deps:[et,Lt,fa,qc,[new Ar,Ol],...e]}])}var mV=cn(SF,!0);var yV=cn(nS,!0);var _V=cn(tS,!0,2);var vV=cn(ZD,!0,2);var EV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IV={};var no,iS;(function(){var n;function e(b,m){function I(){}I.prototype=m.prototype,b.F=m.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(T,w,D){for(var _=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)_[$e-2]=arguments[$e];return m.prototype[w].apply(T,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,m,I){I||(I=0);let T=Array(16);if(typeof m=="string")for(var w=0;w<16;++w)T[w]=m.charCodeAt(I++)|m.charCodeAt(I++)<<8|m.charCodeAt(I++)<<16|m.charCodeAt(I++)<<24;else for(w=0;w<16;++w)T[w]=m[I++]|m[I++]<<8|m[I++]<<16|m[I++]<<24;m=b.g[0],I=b.g[1],w=b.g[2];let D=b.g[3],_;_=m+(D^I&(w^D))+T[0]+3614090360&4294967295,m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[1]+3905402710&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[2]+606105819&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[3]+3250441966&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(D^I&(w^D))+T[4]+4118548399&4294967295,m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[5]+1200080426&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[6]+2821735955&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[7]+4249261313&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(D^I&(w^D))+T[8]+1770035416&4294967295,m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[9]+2336552879&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[10]+4294925233&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[11]+2304563134&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(D^I&(w^D))+T[12]+1804603682&4294967295,m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[13]+4254626195&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[14]+2792965006&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[15]+1236535329&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(w^D&(I^w))+T[1]+4129170786&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[6]+3225465664&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[11]+643717713&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[0]+3921069994&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(w^D&(I^w))+T[5]+3593408605&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[10]+38016083&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[15]+3634488961&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[4]+3889429448&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(w^D&(I^w))+T[9]+568446438&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[14]+3275163606&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[3]+4107603335&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[8]+1163531501&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(w^D&(I^w))+T[13]+2850285829&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[2]+4243563512&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[7]+1735328473&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[12]+2368359562&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(I^w^D)+T[5]+4294588738&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[8]+2272392833&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[11]+1839030562&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[14]+4259657740&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(I^w^D)+T[1]+2763975236&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[4]+1272893353&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[7]+4139469664&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[10]+3200236656&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(I^w^D)+T[13]+681279174&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[0]+3936430074&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[3]+3572445317&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[6]+76029189&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(I^w^D)+T[9]+3654602809&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[12]+3873151461&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[15]+530742520&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[2]+3299628645&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(w^(I|~D))+T[0]+4096336452&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[7]+1126891415&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[14]+2878612391&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[5]+4237533241&4294967295,I=w+(_<<21&4294967295|_>>>11),_=m+(w^(I|~D))+T[12]+1700485571&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[3]+2399980690&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[10]+4293915773&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[1]+2240044497&4294967295,I=w+(_<<21&4294967295|_>>>11),_=m+(w^(I|~D))+T[8]+1873313359&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[15]+4264355552&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[6]+2734768916&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[13]+1309151649&4294967295,I=w+(_<<21&4294967295|_>>>11),_=m+(w^(I|~D))+T[4]+4149444226&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[11]+3174756917&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[2]+718787259&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+m&4294967295,b.g[1]=b.g[1]+(w+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.v=function(b,m){m===void 0&&(m=b.length);let I=m-this.blockSize,T=this.C,w=this.h,D=0;for(;D<m;){if(w==0)for(;D<=I;)i(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<m;)if(T[w++]=b.charCodeAt(D++),w==this.blockSize){i(this,T),w=0;break}}else for(;D<m;)if(T[w++]=b[D++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=m},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var m=1;m<b.length-8;++m)b[m]=0;m=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=m&255,m/=256;for(this.v(b),b=Array(16),m=0,I=0;I<4;++I)for(let T=0;T<32;T+=8)b[m++]=this.g[I]>>>T&255;return b};function s(b,m){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=m(b)}function o(b,m){this.h=m;let I=[],T=!0;for(let w=b.length-1;w>=0;w--){let D=b[w]|0;T&&D==m||(I[w]=D,T=!1)}this.g=I}var a={};function c(b){return-128<=b&&b<128?s(b,function(m){return new o([m|0],m<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(b<0)return P(d(-b));let m=[],I=1;for(let T=0;b>=I;T++)m[T]=b/I|0,I*=4294967296;return new o(m,0)}function h(b,m){if(b.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(b.charAt(0)=="-")return P(h(b.substring(1),m));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(m,8)),T=p;for(let D=0;D<b.length;D+=8){var w=Math.min(8,b.length-D);let _=parseInt(b.substring(D,D+w),m);w<8?(w=d(Math.pow(m,w)),T=T.j(w).add(d(_))):(T=T.j(I),T=T.add(d(_)))}return T}var p=c(0),E=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(N(this))return-P(this).m();let b=0,m=1;for(let I=0;I<this.g.length;I++){let T=this.i(I);b+=(T>=0?T:4294967296+T)*m,m*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(N(this))return"-"+P(this).toString(b);let m=d(Math.pow(b,6));var I=this;let T="";for(;;){let w=oe(I,m).g;I=H(I,w.j(m));let D=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=w,R(I))return D+T;for(;D.length<6;)D="0"+D;T=D+T}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(let m=0;m<b.g.length;m++)if(b.g[m]!=0)return!1;return!0}function N(b){return b.h==-1}n.l=function(b){return b=H(this,b),N(b)?-1:R(b)?0:1};function P(b){let m=b.g.length,I=[];for(let T=0;T<m;T++)I[T]=~b.g[T];return new o(I,~b.h).add(E)}n.abs=function(){return N(this)?P(this):this},n.add=function(b){let m=Math.max(this.g.length,b.g.length),I=[],T=0;for(let w=0;w<=m;w++){let D=T+(this.i(w)&65535)+(b.i(w)&65535),_=(D>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=_>>>16,D&=65535,_&=65535,I[w]=_<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(b,m){return b.add(P(m))}n.j=function(b){if(R(this)||R(b))return p;if(N(this))return N(b)?P(this).j(P(b)):P(P(this).j(b));if(N(b))return P(this.j(P(b)));if(this.l(C)<0&&b.l(C)<0)return d(this.m()*b.m());let m=this.g.length+b.g.length,I=[];for(var T=0;T<2*m;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<b.g.length;w++){let D=this.i(T)>>>16,_=this.i(T)&65535,$e=b.i(w)>>>16,bt=b.i(w)&65535;I[2*T+2*w]+=_*bt,$(I,2*T+2*w),I[2*T+2*w+1]+=D*bt,$(I,2*T+2*w+1),I[2*T+2*w+1]+=_*$e,$(I,2*T+2*w+1),I[2*T+2*w+2]+=D*$e,$(I,2*T+2*w+2)}for(b=0;b<m;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=m;b<2*m;b++)I[b]=0;return new o(I,0)};function $(b,m){for(;(b[m]&65535)!=b[m];)b[m+1]+=b[m]>>>16,b[m]&=65535,m++}function B(b,m){this.g=b,this.h=m}function oe(b,m){if(R(m))throw Error("division by zero");if(R(b))return new B(p,p);if(N(b))return m=oe(P(b),m),new B(P(m.g),P(m.h));if(N(m))return m=oe(b,P(m)),new B(P(m.g),m.h);if(b.g.length>30){if(N(b)||N(m))throw Error("slowDivide_ only works with positive integers.");for(var I=E,T=m;T.l(b)<=0;)I=fe(I),T=fe(T);var w=ne(I,1),D=ne(T,1);for(T=ne(T,2),I=ne(I,2);!R(T);){var _=D.add(T);_.l(b)<=0&&(w=w.add(I),D=_),T=ne(T,1),I=ne(I,1)}return m=H(b,w.j(m)),new B(w,m)}for(w=p;b.l(m)>=0;){for(I=Math.max(1,Math.floor(b.m()/m.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),D=d(I),_=D.j(m);N(_)||_.l(b)>0;)I-=T,D=d(I),_=D.j(m);R(D)&&(D=E),w=w.add(D),b=H(b,_)}return new B(w,b)}n.B=function(b){return oe(this,b).h},n.and=function(b){let m=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<m;T++)I[T]=this.i(T)&b.i(T);return new o(I,this.h&b.h)},n.or=function(b){let m=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<m;T++)I[T]=this.i(T)|b.i(T);return new o(I,this.h|b.h)},n.xor=function(b){let m=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<m;T++)I[T]=this.i(T)^b.i(T);return new o(I,this.h^b.h)};function fe(b){let m=b.g.length+1,I=[];for(let T=0;T<m;T++)I[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(I,b.h)}function ne(b,m){let I=m>>5;m%=32;let T=b.g.length-I,w=[];for(let D=0;D<T;D++)w[D]=m>0?b.i(D+I)>>>m|b.i(D+I+1)<<32-m:b.i(D+I);return new o(w,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,iS=IV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,no=IV.Integer=o}).apply(typeof EV<"u"?EV:typeof self<"u"?self:typeof window<"u"?window:{});var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ro={};var sS,_Y,Ul,oS,sp,av,aS,cS,uS;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ov=="object"&&ov];for(var g=0;g<l.length;++g){var v=l[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,g){if(g)e:{var v=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var k=l[A];if(!(k in v))break e;v=v[k]}l=l[l.length-1],A=v[l],g=g(A),g!=A&&g!=null&&e(v,l,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(g){var v=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.push([A,g[A]]);return v}});var s=s||{},o=this||self;function a(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function c(l,g,v){return l.call.apply(l.bind,arguments)}function d(l,g,v){return d=c,d.apply(null,arguments)}function h(l,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function p(l,g){function v(){}v.prototype=g.prototype,l.Z=g.prototype,l.prototype=new v,l.prototype.constructor=l,l.Ob=function(A,k,O){for(var ee=Array(arguments.length-2),be=2;be<arguments.length;be++)ee[be-2]=arguments[be];return g.prototype[k].apply(A,ee)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function C(l){let g=l.length;if(g>0){let v=Array(g);for(let A=0;A<g;A++)v[A]=l[A];return v}return[]}function R(l,g){for(let A=1;A<arguments.length;A++){let k=arguments[A];var v=typeof k;if(v=v!="object"?v:k?Array.isArray(k)?"array":v:"null",v=="array"||v=="object"&&typeof k.length=="number"){v=l.length||0;let O=k.length||0;l.length=v+O;for(let ee=0;ee<O;ee++)l[v+ee]=k[ee]}else l.push(k)}}class N{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function P(l){o.setTimeout(()=>{throw l},0)}function H(){var l=b;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class ${constructor(){this.h=this.g=null}add(g,v){let A=B.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var B=new N(()=>new oe,l=>l.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ne=!1,b=new $,m=()=>{let l=Promise.resolve(void 0);fe=()=>{l.then(I)}};function I(){for(var l;l=H();){try{l.h.call(l.g)}catch(v){P(v)}var g=B;g.j(l),g.h<100&&(g.h++,l.next=g.g,g.g=l)}ne=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};o.addEventListener("test",v,g),o.removeEventListener("test",v,g)}catch{}return l})();function _(l){return/^[\s\xa0]*$/.test(l)}function $e(l,g){w.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,g)}p($e,w),$e.prototype.init=function(l,g){let v=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget,g||(v=="mouseover"?g=l.fromElement:v=="mouseout"&&(g=l.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),ht=0;function Ke(l,g,v,A,k){this.listener=l,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=k,this.key=++ht,this.da=this.fa=!1}function F(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function V(l,g,v){for(let A in l)g.call(v,l[A],A,l)}function U(l,g){for(let v in l)g.call(void 0,l[v],v,l)}function pe(l){let g={};for(let v in l)g[v]=l[v];return g}let je="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(l,g){let v,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(v in A)l[v]=A[v];for(let O=0;O<je.length;O++)v=je[O],Object.prototype.hasOwnProperty.call(A,v)&&(l[v]=A[v])}}function xn(l){this.src=l,this.g={},this.h=0}xn.prototype.add=function(l,g,v,A,k){let O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);let ee=ir(l,g,A,k);return ee>-1?(g=l[ee],v||(g.fa=!1)):(g=new Ke(g,this.src,O,!!A,k),g.fa=v,l.push(g)),g};function yn(l,g){let v=g.type;if(v in l.g){var A=l.g[v],k=Array.prototype.indexOf.call(A,g,void 0),O;(O=k>=0)&&Array.prototype.splice.call(A,k,1),O&&(F(g),l.g[v].length==0&&(delete l.g[v],l.h--))}}function ir(l,g,v,A){for(let k=0;k<l.length;++k){let O=l[k];if(!O.da&&O.listener==g&&O.capture==!!v&&O.ha==A)return k}return-1}var Wt="closure_lm_"+(Math.random()*1e6|0),X={};function Q(l,g,v,A,k){if(A&&A.once)return he(l,g,v,A,k);if(Array.isArray(g)){for(let O=0;O<g.length;O++)Q(l,g[O],v,A,k);return null}return v=it(v),l&&l[bt]?l.J(g,v,a(A)?!!A.capture:!!A,k):j(l,g,v,!1,A,k)}function j(l,g,v,A,k,O){if(!g)throw Error("Invalid event type");let ee=a(k)?!!k.capture:!!k,be=Re(l);if(be||(l[Wt]=be=new xn(l)),v=be.add(g,v,A,ee,O),v.proxy)return v;if(A=Z(),v.proxy=A,A.src=l,A.listener=v,l.addEventListener)D||(k=ee),k===void 0&&(k=!1),l.addEventListener(g.toString(),A,k);else if(l.attachEvent)l.attachEvent(Te(g.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Z(){function l(v){return g.call(l.src,l.listener,v)}let g=Ne;return l}function he(l,g,v,A,k){if(Array.isArray(g)){for(let O=0;O<g.length;O++)he(l,g[O],v,A,k);return null}return v=it(v),l&&l[bt]?l.K(g,v,a(A)?!!A.capture:!!A,k):j(l,g,v,!0,A,k)}function me(l,g,v,A,k){if(Array.isArray(g))for(var O=0;O<g.length;O++)me(l,g[O],v,A,k);else A=a(A)?!!A.capture:!!A,v=it(v),l&&l[bt]?(l=l.i,O=String(g).toString(),O in l.g&&(g=l.g[O],v=ir(g,v,A,k),v>-1&&(F(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete l.g[O],l.h--)))):l&&(l=Re(l))&&(g=l.g[g.toString()],l=-1,g&&(l=ir(g,v,A,k)),(v=l>-1?g[l]:null)&&de(v))}function de(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[bt])yn(g.i,l);else{var v=l.type,A=l.proxy;g.removeEventListener?g.removeEventListener(v,A,l.capture):g.detachEvent?g.detachEvent(Te(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=Re(g))?(yn(v,l),v.h==0&&(v.src=null,g[Wt]=null)):F(l)}}}function Te(l){return l in X?X[l]:X[l]="on"+l}function Ne(l,g){if(l.da)l=!0;else{g=new $e(g,this);let v=l.listener,A=l.ha||l.src;l.fa&&de(l),l=v.call(A,g)}return l}function Re(l){return l=l[Wt],l instanceof xn?l:null}var ct="__closure_events_fn_"+(Math.random()*1e9>>>0);function it(l){return typeof l=="function"?l:(l[ct]||(l[ct]=function(g){return l.handleEvent(g)}),l[ct])}function Ct(){T.call(this),this.i=new xn(this),this.M=this,this.G=null}p(Ct,T),Ct.prototype[bt]=!0,Ct.prototype.removeEventListener=function(l,g,v,A){me(this,l,g,v,A)};function ft(l,g){var v,A=l.G;if(A)for(v=[];A;A=A.G)v.push(A);if(l=l.M,A=g.type||g,typeof g=="string")g=new w(g,l);else if(g instanceof w)g.target=g.target||l;else{var k=g;g=new w(A,l),ge(g,k)}k=!0;let O,ee;if(v)for(ee=v.length-1;ee>=0;ee--)O=g.g=v[ee],k=sr(O,A,!0,g)&&k;if(O=g.g=l,k=sr(O,A,!0,g)&&k,k=sr(O,A,!1,g)&&k,v)for(ee=0;ee<v.length;ee++)O=g.g=v[ee],k=sr(O,A,!1,g)&&k}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var l=this.i;for(let g in l.g){let v=l.g[g];for(let A=0;A<v.length;A++)F(v[A]);delete l.g[g],l.h--}}this.G=null},Ct.prototype.J=function(l,g,v,A){return this.i.add(String(l),g,!1,v,A)},Ct.prototype.K=function(l,g,v,A){return this.i.add(String(l),g,!0,v,A)};function sr(l,g,v,A){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();let k=!0;for(let O=0;O<g.length;++O){let ee=g[O];if(ee&&!ee.da&&ee.capture==v){let be=ee.listener,u=ee.ha||ee.src;ee.fa&&yn(l.i,ee),k=be.call(u,A)!==!1&&k}}return k&&!A.defaultPrevented}function La(l,g){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(l,g||0)}function Is(l){l.g=La(()=>{l.g=null,l.i&&(l.i=!1,Is(l))},l.l);let g=l.h;l.h=null,l.m.apply(null,g)}class Fa extends T{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Is(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(l){T.call(this),this.h=l,this.g={}}p(Ir,T);var Ht=[];function Ot(l){V(l.g,function(g,v){this.g.hasOwnProperty(v)&&de(g)},l),l.g={}}Ir.prototype.N=function(){Ir.Z.N.call(this),Ot(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var si=o.JSON.stringify,ws=o.JSON.parse,Va=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Ua(){}function pr(){}var nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function On(){w.call(this,"d")}p(On,w);function ja(){w.call(this,"c")}p(ja,w);var Ts={},ig=null;function Eo(){return ig=ig||new Ct}Ts.Ia="serverreachability";function Gd(l){w.call(this,Ts.Ia,l)}p(Gd,w);function Io(l){let g=Eo();ft(g,new Gd(g))}Ts.STAT_EVENT="statevent";function wo(l,g){w.call(this,Ts.STAT_EVENT,l),this.stat=g}p(wo,w);function _n(l){let g=Eo();ft(g,new wo(g,l))}Ts.Ja="timingevent";function vu(l,g){w.call(this,Ts.Ja,l),this.size=g}p(vu,w);function wr(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},g)}function To(){this.g=!0}To.prototype.ua=function(){this.g=!1};function Eu(l,g,v,A,k,O){l.info(function(){if(l.g)if(O){var ee="",be=O.split("&");for(let f=0;f<be.length;f++){var u=be[f].split("=");if(u.length>1){let y=u[0];u=u[1];let S=y.split("_");ee=S.length>=2&&S[1]=="type"?ee+(y+"="+u+"&"):ee+(y+"=redacted&")}}}else ee=null;else ee=O;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+g+`
`+v+`
`+ee})}function sg(l,g,v,A,k,O,ee){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+g+`
`+v+`
`+O+" "+ee})}function Ur(l,g,v,A){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ln(l,v)+(A?" "+A:"")})}function og(l,g){l.info(function(){return"TIMEOUT: "+g})}To.prototype.info=function(){};function Ln(l,g){if(!l.g)return g;if(!g)return null;try{let O=JSON.parse(g);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var v=O[l];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(let ee=1;ee<A.length;ee++)A[ee]=""}}}}return si(O)}catch{return g}}var Ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Co;function Wd(){}p(Wd,Ua),Wd.prototype.g=function(){return new XMLHttpRequest},Co=new Wd;function $a(l){return encodeURIComponent(String(l))}function Do(l){var g=1;l=l.split(":");let v=[];for(;g>0&&l.length;)v.push(l.shift()),g--;return l.length&&v.push(l.join(":")),v}function Vi(l,g,v,A){this.j=l,this.i=g,this.l=v,this.S=A||1,this.V=new Ir(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ag}function ag(){this.i=null,this.g="",this.h=!1}var Ha={},Iu={};function qa(l,g,v){l.M=1,l.A=Ka(Tr(g)),l.u=v,l.R=!0,za(l,null)}function za(l,g){l.F=Date.now(),So(l),l.B=Tr(l.A);var v=l.B,A=l.S;Array.isArray(A)||(A=[String(A)]),fg(v.i,"t",A),l.C=0,v=l.j.L,l.h=new ag,l.g=xu(l.j,v?g:null,!l.u),l.P>0&&(l.O=new Fa(d(l.Y,l,l.g),l.P)),g=l.V,v=l.g,A=l.ba;var k="readystatechange";Array.isArray(k)||(k&&(Ht[0]=k.toString()),k=Ht);for(let O=0;O<k.length;O++){let ee=Q(v,k[O],A||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=l.J?pe(l.J):{},l.u?(l.v||(l.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,g)):(l.v="GET",l.g.ea(l.B,l.v,null,g)),Io(),Eu(l.i,l.v,l.B,l.l,l.S,l.u)}Vi.prototype.ba=function(l){l=l.target;let g=this.O;g&&pt(l)==3?g.j():this.Y(l)},Vi.prototype.Y=function(l){try{if(l==this.g)e:{let be=pt(this.g),u=this.g.ya(),f=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||Eg(this.g)))){this.K||be!=4||u==7||(u==8||f<=0?Io(3):Io(2)),Tu(this);var g=this.g.ca();this.X=g;var v=Ui(this);if(this.o=g==200,sg(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,k=this.g;if((A=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(A)){var O=A;break t}}O=null}if(l=O)Ur(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ro(this,l);else{this.o=!1,this.m=3,_n(12),bs(this),Ao(this);break e}}if(this.R){l=!0;let y;for(;!this.K&&this.C<v.length;)if(y=cg(this,v),y==Iu){be==4&&(this.m=4,_n(14),l=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(y==Ha){this.m=4,_n(15),Ur(this.i,this.l,v,"[Invalid Chunk]"),l=!1;break}else Ur(this.i,this.l,y,null),Ro(this,y);if(Kd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||v.length!=0||this.h.h||(this.m=1,_n(16),l=!1),this.o=this.o&&l,!l)Ur(this.i,this.l,v,"[Invalid Chunked Response]"),bs(this),Ao(this);else if(v.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Nu(ee),ee.P=!0,_n(11))}}else Ur(this.i,this.l,v,null),Ro(this,v);be==4&&bs(this),this.o&&!this.K&&(be==4?ah(this.j,this):(this.o=!1,So(this)))}else iI(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,_n(12)):(this.m=0,_n(13)),bs(this),Ao(this)}}}catch{}finally{}};function Ui(l){if(!Kd(l))return l.g.la();let g=Eg(l.g);if(g==="")return"";let v="",A=g.length,k=pt(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return bs(l),Ao(l),"";l.h.i=new o.TextDecoder}for(let O=0;O<A;O++)l.h.h=!0,v+=l.h.i.decode(g[O],{stream:!(k&&O==A-1)});return g.length=0,l.h.g+=v,l.C=0,l.h.g}function Kd(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function cg(l,g){var v=l.C,A=g.indexOf(`
`,v);return A==-1?Iu:(v=Number(g.substring(v,A)),isNaN(v)?Ha:(A+=1,A+v>g.length?Iu:(g=g.slice(A,A+v),l.C=A+v,g)))}Vi.prototype.cancel=function(){this.K=!0,bs(this)};function So(l){l.T=Date.now()+l.H,wu(l,l.H)}function wu(l,g){if(l.D!=null)throw Error("WatchDog timer not null");l.D=wr(d(l.aa,l),g)}function Tu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Vi.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(og(this.i,this.B),this.M!=2&&(Io(),_n(17)),bs(this),this.m=2,Ao(this)):wu(this,this.T-l)};function Ao(l){l.j.I==0||l.K||ah(l.j,l)}function bs(l){Tu(l);var g=l.O;g&&typeof g.dispose=="function"&&g.dispose(),l.O=null,Ot(l.V),l.g&&(g=l.g,l.g=null,g.abort(),g.dispose())}function Ro(l,g){try{var v=l.j;if(v.I!=0&&(v.g==l||Ga(v.h,l))){if(!l.L&&Ga(v.h,l)&&v.I==3){try{var A=v.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<l.F)ku(v),Cs(v);else break e;Fo(v),_n(18)}}else v.xa=k[1],0<v.xa-v.K&&k[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=wr(d(v.Va,v),6e3));ji(v.h)<=1&&v.ta&&(v.ta=void 0)}else $i(v,11)}else if((l.L||v.g==l)&&ku(v),!_(g))for(k=v.Ba.g.parse(g),g=0;g<k.length;g++){let f=k[g],y=f[0];if(!(y<=v.K))if(v.K=y,f=f[1],v.I==2)if(f[0]=="c"){v.M=f[1],v.ba=f[2];let S=f[3];S!=null&&(v.ka=S,v.j.info("VER="+v.ka));let M=f[4];M!=null&&(v.za=M,v.j.info("SVER="+v.za));let L=f[5];L!=null&&typeof L=="number"&&L>0&&(A=1.5*L,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;let Y=l.g;if(Y){let ut=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ut){var O=A.h;O.g||ut.indexOf("spdy")==-1&&ut.indexOf("quic")==-1&&ut.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Qd(O,O.h),O.h=null))}if(A.G){let Kt=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Kt&&(A.wa=Kt,Dt(A.J,A.G,Kt))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-l.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ee=l;if(A.na=Mu(A,A.L?A.ba:null,A.W),ee.L){Yd(A.h,ee);var be=ee,u=A.O;u&&(be.H=u),be.D&&(Tu(be),So(be)),A.g=ee}else Pu(A);v.i.length>0&&mr(v)}else f[0]!="stop"&&f[0]!="close"||$i(v,7);else v.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?$i(v,7):Ru(v):f[0]!="noop"&&v.l&&v.l.qa(f),v.A=0)}}Io(4)}catch{}}var ug=class{constructor(l,g){this.g=l,this.map=g}};function bu(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Po(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ji(l){return l.h?1:l.g?l.g.size:0}function Ga(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Qd(l,g){l.g?l.g.add(g):l.h=g}function Yd(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}bu.prototype.cancel=function(){if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Jd(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let g=l.i;for(let v of l.g.values())g=g.concat(v.G);return g}return C(l.i)}var Zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xd(l,g){if(l){l=l.split("&");for(let v=0;v<l.length;v++){let A=l[v].indexOf("="),k,O=null;A>=0?(k=l[v].substring(0,A),O=l[v].substring(A+1)):k=l[v],g(k,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function jr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;l instanceof jr?(this.l=l.l,No(this,l.j),this.o=l.o,this.g=l.g,Wa(this,l.u),this.h=l.h,eh(this,pg(l.i)),this.m=l.m):l&&(g=String(l).match(Zd))?(this.l=!1,No(this,g[1]||"",!0),this.o=Qa(g[2]||""),this.g=Qa(g[3]||"",!0),Wa(this,g[4]),this.h=Qa(g[5]||"",!0),eh(this,g[6]||"",!0),this.m=Qa(g[7]||"")):(this.l=!1,this.i=new ai(null,this.l))}jr.prototype.toString=function(){let l=[];var g=this.j;g&&l.push(br(g,Ya,!0),":");var v=this.g;return(v||g=="file")&&(l.push("//"),(g=this.o)&&l.push(br(g,Ya,!0),"@"),l.push($a(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&l.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(br(v,v.charAt(0)=="/"?lg:Cu,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",br(v,Du)),l.join("")},jr.prototype.resolve=function(l){let g=Tr(this),v=!!l.j;v?No(g,l.j):v=!!l.o,v?g.o=l.o:v=!!l.g,v?g.g=l.g:v=l.u!=null;var A=l.h;if(v)Wa(g,l.u);else if(v=!!l.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var k=g.h.lastIndexOf("/");k!=-1&&(A=g.h.slice(0,k+1)+A)}if(k=A,k==".."||k==".")A="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){A=k.lastIndexOf("/",0)==0,k=k.split("/");let O=[];for(let ee=0;ee<k.length;){let be=k[ee++];be=="."?A&&ee==k.length&&O.push(""):be==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),A&&ee==k.length&&O.push("")):(O.push(be),A=!0)}A=O.join("/")}else A=k}return v?g.h=A:v=l.i.toString()!=="",v?eh(g,pg(l.i)):v=!!l.m,v&&(g.m=l.m),g};function Tr(l){return new jr(l)}function No(l,g,v){l.j=v?Qa(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function Wa(l,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);l.u=g}else l.u=null}function eh(l,g,v){g instanceof ai?(l.i=g,Ja(l.i,l.l)):(v||(g=br(g,Nt)),l.i=new ai(g,l.l))}function Dt(l,g,v){l.i.set(g,v)}function Ka(l){return Dt(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Qa(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function br(l,g,v){return typeof l=="string"?(l=encodeURI(l).replace(g,oi),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function oi(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ya=/[#\/\?@]/g,Cu=/[#\?:]/g,lg=/[#\?]/g,Nt=/[#\?@]/g,Du=/#/g;function ai(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function Cr(l){l.g||(l.g=new Map,l.h=0,l.i&&Xd(l.i,function(g,v){l.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=ai.prototype,n.add=function(l,g){Cr(this),this.i=null,l=ko(this,l);let v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(g),this.h+=1,this};function dg(l,g){Cr(l),g=ko(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function th(l,g){return Cr(l),g=ko(l,g),l.g.has(g)}n.forEach=function(l,g){Cr(this),this.g.forEach(function(v,A){v.forEach(function(k){l.call(g,k,A,this)},this)},this)};function hg(l,g){Cr(l);let v=[];if(typeof g=="string")th(l,g)&&(v=v.concat(l.g.get(ko(l,g))));else for(l=Array.from(l.g.values()),g=0;g<l.length;g++)v=v.concat(l[g]);return v}n.set=function(l,g){return Cr(this),this.i=null,l=ko(this,l),th(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},n.get=function(l,g){return l?(l=hg(this,l),l.length>0?String(l[0]):g):g};function fg(l,g,v){dg(l,g),v.length>0&&(l.i=null,l.g.set(ko(l,g),C(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var v=g[A];let k=$a(v);v=hg(this,v);for(let O=0;O<v.length;O++){let ee=k;v[O]!==""&&(ee+="="+$a(v[O])),l.push(ee)}}return this.i=l.join("&")};function pg(l){let g=new ai;return g.i=l.i,l.g&&(g.g=new Map(l.g),g.h=l.h),g}function ko(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function Ja(l,g){g&&!l.j&&(Cr(l),l.i=null,l.g.forEach(function(v,A){let k=A.toLowerCase();A!=k&&(dg(this,A),fg(this,k,v))},l)),l.j=g}function Bi(l,g){let v=new To;if(o.Image){let A=new Image;A.onload=h(ci,v,"TestLoadImage: loaded",!0,g,A),A.onerror=h(ci,v,"TestLoadImage: error",!1,g,A),A.onabort=h(ci,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=h(ci,v,"TestLoadImage: timeout",!1,g,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else g(!1)}function gg(l,g){let v=new To,A=new AbortController,k=setTimeout(()=>{A.abort(),ci(v,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:A.signal}).then(O=>{clearTimeout(k),O.ok?ci(v,"TestPingServer: ok",!0,g):ci(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),ci(v,"TestPingServer: error",!1,g)})}function ci(l,g,v,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(v)}catch{}}function mg(){this.g=new Va}function ui(l){this.i=l.Sb||null,this.h=l.ab||!1}p(ui,Ua),ui.prototype.g=function(){return new Su(this.i,this.h)};function Su(l,g){Ct.call(this),this.H=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Su,Ct),n=Su.prototype,n.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=g,this.readyState=1,gr(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(g.body=l),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Za(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function yg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?Za(this):gr(this),this.readyState==3&&yg(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Za(this))},n.Na=function(l){this.g&&(this.response=l,Za(this))},n.ga=function(){this.g&&Za(this)};function Za(l){l.readyState=4,l.l=null,l.j=null,l.B=null,gr(l)}n.setRequestHeader=function(l,g){this.A.append(l,g)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=g.next();return l.join(`\r
`)};function gr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _g(l){let g="";return V(l,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function nh(l,g,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=_g(v),typeof l=="string"?v!=null&&$a(v):Dt(l,g,v))}function St(l){Ct.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(St,Ct);var Au=/^https?$/i,vg=["POST","PUT"];n=St.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Co.g(),this.g.onreadystatechange=E(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch(O){Mo(this,O);return}if(l=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)v.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let O of A.keys())v.set(O,A.get(O));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(O=>O.toLowerCase()=="content-type"),k=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(vg,g,void 0)>=0)||A||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,ee]of v)this.g.setRequestHeader(O,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){Mo(this,O)}};function Mo(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.o=5,xo(l),Oo(l)}function xo(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ft(this,"complete"),ft(this,"abort"),Oo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),St.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?rh(this):this.Xa())},n.Xa=function(){rh(this)};function rh(l){if(l.h&&typeof s<"u"){if(l.v&&pt(l)==4)setTimeout(l.Ca.bind(l),0);else if(ft(l,"readystatechange"),pt(l)==4){l.h=!1;try{let O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var A;if(A=O===0){let ee=String(l.D).match(Zd)[1]||null;!ee&&o.self&&o.self.location&&(ee=o.self.location.protocol.slice(0,-1)),A=!Au.test(ee?ee.toLowerCase():"")}v=A}if(v)ft(l,"complete"),ft(l,"success");else{l.o=6;try{var k=pt(l)>2?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.ca()+"]",xo(l)}}finally{Oo(l)}}}}function Oo(l,g){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let v=l.g;l.g=null,g||ft(l,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function pt(l){return l.g?l.g.readyState:0}n.ca=function(){try{return pt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),ws(g)}};function Eg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function iI(l){let g={};l=(l.g&&pt(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(_(l[A]))continue;var v=Do(l[A]);let k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let O=g[k]||[];g[k]=O,O.push(v)}U(g,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(l,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||g}function ih(l){this.za=0,this.i=[],this.j=new To,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Lo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Lo("baseRetryDelayMs",5e3,l),this.Za=Lo("retryDelaySeedMs",1e4,l),this.Ta=Lo("forwardChannelMaxRetries",2,l),this.va=Lo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new bu(l&&l.concurrentRequestLimit),this.Ba=new mg,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ih.prototype,n.ka=8,n.I=1,n.connect=function(l,g,v,A){_n(0),this.W=l,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Mu(this,null,this.W),mr(this)};function Ru(l){if(sh(l),l.I==3){var g=l.V++,v=Tr(l.J);if(Dt(v,"SID",l.M),Dt(v,"RID",g),Dt(v,"TYPE","terminate"),li(l,v),g=new Vi(l,l.j,g),g.M=2,g.A=Ka(Tr(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=g.A,v=!0),v||(g.g=xu(g.j,null),g.g.ea(g.A)),g.F=Date.now(),So(g)}ch(l)}function Cs(l){l.g&&(Nu(l),l.g.cancel(),l.g=null)}function sh(l){Cs(l),l.v&&(o.clearTimeout(l.v),l.v=null),ku(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function mr(l){if(!Po(l.h)&&!l.m){l.m=!0;var g=l.Ea;fe||m(),ne||(fe(),ne=!0),b.add(g,l),l.D=0}}function Ig(l,g){return ji(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=g.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=wr(d(l.Ea,l,g),Vo(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let k=new Vi(this,this.j,l),O=this.o;if(this.U&&(O?(O=pe(O),ge(O,this.U)):O=this.U),this.u!==null||this.R||(k.J=O,O=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=oh(this,k,g),v=Tr(this.J),Dt(v,"RID",l),Dt(v,"CVER",22),this.G&&Dt(v,"X-HTTP-Session-Id",this.G),li(this,v),O&&(this.R?g="headers="+$a(_g(O))+"&"+g:this.u&&nh(v,this.u,O)),Qd(this.h,k),this.Ra&&Dt(v,"TYPE","init"),this.S?(Dt(v,"$req",g),Dt(v,"SID","null"),k.U=!0,qa(k,v,null)):qa(k,v,g),this.I=2}}else this.I==3&&(l?wg(this,l):this.i.length==0||Po(this.h)||wg(this))};function wg(l,g){var v;g?v=g.l:v=l.V++;let A=Tr(l.J);Dt(A,"SID",l.M),Dt(A,"RID",v),Dt(A,"AID",l.K),li(l,A),l.u&&l.o&&nh(A,l.u,l.o),v=new Vi(l,l.j,v,l.D+1),l.u===null&&(v.J=l.o),g&&(l.i=g.G.concat(l.i)),g=oh(l,v,1e3),v.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Qd(l.h,v),qa(v,A,g)}function li(l,g){l.H&&V(l.H,function(v,A){Dt(g,A,v)}),l.l&&V({},function(v,A){Dt(g,A,v)})}function oh(l,g,v){v=Math.min(l.i.length,v);let A=l.l?d(l.l.Ka,l.l,l):null;e:{var k=l.i;let be=-1;for(;;){let u=["count="+v];be==-1?v>0?(be=k[0].g,u.push("ofs="+be)):be=0:u.push("ofs="+be);let f=!0;for(let y=0;y<v;y++){var O=k[y].g;let S=k[y].map;if(O-=be,O<0)be=Math.max(0,k[y].g-100),f=!1;else try{O="req"+O+"_"||"";try{var ee=S instanceof Map?S:Object.entries(S);for(let[M,L]of ee){let Y=L;a(L)&&(Y=si(L)),u.push(O+M+"="+encodeURIComponent(Y))}}catch(M){throw u.push(O+"type="+encodeURIComponent("_badmap")),M}}catch{A&&A(S)}}if(f){ee=u.join("&");break e}}ee=void 0}return l=l.i.splice(0,v),g.G=l,ee}function Pu(l){if(!l.g&&!l.v){l.Y=1;var g=l.Da;fe||m(),ne||(fe(),ne=!0),b.add(g,l),l.A=0}}function Fo(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=wr(d(l.Da,l),Vo(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Xa(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=wr(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_n(10),Cs(this),Xa(this))};function Nu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Xa(l){l.g=new Vi(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var g=Tr(l.na);Dt(g,"RID","rpc"),Dt(g,"SID",l.M),Dt(g,"AID",l.K),Dt(g,"CI",l.F?"0":"1"),!l.F&&l.ia&&Dt(g,"TO",l.ia),Dt(g,"TYPE","xmlhttp"),li(l,g),l.u&&l.o&&nh(g,l.u,l.o),l.O&&(l.g.H=l.O);var v=l.g;l=l.ba,v.M=1,v.A=Ka(Tr(g)),v.u=null,v.R=!0,za(v,l)}n.Va=function(){this.C!=null&&(this.C=null,Cs(this),Fo(this),_n(19))};function ku(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function ah(l,g){var v=null;if(l.g==g){ku(l),Nu(l),l.g=null;var A=2}else if(Ga(l.h,g))v=g.G,Yd(l.h,g),A=1;else return;if(l.I!=0){if(g.o)if(A==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var k=l.D;A=Eo(),ft(A,new vu(A,v)),mr(l)}else Pu(l);else if(k=g.m,k==3||k==0&&g.X>0||!(A==1&&Ig(l,g)||A==2&&Fo(l)))switch(v&&v.length>0&&(g=l.h,g.i=g.i.concat(v)),k){case 1:$i(l,5);break;case 4:$i(l,10);break;case 3:$i(l,6);break;default:$i(l,2)}}}function Vo(l,g){let v=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(v*=2),v*g}function $i(l,g){if(l.j.info("Error code "+g),g==2){var v=d(l.bb,l),A=l.Ua;let k=!A;A=new jr(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||No(A,"https"),Ka(A),k?Bi(A.toString(),v):gg(A.toString(),v)}else _n(2);l.I=0,l.l&&l.l.pa(g),ch(l),sh(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function ch(l){if(l.I=0,l.ja=[],l.l){let g=Jd(l.h);(g.length!=0||l.i.length!=0)&&(R(l.ja,g),R(l.ja,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.oa()}}function Mu(l,g,v){var A=v instanceof jr?Tr(v):new jr(v);if(A.g!="")g&&(A.g=g+"."+A.g),Wa(A,A.u);else{var k=o.location;A=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;let O=new jr(null);A&&No(O,A),g&&(O.g=g),k&&Wa(O,k),v&&(O.h=v),A=O}return v=l.G,g=l.wa,v&&g&&Dt(A,v,g),Dt(A,"VER",l.ka),li(l,A),A}function xu(l,g,v){if(g&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Aa&&!l.ma?new St(new ui({ab:v})):new St(l.ma),g.Fa(l.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uh(){}n=uh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ds(){}Ds.prototype.g=function(l,g){return new qn(l,g)};function qn(l,g){Ct.call(this),this.g=new ih(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(l?l["X-WebChannel-Client-Profile"]=g.sa:l={"X-WebChannel-Client-Profile":g.sa}),this.g.U=l,(l=g&&g.Qb)&&!_(l)&&(this.g.u=l),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!_(g)&&(this.g.G=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new Ss(this)}p(qn,Ct),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Ru(this.g)},qn.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.v&&(v={},v.__data__=si(l),l=v);g.i.push(new ug(g.Ya++,l)),g.I==3&&mr(g)},qn.prototype.N=function(){this.g.l=null,delete this.j,Ru(this.g),delete this.g,qn.Z.N.call(this)};function lh(l){On.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(let v in g){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}p(lh,On);function Hi(){ja.call(this),this.status=1}p(Hi,ja);function Ss(l){this.g=l}p(Ss,uh),Ss.prototype.ra=function(){ft(this.g,"a")},Ss.prototype.qa=function(l){ft(this.g,new lh(l))},Ss.prototype.pa=function(l){ft(this.g,new Hi)},Ss.prototype.oa=function(){ft(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,uS=ro.createWebChannelTransport=function(){return new Ds},cS=ro.getStatEventTarget=function(){return Eo()},aS=ro.Event=Ts,av=ro.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,sp=ro.ErrorCode=Ba,bo.COMPLETE="complete",oS=ro.EventType=bo,pr.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Ul=ro.WebChannel=pr,_Y=ro.FetchXmlHttpFactory=ui,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,sS=ro.XhrIo=St}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var wV="@firebase/firestore",TV="4.9.2";var er=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");var ld="12.3.0";var ru=new ma("@firebase/firestore");function jl(){return ru.logLevel}function le(n,...e){if(ru.logLevel<=Je.DEBUG){let t=e.map(KA);ru.debug(`Firestore (${ld}): ${n}`,...t)}}function oo(n,...e){if(ru.logLevel<=Je.ERROR){let t=e.map(KA);ru.error(`Firestore (${ld}): ${n}`,...t)}}function hp(n,...e){if(ru.logLevel<=Je.WARN){let t=e.map(KA);ru.warn(`Firestore (${ld}): ${n}`,...t)}}function KA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,d2(n,r,t)}function d2(n,e,t){let r=`FIRESTORE (${ld}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw oo(r),new Error(r)}function $t(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||d2(e,i,r)}function nt(n,e){return n}var te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ye=class extends ei{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ia=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_S=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(er.UNAUTHENTICATED))}shutdown(){}};var vS=class{constructor(e){this.t=e,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$t(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ia;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ia,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ia)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t(typeof r.accessToken=="string",31837,{l:r}),new yS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $t(e===null||typeof e=="string",2055,{h:e}),new er(e)}},ES=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},IS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ES(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(er.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$t(this.o===void 0,3512);let r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function vY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var pv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=vY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Xe(n,e){return n<e?-1:n>e?1:0}function TS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return lS(i)===lS(s)?Xe(i,s):lS(i)?1:-1}return Xe(n.length,e.length)}var EY=55296,IY=57343;function lS(n){let e=n.charCodeAt(0);return e>=EY&&e<=IY}function Zl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var bV="__name__",gv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Xe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):TS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return no.fromString(e.substring(4,e.length-2))}},wn=class n extends gv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},wY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mi=class n extends gv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return wY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bV}static keyField(){return new n([bV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ae=class n{constructor(e){this.path=e}static fromPath(e){return new n(wn.fromString(e))}static fromName(e){return new n(wn.fromString(e).popFirst(5))}static empty(){return new n(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new wn(e.slice()))}};function TY(n,e,t,r){if(e===!0&&r===!0)throw new ye(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bY(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function CY(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe(12329,{type:typeof n})}function dS(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=CY(n);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dn(n,e){let t={typeString:n};return e&&(t.value=e),t}function Dp(n,e){if(!bY(n))throw new ye(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ye(te.INVALID_ARGUMENT,t);return!0}var CV=-62135596800,DV=1e6,fr=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*DV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<CV)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DV}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-CV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};fr._jsonSchemaVersion="firestore/timestamp/1.0",fr._jsonSchema={type:dn("string",fr._jsonSchemaVersion),seconds:dn("number"),nanoseconds:dn("number")};var Ue=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new fr(0,0))}static max(){return new n(new fr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fp=-1,bS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bS.UNKNOWN_ID=-1;function DY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new fr(t+1,0):new fr(t,r));return new iu(i,Ae.empty(),e)}function SY(n){return new iu(n.readTime,n.key,fp)}var iu=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ue.min(),Ae.empty(),fp)}static max(){return new n(Ue.max(),Ae.empty(),fp)}};function AY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}var RY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",CS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Bv(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==RY)throw n;le("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function PY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dd(n){return n.name==="IndexedDbTransactionError"}var QA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),NY=-1;function $v(n){return n==null}function mv(n){return n===0&&1/n==-1/0}var h2="";function kY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SV(e)),e=MY(n.get(t),e);return SV(e)}function MY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case h2:t+="";break;default:t+=s}}return t}function SV(n){return n+h2+""}var xY="remoteDocuments",f2="owner";var p2="mutationQueues";var g2="mutations";var m2="documentMutations",OY="remoteDocumentsV14";var y2="remoteDocumentGlobal";var _2="targets";var v2="targetDocuments";var E2="targetGlobal",I2="collectionParents";var w2="clientMetadata";var T2="bundles";var b2="namedQueries";var LY="indexConfiguration";var FY="indexState";var VY="indexEntries";var C2="documentOverlays";var UY="globals";var jY=[p2,g2,m2,xY,_2,f2,E2,v2,w2,y2,I2,T2,b2],aTe=[...jY,C2],BY=[p2,g2,m2,OY,_2,f2,E2,v2,w2,y2,I2,T2,b2,C2],$Y=BY,HY=[...$Y,LY,FY,VY];var cTe=[...HY,UY];function AV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sp(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qY(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tn=class n{constructor(e,t){this.comparator=e,this.root=t||hs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}},ql=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},hs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}};hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1;hs.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nn=class n{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},yv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zc=class n{constructor(e){this.fields=e,e.sort(Mi.comparator)}static empty(){return new n([])}unionWith(e){let t=new Nn(Mi.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var _v=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var tr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _v("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};tr.EMPTY_BYTE_STRING=new tr("");var zY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(n){if($t(!!n,39018),typeof n=="string"){let e=0,t=zY.exec(n);if($t(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ft(n.seconds),nanos:Ft(n.nanos)}}function Ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function co(n){return typeof n=="string"?tr.fromBase64String(n):tr.fromUint8Array(n)}var D2="server_timestamp",S2="__type__",A2="__previous_value__",R2="__local_write_time__";function YA(n){return(n?.mapValue?.fields||{})[S2]?.stringValue===D2}function Hv(n){let e=n.mapValue.fields[A2];return YA(e)?Hv(e):e}function pp(n){let e=ao(n.mapValue.fields[R2].timestampValue);return new fr(e.seconds,e.nanos)}var DS=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},SS="(default)",vv=class n{constructor(e,t){this.projectId=e,this.database=t||SS}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===SS}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var P2="__type__",N2="__max__",cv={mapValue:{fields:{__type__:{stringValue:N2}}}},k2="__vector__",gp="value";function wa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YA(n)?4:x2(n)?9007199254740991:M2(n)?10:11:Oe(28295,{value:n})}function ps(n,e){if(n===e)return!0;let t=wa(n);if(t!==wa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pp(n).isEqual(pp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ao(i.timestampValue),a=ao(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return co(i.bytesValue).isEqual(co(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ft(i.geoPointValue.latitude)===Ft(s.geoPointValue.latitude)&&Ft(i.geoPointValue.longitude)===Ft(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ft(i.integerValue)===Ft(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ft(i.doubleValue),a=Ft(s.doubleValue);return o===a?mv(o)===mv(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Zl(n.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AV(o)!==AV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ps(o[c],a[c])))return!1;return!0})(n,e);default:return Oe(52216,{left:n})}}function mp(n,e){return(n.values||[]).find(t=>ps(t,e))!==void 0}function Xl(n,e){if(n===e)return 0;let t=wa(n),r=wa(e);if(t!==r)return Xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ft(s.integerValue||s.doubleValue),c=Ft(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return RV(n.timestampValue,e.timestampValue);case 4:return RV(pp(n),pp(e));case 5:return TS(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=co(s),c=co(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Xe(a[d],c[d]);if(h!==0)return h}return Xe(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Xe(Ft(s.latitude),Ft(o.latitude));return a!==0?a:Xe(Ft(s.longitude),Ft(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return PV(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[gp]?.arrayValue,h=c[gp]?.arrayValue,p=Xe(d?.values?.length||0,h?.values?.length||0);return p!==0?p:PV(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===cv.mapValue&&o===cv.mapValue)return 0;if(s===cv.mapValue)return 1;if(o===cv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let E=TS(c[p],h[p]);if(E!==0)return E;let C=Xl(a[c[p]],d[h[p]]);if(C!==0)return C}return Xe(c.length,h.length)})(n.mapValue,e.mapValue);default:throw Oe(23264,{he:t})}}function RV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);let t=ao(n),r=ao(e),i=Xe(t.seconds,r.seconds);return i!==0?i:Xe(t.nanos,r.nanos)}function PV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Xl(t[i],r[i]);if(s)return s}return Xe(t.length,r.length)}function ed(n){return AS(n)}function AS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=ao(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return co(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=AS(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${AS(t.fields[o])}`;return i+"}"})(n.mapValue):Oe(61005,{value:n})}function dv(n){switch(wa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Hv(n);return e?16+dv(e):16;case 5:return 2*n.stringValue.length;case 6:return co(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+dv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Sp(r.fields,(s,o)=>{i+=s.length+dv(o)}),i})(n.mapValue);default:throw Oe(13486,{value:n})}}function RS(n){return!!n&&"integerValue"in n}function JA(n){return!!n&&"arrayValue"in n}function NV(n){return!!n&&"nullValue"in n}function kV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hS(n){return!!n&&"mapValue"in n}function M2(n){return(n?.mapValue?.fields||{})[P2]?.stringValue===k2}function ap(n){if(n.geoPointValue)return{geoPointValue:z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Sp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ap(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ap(n.arrayValue.values[t]);return e}return z({},n)}function x2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===N2}var lTe={mapValue:{fields:{[P2]:{stringValue:k2},[gp]:{arrayValue:{}}}}};var io=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(t)}setAll(e){let t=Mi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ap(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());hS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sp(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ap(this.value))}};var xi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ue.min(),Ue.min(),Ue.min(),io.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ue.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ue.min(),Ue.min(),io.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ue.min(),Ue.min(),io.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=io.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=io.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var td=class{constructor(e,t){this.position=e,this.inclusive=t}};function MV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ae.comparator(Ae.fromName(o.referenceValue),t.key):r=Xl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function xV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ps(n.position[t],e.position[t]))return!1;return!0}var nd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function GY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ev=class{},Tn=class n extends Ev{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new NS(e,t,r):t==="array-contains"?new xS(e,r):t==="in"?new OS(e,r):t==="not-in"?new LS(e,r):t==="array-contains-any"?new FS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new kS(e,r):new MS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xl(t,this.value)):t!==null&&wa(this.value)===wa(t)&&this.matchesComparison(Xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gs=class n extends Ev{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return O2(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function O2(n){return n.op==="and"}function L2(n){return WY(n)&&O2(n)}function WY(n){for(let e of n.filters)if(e instanceof gs)return!1;return!0}function PS(n){if(n instanceof Tn)return n.field.canonicalString()+n.op.toString()+ed(n.value);if(L2(n))return n.filters.map(e=>PS(e)).join(",");{let e=n.filters.map(t=>PS(t)).join(",");return`${n.op}(${e})`}}function F2(n,e){return n instanceof Tn?(function(r,i){return i instanceof Tn&&r.op===i.op&&r.field.isEqual(i.field)&&ps(r.value,i.value)})(n,e):n instanceof gs?(function(r,i){return i instanceof gs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&F2(o,i.filters[a]),!0):!1})(n,e):void Oe(19439)}function V2(n){return n instanceof Tn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ed(t.value)}`})(n):n instanceof gs?(function(t){return t.op.toString()+" {"+t.getFilters().map(V2).join(" ,")+"}"})(n):"Filter"}var NS=class extends Tn{constructor(e,t,r){super(e,t,r),this.key=Ae.fromName(r.referenceValue)}matches(e){let t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}},kS=class extends Tn{constructor(e,t){super(e,"in",t),this.keys=U2("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},MS=class extends Tn{constructor(e,t){super(e,"not-in",t),this.keys=U2("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function U2(n,e){return(e.arrayValue?.values||[]).map(t=>Ae.fromName(t.referenceValue))}var xS=class extends Tn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return JA(t)&&mp(t.arrayValue,this.value)}},OS=class extends Tn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&mp(this.value.arrayValue,t)}},LS=class extends Tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mp(this.value.arrayValue,t)}},FS=class extends Tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!JA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mp(this.value.arrayValue,r))}};var VS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function OV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new VS(n,e,t,r,i,s,o)}function ZA(n){let e=nt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>PS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),$v(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ed(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ed(r)).join(",")),e.Te=t}return e.Te}function XA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!F2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xV(n.startAt,e.startAt)&&xV(n.endAt,e.endAt)}function US(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var rd=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function KY(n,e,t,r,i,s,o,a){return new rd(n,e,t,r,i,s,o,a)}function e0(n){return new rd(n)}function LV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function QY(n){return n.collectionGroup!==null}function cp(n){let e=nt(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nn(Mi.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new nd(s,r))}),t.has(Mi.keyField().canonicalString())||e.Ie.push(new nd(Mi.keyField(),r))}return e.Ie}function fs(n){let e=nt(n);return e.Ee||(e.Ee=YY(e,cp(n))),e.Ee}function YY(n,e){if(n.limitType==="F")return OV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new nd(i.field,s)});let t=n.endAt?new td(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new td(n.startAt.position,n.startAt.inclusive):null;return OV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jS(n,e,t){return new rd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qv(n,e){return XA(fs(n),fs(e))&&n.limitType===e.limitType}function j2(n){return`${ZA(fs(n))}|lt:${n.limitType}`}function Bl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>V2(i)).join(", ")}]`),$v(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ed(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ed(i)).join(",")),`Target(${r})`})(fs(n))}; limitType=${n.limitType})`}function zv(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of cp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=MV(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,cp(r),i)||r.endAt&&!(function(o,a,c){let d=MV(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,cp(r),i))})(n,e)}function JY(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function B2(n){return(e,t)=>{let r=!1;for(let i of cp(n)){let s=ZY(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZY(n,e,t){let r=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Xl(c,d):Oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:n.dir})}}var uo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sp(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return qY(this.inner)}size(){return this.innerSize}};var XY=new tn(Ae.comparator);function Ta(){return XY}var $2=new tn(Ae.comparator);function op(...n){let e=$2;for(let t of n)e=e.insert(t.key,t);return e}function eJ(n){let e=$2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xc(){return up()}function H2(){return up()}function up(){return new uo(n=>n.toString(),(n,e)=>n.isEqual(e))}var dTe=new tn(Ae.comparator),tJ=new Nn(Ae.comparator);function at(...n){let e=tJ;for(let t of n)e=e.add(t);return e}var nJ=new Nn(Xe);function rJ(){return nJ}function iJ(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mv(e)?"-0":e}}function sJ(n){return{integerValue:""+n}}var id=class{constructor(){this._=void 0}};function oJ(n,e,t){return n instanceof yp?(function(i,s){let o={fields:{[S2]:{stringValue:D2},[R2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&YA(s)&&(s=Hv(s)),s&&(o.fields[A2]=s),{mapValue:o}})(t,e):n instanceof sd?q2(n,e):n instanceof od?z2(n,e):(function(i,s){let o=cJ(i,s),a=FV(o)+FV(i.Ae);return RS(o)&&RS(i.Ae)?sJ(a):iJ(i.serializer,a)})(n,e)}function aJ(n,e,t){return n instanceof sd?q2(n,e):n instanceof od?z2(n,e):t}function cJ(n,e){return n instanceof _p?(function(r){return RS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var yp=class extends id{},sd=class extends id{constructor(e){super(),this.elements=e}};function q2(n,e){let t=G2(e);for(let r of n.elements)t.some(i=>ps(i,r))||t.push(r);return{arrayValue:{values:t}}}var od=class extends id{constructor(e){super(),this.elements=e}};function z2(n,e){let t=G2(e);for(let r of n.elements)t=t.filter(i=>!ps(i,r));return{arrayValue:{values:t}}}var _p=class extends id{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function FV(n){return Ft(n.integerValue||n.doubleValue)}function G2(n){return JA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uJ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof sd&&i instanceof sd||r instanceof od&&i instanceof od?Zl(r.elements,i.elements,ps):r instanceof _p&&i instanceof _p?ps(r.Ae,i.Ae):r instanceof yp&&i instanceof yp})(n.transform,e.transform)}var lp=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vp=class{};function W2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new BS(n.key,lp.none()):new Ep(n.key,n.data,lp.none());{let t=n.data,r=io.empty(),i=new Nn(Mi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ad(n.key,r,new Zc(i.toArray()),lp.none())}}function lJ(n,e,t){n instanceof Ep?(function(i,s,o){let a=i.value.clone(),c=UV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ad?(function(i,s,o){if(!hv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=UV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(K2(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function dp(n,e,t,r){return n instanceof Ep?(function(s,o,a,c){if(!hv(s.precondition,o))return a;let d=s.value.clone(),h=jV(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof ad?(function(s,o,a,c){if(!hv(s.precondition,o))return a;let d=jV(s.fieldTransforms,c,o),h=o.data;return h.setAll(K2(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return hv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function VV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zl(r,i,(s,o)=>uJ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ep=class extends vp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ad=class extends vp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function K2(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function UV(n,e,t){let r=new Map;$t(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,aJ(o,a,t[i]))}return r}function jV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,oJ(s,o,e))}return r}var BS=class extends vp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var $S=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&lJ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=dp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=dp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=H2();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=W2(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),at())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(t,r)=>VV(t,r))&&Zl(this.baseMutations,e.baseMutations,(t,r)=>VV(t,r))}};var HS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var un,tt;function Q2(n){if(n===void 0)return oo("GRPC error has no .code"),te.UNKNOWN;switch(n){case un.OK:return te.OK;case un.CANCELLED:return te.CANCELLED;case un.UNKNOWN:return te.UNKNOWN;case un.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case un.INTERNAL:return te.INTERNAL;case un.UNAVAILABLE:return te.UNAVAILABLE;case un.UNAUTHENTICATED:return te.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case un.NOT_FOUND:return te.NOT_FOUND;case un.ALREADY_EXISTS:return te.ALREADY_EXISTS;case un.PERMISSION_DENIED:return te.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case un.ABORTED:return te.ABORTED;case un.OUT_OF_RANGE:return te.OUT_OF_RANGE;case un.UNIMPLEMENTED:return te.UNIMPLEMENTED;case un.DATA_LOSS:return te.DATA_LOSS;default:return Oe(39323,{code:n})}}(tt=un||(un={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";var dJ=null;function hJ(){return new TextEncoder}var fJ=new no([4294967295,4294967295],0);function BV(n){let e=hJ().encode(n),t=new iS;return t.update(e),new Uint8Array(t.digest())}function $V(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new no([t,r],0),new no([i,s],0)]}var zS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(r<0)throw new eu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=no.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(no.fromNumber(r)));return i.compare(fJ)===1&&(i=new no([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=BV(e),[r,i]=$V(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=BV(e),[r,i]=$V(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},eu=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Iv=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ip.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ue.min(),i,new tn(Xe),Ta(),at())}},Ip=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,at(),at(),at())}};var zl=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},wv=class{constructor(e,t){this.targetId=e,this.Ce=t}},Tv=class{constructor(e,t,r=tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},bv=class{constructor(){this.ve=0,this.Fe=HV(),this.Me=tr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),t=at(),r=at();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Oe(38017,{changeType:s})}}),new Ip(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=HV()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},GS=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ta(),this.Je=uv(),this.He=uv(),this.Ye=new tn(Xe)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(US(s))if(r===0){let o=new Ae(s.path);this.et(t,o,xi.newNoDocument(o,Ue.min()))}else $t(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}dJ?.lt((function(h,p,E,C,R){let N={localCacheCount:h,existenceFilterCount:p.count,databaseId:E.database,projectId:E.projectId},P=p.unchangedNames;return P&&(N.bloomFilter={applied:R===0,hashCount:P?.hashCount??0,bitmapLength:P?.bits?.bitmap?.length??0,padding:P?.bits?.padding??0,mightContain:H=>C?.mightContain(H)??!1}),N})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=co(r).toUint8Array()}catch(c){if(c instanceof _v)return hp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new zS(o,i,s)}catch(c){return hp(c instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&US(a.target)){let c=new Ae(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,xi.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=at();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Iv(e,t,this.Ye,this.je,r);return this.je=Ta(),this.Je=uv(),this.He=uv(),this.Ye=new tn(Xe),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new bv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nn(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nn(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function uv(){return new tn(Ae.comparator)}function HV(){return new tn(Ae.comparator)}var pJ={asc:"ASCENDING",desc:"DESCENDING"},gJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mJ={and:"AND",or:"OR"},WS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function KS(n,e){return n.useProto3Json||$v(e)?e:{value:e}}function yJ(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _J(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Gl(n){return $t(!!n,49232),Ue.fromTimestamp((function(t){let r=ao(t);return new fr(r.seconds,r.nanos)})(n))}function vJ(n,e){return QS(n,e).canonicalString()}function QS(n,e){let t=(function(i){return new wn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Y2(n){let e=wn.fromString(n);return $t(tU(e),10190,{key:e.toString()}),e}function fS(n,e){let t=Y2(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(Z2(t))}function J2(n,e){return vJ(n.databaseId,e)}function EJ(n){let e=Y2(n);return e.length===4?wn.emptyPath():Z2(e)}function qV(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Z2(n){return $t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function IJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Oe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?($t(h===void 0||typeof h=="string",58123),tr.fromBase64String(h||"")):($t(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),tr.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?te.UNKNOWN:Q2(d.code);return new ye(h,d.message||"")})(o);t=new Tv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=fS(n,r.document.name),s=Gl(r.document.updateTime),o=r.document.createTime?Gl(r.document.createTime):Ue.min(),a=new io({mapValue:{fields:r.document.fields}}),c=xi.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new zl(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=fS(n,r.document),s=r.readTime?Gl(r.readTime):Ue.min(),o=xi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new zl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=fS(n,r.document),s=r.removedTargetIds||[];t=new zl([],s,i,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qS(i,s),a=r.targetId;t=new wv(a,o)}}return t}function wJ(n,e){return{documents:[J2(n,e.path)]}}function TJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=J2(n,i);let s=(function(d){if(d.length!==0)return eU(gs.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(E){return{field:$l(E.field),direction:DJ(E.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=KS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function bJ(n){let e=EJ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){$t(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let E=X2(p);return E instanceof gs&&L2(E)?E.getFilters():[E]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(E=>(function(R){return new nd(Hl(R.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let E;return E=typeof p=="object"?p.value:p,$v(E)?null:E})(t.limit));let c=null;t.startAt&&(c=(function(p){let E=!!p.before,C=p.values||[];return new td(C,E)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let E=!p.before,C=p.values||[];return new td(C,E)})(t.endAt)),KY(e,i,o,s,a,"F",c,d)}function CJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function X2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Hl(t.unaryFilter.field);return Tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Hl(t.unaryFilter.field);return Tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Hl(t.unaryFilter.field);return Tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Hl(t.unaryFilter.field);return Tn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Tn.create(Hl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gs.create(t.compositeFilter.filters.map(r=>X2(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(n):Oe(30097,{filter:n})}function DJ(n){return pJ[n]}function SJ(n){return gJ[n]}function AJ(n){return mJ[n]}function $l(n){return{fieldPath:n.canonicalString()}}function Hl(n){return Mi.fromServerFormat(n.fieldPath)}function eU(n){return n instanceof Tn?(function(t){if(t.op==="=="){if(kV(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NAN"}};if(NV(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kV(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NOT_NAN"}};if(NV(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(t.field),op:SJ(t.op),value:t.value}}})(n):n instanceof gs?(function(t){let r=t.getFilters().map(i=>eU(i));return r.length===1?r[0]:{compositeFilter:{op:AJ(t.op),filters:r}}})(n):Oe(54877,{filter:n})}function tU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var wp=class n{constructor(e,t,r,i,s=Ue.min(),o=Ue.min(),a=tr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var YS=class{constructor(e){this.yt=e}};function RJ(n){let e=bJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jS(e,e.limit,"L"):e}var Cv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ft(e.integerValue));else if("doubleValue"in e){let r=Ft(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),mv(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ao(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(co(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?x2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):M2(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Oe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=gp,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ft(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ae.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Cv.Kt=new Cv;var JS=class{constructor(){this.Cn=new ZS}addToCollectionParentIndex(e,t){return this.Cn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(iu.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(iu.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},ZS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nn(wn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(wn.comparator)).toArray()}};var hTe=new Uint8Array(0);var zV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nU=41943040,ti=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};ti.DEFAULT_COLLECTION_PERCENTILE=10,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ti.DEFAULT=new ti(nU,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ti.DISABLED=new ti(-1,0,0);var Tp=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var GV="LruGarbageCollector",PJ=1048576;function WV([n,e],[t,r]){let i=Xe(n,t);return i===0?Xe(e,r):i}var XS=class{constructor(e){this.Ir=e,this.buffer=new Nn(WV),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();WV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},eA=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(GV,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dd(t)?le(GV,"Ignoring IndexedDB error during garbage collection: ",t):await Bv(t)}await this.Vr(3e5)})}},tA=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(QA.ce);let r=new XS(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(zV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zV):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),jl()<=Je.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function NJ(n,e){return new tA(n,e)}var nA=class{constructor(){this.changes=new uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var rA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var iA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&dp(r.mutation,i,Zc.empty(),fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,at()).next(()=>r))}getLocalViewOfDocuments(e,t,r=at()){let i=Xc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=op();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Xc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,at()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ta(),o=up(),a=(function(){return up()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ad)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),dp(h.mutation,d,h.mutation.getFieldMask(),fr.now())):o.set(d.key,Zc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new rA(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=up(),i=new tn((o,a)=>o-a),s=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Zc.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||at()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=H2();h.forEach(E=>{if(!s.has(E)){let C=W2(t.get(E),r.get(E));C!==null&&p.set(E,C),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):QY(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(Xc()),a=fp,c=s;return o.next(d=>W.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,at())).next(h=>({batchId:a,changes:eJ(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(r=>{let i=op();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=op();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let d=(function(p,E){return new rd(E,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,E)=>{o=o.insert(p,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,xi.newInvalidDocument(h)))});let a=op();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&dp(h.mutation,d,Zc.empty(),fr.now()),zv(t,d)&&(a=a.insert(c,d))}),a})}};var sA=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return W.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Gl(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:RJ(i.bundledQuery),readTime:Gl(i.readTime)}})(t)),W.resolve()}};var oA=class{constructor(){this.overlays=new tn(Ae.comparator),this.qr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Xc();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=Xc(),s=t.length+1,o=new Ae(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tn((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Xc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Xc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HS(t,r));let s=this.qr.get(t);s===void 0&&(s=at(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var aA=class{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var bp=class{constructor(){this.Qr=new Nn(ln.$r),this.Ur=new Nn(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new ln(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new ln(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new Ae(new wn([])),r=new ln(t,e),i=new ln(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Ae(new wn([])),r=new ln(t,e),i=new ln(t,e+1),s=at();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new ln(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ln=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}};var cA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nn(ln.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new $S(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new ln(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?NY:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ln(t,0),i=new ln(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Xe);return t.forEach(i=>{let s=new ln(i,0),o=new ln(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Ae.isDocumentKey(s)||(s=s.child(""));let o=new ln(new Ae(s),0),a=new Nn(Xe);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),W.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){$t(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(t.mutations,i=>{let s=new ln(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new ln(t,0),i=this.Zr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var uA=class{constructor(e){this.ri=e,this.docs=(function(){return new tn(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():xi.newInvalidDocument(t))}getEntries(e,t){let r=Ta();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ta(),o=t.path,a=new Ae(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||AY(SY(h),r)<=0||(i.has(h.key)||zv(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Oe(9500)}ii(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lA(this)}getSize(e){return W.resolve(this.size)}},lA=class extends nA{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var dA=class{constructor(e){this.persistence=e,this.si=new uo(t=>ZA(t),XA),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new bp,this.targetCount=0,this.ai=Tp.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),W.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Tp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Pr(t),W.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this._i.containsKey(t))}};var Dv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new QA(0),this.li=!1,this.li=!0,this.hi=new aA,this.referenceDelegate=e(this),this.Pi=new dA(this),this.indexManager=new JS,this.remoteDocumentCache=(function(i){return new uA(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new YS(t),this.Ii=new sA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new cA(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);let i=new hA(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return W.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},hA=class extends CS{constructor(e){super(),this.currentSequenceNumber=e}},fA=class n{constructor(e){this.persistence=e,this.Ri=new bp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,r=>{let i=Ae.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Ue.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Sv=class n{constructor(e,t){this.persistence=e,this.pi=new uo(r=>kY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=NJ(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return W.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Ue.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dv(e.data.value)),t}br(e,t,r){return W.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var pA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=at(),i=at();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var gA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mA=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HL()?8:PY(Lr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gA;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(jl()<=Je.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(jl()<=Je.DEBUG&&le("QueryEngine","Query:",Bl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(jl()<=Je.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(t))):W.resolve())}ys(e,t){if(LV(t))return W.resolve(null);let r=fs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=jS(t,null,"F"),r=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=at(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,jS(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return LV(t)||i.isEqual(Ue.min())?W.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?W.resolve(null):(jl()<=Je.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bl(t)),this.vs(e,o,t,DY(i,fp)).next(a=>a))})}Ds(e,t){let r=new Nn(B2(e));return t.forEach((i,s)=>{zv(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return jl()<=Je.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Bl(t)),this.ps.getDocumentsMatchingQuery(e,t,iu.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var t0="LocalStore",kJ=3e8,yA=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new tn(Xe),this.xs=new uo(s=>ZA(s),XA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function MJ(n,e,t,r){return new yA(n,e,t,r)}async function rU(n,e){let t=nt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=at();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function iU(n){let e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function xJ(n,e){let t=nt(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let E=i.get(p);if(!E)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,p)));let C=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(tr.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,r)),i=i.insert(p,C),(function(N,P,H){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=kJ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(E,C,h)&&a.push(t.Pi.updateTargetData(s,C))});let c=Ta(),d=at();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(OJ(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(Ue.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function OJ(n,e,t){let r=at(),i=at();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ta();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ue.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):le(t0,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function LJ(n,e){let t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new wp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function _A(n,e,t){let r=nt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dd(o))throw o;le(t0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function KV(n,e,t){let r=nt(n),i=Ue.min(),s=at();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=nt(c),E=p.xs.get(h);return E!==void 0?W.resolve(p.Ms.get(E)):p.Pi.getTargetData(d,h)})(r,o,fs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Ue.min(),t?s:at())).next(a=>(FJ(r,JY(e),a),{documents:a,Qs:s})))}function FJ(n,e,t){let r=n.Os.get(e)||Ue.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var Av=class{constructor(){this.activeTargetIds=rJ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var vA=class{constructor(){this.Mo=new Av,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Av,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var EA=class{Oo(e){}shutdown(){}};var QV="ConnectivityMonitor",Rv=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(QV,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){le(QV,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var lv=null;function IA(){return lv===null?lv=(function(){return 268435456+Math.round(2147483648*Math.random())})():lv++,"0x"+lv.toString(16)}var pS="RestConnection",VJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},wA=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===SS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=IA(),a=this.zo(e,t.toUriEncodedString());le(pS,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=qf(d);return this.Jo(e,a,c,r,h).then(p=>(le(pS,`Received RPC '${e}' ${o}: `,p),p),p=>{throw hp(pS,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ld})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=VJ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var TA=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Xn="WebChannelConnection",bA=class extends wA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=IA();return new Promise((a,c)=>{let d=new sS;d.setWithCredentials(!0),d.listenOnce(oS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case sp.NO_ERROR:let p=d.getResponseJson();le(Xn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case sp.TIMEOUT:le(Xn,`RPC '${e}' ${o} timed out`),c(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case sp.HTTP_ERROR:let E=d.getStatus();if(le(Xn,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let R=C?.error;if(R&&R.status&&R.message){let N=(function(H){let $=H.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf($)>=0?$:te.UNKNOWN})(R.status);c(new ye(N,R.message))}else c(new ye(te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ye(te.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{le(Xn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);le(Xn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=IA(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uS(),a=cS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");le(Xn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.I_(p);let E=!1,C=!1,R=new TA({Yo:P=>{C?le(Xn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(E||(le(Xn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),E=!0),le(Xn,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Zo:()=>p.close()}),N=(P,H,$)=>{P.listen(H,B=>{try{$(B)}catch(oe){setTimeout(()=>{throw oe},0)}})};return N(p,Ul.EventType.OPEN,()=>{C||(le(Xn,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),N(p,Ul.EventType.CLOSE,()=>{C||(C=!0,le(Xn,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(p))}),N(p,Ul.EventType.ERROR,P=>{C||(C=!0,hp(Xn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),R.a_(new ye(te.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ul.EventType.MESSAGE,P=>{if(!C){let H=P.data[0];$t(!!H,16349);let $=H,B=$?.error||$[0]?.error;if(B){le(Xn,`RPC '${e}' stream ${i} received error:`,B);let oe=B.status,fe=(function(m){let I=un[m];if(I!==void 0)return Q2(I)})(oe),ne=B.message;fe===void 0&&(fe=te.INTERNAL,ne="Unknown error status: "+oe+" with message "+B.message),C=!0,R.a_(new ye(fe,ne)),p.close()}else le(Xn,`RPC '${e}' stream ${i} received:`,H),R.u_(H)}}),N(a,aS.STAT_EVENT,P=>{P.stat===av.PROXY?le(Xn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===av.NOPROXY&&le(Xn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function gS(){return typeof document<"u"?document:null}function sU(n){return new WS(n,!0)}var Pv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var YV="PersistentStream",CA=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(oo(t.toString()),oo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ye(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return le(YV,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(le(YV,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},DA=class extends CA{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=IJ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ue.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Ue.min():o.readTime?Gl(o.readTime):Ue.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=qV(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=US(c)?{documents:wJ(s,c)}:{query:TJ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_J(s,o.resumeToken);let d=KS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ue.min())>0){a.readTime=yJ(s,o.snapshotVersion.toTimestamp());let d=KS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=CJ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=qV(this.serializer),t.removeTarget=e,this.q_(t)}};var SA=class{},AA=class extends SA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,QS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(te.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,QS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(te.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},RA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oo(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var cd="RemoteStore",PA=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Rp(this)&&(le(cd,"Restarting streams for network reachability change."),await(async function(c){let d=nt(c);d.Ea.add(4),await Ap(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Gv(d)})(this))})}),this.Ra=new RA(r,i)}};async function Gv(n){if(Rp(n))for(let e of n.da)await e(!0)}async function Ap(n){for(let e of n.da)await e(!1)}function oU(n,e){let t=nt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),s0(t)?i0(t):hd(t).O_()&&r0(t,e))}function n0(n,e){let t=nt(n),r=hd(t);t.Ia.delete(e),r.O_()&&aU(t,e),t.Ia.size===0&&(r.O_()?r.L_():Rp(t)&&t.Ra.set("Unknown"))}function r0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hd(n).Y_(e)}function aU(n,e){n.Va.Ue(e),hd(n).Z_(e)}function i0(n){n.Va=new GS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),hd(n).start(),n.Ra.ua()}function s0(n){return Rp(n)&&!hd(n).x_()&&n.Ia.size>0}function Rp(n){return nt(n).Ea.size===0}function cU(n){n.Va=void 0}async function UJ(n){n.Ra.set("Online")}async function jJ(n){n.Ia.forEach((e,t)=>{r0(n,e)})}async function BJ(n,e){cU(n),s0(n)?(n.Ra.ha(e),i0(n)):n.Ra.set("Unknown")}async function $J(n,e,t){if(n.Ra.set("Online"),e instanceof Tv&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){le(cd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await JV(n,r)}else if(e instanceof zl?n.Va.Ze(e):e instanceof wv?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{let r=await iU(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(tr.EMPTY_BYTE_STRING,h.snapshotVersion)),aU(s,c);let p=new wp(h.target,c,d,h.sequenceNumber);r0(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){le(cd,"Failed to raise snapshot:",r),await JV(n,r)}}async function JV(n,e,t){if(!dd(e))throw e;n.Ea.add(1),await Ap(n),n.Ra.set("Offline"),t||(t=()=>iU(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{le(cd,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gv(n)})}async function ZV(n,e){let t=nt(n);t.asyncQueue.verifyOperationInProgress(),le(cd,"RemoteStore received new credentials");let r=Rp(t);t.Ea.add(3),await Ap(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gv(t)}async function HJ(n,e){let t=nt(n);e?(t.Ea.delete(2),await Gv(t)):e||(t.Ea.add(2),await Ap(t),t.Ra.set("Unknown"))}function hd(n){return n.ma||(n.ma=(function(t,r,i){let s=nt(t);return s.sa(),new DA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:UJ.bind(null,n),t_:jJ.bind(null,n),r_:BJ.bind(null,n),H_:$J.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),s0(n)?i0(n):n.Ra.set("Unknown")):(await n.ma.stop(),cU(n))})),n.ma}var NA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uU(n,e){if(oo("AsyncQueue",`${e}: ${n}`),dd(n))return new ye(te.UNAVAILABLE,`${e}: ${n}`);throw n}var Nv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ae.comparator(t.key,r.key):(t,r)=>Ae.comparator(t.key,r.key),this.keyedMap=op(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var kv=class{constructor(){this.ga=new tn(Ae.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},ud=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Nv.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var kA=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},MA=class{constructor(){this.queries=XV(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=nt(t),s=i.queries;i.queries=XV(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ye(te.ABORTED,"Firestore shutting down"))}};function XV(){return new uo(n=>j2(n),qv)}async function qJ(n,e){let t=nt(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new kA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=uU(o,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&o0(t)}async function zJ(n,e){let t=nt(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GJ(n,e){let t=nt(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&o0(t)}function WJ(n,e,t){let r=nt(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function o0(n){n.Ca.forEach(e=>{e.next()})}var xA,e2;(e2=xA||(xA={})).Ma="default",e2.Cache="cache";var OA=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xA.Cache}};var Mv=class{constructor(e){this.key=e}},xv=class{constructor(e){this.key=e}},LA=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=B2(e),this.tu=new Nv(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new kv,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let E=i.get(h),C=zv(this.query,p)?p:null,R=!!E&&this.mutatedKeys.has(E.key),N=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),P=!1;E&&C?E.data.isEqual(C.data)?R!==N&&(r.track({type:3,doc:C}),P=!0):this.su(E,C)||(r.track({type:2,doc:C}),P=!0,(c&&this.eu(C,c)>0||d&&this.eu(C,d)<0)&&(a=!0)):!E&&C?(r.track({type:0,doc:C}),P=!0):E&&!C&&(r.track({type:1,doc:E}),P=!0,(c||d)&&(a=!0)),P&&(C?(o=o.add(C),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,p)=>(function(C,R){let N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:P})}};return N(C)-N(R)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new ud(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=at(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new xv(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Mv(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=at();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ud.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},a0="SyncEngine",FA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},VA=class{constructor(e){this.key=e,this.hu=!1}},UA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new uo(a=>j2(a),qv),this.Iu=new Map,this.Eu=new Set,this.du=new tn(Ae.comparator),this.Au=new Map,this.Ru=new bp,this.Vu={},this.mu=new Map,this.fu=Tp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function KJ(n,e,t=!0){let r=pU(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await lU(r,e,t,!0),i}async function QJ(n,e){let t=pU(n);await lU(t,e,!0,!1)}async function lU(n,e,t,r){let i=await LJ(n.localStore,fs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await YJ(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&oU(n.remoteStore,i),a}async function YJ(n,e,t,r,i){n.pu=(p,E,C)=>(async function(N,P,H,$){let B=P.view.ru(H);B.Cs&&(B=await KV(N.localStore,P.query,!1).then(({documents:b})=>P.view.ru(b,B)));let oe=$&&$.targetChanges.get(P.targetId),fe=$&&$.targetMismatches.get(P.targetId)!=null,ne=P.view.applyChanges(B,N.isPrimaryClient,oe,fe);return n2(N,P.targetId,ne.au),ne.snapshot})(n,p,E,C);let s=await KV(n.localStore,e,!0),o=new LA(e,s.Qs),a=o.ru(s.documents),c=Ip.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);n2(n,t,d.au);let h=new FA(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function JJ(n,e,t){let r=nt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!qv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _A(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&n0(r.remoteStore,i.targetId),jA(r,i.targetId)}).catch(Bv)):(jA(r,i.targetId),await _A(r.localStore,i.targetId,!0))}async function ZJ(n,e){let t=nt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),n0(t.remoteStore,r.targetId))}async function dU(n,e){let t=nt(n);try{let r=await xJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&($t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?$t(o.hu,14607):i.removedDocuments.size>0&&($t(o.hu,42227),o.hu=!1))}),await fU(t,r,e)}catch(r){await Bv(r)}}function t2(n,e,t){let r=nt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=nt(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let E of p.Sa)E.va(a)&&(d=!0)}),d&&o0(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XJ(n,e,t){let r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new tn(Ae.comparator);o=o.insert(s,xi.newNoDocument(s,Ue.min()));let a=at().add(s),c=new Iv(Ue.min(),new Map,new tn(Xe),o,a);await dU(r,c),r.du=r.du.remove(s),r.Au.delete(e),c0(r)}else await _A(r.localStore,e,!1).then(()=>jA(r,e,t)).catch(Bv)}function jA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||hU(n,r)})}function hU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(n0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),c0(n))}function n2(n,e,t){for(let r of t)r instanceof Mv?(n.Ru.addReference(r.key,e),eZ(n,r)):r instanceof xv?(le(a0,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||hU(n,r.key)):Oe(19791,{wu:r})}function eZ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(a0,"New document in limbo: "+t),n.Eu.add(r),c0(n))}function c0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Ae(wn.fromString(e)),r=n.fu.next();n.Au.set(r,new VA(t)),n.du=n.du.insert(t,r),oU(n.remoteStore,new wp(fs(e0(t.path)),r,"TargetPurposeLimboResolution",QA.ce))}}async function fU(n,e,t){let r=nt(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=pA.As(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,d){let h=nt(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(d,E=>W.forEach(E.Es,C=>h.persistence.referenceDelegate.addReference(p,E.targetId,C)).next(()=>W.forEach(E.ds,C=>h.persistence.referenceDelegate.removeReference(p,E.targetId,C)))))}catch(p){if(!dd(p))throw p;le(t0,"Failed to update sequence numbers: "+p)}for(let p of d){let E=p.targetId;if(!p.fromCache){let C=h.Ms.get(E),R=C.snapshotVersion,N=C.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(E,N)}}})(r.localStore,s))}async function tZ(n,e){let t=nt(n);if(!t.currentUser.isEqual(e)){le(a0,"User change. New user:",e.toKey());let r=await rU(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ye(te.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fU(t,r.Ls)}}function nZ(n,e){let t=nt(n),r=t.Au.get(e);if(r&&r.hu)return at().add(r.key);{let i=at(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function pU(n){let e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XJ.bind(null,e),e.Pu.H_=GJ.bind(null,e.eventManager),e.Pu.yu=WJ.bind(null,e.eventManager),e}var gU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sU(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return MJ(this.persistence,new mA,t.initialUser,this.serializer)}Cu(t){return new Dv(fA.mi,this.serializer)}Du(t){return new vA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),BA=class extends gU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$t(this.persistence.referenceDelegate instanceof Sv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new eA(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?ti.withCacheSize(this.cacheSizeBytes):ti.DEFAULT;return new Dv(r=>Sv.mi(r,t),this.serializer)}};var rZ=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>t2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tZ.bind(null,this.syncEngine),await HJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new MA})()}createDatastore(t){let r=sU(t.databaseInfo.databaseId),i=(function(o){return new bA(o)})(t.databaseInfo);return(function(o,a,c,d){return new AA(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new PA(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>t2(this.syncEngine,r,0),(function(){return Rv.v()?new Rv:new EA})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let E=new UA(s,o,a,c,d,h);return p&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=nt(r);le(cd,"RemoteStore shutting down."),i.Ea.add(5),await Ap(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var $A=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ba="FirestoreClient",HA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=er.UNAUTHENTICATED,this.clientId=pv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{le(ba,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(le(ba,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=uU(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function mS(n,e){n.asyncQueue.verifyOperationInProgress(),le(ba,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function r2(n,e){n.asyncQueue.verifyOperationInProgress();let t=await iZ(n);le(ba,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ZV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ZV(e.remoteStore,i)),n._onlineComponents=e}async function iZ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(ba,"Using user provided OfflineComponentProvider");try{await mS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;hp("Error using user provided cache. Falling back to memory cache: "+t),await mS(n,new gU)}}else le(ba,"Using default OfflineComponentProvider"),await mS(n,new BA(void 0));return n._offlineComponents}async function sZ(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(ba,"Using user provided OnlineComponentProvider"),await r2(n,n._uninitializedComponentsProvider._online)):(le(ba,"Using default OnlineComponentProvider"),await r2(n,new rZ))),n._onlineComponents}async function i2(n){let e=await sZ(n),t=e.eventManager;return t.onListen=KJ.bind(null,e.syncEngine),t.onUnlisten=JJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZJ.bind(null,e.syncEngine),t}function mU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var s2=new Map;var oZ="firestore.googleapis.com",o2=!0,Ov=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oZ,this.ssl=o2}else this.host=e.host,this.ssl=e.ssl??o2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PJ)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mU(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qA=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _S;switch(r.type){case"firstParty":return new IS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=s2.get(t);r&&(le("ComponentProvider","Removing Datastore"),s2.delete(t),r.terminate())})(this),Promise.resolve()}};var Lv=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},so=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dp(t,n._jsonSchema))return new n(e,r||null,new Ae(wn.fromString(t.referencePath)))}};so._jsonSchemaVersion="firestore/documentReference/1.0",so._jsonSchema={type:dn("string",so._jsonSchemaVersion),referencePath:dn("string")};var zA=class n extends Lv{constructor(e,t,r){super(e,t,e0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new so(this.firestore,null,new Ae(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var a2="AsyncQueue",Fv=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pv(this,"async_queue_retry"),this._c=()=>{let r=gS();r&&le(a2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=gS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=gS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Ia;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dd(e))throw e;le(a2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,oo("INTERNAL UNHANDLED ERROR: ",c2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=NA.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Oe(47125,{Pc:c2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function c2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function u2(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Cp=class extends qA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Fv(e),this._firestoreClient=void 0,await e}}};function aZ(n){if(n._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cZ(n),n._firestoreClient}function cZ(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new DS(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,mU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new HA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Wl=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(tr.fromBase64String(e))}catch(t){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Wl._jsonSchemaVersion="firestore/bytes/1.0",Wl._jsonSchema={type:dn("string",Wl._jsonSchemaVersion),bytes:dn("string")};var Vv=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Kl=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Dp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Kl._jsonSchemaVersion="firestore/geoPoint/1.0",Kl._jsonSchema={type:dn("string",Kl._jsonSchemaVersion),latitude:dn("number"),longitude:dn("number")};var Ql=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ye(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ql._jsonSchemaVersion="firestore/vectorValue/1.0",Ql._jsonSchema={type:dn("string",Ql._jsonSchemaVersion),vectorValues:dn("object")};var uZ=new RegExp("[~\\*/\\[\\]]");function lZ(n,e,t){if(e.search(uZ)>=0)throw l2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vv(...e.split("."))._internalPath}catch{throw l2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function l2(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ye(te.INVALID_ARGUMENT,a+n+c)}var Uv=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new so(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new GA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(yU("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},GA=class extends Uv{data(){return super.data()}};function yU(n,e){return typeof e=="string"?lZ(n,e):e instanceof Vv?e._internalPath:e._delegate._internalPath}function dZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var WA=class{convertValue(e,t="none"){switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Sp(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[gp].arrayValue?.values?.map(r=>Ft(r.doubleValue));return new Ql(t)}convertGeoPoint(e){return new Kl(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Hv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pp(e));default:return null}}convertTimestamp(e){let t=ao(e);return new fr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=wn.fromString(e);$t(tU(r),9688,{name:e});let i=new vv(r.get(1),r.get(3)),s=new Ae(r.popFirst(5));return i.isEqual(t)||oo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var tu=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nu=class n extends Uv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(yU("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};nu._jsonSchemaVersion="firestore/documentSnapshot/1.0",nu._jsonSchema={type:dn("string",nu._jsonSchemaVersion),bundleSource:dn("string","DocumentSnapshot"),bundleName:dn("string"),bundle:dn("string")};var Yl=class extends nu{data(e={}){return super.data(e)}},Jl=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yl(this._firestore,this._userDataWriter,r.key,r,new tu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Yl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Yl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:hZ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function hZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:n})}}Jl._jsonSchemaVersion="firestore/querySnapshot/1.0",Jl._jsonSchema={type:dn("string",Jl._jsonSchemaVersion),bundleSource:dn("string","QuerySnapshot"),bundleName:dn("string"),bundle:dn("string")};var jv=class extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new so(this.firestore,null,t)}};function _U(n,...e){n=ga(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||u2(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(u2(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof so)o=dS(n.firestore,Cp),a=e0(n._key.path),s={next:c=>{e[r]&&e[r](fZ(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=dS(n,Lv);o=dS(c.firestore,Cp),a=c._query;let d=new jv(o);s={next:h=>{e[r]&&e[r](new Jl(o,d,c,h))},error:e[r+1],complete:e[r+2]},dZ(n._query)}return(function(d,h,p,E){let C=new $A(E),R=new OA(h,C,p);return d.asyncQueue.enqueueAndForget(async()=>qJ(await i2(d),R)),()=>{C.Nu(),d.asyncQueue.enqueueAndForget(async()=>zJ(await i2(d),R))}})(aZ(o),a,i,s)}function fZ(n,e,t){let r=t.docs.get(e._key),i=new jv(n);return new nu(n,i,e._key,r,new tu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ld=i})(Ll),ya(new Ni("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Cp(new vS(r.getProvider("auth-internal")),new wS(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vv(d.options.projectId,h)})(o,i),o);return s=z({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ys(wV,TV,e),Ys(wV,TV,"esm2020")})();var Wv=function(){return Wv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Wv.apply(this,arguments)};var pZ={includeMetadataChanges:!1};function vU(n,e){return e===void 0&&(e=pZ),new Ie(function(t){var r=_U(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function EU(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Wv(Wv({},r),(t={},t[e.idField]=n.id,t))}function IU(n){return vU(n,{includeMetadataChanges:!0}).pipe(Ge(function(e){return e.docs}))}function wU(n,e){return e===void 0&&(e={}),IU(n).pipe(Ge(function(t){return t.map(function(r){return EU(r,e)})}))}var TU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bU={};var lo,u0;(function(){var n;function e(b,m){function I(){}I.prototype=m.prototype,b.D=m.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(T,w,D){for(var _=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)_[$e-2]=arguments[$e];return m.prototype[w].apply(T,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,m,I){I||(I=0);var T=Array(16);if(typeof m=="string")for(var w=0;16>w;++w)T[w]=m.charCodeAt(I++)|m.charCodeAt(I++)<<8|m.charCodeAt(I++)<<16|m.charCodeAt(I++)<<24;else for(w=0;16>w;++w)T[w]=m[I++]|m[I++]<<8|m[I++]<<16|m[I++]<<24;m=b.g[0],I=b.g[1],w=b.g[2];var D=b.g[3],_=m+(D^I&(w^D))+T[0]+3614090360&4294967295;m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[1]+3905402710&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[2]+606105819&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[3]+3250441966&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(D^I&(w^D))+T[4]+4118548399&4294967295,m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[5]+1200080426&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[6]+2821735955&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[7]+4249261313&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(D^I&(w^D))+T[8]+1770035416&4294967295,m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[9]+2336552879&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[10]+4294925233&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[11]+2304563134&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(D^I&(w^D))+T[12]+1804603682&4294967295,m=I+(_<<7&4294967295|_>>>25),_=D+(w^m&(I^w))+T[13]+4254626195&4294967295,D=m+(_<<12&4294967295|_>>>20),_=w+(I^D&(m^I))+T[14]+2792965006&4294967295,w=D+(_<<17&4294967295|_>>>15),_=I+(m^w&(D^m))+T[15]+1236535329&4294967295,I=w+(_<<22&4294967295|_>>>10),_=m+(w^D&(I^w))+T[1]+4129170786&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[6]+3225465664&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[11]+643717713&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[0]+3921069994&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(w^D&(I^w))+T[5]+3593408605&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[10]+38016083&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[15]+3634488961&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[4]+3889429448&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(w^D&(I^w))+T[9]+568446438&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[14]+3275163606&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[3]+4107603335&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[8]+1163531501&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(w^D&(I^w))+T[13]+2850285829&4294967295,m=I+(_<<5&4294967295|_>>>27),_=D+(I^w&(m^I))+T[2]+4243563512&4294967295,D=m+(_<<9&4294967295|_>>>23),_=w+(m^I&(D^m))+T[7]+1735328473&4294967295,w=D+(_<<14&4294967295|_>>>18),_=I+(D^m&(w^D))+T[12]+2368359562&4294967295,I=w+(_<<20&4294967295|_>>>12),_=m+(I^w^D)+T[5]+4294588738&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[8]+2272392833&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[11]+1839030562&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[14]+4259657740&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(I^w^D)+T[1]+2763975236&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[4]+1272893353&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[7]+4139469664&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[10]+3200236656&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(I^w^D)+T[13]+681279174&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[0]+3936430074&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[3]+3572445317&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[6]+76029189&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(I^w^D)+T[9]+3654602809&4294967295,m=I+(_<<4&4294967295|_>>>28),_=D+(m^I^w)+T[12]+3873151461&4294967295,D=m+(_<<11&4294967295|_>>>21),_=w+(D^m^I)+T[15]+530742520&4294967295,w=D+(_<<16&4294967295|_>>>16),_=I+(w^D^m)+T[2]+3299628645&4294967295,I=w+(_<<23&4294967295|_>>>9),_=m+(w^(I|~D))+T[0]+4096336452&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[7]+1126891415&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[14]+2878612391&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[5]+4237533241&4294967295,I=w+(_<<21&4294967295|_>>>11),_=m+(w^(I|~D))+T[12]+1700485571&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[3]+2399980690&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[10]+4293915773&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[1]+2240044497&4294967295,I=w+(_<<21&4294967295|_>>>11),_=m+(w^(I|~D))+T[8]+1873313359&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[15]+4264355552&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[6]+2734768916&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[13]+1309151649&4294967295,I=w+(_<<21&4294967295|_>>>11),_=m+(w^(I|~D))+T[4]+4149444226&4294967295,m=I+(_<<6&4294967295|_>>>26),_=D+(I^(m|~w))+T[11]+3174756917&4294967295,D=m+(_<<10&4294967295|_>>>22),_=w+(m^(D|~I))+T[2]+718787259&4294967295,w=D+(_<<15&4294967295|_>>>17),_=I+(D^(w|~m))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+m&4294967295,b.g[1]=b.g[1]+(w+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.u=function(b,m){m===void 0&&(m=b.length);for(var I=m-this.blockSize,T=this.B,w=this.h,D=0;D<m;){if(w==0)for(;D<=I;)i(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<m;)if(T[w++]=b.charCodeAt(D++),w==this.blockSize){i(this,T),w=0;break}}else for(;D<m;)if(T[w++]=b[D++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=m},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var m=1;m<b.length-8;++m)b[m]=0;var I=8*this.o;for(m=b.length-8;m<b.length;++m)b[m]=I&255,I/=256;for(this.u(b),b=Array(16),m=I=0;4>m;++m)for(var T=0;32>T;T+=8)b[I++]=this.g[m]>>>T&255;return b};function s(b,m){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=m(b)}function o(b,m){this.h=m;for(var I=[],T=!0,w=b.length-1;0<=w;w--){var D=b[w]|0;T&&D==m||(I[w]=D,T=!1)}this.g=I}var a={};function c(b){return-128<=b&&128>b?s(b,function(m){return new o([m|0],0>m?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return P(d(-b));for(var m=[],I=1,T=0;b>=I;T++)m[T]=b/I|0,I*=4294967296;return new o(m,0)}function h(b,m){if(b.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(b.charAt(0)=="-")return P(h(b.substring(1),m));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(m,8)),T=p,w=0;w<b.length;w+=8){var D=Math.min(8,b.length-w),_=parseInt(b.substring(w,w+D),m);8>D?(D=d(Math.pow(m,D)),T=T.j(D).add(d(_))):(T=T.j(I),T=T.add(d(_)))}return T}var p=c(0),E=c(1),C=c(16777216);n=o.prototype,n.m=function(){if(N(this))return-P(this).m();for(var b=0,m=1,I=0;I<this.g.length;I++){var T=this.i(I);b+=(0<=T?T:4294967296+T)*m,m*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(N(this))return"-"+P(this).toString(b);for(var m=d(Math.pow(b,6)),I=this,T="";;){var w=oe(I,m).g;I=H(I,w.j(m));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=w,R(I))return D+T;for(;6>D.length;)D="0"+D;T=D+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(var m=0;m<b.g.length;m++)if(b.g[m]!=0)return!1;return!0}function N(b){return b.h==-1}n.l=function(b){return b=H(this,b),N(b)?-1:R(b)?0:1};function P(b){for(var m=b.g.length,I=[],T=0;T<m;T++)I[T]=~b.g[T];return new o(I,~b.h).add(E)}n.abs=function(){return N(this)?P(this):this},n.add=function(b){for(var m=Math.max(this.g.length,b.g.length),I=[],T=0,w=0;w<=m;w++){var D=T+(this.i(w)&65535)+(b.i(w)&65535),_=(D>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=_>>>16,D&=65535,_&=65535,I[w]=_<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(b,m){return b.add(P(m))}n.j=function(b){if(R(this)||R(b))return p;if(N(this))return N(b)?P(this).j(P(b)):P(P(this).j(b));if(N(b))return P(this.j(P(b)));if(0>this.l(C)&&0>b.l(C))return d(this.m()*b.m());for(var m=this.g.length+b.g.length,I=[],T=0;T<2*m;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<b.g.length;w++){var D=this.i(T)>>>16,_=this.i(T)&65535,$e=b.i(w)>>>16,bt=b.i(w)&65535;I[2*T+2*w]+=_*bt,$(I,2*T+2*w),I[2*T+2*w+1]+=D*bt,$(I,2*T+2*w+1),I[2*T+2*w+1]+=_*$e,$(I,2*T+2*w+1),I[2*T+2*w+2]+=D*$e,$(I,2*T+2*w+2)}for(T=0;T<m;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=m;T<2*m;T++)I[T]=0;return new o(I,0)};function $(b,m){for(;(b[m]&65535)!=b[m];)b[m+1]+=b[m]>>>16,b[m]&=65535,m++}function B(b,m){this.g=b,this.h=m}function oe(b,m){if(R(m))throw Error("division by zero");if(R(b))return new B(p,p);if(N(b))return m=oe(P(b),m),new B(P(m.g),P(m.h));if(N(m))return m=oe(b,P(m)),new B(P(m.g),m.h);if(30<b.g.length){if(N(b)||N(m))throw Error("slowDivide_ only works with positive integers.");for(var I=E,T=m;0>=T.l(b);)I=fe(I),T=fe(T);var w=ne(I,1),D=ne(T,1);for(T=ne(T,2),I=ne(I,2);!R(T);){var _=D.add(T);0>=_.l(b)&&(w=w.add(I),D=_),T=ne(T,1),I=ne(I,1)}return m=H(b,w.j(m)),new B(w,m)}for(w=p;0<=b.l(m);){for(I=Math.max(1,Math.floor(b.m()/m.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),D=d(I),_=D.j(m);N(_)||0<_.l(b);)I-=T,D=d(I),_=D.j(m);R(D)&&(D=E),w=w.add(D),b=H(b,_)}return new B(w,b)}n.A=function(b){return oe(this,b).h},n.and=function(b){for(var m=Math.max(this.g.length,b.g.length),I=[],T=0;T<m;T++)I[T]=this.i(T)&b.i(T);return new o(I,this.h&b.h)},n.or=function(b){for(var m=Math.max(this.g.length,b.g.length),I=[],T=0;T<m;T++)I[T]=this.i(T)|b.i(T);return new o(I,this.h|b.h)},n.xor=function(b){for(var m=Math.max(this.g.length,b.g.length),I=[],T=0;T<m;T++)I[T]=this.i(T)^b.i(T);return new o(I,this.h^b.h)};function fe(b){for(var m=b.g.length+1,I=[],T=0;T<m;T++)I[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(I,b.h)}function ne(b,m){var I=m>>5;m%=32;for(var T=b.g.length-I,w=[],D=0;D<T;D++)w[D]=0<m?b.i(D+I)>>>m|b.i(D+I+1)<<32-m:b.i(D+I);return new o(w,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,u0=bU.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,lo=bU.Integer=o}).apply(typeof TU<"u"?TU:typeof self<"u"?self:typeof window<"u"?window:{});var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ho={};var l0,gZ,fd,d0,Pp,Qv,h0,f0,p0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,y){return u==Array.prototype||u==Object.prototype||(u[f]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kv=="object"&&Kv];for(var f=0;f<u.length;++f){var y=u[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var y=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var M=u[S];if(!(M in y))break e;y=y[M]}u=u[u.length-1],S=y[u],f=f(S),f!=S&&f!=null&&e(y,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var y=0,S=!1,M={next:function(){if(!S&&y<u.length){var L=y++;return{value:f(L,u[L]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,y){return y})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,y){return u.call.apply(u.bind,arguments)}function p(u,f,y){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function E(u,f,y){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,E.apply(null,arguments)}function C(u,f){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function R(u,f){function y(){}y.prototype=f.prototype,u.aa=f.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(S,M,L){for(var Y=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Y[ut-2]=arguments[ut];return f.prototype[M].apply(S,Y)}}function N(u){let f=u.length;if(0<f){let y=Array(f);for(let S=0;S<f;S++)y[S]=u[S];return y}return[]}function P(u,f){for(let y=1;y<arguments.length;y++){let S=arguments[y];if(c(S)){let M=u.length||0,L=S.length||0;u.length=M+L;for(let Y=0;Y<L;Y++)u[M+Y]=S[Y]}else u.push(S)}}class H{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function $(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var fe=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function ne(u,f,y){for(let S in u)f.call(y,u[S],S,u)}function b(u,f){for(let y in u)f.call(void 0,u[y],y,u)}function m(u){let f={};for(let y in u)f[y]=u[y];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let y,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(y in S)u[y]=S[y];for(let L=0;L<I.length;L++)y=I[L],Object.prototype.hasOwnProperty.call(S,y)&&(u[y]=S[y])}}function w(u){var f=1;u=u.split(":");let y=[];for(;0<f&&u.length;)y.push(u.shift()),f--;return u.length&&y.push(u.join(":")),y}function D(u){a.setTimeout(()=>{throw u},0)}function _(){var u=V;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class $e{constructor(){this.h=this.g=null}add(f,y){let S=bt.get();S.set(f,y),this.h?this.h.next=S:this.g=S,this.h=S}}var bt=new H(()=>new ht,u=>u.reset());class ht{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,F=!1,V=new $e,U=()=>{let u=a.Promise.resolve(void 0);Ke=()=>{u.then(pe)}};var pe=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(y){D(y)}var f=bt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}F=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var xn=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let y=()=>{};a.addEventListener("test",y,f),a.removeEventListener("test",y,f)}catch{}return u})();function yn(u,f){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(fe){e:{try{oe(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else y=="mouseover"?f=u.fromElement:y=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ir[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&yn.aa.h.call(this)}}R(yn,ge);var ir={2:"touch",3:"pen",4:"mouse"};yn.prototype.h=function(){yn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),X=0;function Q(u,f,y,S,M){this.listener=u,this.proxy=null,this.src=f,this.type=y,this.capture=!!S,this.ha=M,this.key=++X,this.da=this.fa=!1}function j(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Z(u){this.src=u,this.g={},this.h=0}Z.prototype.add=function(u,f,y,S,M){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var Y=me(u,f,S,M);return-1<Y?(f=u[Y],y||(f.fa=!1)):(f=new Q(f,this.src,L,!!S,M),f.fa=y,u.push(f)),f};function he(u,f){var y=f.type;if(y in u.g){var S=u.g[y],M=Array.prototype.indexOf.call(S,f,void 0),L;(L=0<=M)&&Array.prototype.splice.call(S,M,1),L&&(j(f),u.g[y].length==0&&(delete u.g[y],u.h--))}}function me(u,f,y,S){for(var M=0;M<u.length;++M){var L=u[M];if(!L.da&&L.listener==f&&L.capture==!!y&&L.ha==S)return M}return-1}var de="closure_lm_"+(1e6*Math.random()|0),Te={};function Ne(u,f,y,S,M){if(S&&S.once)return it(u,f,y,S,M);if(Array.isArray(f)){for(var L=0;L<f.length;L++)Ne(u,f[L],y,S,M);return null}return y=Ir(y),u&&u[Wt]?u.K(f,y,d(S)?!!S.capture:!!S,M):Re(u,f,y,!1,S,M)}function Re(u,f,y,S,M,L){if(!f)throw Error("Invalid event type");var Y=d(M)?!!M.capture:!!M,ut=Is(u);if(ut||(u[de]=ut=new Z(u)),y=ut.add(f,y,S,Y,L),y.proxy)return y;if(S=ct(),y.proxy=S,S.src=u,S.listener=y,u.addEventListener)xn||(M=Y),M===void 0&&(M=!1),u.addEventListener(f.toString(),S,M);else if(u.attachEvent)u.attachEvent(sr(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ct(){function u(y){return f.call(u.src,u.listener,y)}let f=La;return u}function it(u,f,y,S,M){if(Array.isArray(f)){for(var L=0;L<f.length;L++)it(u,f[L],y,S,M);return null}return y=Ir(y),u&&u[Wt]?u.L(f,y,d(S)?!!S.capture:!!S,M):Re(u,f,y,!0,S,M)}function Ct(u,f,y,S,M){if(Array.isArray(f))for(var L=0;L<f.length;L++)Ct(u,f[L],y,S,M);else S=d(S)?!!S.capture:!!S,y=Ir(y),u&&u[Wt]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],y=me(L,y,S,M),-1<y&&(j(L[y]),Array.prototype.splice.call(L,y,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=Is(u))&&(f=u.g[f.toString()],u=-1,f&&(u=me(f,y,S,M)),(y=-1<u?f[u]:null)&&ft(y))}function ft(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Wt])he(f.i,u);else{var y=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(y,S,u.capture):f.detachEvent?f.detachEvent(sr(y),S):f.addListener&&f.removeListener&&f.removeListener(S),(y=Is(f))?(he(y,u),y.h==0&&(y.src=null,f[de]=null)):j(u)}}}function sr(u){return u in Te?Te[u]:Te[u]="on"+u}function La(u,f){if(u.da)u=!0;else{f=new yn(f,this);var y=u.listener,S=u.ha||u.src;u.fa&&ft(u),u=y.call(S,f)}return u}function Is(u){return u=u[de],u instanceof Z?u:null}var Fa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ir(u){return typeof u=="function"?u:(u[Fa]||(u[Fa]=function(f){return u.handleEvent(f)}),u[Fa])}function Ht(){je.call(this),this.i=new Z(this),this.M=this,this.F=null}R(Ht,je),Ht.prototype[Wt]=!0,Ht.prototype.removeEventListener=function(u,f,y,S){Ct(this,u,f,y,S)};function Ot(u,f){var y,S=u.F;if(S)for(y=[];S;S=S.F)y.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new ge(f,u);else if(f instanceof ge)f.target=f.target||u;else{var M=f;f=new ge(S,u),T(f,M)}if(M=!0,y)for(var L=y.length-1;0<=L;L--){var Y=f.g=y[L];M=si(Y,S,!0,f)&&M}if(Y=f.g=u,M=si(Y,S,!0,f)&&M,M=si(Y,S,!1,f)&&M,y)for(L=0;L<y.length;L++)Y=f.g=y[L],M=si(Y,S,!1,f)&&M}Ht.prototype.N=function(){if(Ht.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var y=u.g[f],S=0;S<y.length;S++)j(y[S]);delete u.g[f],u.h--}}this.F=null},Ht.prototype.K=function(u,f,y,S){return this.i.add(String(u),f,!1,y,S)},Ht.prototype.L=function(u,f,y,S){return this.i.add(String(u),f,!0,y,S)};function si(u,f,y,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,L=0;L<f.length;++L){var Y=f[L];if(Y&&!Y.da&&Y.capture==y){var ut=Y.listener,Kt=Y.ha||Y.src;Y.fa&&he(u.i,Y),M=ut.call(Kt,S)!==!1&&M}}return M&&!S.defaultPrevented}function ws(u,f,y){if(typeof u=="function")y&&(u=E(u,y));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Va(u){u.g=ws(()=>{u.g=null,u.i&&(u.i=!1,Va(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Ua extends je{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Va(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(u){je.call(this),this.h=u,this.g={}}R(pr,je);var nn=[];function On(u){ne(u.g,function(f,y){this.g.hasOwnProperty(y)&&ft(f)},u),u.g={}}pr.prototype.N=function(){pr.aa.N.call(this),On(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ja=a.JSON.stringify,Ts=a.JSON.parse,ig=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Eo(){}Eo.prototype.h=null;function Gd(u){return u.h||(u.h=u.i())}function Io(){}var wo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _n(){ge.call(this,"d")}R(_n,ge);function vu(){ge.call(this,"c")}R(vu,ge);var wr={},To=null;function Eu(){return To=To||new Ht}wr.La="serverreachability";function sg(u){ge.call(this,wr.La,u)}R(sg,ge);function Ur(u){let f=Eu();Ot(f,new sg(f))}wr.STAT_EVENT="statevent";function og(u,f){ge.call(this,wr.STAT_EVENT,u),this.stat=f}R(og,ge);function Ln(u){let f=Eu();Ot(f,new og(f,u))}wr.Ma="timingevent";function Ba(u,f){ge.call(this,wr.Ma,u),this.size=f}R(Ba,ge);function bo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Co(){this.g=!0}Co.prototype.xa=function(){this.g=!1};function Wd(u,f,y,S,M,L){u.info(function(){if(u.g)if(L)for(var Y="",ut=L.split("&"),Kt=0;Kt<ut.length;Kt++){var lt=ut[Kt].split("=");if(1<lt.length){var zn=lt[0];lt=lt[1];var Gn=zn.split("_");Y=2<=Gn.length&&Gn[1]=="type"?Y+(zn+"="+lt+"&"):Y+(zn+"=redacted&")}}else Y=null;else Y=L;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+f+`
`+y+`
`+Y})}function $a(u,f,y,S,M,L,Y){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+f+`
`+y+`
`+L+" "+Y})}function Do(u,f,y,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+ag(u,y)+(S?" "+S:"")})}function Vi(u,f){u.info(function(){return"TIMEOUT: "+f})}Co.prototype.info=function(){};function ag(u,f){if(!u.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var S=y[u];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Y=1;Y<M.length;Y++)M[Y]=""}}}}return ja(y)}catch{return f}}var Ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Iu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qa;function za(){}R(za,Eo),za.prototype.g=function(){return new XMLHttpRequest},za.prototype.i=function(){return{}},qa=new za;function Ui(u,f,y,S){this.j=u,this.i=f,this.l=y,this.R=S||1,this.U=new pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kd}function Kd(){this.i=null,this.g="",this.h=!1}var cg={},So={};function wu(u,f,y){u.L=1,u.v=Du(oi(f)),u.m=y,u.P=!0,Tu(u,null)}function Tu(u,f){u.F=Date.now(),Ro(u),u.A=oi(u.v);var y=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),mg(y.i,"t",S),u.C=0,y=u.j.J,u.h=new Kd,u.g=g(u.j,y?f:null,!u.m),0<u.O&&(u.M=new Ua(E(u.Y,u,u.g),u.O)),f=u.U,y=u.g,S=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(nn[0]=M.toString()),M=nn);for(var L=0;L<M.length;L++){var Y=Ne(y,M[L],S||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=u.H?m(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ur(),Wd(u.i,u.u,u.A,u.l,u.R,u.m)}Ui.prototype.ca=function(u){u=u.target;let f=this.M;f&&mr(u)==3?f.j():this.Y(u)},Ui.prototype.Y=function(u){try{if(u==this.g)e:{let Gn=mr(this.g);var f=this.g.Ba();let Ou=this.g.Z();if(!(3>Gn)&&(Gn!=3||this.g&&(this.h.h||this.g.oa()||Ig(this.g)))){this.J||Gn!=4||f==7||(f==8||0>=Ou?Ur(3):Ur(2)),bu(this);var y=this.g.Z();this.X=y;t:if(Ao(this)){var S=Ig(this.g);u="";var M=S.length,L=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),Po(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(L&&f==M-1)});S.length=0,this.h.g+=u,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=y==200,$a(this.i,this.u,this.A,this.l,this.R,Gn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Kt=this.g;if((ut=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(ut)){var lt=ut;break t}}lt=null}if(y=lt)Do(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,y);else{this.o=!1,this.s=3,Ln(12),ji(this),Po(this);break e}}if(this.P){y=!0;let di;for(;!this.J&&this.C<Y.length;)if(di=bs(this,Y),di==So){Gn==4&&(this.s=4,Ln(14),y=!1),Do(this.i,this.l,null,"[Incomplete Response]");break}else if(di==cg){this.s=4,Ln(15),Do(this.i,this.l,Y,"[Invalid Chunk]"),y=!1;break}else Do(this.i,this.l,di,null),Ga(this,di);if(Ao(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gn!=4||Y.length!=0||this.h.h||(this.s=1,Ln(16),y=!1),this.o=this.o&&y,!y)Do(this.i,this.l,Y,"[Invalid Chunked Response]"),ji(this),Po(this);else if(0<Y.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),xu(zn),zn.M=!0,Ln(11))}}else Do(this.i,this.l,Y,null),Ga(this,Y);Gn==4&&ji(this),this.o&&!this.J&&(Gn==4?qn(this.j,this):(this.o=!1,Ro(this)))}else wg(this.g),y==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Ln(12)):(this.s=0,Ln(13)),ji(this),Po(this)}}}catch{}finally{}};function Ao(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function bs(u,f){var y=u.C,S=f.indexOf(`
`,y);return S==-1?So:(y=Number(f.substring(y,S)),isNaN(y)?cg:(S+=1,S+y>f.length?So:(f=f.slice(S,S+y),u.C=S+y,f)))}Ui.prototype.cancel=function(){this.J=!0,ji(this)};function Ro(u){u.S=Date.now()+u.I,ug(u,u.I)}function ug(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bo(E(u.ba,u),f)}function bu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ui.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Vi(this.i,this.A),this.L!=2&&(Ur(),Ln(17)),ji(this),this.s=2,Po(this)):ug(this,this.S-u)};function Po(u){u.j.G==0||u.J||qn(u.j,u)}function ji(u){bu(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,On(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ga(u,f){try{var y=u.j;if(y.G!=0&&(y.g==u||Xd(y.h,u))){if(!u.K&&Xd(y.h,u)&&y.G==3){try{var S=y.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Ds(y),Fo(y);else break e;Mu(y),Ln(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=bo(E(y.Za,y),6e3));if(1>=Zd(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Hi(y,11)}else if((u.K||y.g==u)&&Ds(y),!$(f))for(M=y.Da.g.parse(f),f=0;f<M.length;f++){let lt=M[f];if(y.T=lt[0],lt=lt[1],y.G==2)if(lt[0]=="c"){y.K=lt[1],y.ia=lt[2];let zn=lt[3];zn!=null&&(y.la=zn,y.j.info("VER="+y.la));let Gn=lt[4];Gn!=null&&(y.Aa=Gn,y.j.info("SVER="+y.Aa));let Ou=lt[5];Ou!=null&&typeof Ou=="number"&&0<Ou&&(S=1.5*Ou,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;let di=u.g;if(di){let Tg=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tg){var L=S.h;L.g||Tg.indexOf("spdy")==-1&&Tg.indexOf("quic")==-1&&Tg.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(jr(L,L.h),L.h=null))}if(S.D){let sI=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;sI&&(S.ya=sI,Nt(S.I,S.D,sI))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var Y=u;if(S.qa=l(S,S.J?S.ia:null,S.W),Y.K){Tr(S.h,Y);var ut=Y,Kt=S.L;Kt&&(ut.I=Kt),ut.B&&(bu(ut),Ro(ut)),S.g=Y}else ch(S);0<y.i.length&&Xa(y)}else lt[0]!="stop"&&lt[0]!="close"||Hi(y,7);else y.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Hi(y,7):Pu(y):lt[0]!="noop"&&y.l&&y.l.ta(lt),y.v=0)}}Ur(4)}catch{}}var Qd=class{constructor(u,f){this.g=u,this.map=f}};function Yd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Zd(u){return u.h?1:u.g?u.g.size:0}function Xd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function jr(u,f){u.g?u.g.add(f):u.h=f}function Tr(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Yd.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function No(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let y of u.g.values())f=f.concat(y.D);return f}return N(u.i)}function Wa(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],y=u.length,S=0;S<y;S++)f.push(u[S]);return f}f=[],y=0;for(S in u)f[y++]=u[S];return f}function eh(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var y=0;y<u;y++)f.push(y);return f}f=[],y=0;for(let S in u)f[y++]=S;return f}}}function Dt(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var y=eh(u),S=Wa(u),M=S.length,L=0;L<M;L++)f.call(void 0,S[L],y&&y[L],u)}var Ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(u,f){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var S=u[y].indexOf("="),M=null;if(0<=S){var L=u[y].substring(0,S);M=u[y].substring(S+1)}else L=u[y];f(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function br(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof br){this.h=u.h,Ya(this,u.j),this.o=u.o,this.g=u.g,Cu(this,u.s),this.l=u.l;var f=u.i,y=new Ja;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),lg(this,y),this.m=u.m}else u&&(f=String(u).match(Ka))?(this.h=!1,Ya(this,f[1]||"",!0),this.o=ai(f[2]||""),this.g=ai(f[3]||"",!0),Cu(this,f[4]),this.l=ai(f[5]||"",!0),lg(this,f[6]||"",!0),this.m=ai(f[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}br.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Cr(f,th,!0),":");var y=this.g;return(y||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Cr(f,th,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Cr(y,y.charAt(0)=="/"?fg:hg,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Cr(y,ko)),u.join("")};function oi(u){return new br(u)}function Ya(u,f,y){u.j=y?ai(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Cu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function lg(u,f,y){f instanceof Ja?(u.i=f,Su(u.i,u.h)):(y||(f=Cr(f,pg)),u.i=new Ja(f,u.h))}function Nt(u,f,y){u.i.set(f,y)}function Du(u){return Nt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ai(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cr(u,f,y){return typeof u=="string"?(u=encodeURI(u).replace(f,dg),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function dg(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var th=/[#\/\?@]/g,hg=/[#\?:]/g,fg=/[#\?]/g,pg=/[#\?@]/g,ko=/#/g;function Ja(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Bi(u){u.g||(u.g=new Map,u.h=0,u.i&&Qa(u.i,function(f,y){u.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}n=Ja.prototype,n.add=function(u,f){Bi(this),this.i=null,u=ui(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(f),this.h+=1,this};function gg(u,f){Bi(u),f=ui(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function ci(u,f){return Bi(u),f=ui(u,f),u.g.has(f)}n.forEach=function(u,f){Bi(this),this.g.forEach(function(y,S){y.forEach(function(M){u.call(f,M,S,this)},this)},this)},n.na=function(){Bi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let S=0;S<f.length;S++){let M=u[S];for(let L=0;L<M.length;L++)y.push(f[S])}return y},n.V=function(u){Bi(this);let f=[];if(typeof u=="string")ci(this,u)&&(f=f.concat(this.g.get(ui(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)f=f.concat(u[y])}return f},n.set=function(u,f){return Bi(this),this.i=null,u=ui(this,u),ci(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function mg(u,f,y){gg(u,f),0<y.length&&(u.i=null,u.g.set(ui(u,f),N(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var S=f[y];let L=encodeURIComponent(String(S)),Y=this.V(S);for(S=0;S<Y.length;S++){var M=L;Y[S]!==""&&(M+="="+encodeURIComponent(String(Y[S]))),u.push(M)}}return this.i=u.join("&")};function ui(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Su(u,f){f&&!u.j&&(Bi(u),u.i=null,u.g.forEach(function(y,S){var M=S.toLowerCase();S!=M&&(gg(this,S),mg(this,M,y))},u)),u.j=f}function yg(u,f){let y=new Co;if(a.Image){let S=new Image;S.onload=C(gr,y,"TestLoadImage: loaded",!0,f,S),S.onerror=C(gr,y,"TestLoadImage: error",!1,f,S),S.onabort=C(gr,y,"TestLoadImage: abort",!1,f,S),S.ontimeout=C(gr,y,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function Za(u,f){let y=new Co,S=new AbortController,M=setTimeout(()=>{S.abort(),gr(y,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(L=>{clearTimeout(M),L.ok?gr(y,"TestPingServer: ok",!0,f):gr(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),gr(y,"TestPingServer: error",!1,f)})}function gr(u,f,y,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(y)}catch{}}function _g(){this.g=new ig}function nh(u,f,y){let S=y||"";try{Dt(u,function(M,L){let Y=M;d(M)&&(Y=ja(M)),f.push(S+L+"="+encodeURIComponent(Y))})}catch(M){throw f.push(S+"type="+encodeURIComponent("_badmap")),M}}function St(u){this.l=u.Ub||null,this.j=u.eb||!1}R(St,Eo),St.prototype.g=function(){return new Au(this.l,this.j)},St.prototype.i=(function(u){return function(){return u}})({});function Au(u,f){Ht.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Au,Ht),n=Au.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,xo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vg(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function vg(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Mo(this):xo(this),this.readyState==3&&vg(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Mo(this))},n.Qa=function(u){this.g&&(this.response=u,Mo(this))},n.ga=function(){this.g&&Mo(this)};function Mo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=f.next();return u.join(`\r
`)};function xo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rh(u){let f="";return ne(u,function(y,S){f+=S,f+=":",f+=y,f+=`\r
`}),f}function Oo(u,f,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=rh(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Nt(u,f,y))}function pt(u){Ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(pt,Ht);var Eg=/^https?$/i,iI=["POST","PUT"];n=pt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qa.g(),this.v=this.o?Gd(this.o):Gd(qa),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){Lo(this,L);return}if(u=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)y.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let L of S.keys())y.set(L,S.get(L));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(L=>L.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iI,f,void 0))||S||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Y]of y)this.g.setRequestHeader(L,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sh(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Lo(this,L)}};function Lo(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,ih(u),Cs(u)}function ih(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),Cs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cs(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ru(this):this.bb())},n.bb=function(){Ru(this)};function Ru(u){if(u.h&&typeof o<"u"&&(!u.v[1]||mr(u)!=4||u.Z()!=2)){if(u.u&&mr(u)==4)ws(u.Ea,0,u);else if(Ot(u,"readystatechange"),mr(u)==4){u.h=!1;try{let Y=u.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var S;if(S=Y===0){var M=String(u.D).match(Ka)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),S=!Eg.test(M?M.toLowerCase():"")}y=S}if(y)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var L=2<mr(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",ih(u)}}finally{Cs(u)}}}}function Cs(u,f){if(u.g){sh(u);let y=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Ot(u,"ready");try{y.onreadystatechange=S}catch{}}}function sh(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function mr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Ts(f)}};function Ig(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wg(u){let f={};u=(u.g&&2<=mr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if($(u[S]))continue;var y=w(u[S]);let M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let L=f[M]||[];f[M]=L,L.push(y)}b(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(u,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||f}function oh(u){this.Aa=0,this.i=[],this.j=new Co,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=li("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=li("baseRetryDelayMs",5e3,u),this.cb=li("retryDelaySeedMs",1e4,u),this.Wa=li("forwardChannelMaxRetries",2,u),this.wa=li("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Yd(u&&u.concurrentRequestLimit),this.Da=new _g,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=oh.prototype,n.la=8,n.G=1,n.connect=function(u,f,y,S){Ln(0),this.W=u,this.H=f||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=l(this,null,this.W),Xa(this)};function Pu(u){if(Nu(u),u.G==3){var f=u.U++,y=oi(u.I);if(Nt(y,"SID",u.K),Nt(y,"RID",f),Nt(y,"TYPE","terminate"),Vo(u,y),f=new Ui(u,u.j,f),f.L=2,f.v=Du(oi(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=f.v,y=!0),y||(f.g=g(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ro(f)}Ss(u)}function Fo(u){u.g&&(xu(u),u.g.cancel(),u.g=null)}function Nu(u){Fo(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ds(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Xa(u){if(!Jd(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ke||U(),F||(Ke(),F=!0),V.add(f,u),u.B=0}}function ku(u,f){return Zd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bo(E(u.Ga,u,f),lh(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let M=new Ui(this,this.j,u),L=this.o;if(this.S&&(L?(L=m(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=$i(this,M,f),y=oi(this.I),Nt(y,"RID",u),Nt(y,"CVER",22),this.D&&Nt(y,"X-HTTP-Session-Id",this.D),Vo(this,y),L&&(this.O?f="headers="+encodeURIComponent(String(rh(L)))+"&"+f:this.m&&Oo(y,this.m,L)),jr(this.h,M),this.Ua&&Nt(y,"TYPE","init"),this.P?(Nt(y,"$req",f),Nt(y,"SID","null"),M.T=!0,wu(M,y,null)):wu(M,y,f),this.G=2}}else this.G==3&&(u?ah(this,u):this.i.length==0||Jd(this.h)||ah(this))};function ah(u,f){var y;f?y=f.l:y=u.U++;let S=oi(u.I);Nt(S,"SID",u.K),Nt(S,"RID",y),Nt(S,"AID",u.T),Vo(u,S),u.m&&u.o&&Oo(S,u.m,u.o),y=new Ui(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),f&&(u.i=f.D.concat(u.i)),f=$i(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),jr(u.h,y),wu(y,S,f)}function Vo(u,f){u.H&&ne(u.H,function(y,S){Nt(f,S,y)}),u.l&&Dt({},function(y,S){Nt(f,S,y)})}function $i(u,f,y){y=Math.min(u.i.length,y);var S=u.l?E(u.l.Na,u.l,u):null;e:{var M=u.i;let L=-1;for(;;){let Y=["count="+y];L==-1?0<y?(L=M[0].g,Y.push("ofs="+L)):L=0:Y.push("ofs="+L);let ut=!0;for(let Kt=0;Kt<y;Kt++){let lt=M[Kt].g,zn=M[Kt].map;if(lt-=L,0>lt)L=Math.max(0,M[Kt].g-100),ut=!1;else try{nh(zn,Y,"req"+lt+"_")}catch{S&&S(zn)}}if(ut){S=Y.join("&");break e}}}return u=u.i.splice(0,y),f.D=u,S}function ch(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ke||U(),F||(Ke(),F=!0),V.add(f,u),u.v=0}}function Mu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bo(E(u.Fa,u),lh(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,uh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bo(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ln(10),Fo(this),uh(this))};function xu(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function uh(u){u.g=new Ui(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=oi(u.qa);Nt(f,"RID","rpc"),Nt(f,"SID",u.K),Nt(f,"AID",u.T),Nt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Nt(f,"TO",u.ja),Nt(f,"TYPE","xmlhttp"),Vo(u,f),u.m&&u.o&&Oo(f,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Du(oi(f)),y.m=null,y.P=!0,Tu(y,u)}n.Za=function(){this.C!=null&&(this.C=null,Fo(this),Mu(this),Ln(19))};function Ds(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qn(u,f){var y=null;if(u.g==f){Ds(u),xu(u),u.g=null;var S=2}else if(Xd(u.h,f))y=f.D,Tr(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;S=Eu(),Ot(S,new Ba(S,y)),Xa(u)}else ch(u);else if(M=f.s,M==3||M==0&&0<f.X||!(S==1&&ku(u,f)||S==2&&Mu(u)))switch(y&&0<y.length&&(f=u.h,f.i=f.i.concat(y)),M){case 1:Hi(u,5);break;case 4:Hi(u,10);break;case 3:Hi(u,6);break;default:Hi(u,2)}}}function lh(u,f){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*f}function Hi(u,f){if(u.j.info("Error code "+f),f==2){var y=E(u.fb,u),S=u.Xa;let M=!S;S=new br(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ya(S,"https"),Du(S),M?yg(S.toString(),y):Za(S.toString(),y)}else Ln(2);u.G=0,u.l&&u.l.sa(f),Ss(u),Nu(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ln(2)):(this.j.info("Failed to ping google.com"),Ln(1))};function Ss(u){if(u.G=0,u.ka=[],u.l){let f=No(u.h);(f.length!=0||u.i.length!=0)&&(P(u.ka,f),P(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function l(u,f,y){var S=y instanceof br?oi(y):new br(y);if(S.g!="")f&&(S.g=f+"."+S.g),Cu(S,S.s);else{var M=a.location;S=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var L=new br(null);S&&Ya(L,S),f&&(L.g=f),M&&Cu(L,M),y&&(L.l=y),S=L}return y=u.D,f=u.ya,y&&f&&Nt(S,y,f),Nt(S,"VER",u.la),Vo(u,S),S}function g(u,f,y){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new pt(new St({eb:y})):new pt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function v(){}n=v.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function A(){}A.prototype.g=function(u,f){return new k(u,f)};function k(u,f){Ht.call(this),this.g=new oh(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!$(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!$(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new be(this)}R(k,Ht),k.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},k.prototype.close=function(){Pu(this.g)},k.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=ja(u),u=y);f.i.push(new Qd(f.Ya++,u)),f.G==3&&Xa(f)},k.prototype.N=function(){this.g.l=null,delete this.j,Pu(this.g),delete this.g,k.aa.N.call(this)};function O(u){_n.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let y in f){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}R(O,_n);function ee(){vu.call(this),this.status=1}R(ee,vu);function be(u){this.g=u}R(be,v),be.prototype.ua=function(){Ot(this.g,"a")},be.prototype.ta=function(u){Ot(this.g,new O(u))},be.prototype.sa=function(u){Ot(this.g,new ee)},be.prototype.ra=function(){Ot(this.g,"b")},A.prototype.createWebChannel=A.prototype.g,k.prototype.send=k.prototype.o,k.prototype.open=k.prototype.m,k.prototype.close=k.prototype.close,p0=ho.createWebChannelTransport=function(){return new A},f0=ho.getStatEventTarget=function(){return Eu()},h0=ho.Event=wr,Qv=ho.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,Pp=ho.ErrorCode=Ha,Iu.COMPLETE="complete",d0=ho.EventType=Iu,Io.EventType=wo,wo.OPEN="a",wo.CLOSE="b",wo.ERROR="c",wo.MESSAGE="d",Ht.prototype.listen=Ht.prototype.K,fd=ho.WebChannel=Io,gZ=ho.FetchXmlHttpFactory=St,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,l0=ho.XhrIo=pt}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var CU="@firebase/firestore",DU="4.8.0";var kn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");var Ld="11.10.0";var uu=new as("@firebase/firestore");function pd(){return uu.logLevel}function ue(n,...e){if(uu.logLevel<=Ye.DEBUG){let t=e.map(nP);uu.debug(`Firestore (${Ld}): ${n}`,...t)}}function po(n,...e){if(uu.logLevel<=Ye.ERROR){let t=e.map(nP);uu.error(`Firestore (${Ld}): ${n}`,...t)}}function Ra(n,...e){if(uu.logLevel<=Ye.WARN){let t=e.map(nP);uu.warn(`Firestore (${Ld}): ${n}`,...t)}}function nP(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,yj(n,r,t)}function yj(n,e,t){let r=`FIRESTORE (${Ld}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw po(r),new Error(r)}function Tt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||yj(e,i,r)}function Le(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},se=class extends xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Oi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var nE=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},v0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kn.UNAUTHENTICATED))}shutdown(){}},E0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},I0=class{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Oi,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Oi)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new nE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new kn(e)}},w0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},T0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new w0(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},rE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},b0=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);let r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rE(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function _j(){return new TextEncoder}var Lp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=mZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ze(n,e){return n<e?-1:n>e?1:0}function C0(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ze(r,i);{let s=_j(),o=yZ(s.encode(SU(n,t)),s.encode(SU(e,t)));return o!==0?o:ze(r,i)}}t+=r>65535?2:1}return ze(n.length,e.length)}function SU(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function yZ(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ze(n[t],e[t]);return ze(n.length,e.length)}function wd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var AU="__name__",iE=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ze(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):C0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lo.fromString(e.substring(4,e.length-2))}},Ut=class n extends iE{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},_Z=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vr=class n extends iE{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return _Z.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AU}static keyField(){return new n([AU])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var _e=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ut.fromString(e))}static fromName(e){return new n(Ut.fromString(e).popFirst(5))}static empty(){return new n(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ut(e.slice()))}};function vj(n,e,t){if(!t)throw new se(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vZ(n,e,t,r){if(e===!0&&r===!0)throw new se(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RU(n){if(!_e.isDocumentKey(n))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PU(n){if(_e.isDocumentKey(n))throw new se(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ej(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function FE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function go(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=FE(n);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gn(n,e){let t={typeString:n};return e&&(t.value=e),t}function Kp(n,e){if(!Ej(n))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new se(q.INVALID_ARGUMENT,t);return!0}var NU=-62135596800,kU=1e6,mn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kU);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<NU)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kU}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-NU;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};mn._jsonSchemaVersion="firestore/timestamp/1.0",mn._jsonSchema={type:gn("string",mn._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};var Ve=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new mn(0,0))}static max(){return new n(new mn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fp=-1,D0=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};D0.UNKNOWN_ID=-1;function EZ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new mn(t+1,0):new mn(t,r));return new lu(i,_e.empty(),e)}function IZ(n){return new lu(n.readTime,n.key,Fp)}var lu=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ve.min(),_e.empty(),Fp)}static max(){return new n(Ve.max(),_e.empty(),Fp)}};function wZ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}var TZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",S0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Fd(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==TZ)throw n;ue("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function bZ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vd(n){return n.name==="IndexedDbTransactionError"}var rP=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),iP=-1;function VE(n){return n==null}function Vp(n){return n===0&&1/n==-1/0}function CZ(n){return typeof n=="number"&&Number.isInteger(n)&&!Vp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Ij="";function DZ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MU(e)),e=SZ(n.get(t),e);return MU(e)}function SZ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case Ij:t+="";break;default:t+=s}}return t}function MU(n){return n+Ij+""}var AZ="remoteDocuments",wj="owner";var Tj="mutationQueues";var bj="mutations";var Cj="documentMutations",RZ="remoteDocumentsV14";var Dj="remoteDocumentGlobal";var Sj="targets";var Aj="targetDocuments";var Rj="targetGlobal",Pj="collectionParents";var Nj="clientMetadata";var kj="bundles";var Mj="namedQueries";var PZ="indexConfiguration";var NZ="indexState";var kZ="indexEntries";var xj="documentOverlays";var MZ="globals";var xZ=[Tj,bj,Cj,AZ,Sj,wj,Rj,Aj,Nj,Dj,Pj,kj,Mj],FTe=[...xZ,xj],OZ=[Tj,bj,Cj,RZ,Sj,wj,Rj,Aj,Nj,Dj,Pj,kj,Mj,xj],LZ=OZ,FZ=[...LZ,PZ,NZ,kZ];var VTe=[...FZ,MZ];function xU(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Oj(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Gt=class n{constructor(e,t){this.comparator=e,this.root=t||ms.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ms.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ms.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}},_d=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ms=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}};ms.EMPTY=null,ms.RED=!0,ms.BLACK=!1;ms.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ms(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Mn=class n{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sE(this.data.getIterator())}getIteratorFrom(e){return new sE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},sE=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ri=class n{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Mn(Vr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var oE=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oE("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rr.EMPTY_BYTE_STRING=new rr("");var VZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(n){if(Tt(!!n,39018),typeof n=="string"){let e=0,t=VZ.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yo(n){return typeof n=="string"?rr.fromBase64String(n):rr.fromUint8Array(n)}var Lj="server_timestamp",Fj="__type__",Vj="__previous_value__",Uj="__local_write_time__";function sP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Fj])===null||t===void 0?void 0:t.stringValue)===Lj}function UE(n){let e=n.mapValue.fields[Vj];return sP(e)?UE(e):e}function Up(n){let e=mo(n.mapValue.fields[Uj].timestampValue);return new mn(e.seconds,e.nanos)}var A0=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},aE="(default)",cE=class n{constructor(e,t){this.projectId=e,this.database=t||aE}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===aE}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var oP="__type__",jj="__max__",Yv={mapValue:{fields:{__type__:{stringValue:jj}}}},aP="__vector__",Td="value";function Pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sP(n)?4:$j(n)?9007199254740991:Bj(n)?10:11:Ee(28295,{value:n})}function vs(n,e){if(n===e)return!0;let t=Pa(n);if(t!==Pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Up(n).isEqual(Up(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=mo(i.timestampValue),a=mo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return yo(i.bytesValue).isEqual(yo(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Vt(i.geoPointValue.latitude)===Vt(s.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Vt(i.integerValue)===Vt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Vt(i.doubleValue),a=Vt(s.doubleValue);return o===a?Vp(o)===Vp(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return wd(n.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(xU(o)!==xU(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!vs(o[c],a[c])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function jp(n,e){return(n.values||[]).find(t=>vs(t,e))!==void 0}function bd(n,e){if(n===e)return 0;let t=Pa(n),r=Pa(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Vt(s.integerValue||s.doubleValue),c=Vt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return OU(n.timestampValue,e.timestampValue);case 4:return OU(Up(n),Up(e));case 5:return C0(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=yo(s),c=yo(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=ze(a[d],c[d]);if(h!==0)return h}return ze(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=ze(Vt(s.latitude),Vt(o.latitude));return a!==0?a:ze(Vt(s.longitude),Vt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return LU(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let p=s.fields||{},E=o.fields||{},C=(a=p[Td])===null||a===void 0?void 0:a.arrayValue,R=(c=E[Td])===null||c===void 0?void 0:c.arrayValue,N=ze(((d=C?.values)===null||d===void 0?void 0:d.length)||0,((h=R?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:LU(C,R)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Yv.mapValue&&o===Yv.mapValue)return 0;if(s===Yv.mapValue)return 1;if(o===Yv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let E=C0(c[p],h[p]);if(E!==0)return E;let C=bd(a[c[p]],d[h[p]]);if(C!==0)return C}return ze(c.length,h.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{le:t})}}function OU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);let t=mo(n),r=mo(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function LU(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=bd(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function Cd(n){return R0(n)}function R0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=mo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return yo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=R0(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${R0(t.fields[o])}`;return i+"}"})(n.mapValue):Ee(61005,{value:n})}function Xv(n){switch(Pa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=UE(n);return e?16+Xv(e):16;case 5:return 2*n.stringValue.length;case 6:return yo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Xv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return xa(r.fields,(s,o)=>{i+=s.length+Xv(o)}),i})(n.mapValue);default:throw Ee(13486,{value:n})}}function FU(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function P0(n){return!!n&&"integerValue"in n}function cP(n){return!!n&&"arrayValue"in n}function VU(n){return!!n&&"nullValue"in n}function UU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eE(n){return!!n&&"mapValue"in n}function Bj(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[oP])===null||t===void 0?void 0:t.stringValue)===aP}function kp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return xa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $j(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===jj}var jTe={mapValue:{fields:{[oP]:{stringValue:aP},[Td]:{arrayValue:{}}}}};var Fr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kp(t)}setAll(e){let t=Vr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=kp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());eE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];eE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xa(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(kp(this.value))}};function Hj(n){let e=[];return xa(n.fields,(t,r)=>{let i=new Vr([t]);if(eE(r)){let s=Hj(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ri(e)}var Li=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ve.min(),Ve.min(),Ve.min(),Fr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ve.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ve.min(),Ve.min(),Fr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ve.min(),Ve.min(),Fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Dd=class{constructor(e,t){this.position=e,this.inclusive=t}};function jU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),t.key):r=bd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function BU(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vs(n.position[t],e.position[t]))return!1;return!0}var Sd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function UZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var uE=class{},pn=class n extends uE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new k0(e,t,r):t==="array-contains"?new O0(e,r):t==="in"?new L0(e,r):t==="not-in"?new F0(e,r):t==="array-contains-any"?new V0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new M0(e,r):new x0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bd(t,this.value)):t!==null&&Pa(this.value)===Pa(t)&&this.matchesComparison(bd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fi=class n extends uE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return qj(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function qj(n){return n.op==="and"}function zj(n){return jZ(n)&&qj(n)}function jZ(n){for(let e of n.filters)if(e instanceof Fi)return!1;return!0}function N0(n){if(n instanceof pn)return n.field.canonicalString()+n.op.toString()+Cd(n.value);if(zj(n))return n.filters.map(e=>N0(e)).join(",");{let e=n.filters.map(t=>N0(t)).join(",");return`${n.op}(${e})`}}function Gj(n,e){return n instanceof pn?(function(r,i){return i instanceof pn&&r.op===i.op&&r.field.isEqual(i.field)&&vs(r.value,i.value)})(n,e):n instanceof Fi?(function(r,i){return i instanceof Fi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Gj(o,i.filters[a]),!0):!1})(n,e):void Ee(19439)}function Wj(n){return n instanceof pn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cd(t.value)}`})(n):n instanceof Fi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Wj).join(" ,")+"}"})(n):"Filter"}var k0=class extends pn{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){let t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}},M0=class extends pn{constructor(e,t){super(e,"in",t),this.keys=Kj("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},x0=class extends pn{constructor(e,t){super(e,"not-in",t),this.keys=Kj("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Kj(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}var O0=class extends pn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return cP(t)&&jp(t.arrayValue,this.value)}},L0=class extends pn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jp(this.value.arrayValue,t)}},F0=class extends pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(jp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jp(this.value.arrayValue,t)}},V0=class extends pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!cP(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jp(this.value.arrayValue,r))}};var U0=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function $U(n,e=null,t=[],r=[],i=null,s=null,o=null){return new U0(n,e,t,r,i,s,o)}function uP(n){let e=Le(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>N0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),VE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cd(r)).join(",")),e.Pe=t}return e.Pe}function lP(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BU(n.startAt,e.startAt)&&BU(n.endAt,e.endAt)}function j0(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var du=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function BZ(n,e,t,r,i,s,o,a){return new du(n,e,t,r,i,s,o,a)}function dP(n){return new du(n)}function HU(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Qj(n){return n.collectionGroup!==null}function Mp(n){let e=Le(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mn(Vr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Sd(s,r))}),t.has(Vr.keyField().canonicalString())||e.Te.push(new Sd(Vr.keyField(),r))}return e.Te}function ys(n){let e=Le(n);return e.Ie||(e.Ie=$Z(e,Mp(n))),e.Ie}function $Z(n,e){if(n.limitType==="F")return $U(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Sd(i.field,s)});let t=n.endAt?new Dd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dd(n.startAt.position,n.startAt.inclusive):null;return $U(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function B0(n,e){let t=n.filters.concat([e]);return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $0(n,e,t){return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jE(n,e){return lP(ys(n),ys(e))&&n.limitType===e.limitType}function Yj(n){return`${uP(ys(n))}|lt:${n.limitType}`}function gd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Wj(i)).join(", ")}]`),VE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Cd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Cd(i)).join(",")),`Target(${r})`})(ys(n))}; limitType=${n.limitType})`}function BE(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):_e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Mp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=jU(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Mp(r),i)||r.endAt&&!(function(o,a,c){let d=jU(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Mp(r),i))})(n,e)}function HZ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jj(n){return(e,t)=>{let r=!1;for(let i of Mp(n)){let s=qZ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qZ(n,e,t){let r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?bd(c,d):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:n.dir})}}var _o=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Oj(this.inner)}size(){return this.innerSize}};var zZ=new Gt(_e.comparator);function vo(){return zZ}var Zj=new Gt(_e.comparator);function Np(...n){let e=Zj;for(let t of n)e=e.insert(t.key,t);return e}function Xj(n){let e=Zj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function su(){return xp()}function eB(){return xp()}function xp(){return new _o(n=>n.toString(),(n,e)=>n.isEqual(e))}var GZ=new Gt(_e.comparator),WZ=new Mn(_e.comparator);function Ze(...n){let e=WZ;for(let t of n)e=e.add(t);return e}var KZ=new Mn(ze);function QZ(){return KZ}function hP(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vp(e)?"-0":e}}function tB(n){return{integerValue:""+n}}function YZ(n,e){return CZ(e)?tB(e):hP(n,e)}var Ad=class{constructor(){this._=void 0}};function JZ(n,e,t){return n instanceof Rd?(function(i,s){let o={fields:{[Fj]:{stringValue:Lj},[Uj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sP(s)&&(s=UE(s)),s&&(o.fields[Vj]=s),{mapValue:o}})(t,e):n instanceof hu?rB(n,e):n instanceof fu?iB(n,e):(function(i,s){let o=nB(i,s),a=qU(o)+qU(i.Ee);return P0(o)&&P0(i.Ee)?tB(a):hP(i.serializer,a)})(n,e)}function ZZ(n,e,t){return n instanceof hu?rB(n,e):n instanceof fu?iB(n,e):t}function nB(n,e){return n instanceof Pd?(function(r){return P0(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Rd=class extends Ad{},hu=class extends Ad{constructor(e){super(),this.elements=e}};function rB(n,e){let t=sB(e);for(let r of n.elements)t.some(i=>vs(i,r))||t.push(r);return{arrayValue:{values:t}}}var fu=class extends Ad{constructor(e){super(),this.elements=e}};function iB(n,e){let t=sB(e);for(let r of n.elements)t=t.filter(i=>!vs(i,r));return{arrayValue:{values:t}}}var Pd=class extends Ad{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function qU(n){return Vt(n.integerValue||n.doubleValue)}function sB(n){return cP(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XZ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof hu&&i instanceof hu||r instanceof fu&&i instanceof fu?wd(r.elements,i.elements,vs):r instanceof Pd&&i instanceof Pd?vs(r.Ee,i.Ee):r instanceof Rd&&i instanceof Rd})(n.transform,e.transform)}var H0=class{constructor(e,t){this.version=e,this.transformResults=t}},fo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function tE(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Nd=class{};function oB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bp(n.key,fo.none()):new pu(n.key,n.data,fo.none());{let t=n.data,r=Fr.empty(),i=new Mn(Vr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Es(n.key,r,new ri(i.toArray()),fo.none())}}function eX(n,e,t){n instanceof pu?(function(i,s,o){let a=i.value.clone(),c=GU(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Es?(function(i,s,o){if(!tE(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=GU(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(aB(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Op(n,e,t,r){return n instanceof pu?(function(s,o,a,c){if(!tE(s.precondition,o))return a;let d=s.value.clone(),h=WU(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Es?(function(s,o,a,c){if(!tE(s.precondition,o))return a;let d=WU(s.fieldTransforms,c,o),h=o.data;return h.setAll(aB(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return tE(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function tX(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=nB(r.transform,i||null);s!=null&&(t===null&&(t=Fr.empty()),t.set(r.field,s))}return t||null}function zU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wd(r,i,(s,o)=>XZ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var pu=class extends Nd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Es=class extends Nd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function aB(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function GU(n,e,t){let r=new Map;Tt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ZZ(o,a,t[i]))}return r}function WU(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,JZ(s,o,e))}return r}var Bp=class extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},q0=class extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var z0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&eX(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Op(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Op(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=eB();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=oB(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ze())}isEqual(e){return this.batchId===e.batchId&&wd(this.mutations,e.mutations,(t,r)=>zU(t,r))&&wd(this.baseMutations,e.baseMutations,(t,r)=>zU(t,r))}},G0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return GZ})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var W0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var K0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var hn,rt;function nX(n){switch(n){case q.OK:return Ee(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function cB(n){if(n===void 0)return po("GRPC error has no .code"),q.UNKNOWN;switch(n){case hn.OK:return q.OK;case hn.CANCELLED:return q.CANCELLED;case hn.UNKNOWN:return q.UNKNOWN;case hn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case hn.INTERNAL:return q.INTERNAL;case hn.UNAVAILABLE:return q.UNAVAILABLE;case hn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case hn.NOT_FOUND:return q.NOT_FOUND;case hn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case hn.ABORTED:return q.ABORTED;case hn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case hn.DATA_LOSS:return q.DATA_LOSS;default:return Ee(39323,{code:n})}}(rt=hn||(hn={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";var KU=null;var rX=new lo([4294967295,4294967295],0);function QU(n){let e=_j().encode(n),t=new u0;return t.update(e),new Uint8Array(t.digest())}function YU(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new lo([t,r],0),new lo([i,s],0)]}var Q0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ou(`Invalid padding: ${t}`);if(r<0)throw new ou(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ou(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=lo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(lo.fromNumber(r)));return i.compare(rX)===1&&(i=new lo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=QU(e),[r,i]=YU(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=QU(e),[r,i]=YU(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ou=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var lE=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$p.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ve.min(),i,new Gt(ze),vo(),Ze())}},$p=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ze(),Ze(),Ze())}};var vd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},dE=class{constructor(e,t){this.targetId=e,this.De=t}},hE=class{constructor(e,t,r=rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},fE=class{constructor(){this.ve=0,this.Ce=JU(),this.Fe=rr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ze(),t=Ze(),r=Ze();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ee(38017,{changeType:s})}}),new $p(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=JU()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Y0=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=vo(),this.je=Jv(),this.Je=Jv(),this.He=new Gt(ze)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(j0(s))if(r===0){let o=new _e(s.path);this.Xe(t,o,Li.newNoDocument(o,Ve.min()))}else Tt(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}KU?.ct((function(h,p,E,C,R){var N,P,H,$,B,oe;let fe={localCacheCount:h,existenceFilterCount:p.count,databaseId:E.database,projectId:E.projectId},ne=p.unchangedNames;return ne&&(fe.bloomFilter={applied:R===0,hashCount:(N=ne?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(H=(P=ne?.bits)===null||P===void 0?void 0:P.bitmap)===null||H===void 0?void 0:H.length)!==null&&$!==void 0?$:0,padding:(oe=(B=ne?.bits)===null||B===void 0?void 0:B.padding)!==null&&oe!==void 0?oe:0,mightContain:b=>{var m;return(m=C?.mightContain(b))!==null&&m!==void 0&&m}}),fe})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=yo(r).toUint8Array()}catch(c){if(c instanceof oE)return Ra("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Q0(o,i,s)}catch(c){return Ra(c instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&j0(a.target)){let c=new _e(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Li.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Ze();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new lE(e,t,this.He,this.ze,r);return this.ze=vo(),this.je=Jv(),this.Je=Jv(),this.He=new Gt(ze),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new fE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Mn(ze),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Mn(ze),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new fE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Jv(){return new Gt(_e.comparator)}function JU(){return new Gt(_e.comparator)}var iX={asc:"ASCENDING",desc:"DESCENDING"},sX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oX={and:"AND",or:"OR"},J0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Z0(n,e){return n.useProto3Json||VE(e)?e:{value:e}}function pE(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aX(n,e){return pE(n,e.toTimestamp())}function _s(n){return Tt(!!n,49232),Ve.fromTimestamp((function(t){let r=mo(t);return new mn(r.seconds,r.nanos)})(n))}function fP(n,e){return X0(n,e).canonicalString()}function X0(n,e){let t=(function(i){return new Ut(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lB(n){let e=Ut.fromString(n);return Tt(gB(e),10190,{key:e.toString()}),e}function eR(n,e){return fP(n.databaseId,e.path)}function g0(n,e){let t=lB(e);if(t.get(1)!==n.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(hB(t))}function dB(n,e){return fP(n.databaseId,e)}function cX(n){let e=lB(n);return e.length===4?Ut.emptyPath():hB(e)}function tR(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hB(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZU(n,e,t){return{name:eR(n,e),fields:t.value.mapValue.fields}}function uX(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ee(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(Tt(h===void 0||typeof h=="string",58123),rr.fromBase64String(h||"")):(Tt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),rr.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?q.UNKNOWN:cB(d.code);return new se(h,d.message||"")})(o);t=new hE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=g0(n,r.document.name),s=_s(r.document.updateTime),o=r.document.createTime?_s(r.document.createTime):Ve.min(),a=new Fr({mapValue:{fields:r.document.fields}}),c=Li.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new vd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=g0(n,r.document),s=r.readTime?_s(r.readTime):Ve.min(),o=Li.newNoDocument(i,s),a=r.removedTargetIds||[];t=new vd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=g0(n,r.document),s=r.removedTargetIds||[];t=new vd([],s,i,null)}else{if(!("filter"in e))return Ee(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new K0(i,s),a=r.targetId;t=new dE(a,o)}}return t}function lX(n,e){let t;if(e instanceof pu)t={update:ZU(n,e.key,e.value)};else if(e instanceof Bp)t={delete:eR(n,e.key)};else if(e instanceof Es)t={update:ZU(n,e.key,e.data),updateMask:vX(e.fieldMask)};else{if(!(e instanceof q0))return Ee(16599,{Rt:e.type});t={verify:eR(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Ee(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:aX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee(27497)})(n,e.precondition)),t}function dX(n,e){return n&&n.length>0?(Tt(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?_s(i.updateTime):_s(s);return o.isEqual(Ve.min())&&(o=_s(s)),new H0(o,i.transformResults||[])})(t,e))):[]}function hX(n,e){return{documents:[dB(n,e.path)]}}function fX(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dB(n,i);let s=(function(d){if(d.length!==0)return pB(Fi.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(E){return{field:md(E.field),direction:mX(E.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Z0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function pX(n){let e=cX(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Tt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let E=fB(p);return E instanceof Fi&&zj(E)?E.getFilters():[E]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(E=>(function(R){return new Sd(yd(R.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let E;return E=typeof p=="object"?p.value:p,VE(E)?null:E})(t.limit));let c=null;t.startAt&&(c=(function(p){let E=!!p.before,C=p.values||[];return new Dd(C,E)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let E=!p.before,C=p.values||[];return new Dd(C,E)})(t.endAt)),BZ(e,i,o,s,a,"F",c,d)}function gX(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fB(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=yd(t.unaryFilter.field);return pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=yd(t.unaryFilter.field);return pn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=yd(t.unaryFilter.field);return pn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=yd(t.unaryFilter.field);return pn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return pn.create(yd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fi.create(t.compositeFilter.filters.map(r=>fB(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function mX(n){return iX[n]}function yX(n){return sX[n]}function _X(n){return oX[n]}function md(n){return{fieldPath:n.canonicalString()}}function yd(n){return Vr.fromServerFormat(n.fieldPath)}function pB(n){return n instanceof pn?(function(t){if(t.op==="=="){if(UU(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NAN"}};if(VU(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(UU(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NOT_NAN"}};if(VU(t.value))return{unaryFilter:{field:md(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:md(t.field),op:yX(t.op),value:t.value}}})(n):n instanceof Fi?(function(t){let r=t.getFilters().map(i=>pB(i));return r.length===1?r[0]:{compositeFilter:{op:_X(t.op),filters:r}}})(n):Ee(54877,{filter:n})}function vX(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hp=class n{constructor(e,t,r,i,s=Ve.min(),o=Ve.min(),a=rr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nR=class{constructor(e){this.gt=e}};function EX(n){let e=pX({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$0(e,e.limit,"L"):e}var gE=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Vt(e.integerValue));else if("doubleValue"in e){let r=Vt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Vp(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=mo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(yo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?$j(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Bj(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Ee(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Td,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Vt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),_e.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};gE.Ut=new gE;var rR=class{constructor(){this.Dn=new iR}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(lu.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(lu.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},iR=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(Ut.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(Ut.comparator)).toArray()}};var BTe=new Uint8Array(0);var XU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mB=41943040,ni=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};ni.DEFAULT_COLLECTION_PERCENTILE=10,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ni.DEFAULT=new ni(mB,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ni.DISABLED=new ni(-1,0,0);var qp=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var ej="LruGarbageCollector",IX=1048576;function tj([n,e],[t,r]){let i=ze(n,t);return i===0?ze(e,r):i}var sR=class{constructor(e){this.Tr=e,this.buffer=new Mn(tj),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();tj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},oR=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(ej,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vd(t)?ue(ej,"Ignoring IndexedDB error during garbage collection: ",t):await Fd(t)}await this.Rr(3e5)})}},aR=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(rP.ue);let r=new sR(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(XU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XU):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),pd()<=Ye.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function wX(n,e){return new aR(n,e)}var cR=class{constructor(){this.changes=new _o(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Li.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var uR=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var lR=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Op(r.mutation,i,ri.empty(),mn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ze()){let i=su();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Np();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=su();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ze()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=vo(),o=xp(),a=(function(){return xp()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Es)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Op(h.mutation,d,h.mutation.getFieldMask(),mn.now())):o.set(d.key,ri.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var p;return a.set(d,new uR(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=xp(),i=new Gt((o,a)=>o-a),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||ri.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||Ze()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=eB();h.forEach(E=>{if(!s.has(E)){let C=oB(t.get(E),r.get(E));C!==null&&p.set(E,C),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(su()),a=Fp,c=s;return o.next(d=>G.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Ze())).next(h=>({batchId:a,changes:Xj(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let i=Np();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Np();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let d=(function(p,E){return new du(E,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,E)=>{o=o.insert(p,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,Li.newInvalidDocument(h)))});let a=Np();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Op(h.mutation,d,ri.empty(),mn.now()),BE(t,d)&&(a=a.insert(c,d))}),a})}};var dR=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:_s(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:EX(i.bundledQuery),readTime:_s(i.readTime)}})(t)),G.resolve()}};var hR=class{constructor(){this.overlays=new Gt(_e.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=su();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=su(),s=t.length+1,o=new _e(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Gt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=su(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=su(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return G.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new W0(t,r));let s=this.kr.get(t);s===void 0&&(s=Ze(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var fR=class{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var zp=class{constructor(){this.qr=new Mn(fn.Qr),this.$r=new Mn(fn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new fn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new fn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new _e(new Ut([])),r=new fn(t,e),i=new fn(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new _e(new Ut([])),r=new fn(t,e),i=new fn(t,e+1),s=Ze();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new fn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},fn=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||ze(e.Hr,t.Hr)}static Ur(e,t){return ze(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}};var pR=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Mn(fn.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new z0(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new fn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?iP:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new fn(t,0),i=new fn(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(ze);return t.forEach(i=>{let s=new fn(i,0),o=new fn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),G.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;_e.isDocumentKey(s)||(s=s.child(""));let o=new fn(new _e(s),0),a=new Mn(ze);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),G.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Tt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return G.forEach(t.mutations,i=>{let s=new fn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new fn(t,0),i=this.Yr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var gR=class{constructor(e){this.ni=e,this.docs=(function(){return new Gt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Li.newInvalidDocument(t))}getEntries(e,t){let r=vo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Li.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=vo(),o=t.path,a=new _e(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||wZ(IZ(h),r)<=0||(i.has(h.key)||BE(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ee(9500)}ri(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mR(this)}getSize(e){return G.resolve(this.size)}},mR=class extends cR{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var yR=class{constructor(e){this.persistence=e,this.ii=new _o(t=>uP(t),lP),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.si=0,this.oi=new zp,this.targetCount=0,this._i=qp.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}};var mE=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new rP(0),this.ci=!1,this.ci=!0,this.li=new fR,this.referenceDelegate=e(this),this.hi=new yR(this),this.indexManager=new rR,this.remoteDocumentCache=(function(i){return new gR(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new nR(t),this.Ti=new dR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new pR(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);let i=new _R(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return G.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},_R=class extends S0{constructor(e){super(),this.currentSequenceNumber=e}},vR=class n{constructor(e){this.persistence=e,this.Ai=new zp,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Ee(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,r=>{let i=_e.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Ve.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},yE=class n{constructor(e,t){this.persistence=e,this.gi=new _o(r=>DZ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wX(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return G.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Ve.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xv(e.data.value)),t}Sr(e,t,r){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var ER=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ze(),i=Ze();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var IR=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wR=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return eL()?8:bZ(Pn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new IR;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(pd()<=Ye.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",gd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(pd()<=Ye.DEBUG&&ue("QueryEngine","Query:",gd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(pd()<=Ye.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",gd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):G.resolve())}ps(e,t){if(HU(t))return G.resolve(null);let r=ys(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=$0(t,null,"F"),r=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ze(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,$0(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return HU(t)||i.isEqual(Ve.min())?G.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?G.resolve(null):(pd()<=Ye.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gd(t)),this.vs(e,o,t,EZ(i,Fp)).next(a=>a))})}bs(e,t){let r=new Mn(Jj(e));return t.forEach((i,s)=>{BE(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return pd()<=Ye.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",gd(t)),this.gs.getDocumentsMatchingQuery(e,t,lu.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var pP="LocalStore",TX=3e8,TR=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Gt(ze),this.Ms=new _o(s=>uP(s),lP),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function bX(n,e,t,r){return new TR(n,e,t,r)}async function yB(n,e){let t=Le(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ze();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})}function CX(n,e){let t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let p=d.batch,E=p.keys(),C=G.resolve();return E.forEach(R=>{C=C.next(()=>h.getEntry(c,R)).next(N=>{let P=d.docVersions.get(R);Tt(P!==null,48541),N.version.compareTo(P)<0&&(p.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),h.addEntry(N)))})}),C.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ze();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function _B(n){let e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function DX(n,e){let t=Le(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let E=i.get(p);if(!E)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let C=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(rr.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,r)),i=i.insert(p,C),(function(N,P,H){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=TX?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(E,C,h)&&a.push(t.hi.updateTargetData(s,C))});let c=vo(),d=Ze();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(SX(s,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!r.isEqual(Ve.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Fs=i,s))}function SX(n,e,t){let r=Ze(),i=Ze();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=vo();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ue(pP,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function AX(n,e){let t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iP),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RX(n,e){let t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Hp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function bR(n,e,t){let r=Le(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Vd(o))throw o;ue(pP,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function nj(n,e,t){let r=Le(n),i=Ve.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=Le(c),E=p.Ms.get(h);return E!==void 0?G.resolve(p.Fs.get(E)):p.hi.getTargetData(d,h)})(r,o,ys(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Ve.min(),t?s:Ze())).next(a=>(PX(r,HZ(e),a),{documents:a,qs:s})))}function PX(n,e,t){let r=n.xs.get(e)||Ve.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var _E=class{constructor(){this.activeTargetIds=QZ()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var CR=class{constructor(){this.Fo=new _E,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _E,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var DR=class{xo(e){}shutdown(){}};var rj="ConnectivityMonitor",vE=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(rj,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ue(rj,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Zv=null;function SR(){return Zv===null?Zv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zv++,"0x"+Zv.toString(16)}var m0="RestConnection",NX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},AR=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===aE?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=SR(),a=this.Go(e,t.toUriEncodedString());ue(m0,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=ua(d);return this.jo(e,a,c,r,h).then(p=>(ue(m0,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ra(m0,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ld})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=NX[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var RR=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var nr="WebChannelConnection",PR=class extends AR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=SR();return new Promise((a,c)=>{let d=new l0;d.setWithCredentials(!0),d.listenOnce(d0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pp.NO_ERROR:let p=d.getResponseJson();ue(nr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Pp.TIMEOUT:ue(nr,`RPC '${e}' ${o} timed out`),c(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case Pp.HTTP_ERROR:let E=d.getStatus();if(ue(nr,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let R=C?.error;if(R&&R.status&&R.message){let N=(function(H){let $=H.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf($)>=0?$:q.UNKNOWN})(R.status);c(new se(N,R.message))}else c(new se(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new se(q.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ue(nr,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ue(nr,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=SR(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p0(),a=f0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ue(nr,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.T_(p);let E=!1,C=!1,R=new RR({Ho:P=>{C?ue(nr,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(E||(ue(nr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),E=!0),ue(nr,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Yo:()=>p.close()}),N=(P,H,$)=>{P.listen(H,B=>{try{$(B)}catch(oe){setTimeout(()=>{throw oe},0)}})};return N(p,fd.EventType.OPEN,()=>{C||(ue(nr,`RPC '${e}' stream ${i} transport opened.`),R.s_())}),N(p,fd.EventType.CLOSE,()=>{C||(C=!0,ue(nr,`RPC '${e}' stream ${i} transport closed`),R.__(),this.I_(p))}),N(p,fd.EventType.ERROR,P=>{C||(C=!0,Ra(nr,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),R.__(new se(q.UNAVAILABLE,"The operation could not be completed")))}),N(p,fd.EventType.MESSAGE,P=>{var H;if(!C){let $=P.data[0];Tt(!!$,16349);let B=$,oe=B?.error||((H=B[0])===null||H===void 0?void 0:H.error);if(oe){ue(nr,`RPC '${e}' stream ${i} received error:`,oe);let fe=oe.status,ne=(function(I){let T=hn[I];if(T!==void 0)return cB(T)})(fe),b=oe.message;ne===void 0&&(ne=q.INTERNAL,b="Unknown error status: "+fe+" with message "+oe.message),C=!0,R.__(new se(ne,b)),p.close()}else ue(nr,`RPC '${e}' stream ${i} received:`,$),R.a_($)}}),N(a,h0.STAT_EVENT,P=>{P.stat===Qv.PROXY?ue(nr,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Qv.NOPROXY&&ue(nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function y0(){return typeof document<"u"?document:null}function $E(n){return new J0(n,!0)}var EE=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ij="PersistentStream",IE=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new EE(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(po(t.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new se(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ue(ij,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ue(ij,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},NR=class extends IE{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=uX(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ve.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?_s(o.readTime):Ve.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=tR(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=j0(c)?{documents:hX(s,c)}:{query:fX(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uB(s,o.resumeToken);let d=Z0(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ve.min())>0){a.readTime=pE(s,o.snapshotVersion.toTimestamp());let d=Z0(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=gX(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=tR(this.serializer),t.removeTarget=e,this.k_(t)}},kR=class extends IE{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=dX(e.writeResults,e.commitTime),r=_s(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=tR(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>lX(this.serializer,r))};this.k_(t)}};var MR=class{},xR=class extends MR{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,X0(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(q.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,X0(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},OR=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(po(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var gu="RemoteStore",LR=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{mu(this)&&(ue(gu,"Restarting streams for network reachability change."),await(async function(c){let d=Le(c);d.Ia.add(4),await Qp(d),d.Aa.set("Unknown"),d.Ia.delete(4),await HE(d)})(this))})}),this.Aa=new OR(r,i)}};async function HE(n){if(mu(n))for(let e of n.da)await e(!0)}async function Qp(n){for(let e of n.da)await e(!1)}function vB(n,e){let t=Le(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),_P(t)?yP(t):Ud(t).x_()&&mP(t,e))}function gP(n,e){let t=Le(n),r=Ud(t);t.Ta.delete(e),r.x_()&&EB(t,e),t.Ta.size===0&&(r.x_()?r.B_():mu(t)&&t.Aa.set("Unknown"))}function mP(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ud(n).H_(e)}function EB(n,e){n.Ra.$e(e),Ud(n).Y_(e)}function yP(n){n.Ra=new Y0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ud(n).start(),n.Aa.aa()}function _P(n){return mu(n)&&!Ud(n).M_()&&n.Ta.size>0}function mu(n){return Le(n).Ia.size===0}function IB(n){n.Ra=void 0}async function kX(n){n.Aa.set("Online")}async function MX(n){n.Ta.forEach((e,t)=>{mP(n,e)})}async function xX(n,e){IB(n),_P(n)?(n.Aa.la(e),yP(n)):n.Aa.set("Unknown")}async function OX(n,e,t){if(n.Aa.set("Online"),e instanceof hE&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){ue(gu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wE(n,r)}else if(e instanceof vd?n.Ra.Ye(e):e instanceof dE?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ve.min()))try{let r=await _B(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(d);h&&s.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(rr.EMPTY_BYTE_STRING,h.snapshotVersion)),EB(s,c);let p=new Hp(h.target,c,d,h.sequenceNumber);mP(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ue(gu,"Failed to raise snapshot:",r),await wE(n,r)}}async function wE(n,e,t){if(!Vd(e))throw e;n.Ia.add(1),await Qp(n),n.Aa.set("Offline"),t||(t=()=>_B(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(gu,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await HE(n)})}function wB(n,e){return e().catch(t=>wE(n,t,e))}async function qE(n){let e=Le(n),t=Na(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:iP;for(;LX(e);)try{let i=await AX(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,FX(e,i)}catch(i){await wE(e,i)}TB(e)&&bB(e)}function LX(n){return mu(n)&&n.Pa.length<10}function FX(n,e){n.Pa.push(e);let t=Na(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function TB(n){return mu(n)&&!Na(n).M_()&&n.Pa.length>0}function bB(n){Na(n).start()}async function VX(n){Na(n).na()}async function UX(n){let e=Na(n);for(let t of n.Pa)e.X_(t.mutations)}async function jX(n,e,t){let r=n.Pa.shift(),i=G0.from(r,e,t);await wB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await qE(n)}async function BX(n,e){e&&Na(n).Z_&&await(async function(r,i){if((function(o){return nX(o)&&o!==q.ABORTED})(i.code)){let s=r.Pa.shift();Na(r).N_(),await wB(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await qE(r)}})(n,e),TB(n)&&bB(n)}async function sj(n,e){let t=Le(n);t.asyncQueue.verifyOperationInProgress(),ue(gu,"RemoteStore received new credentials");let r=mu(t);t.Ia.add(3),await Qp(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await HE(t)}async function $X(n,e){let t=Le(n);e?(t.Ia.delete(2),await HE(t)):e||(t.Ia.add(2),await Qp(t),t.Aa.set("Unknown"))}function Ud(n){return n.Va||(n.Va=(function(t,r,i){let s=Le(t);return s.ia(),new NR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:kX.bind(null,n),e_:MX.bind(null,n),n_:xX.bind(null,n),J_:OX.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),_P(n)?yP(n):n.Aa.set("Unknown")):(await n.Va.stop(),IB(n))})),n.Va}function Na(n){return n.ma||(n.ma=(function(t,r,i){let s=Le(t);return s.ia(),new kR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:VX.bind(null,n),n_:BX.bind(null,n),ea:UX.bind(null,n),ta:jX.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await qE(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(gu,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var FR=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vP(n,e){if(po("AsyncQueue",`${e}: ${n}`),Vd(n))return new se(q.UNAVAILABLE,`${e}: ${n}`);throw n}var TE=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Np(),this.sortedSet=new Gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var bE=class{constructor(){this.fa=new Gt(_e.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},kd=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,TE.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var VR=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},UR=class{constructor(){this.queries=oj(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Le(t),s=i.queries;i.queries=oj(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new se(q.ABORTED,"Firestore shutting down"))}};function oj(){return new _o(n=>Yj(n),jE)}async function CB(n,e){let t=Le(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new VR,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=vP(o,`Initialization of query '${gd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&EP(t)}async function DB(n,e){let t=Le(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function HX(n,e){let t=Le(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&EP(t)}function qX(n,e,t){let r=Le(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function EP(n){n.Da.forEach(e=>{e.next()})}var jR,aj;(aj=jR||(jR={})).Fa="default",aj.Cache="cache";var CE=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new kd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==jR.Cache}};var DE=class{constructor(e){this.key=e}},SE=class{constructor(e){this.key=e}},BR=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ze(),this.mutatedKeys=Ze(),this.Xa=Jj(e),this.eu=new TE(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new bE,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let E=i.get(h),C=BE(this.query,p)?p:null,R=!!E&&this.mutatedKeys.has(E.key),N=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),P=!1;E&&C?E.data.isEqual(C.data)?R!==N&&(r.track({type:3,doc:C}),P=!0):this.iu(E,C)||(r.track({type:2,doc:C}),P=!0,(c&&this.Xa(C,c)>0||d&&this.Xa(C,d)<0)&&(a=!0)):!E&&C?(r.track({type:0,doc:C}),P=!0):E&&!C&&(r.track({type:1,doc:E}),P=!0,(c||d)&&(a=!0)),P&&(C?(o=o.add(C),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(C,R){let N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{At:P})}};return N(C)-N(R)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new kd(this.query,e.eu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new bE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ze(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new SE(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new DE(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ze();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return kd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},IP="SyncEngine",$R=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},HR=class{constructor(e){this.key=e,this.lu=!1}},qR=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new _o(a=>Yj(a),jE),this.Tu=new Map,this.Iu=new Set,this.du=new Gt(_e.comparator),this.Eu=new Map,this.Au=new zp,this.Ru={},this.Vu=new Map,this.mu=qp.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function zX(n,e,t=!0){let r=kB(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await SB(r,e,t,!0),i}async function GX(n,e){let t=kB(n);await SB(t,e,!0,!1)}async function SB(n,e,t,r){let i=await RX(n.localStore,ys(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await WX(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&vB(n.remoteStore,i),a}async function WX(n,e,t,r,i){n.gu=(p,E,C)=>(async function(N,P,H,$){let B=P.view.nu(H);B.Ds&&(B=await nj(N.localStore,P.query,!1).then(({documents:b})=>P.view.nu(b,B)));let oe=$&&$.targetChanges.get(P.targetId),fe=$&&$.targetMismatches.get(P.targetId)!=null,ne=P.view.applyChanges(B,N.isPrimaryClient,oe,fe);return uj(N,P.targetId,ne._u),ne.snapshot})(n,p,E,C);let s=await nj(n.localStore,e,!0),o=new BR(e,s.qs),a=o.nu(s.documents),c=$p.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);uj(n,t,d._u);let h=new $R(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function KX(n,e,t){let r=Le(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!jE(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&gP(r.remoteStore,i.targetId),zR(r,i.targetId)}).catch(Fd)):(zR(r,i.targetId),await bR(r.localStore,i.targetId,!0))}async function QX(n,e){let t=Le(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gP(t.remoteStore,r.targetId))}async function YX(n,e,t){let r=ree(n);try{let i=await(function(o,a){let c=Le(o),d=mn.now(),h=a.reduce((C,R)=>C.add(R.key),Ze()),p,E;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=vo(),N=Ze();return c.Os.getEntries(C,h).next(P=>{R=P,R.forEach((H,$)=>{$.isValidDocument()||(N=N.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,R)).next(P=>{p=P;let H=[];for(let $ of a){let B=tX($,p.get($.key).overlayedDocument);B!=null&&H.push(new Es($.key,B,Hj(B.value.mapValue),fo.exists(!0)))}return c.mutationQueue.addMutationBatch(C,d,H,a)}).next(P=>{E=P;let H=P.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(C,P.batchId,H)})}).then(()=>({batchId:E.batchId,changes:Xj(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new Gt(ze)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),await Yp(r,i.changes),await qE(r.remoteStore)}catch(i){let s=vP(i,"Failed to persist write");t.reject(s)}}async function AB(n,e){let t=Le(n);try{let r=await DX(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Tt(o.lu,14607):i.removedDocuments.size>0&&(Tt(o.lu,42227),o.lu=!1))}),await Yp(t,r,e)}catch(r){await Fd(r)}}function cj(n,e,t){let r=Le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Le(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let E of p.wa)E.va(a)&&(d=!0)}),d&&EP(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JX(n,e,t){let r=Le(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Gt(_e.comparator);o=o.insert(s,Li.newNoDocument(s,Ve.min()));let a=Ze().add(s),c=new lE(Ve.min(),new Map,new Gt(ze),o,a);await AB(r,c),r.du=r.du.remove(s),r.Eu.delete(e),wP(r)}else await bR(r.localStore,e,!1).then(()=>zR(r,e,t)).catch(Fd)}async function ZX(n,e){let t=Le(n),r=e.batch.batchId;try{let i=await CX(t.localStore,e);PB(t,r,null),RB(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Yp(t,i)}catch(i){await Fd(i)}}async function XX(n,e,t){let r=Le(n);try{let i=await(function(o,a){let c=Le(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(Tt(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);PB(r,e,t),RB(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Yp(r,i)}catch(i){await Fd(i)}}function RB(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function PB(n,e,t){let r=Le(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function zR(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||NB(n,r)})}function NB(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(gP(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),wP(n))}function uj(n,e,t){for(let r of t)r instanceof DE?(n.Au.addReference(r.key,e),eee(n,r)):r instanceof SE?(ue(IP,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||NB(n,r.key)):Ee(19791,{yu:r})}function eee(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ue(IP,"New document in limbo: "+t),n.Iu.add(r),wP(n))}function wP(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new _e(Ut.fromString(e)),r=n.mu.next();n.Eu.set(r,new HR(t)),n.du=n.du.insert(t,r),vB(n.remoteStore,new Hp(ys(dP(t.path)),r,"TargetPurposeLimboResolution",rP.ue))}}async function Yp(n,e,t){let r=Le(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let p=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);let p=ER.Es(c.targetId,d);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,d){let h=Le(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(d,E=>G.forEach(E.Is,C=>h.persistence.referenceDelegate.addReference(p,E.targetId,C)).next(()=>G.forEach(E.ds,C=>h.persistence.referenceDelegate.removeReference(p,E.targetId,C)))))}catch(p){if(!Vd(p))throw p;ue(pP,"Failed to update sequence numbers: "+p)}for(let p of d){let E=p.targetId;if(!p.fromCache){let C=h.Fs.get(E),R=C.snapshotVersion,N=C.withLastLimboFreeSnapshotVersion(R);h.Fs=h.Fs.insert(E,N)}}})(r.localStore,s))}async function tee(n,e){let t=Le(n);if(!t.currentUser.isEqual(e)){ue(IP,"User change. New user:",e.toKey());let r=await yB(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new se(q.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yp(t,r.Bs)}}function nee(n,e){let t=Le(n),r=t.Eu.get(e);if(r&&r.lu)return Ze().add(r.key);{let i=Ze(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function kB(n){let e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JX.bind(null,e),e.hu.J_=HX.bind(null,e.eventManager),e.hu.pu=qX.bind(null,e.eventManager),e}function ree(n){let e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XX.bind(null,e),e}var MB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$E(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return bX(this.persistence,new wR,t.initialUser,this.serializer)}Du(t){return new mE(vR.Vi,this.serializer)}bu(t){return new CR}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),GR=class extends MB{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Tt(this.persistence.referenceDelegate instanceof yE,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new oR(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new mE(r=>yE.Vi(r,t),this.serializer)}};var iee=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cj(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tee.bind(null,this.syncEngine),await $X(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new UR})()}createDatastore(t){let r=$E(t.databaseInfo.databaseId),i=(function(o){return new PR(o)})(t.databaseInfo);return(function(o,a,c,d){return new xR(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new LR(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>cj(this.syncEngine,r,0),(function(){return vE.C()?new vE:new DR})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let E=new qR(s,o,a,c,d,h);return p&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=Le(s);ue(gu,"RemoteStore shutting down."),o.Ia.add(5),await Qp(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var AE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ka="FirestoreClient",WR=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kn.UNAUTHENTICATED,this.clientId=Lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ue(ka,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue(ka,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=vP(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function _0(n,e){n.asyncQueue.verifyOperationInProgress(),ue(ka,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yB(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ra("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ra("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function lj(n,e){n.asyncQueue.verifyOperationInProgress();let t=await see(n);ue(ka,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>sj(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>sj(e.remoteStore,i)),n._onlineComponents=e}async function see(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(ka,"Using user provided OfflineComponentProvider");try{await _0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ra("Error using user provided cache. Falling back to memory cache: "+t),await _0(n,new MB)}}else ue(ka,"Using default OfflineComponentProvider"),await _0(n,new GR(void 0));return n._offlineComponents}async function xB(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(ka,"Using user provided OnlineComponentProvider"),await lj(n,n._uninitializedComponentsProvider._online)):(ue(ka,"Using default OnlineComponentProvider"),await lj(n,new iee))),n._onlineComponents}function oee(n){return xB(n).then(e=>e.syncEngine)}async function OB(n){let e=await xB(n),t=e.eventManager;return t.onListen=zX.bind(null,e.syncEngine),t.onUnlisten=KX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QX.bind(null,e.syncEngine),t}function aee(n,e,t={}){let r=new Oi;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new AE({next:E=>{h.Ou(),o.enqueueAndForget(()=>DB(s,p));let C=E.docs.has(a);!C&&E.fromCache?d.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&c&&c.source==="server"?d.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(E)},error:E=>d.reject(E)}),p=new CE(dP(a.path),h,{includeMetadataChanges:!0,ka:!0});return CB(s,p)})(await OB(n),n.asyncQueue,e,t,r)),r.promise}function cee(n,e,t={}){let r=new Oi;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new AE({next:E=>{h.Ou(),o.enqueueAndForget(()=>DB(s,p)),E.fromCache&&c.source==="server"?d.reject(new se(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(E)},error:E=>d.reject(E)}),p=new CE(a,h,{includeMetadataChanges:!0,ka:!0});return CB(s,p)})(await OB(n),n.asyncQueue,e,t,r)),r.promise}function LB(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var dj=new Map;var FB="firestore.googleapis.com",hj=!0,RE=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FB,this.ssl=hj}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hj;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IX)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LB((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Md=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new v0;switch(r.type){case"firstParty":return new T0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=dj.get(t);r&&(ue("ComponentProvider","Removing Datastore"),dj.delete(t),r.terminate())})(this),Promise.resolve()}};function VB(n,e,t,r={}){var i;n=go(n,Md);let s=ua(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(E_(`https://${c}`),I_("Firestore",!0)),o.host!==FB&&o.host!==c&&Ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!os(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=kn.MOCK_USER;else{h=K1(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new kn(E)}n._authCredentials=new E0(new nE(h,p))}}var xd=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Hn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Kp(t,n._jsonSchema))return new n(e,r||null,new _e(Ut.fromString(t.referencePath)))}};Hn._jsonSchemaVersion="firestore/documentReference/1.0",Hn._jsonSchema={type:gn("string",Hn._jsonSchemaVersion),referencePath:gn("string")};var Ca=class n extends xd{constructor(e,t,r){super(e,t,dP(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new _e(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function UB(n,e,...t){if(n=In(n),vj("collection","path",e),n instanceof Md){let r=Ut.fromString(e,...t);return PU(r),new Ca(n,null,r)}{if(!(n instanceof Hn||n instanceof Ca))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ut.fromString(e,...t));return PU(r),new Ca(n.firestore,null,r)}}function TP(n,e,...t){if(n=In(n),arguments.length===1&&(e=Lp.newId()),vj("doc","path",e),n instanceof Md){let r=Ut.fromString(e,...t);return RU(r),new Hn(n,null,new _e(r))}{if(!(n instanceof Hn||n instanceof Ca))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ut.fromString(e,...t));return RU(r),new Hn(n.firestore,n instanceof Ca?n.converter:null,new _e(r))}}var fj="AsyncQueue",PE=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new EE(this,"async_queue_retry"),this.oc=()=>{let r=y0();r&&ue(fj,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=y0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=y0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Oi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Vd(e))throw e;ue(fj,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,po("INTERNAL UNHANDLED ERROR: ",pj(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=FR.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Ee(47125,{hc:pj(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function pj(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Ma=class extends Md{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new PE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new PE(e),this._firestoreClient=void 0,await e}}};function jB(n,e){let t=typeof n=="object"?n:$c(),r=typeof n=="string"?n:e||aE,i=kl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=W1("firestore");s&&VB(i,...s)}return i}function bP(n){if(n._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||uee(n),n._firestoreClient}function uee(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new A0(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,LB(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new WR(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Da=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rr.fromBase64String(e))}catch(t){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Da._jsonSchemaVersion="firestore/bytes/1.0",Da._jsonSchema={type:gn("string",Da._jsonSchemaVersion),bytes:gn("string")};var Od=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gp=class{constructor(e){this._methodName=e}};var Sa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Kp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Sa._jsonSchemaVersion="firestore/geoPoint/1.0",Sa._jsonSchema={type:gn("string",Sa._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};var Aa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Aa._jsonSchemaVersion="firestore/vectorValue/1.0",Aa._jsonSchema={type:gn("string",Aa._jsonSchemaVersion),vectorValues:gn("object")};var lee=/^__.*__$/,KR=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,t,this.fieldTransforms):new pu(e,this.data,t,this.fieldTransforms)}},NE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Es(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function BB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ec:n})}}var QR=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ME(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(BB(this.Ec)&&lee.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},YR=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$E(e)}Dc(e,t,r,i=!1){return new QR({Ec:e,methodName:t,bc:r,path:Vr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function CP(n){let e=n._freezeSettings(),t=$E(n._databaseId);return new YR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dee(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);DP("Data must be an object, but it was:",o,r);let a=$B(r,o),c,d;if(s.merge)c=new ri(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let E=JR(e,p,t);if(!o.contains(E))throw new se(q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);qB(h,E)||h.push(E)}c=new ri(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new KR(new Fr(a),c,d)}var kE=class n extends Gp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function hee(n,e,t,r){let i=n.Dc(1,e,t);DP("Data must be an object, but it was:",i,r);let s=[],o=Fr.empty();xa(r,(c,d)=>{let h=SP(e,c,t);d=In(d);let p=i.gc(h);if(d instanceof kE)s.push(h);else{let E=Jp(d,p);E!=null&&(s.push(h),o.set(h,E))}});let a=new ri(s);return new NE(o,a,i.fieldTransforms)}function fee(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[JR(e,r,t)],c=[i];if(s.length%2!=0)throw new se(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<s.length;E+=2)a.push(JR(e,s[E])),c.push(s[E+1]);let d=[],h=Fr.empty();for(let E=a.length-1;E>=0;--E)if(!qB(d,a[E])){let C=a[E],R=c[E];R=In(R);let N=o.gc(C);if(R instanceof kE)d.push(C);else{let P=Jp(R,N);P!=null&&(d.push(C),h.set(C,P))}}let p=new ri(d);return new NE(h,p,o.fieldTransforms)}function pee(n,e,t,r=!1){return Jp(t,n.Dc(r?4:3,e))}function Jp(n,e){if(HB(n=In(n)))return DP("Unsupported field value:",e,n),$B(n,e);if(n instanceof Gp)return(function(r,i){if(!BB(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Jp(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=In(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=mn.fromDate(r);return{timestampValue:pE(i.serializer,s)}}if(r instanceof mn){let s=new mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pE(i.serializer,s)}}if(r instanceof Sa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Da)return{bytesValue:uB(i.serializer,r._byteString)};if(r instanceof Hn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fP(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Aa)return(function(o,a){return{mapValue:{fields:{[oP]:{stringValue:aP},[Td]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return hP(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${FE(r)}`)})(n,e)}function $B(n,e){let t={};return Oj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(n,(r,i)=>{let s=Jp(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function HB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mn||n instanceof Sa||n instanceof Da||n instanceof Hn||n instanceof Gp||n instanceof Aa)}function DP(n,e,t){if(!HB(t)||!Ej(t)){let r=FE(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function JR(n,e,t){if((e=In(e))instanceof Od)return e._internalPath;if(typeof e=="string")return SP(n,e);throw ME("Field path arguments must be of type string or ",n,!1,void 0,t)}var gee=new RegExp("[~\\*/\\[\\]]");function SP(n,e,t){if(e.search(gee)>=0)throw ME(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Od(...e.split("."))._internalPath}catch{throw ME(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ME(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new se(q.INVALID_ARGUMENT,a+n+c)}function qB(n,e){return n.some(t=>t.isEqual(e))}var xE=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ZR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(AP("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ZR=class extends xE{data(){return super.data()}};function AP(n,e){return typeof e=="string"?SP(n,e):e instanceof Od?e._internalPath:e._delegate._internalPath}function mee(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wp=class{},XR=class extends Wp{};function zB(n,e,...t){let r=[];e instanceof Wp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof eP).length,a=s.filter(c=>c instanceof OE).length;if(o>1||o>0&&a>0)throw new se(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var OE=class n extends XR{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return WB(e._query,t),new xd(e.firestore,e.converter,B0(e._query,t))}_parse(e){let t=CP(e.firestore);return(function(s,o,a,c,d,h,p){let E;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){mj(p,h);let R=[];for(let N of p)R.push(gj(c,s,N));E={arrayValue:{values:R}}}else E=gj(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||mj(p,h),E=pee(a,o,p,h==="in"||h==="not-in");return pn.create(d,h,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function GB(n,e,t){let r=e,i=AP("where",n);return OE._create(i,r,t)}var eP=class n extends Wp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)WB(o,c),o=B0(o,c)})(e._query,t),new xd(e.firestore,e.converter,B0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function gj(n,e,t){if(typeof(t=In(t))=="string"){if(t==="")throw new se(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qj(e)&&t.indexOf("/")!==-1)throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ut.fromString(t));if(!_e.isDocumentKey(r))throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return FU(n,new _e(r))}if(t instanceof Hn)return FU(n,t._key);throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${FE(t)}.`)}function mj(n,e){if(!Array.isArray(n)||n.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WB(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var tP=class{convertValue(e,t="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return xa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Td].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Vt(o.doubleValue));return new Aa(s)}convertGeoPoint(e){return new Sa(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=UE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Up(e));default:return null}}convertTimestamp(e){let t=mo(e);return new mn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ut.fromString(e);Tt(gB(r),9688,{name:e});let i=new cE(r.get(1),r.get(3)),s=new _e(r.popFirst(5));return i.isEqual(t)||po(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function yee(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var au=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cu=class n extends xE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(AP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};cu._jsonSchemaVersion="firestore/documentSnapshot/1.0",cu._jsonSchema={type:gn("string",cu._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};var Ed=class extends cu{data(e={}){return super.data(e)}},Id=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new au(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ed(this._firestore,this._userDataWriter,r.key,r,new au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ed(i._firestore,i._userDataWriter,a.doc.key,a.doc,new au(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ed(i._firestore,i._userDataWriter,a.doc.key,a.doc,new au(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_ee(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function _ee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}function KB(n){n=go(n,Hn);let e=go(n.firestore,Ma);return aee(bP(e),n._key).then(t=>vee(e,n,t))}Id._jsonSchemaVersion="firestore/querySnapshot/1.0",Id._jsonSchema={type:gn("string",Id._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};var LE=class extends tP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}};function QB(n){n=go(n,xd);let e=go(n.firestore,Ma),t=bP(e),r=new LE(e);return mee(n._query),cee(t,n._query).then(i=>new Id(e,r,n,i))}function YB(n,e,t,...r){n=go(n,Hn);let i=go(n.firestore,Ma),s=CP(i),o;return o=typeof(e=In(e))=="string"||e instanceof Od?fee(s,"updateDoc",n._key,e,t,r):hee(s,"updateDoc",n._key,e),RP(i,[o.toMutation(n._key,fo.exists(!0))])}function JB(n){return RP(go(n.firestore,Ma),[new Bp(n._key,fo.none())])}function ZB(n,e){let t=go(n.firestore,Ma),r=TP(n),i=yee(n.converter,e);return RP(t,[dee(CP(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,fo.exists(!1))]).then(()=>r)}function RP(n,e){return(function(r,i){let s=new Oi;return r.asyncQueue.enqueueAndForget(async()=>YX(await oee(r),i,s)),s.promise})(bP(n),e)}function vee(n,e,t){let r=t.docs.get(e._key),i=new LE(n);return new cu(n,i,e._key,r,new au(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ld=i})(da),Ri(new hr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ma(new I0(r.getProvider("auth-internal")),new b0(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cE(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zt(CU,DU,e),zt(CU,DU,"esm2017")})();var yu=class{constructor(e){return e}},XB="firestore",PP=class{constructor(){return xl(XB)}};var NP=new ae("angularfire2.firestore-instances");function Eee(n,e){let t=Bf(XB,n,e);return t&&new yu(t)}function Iee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new yu(r)}}var wee={provide:PP,deps:[[new Ar,NP]]},Tee={provide:yu,useFactory:Eee,deps:[[new Ar,NP],Xr]};function e$(n,...e){return zt("angularfire",ha.full,"fst"),cr([Tee,wee,{provide:NP,useFactory:Iee(n),multi:!0,deps:[et,Lt,fa,qc,[new Ar,ip],[new Ar,Ol],...e]}])}var kP=cn(wU,!0);var t$=cn(ZB,!0,2);var n$=cn(UB,!0,2);var r$=cn(JB,!0,2);var i$=cn(TP,!0,2);var s$=cn(KB,!0);var MP=cn(QB,!0);var o$=cn(jB,!0);var xP=cn(zB,!0,2);var a$=cn(YB,!0,2);var c$=cn(GB,!0,2);var jd=class n{_firestore=x(yu);_auth=x(Jc);get firestore(){return this._firestore}get auth(){return this._auth}getCollection(e){return n$(this._firestore,e)}getDocument(e,t){return i$(this._firestore,e,t)}async create(e,t){let r=this.getCollection(e);return(await t$(r,t)).id}async getById(e,t){let r=this.getDocument(e,t),i=await s$(r);return i.exists()?z({id:i.id},i.data()):null}async getAll(e){let t=this.getCollection(e);return(await MP(t)).docs.map(i=>z({id:i.id},i.data()))}async query(e,...t){let r=this.getCollection(e),i=t.length>0?xP(r,...t):r;return(await MP(i)).docs.map(o=>z({id:o.id},o.data()))}getCollectionData(e,t){let r=this.getCollection(e);return kP(r,{idField:t?.idField||"id"})}getQueryData(e,t,...r){let i=this.getCollection(e),s=r.length>0?xP(i,...r):i;return kP(s,{idField:t?.idField||"id"})}async update(e,t,r){let i=this.getDocument(e,t);await a$(i,r)}async delete(e,t){let r=this.getDocument(e,t);await r$(r)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var ii=class n{firestoreService=x(jd);user$=mV(this.firestoreService.auth);constructor(){}async login(){let e=new QD;try{await _V(this.firestoreService.auth,e)}catch(t){throw console.error("Login failed",t),t}}async logout(){try{await vV(this.firestoreService.auth)}catch(e){throw console.error("Logout failed",e),e}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var zE=class n{authService=x(ii);router=x(an);async login(){try{await this.authService.login(),this.router.navigate(["/dashboard"])}catch(e){console.error(e)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-login"]],decls:5,vars:0,consts:[[1,"login-container"],[3,"click"]],template:function(t,r){t&1&&(Zh(0,"div",0)(1,"h1"),ce(2,"Welcome to Imagix"),Xh(),Zh(3,"button",1),vy("click",function(){return r.login()}),ce(4,"Sign in with Google"),Xh()())},styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#121212;color:#fff}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;cursor:pointer}"]})};var m$=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(We(Bs),We(Rr))};static \u0275dir=lr({type:n})}return n})(),bee=(()=>{class n extends m${static \u0275fac=(()=>{let t;return function(i){return(t||(t=Cc(n)))(i||n)}})();static \u0275dir=lr({type:n,features:[Rc]})}return n})(),y$=new ae("");var Cee={provide:y$,useExisting:lc(()=>YE),multi:!0};function Dee(){let n=Qr()?Qr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var See=new ae(""),YE=(()=>{class n extends m${_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Dee())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(We(Bs),We(Rr),We(See,8))};static \u0275dir=lr({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&qe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[wy([Cee]),Rc]})}return n})();var Aee=new ae(""),Ree=new ae("");function _$(n){return n!=null}function v$(n){return Hs(n)?Mt(n):n}function E$(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function I$(n,e){return e.map(t=>t(n))}function Pee(n){return!n.validate}function w$(n){return n.map(e=>Pee(e)?e:t=>e.validate(t))}function Nee(n){if(!n)return null;let e=n.filter(_$);return e.length==0?null:function(t){return E$(I$(t,e))}}function T$(n){return n!=null?Nee(w$(n)):null}function kee(n){if(!n)return null;let e=n.filter(_$);return e.length==0?null:function(t){let r=I$(t,e).map(v$);return qI(r).pipe(Ge(E$))}}function b$(n){return n!=null?kee(w$(n)):null}function u$(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Mee(n){return n._rawValidators}function xee(n){return n._rawAsyncValidators}function OP(n){return n?Array.isArray(n)?n:[n]:[]}function WE(n,e){return Array.isArray(n)?n.includes(e):n===e}function l$(n,e){let t=OP(e);return OP(n).forEach(i=>{WE(t,i)||t.push(i)}),t}function d$(n,e){return OP(e).filter(t=>!WE(n,t))}var KE=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=T$(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=b$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},LP=class extends KE{name;get formDirective(){return null}get path(){return null}},ng=class extends KE{_parent=null;name=null;valueAccessor=null},FP=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var C$=(()=>{class n extends FP{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(We(ng,2))};static \u0275dir=lr({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&gl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Rc]})}return n})();var Zp="VALID",GE="INVALID",Bd="PENDING",Xp="DISABLED",_u=class{},QE=class extends _u{value;source;constructor(e,t){super(),this.value=e,this.source=t}},eg=class extends _u{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},tg=class extends _u{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},$d=class extends _u{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var VP=class extends _u{source;constructor(e){super(),this.source=e}};function Oee(n){return(JE(n)?n.validators:n)||null}function Lee(n){return Array.isArray(n)?T$(n):n||null}function Fee(n,e){return(JE(e)?e.asyncValidators:n)||null}function Vee(n){return Array.isArray(n)?b$(n):n||null}function JE(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var UP=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Zt(this.statusReactive)}set status(e){Zt(()=>this.statusReactive.set(e))}_status=af(()=>this.statusReactive());statusReactive=st(void 0);get valid(){return this.status===Zp}get invalid(){return this.status===GE}get pending(){return this.status==Bd}get disabled(){return this.status===Xp}get enabled(){return this.status!==Xp}errors;get pristine(){return Zt(this.pristineReactive)}set pristine(e){Zt(()=>this.pristineReactive.set(e))}_pristine=af(()=>this.pristineReactive());pristineReactive=st(!0);get dirty(){return!this.pristine}get touched(){return Zt(this.touchedReactive)}set touched(e){Zt(()=>this.touchedReactive.set(e))}_touched=af(()=>this.touchedReactive());touchedReactive=st(!1);get untouched(){return!this.touched}_events=new kt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(l$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(d$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(d$(e,this._rawAsyncValidators))}hasValidator(e){return WE(this._rawValidators,e)}hasAsyncValidator(e){return WE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ce(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new tg(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new tg(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ce(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new eg(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new eg(!0,r))}markAsPending(e={}){this.status=Bd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $d(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ce(z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xp,this.errors=null,this._forEachChild(i=>{i.disable(Ce(z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new QE(this.value,r)),this._events.next(new $d(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ce(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Zp,this._forEachChild(r=>{r.enable(Ce(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ce(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zp||this.status===Bd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new QE(this.value,t)),this._events.next(new $d(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ce(z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xp:Zp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Bd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=v$(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new $d(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new qt,this.statusChanges=new qt}_calculateStatus(){return this._allControlsDisabled()?Xp:this.errors?GE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bd)?Bd:this._anyControlsHaveStatus(GE)?GE:Zp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new eg(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new tg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){JE(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Lee(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Vee(this._rawAsyncValidators)}};var D$=new ae("",{factory:()=>jP}),jP="always";function Uee(n,e){return[...e.path,n]}function jee(n,e,t=jP){$ee(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Hee(n,e),zee(n,e),qee(n,e),Bee(n,e)}function h$(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bee(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function $ee(n,e){let t=Mee(n);e.validator!==null?n.setValidators(u$(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=xee(n);e.asyncValidator!==null?n.setAsyncValidators(u$(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();h$(e._rawValidators,i),h$(e._rawAsyncValidators,i)}function Hee(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&S$(n,e)})}function qee(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&S$(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function S$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zee(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Gee(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Wee(n){return Object.getPrototypeOf(n.constructor)===bee}function Kee(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===YE?t=s:Wee(s)?r=s:i=s}),i||r||t||null}function f$(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function p$(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Qee=class extends UP{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Oee(t),Fee(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),JE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(p$(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new VP(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){f$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){f$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){p$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Yee={provide:ng,useExisting:lc(()=>BP)},g$=Promise.resolve(),BP=(()=>{class n extends ng{_changeDetectorRef;callSetDisabledState;control=new Qee;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new qt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Kee(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Gee(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){jee(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){g$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Nc(r);g$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Uee(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(We(LP,9),We(Aee,10),We(Ree,10),We(y$,10),We(qs,8),We(D$,8))};static \u0275dir=lr({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[wy([Yee]),Rc,Us]})}return n})();var Jee=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ei({type:n});static \u0275inj=Hr({})}return n})();var A$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:D$,useValue:t.callSetDisabledState??jP}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ei({type:n});static \u0275inj=Hr({imports:[Jee]})}return n})();var Oa=class n{firestoreService=x(jd);authService=x(ii);PROJECTS_COLLECTION="projects";async createProject(e){let t=await this.getCurrentUser();if(!t)throw new Error("User not authenticated");let r={name:e,userId:t.uid,createdAt:new Date().toDateString(),updatedAt:new Date().toDateString()};await this.firestoreService.create(this.PROJECTS_COLLECTION,r)}async deleteProject(e){await this.firestoreService.delete(this.PROJECTS_COLLECTION,e)}async getProjectById(e){return await this.firestoreService.getById(this.PROJECTS_COLLECTION,e)}getUserProjects(){return this.authService.user$.pipe(bn(e=>e?this.firestoreService.query(this.PROJECTS_COLLECTION,c$("userId","==",e.uid)):Me([])))}async updateProject(e,t){await this.firestoreService.update(this.PROJECTS_COLLECTION,e,t)}async getCurrentUser(){return new Promise(e=>{this.authService.user$.subscribe(t=>{e(t)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hd=class n{createProjectSubject=new kt;createProject$=this.createProjectSubject.asObservable();triggerCreateProject(){this.createProjectSubject.next()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xee=n=>["/projects",n];function ete(n,e){if(n&1){let t=Rn();K(0,"div",9)(1,"div",10)(2,"div",11),ce(3,"\u{1F3AC}"),J(),K(4,"button",12),qe("click",function(){let i=At(t).$implicit,s=gt(2);return Rt(s.deleteProject(i))}),K(5,"span",3),ce(6,"\xD7"),J()()(),K(7,"h3",13),ce(8),J(),K(9,"div",14)(10,"span",15),ce(11),sf(12,"date"),J()(),K(13,"button",16),ce(14,"Open Project"),J()()}if(n&2){let t=e.$implicit;we(8),Jn(t.name),we(3),ns("Created: ",fb(12,3,t.createdAt,"short")),we(2),dt("routerLink",db(6,Xee,t.id))}}function tte(n,e){if(n&1&&(K(0,"div",7),Xt(1,ete,15,8,"div",8),J()),n&2){let t=gt();we(),dt("ngForOf",t.projects())}}function nte(n,e){if(n&1){let t=Rn();K(0,"div",17)(1,"div",18),ce(2,"\u{1F4C1}"),J(),K(3,"h2"),ce(4,"No projects yet"),J(),K(5,"p"),ce(6,"Create your first project to get started with Imagix"),J(),K(7,"button",19),qe("click",function(){At(t);let i=gt();return Rt(i.openCreateDialog())}),K(8,"span",3),ce(9,"+"),J(),ce(10," Create Your First Project "),J()()}}function rte(n,e){if(n&1){let t=Rn();K(0,"div",20),qe("click",function(){At(t);let i=gt();return Rt(i.closeCreateDialog())}),K(1,"div",21),qe("click",function(i){return At(t),Rt(i.stopPropagation())}),K(2,"div",22)(3,"h2"),ce(4,"Create New Project"),J(),K(5,"button",23),qe("click",function(){At(t);let i=gt();return Rt(i.closeCreateDialog())}),ce(6,"\xD7"),J()(),K(7,"div",24)(8,"label",25),ce(9,"Project Name"),J(),K(10,"input",26),Iy("ngModelChange",function(i){At(t);let s=gt();return lb(s.newProjectName,i)||(s.newProjectName=i),Rt(i)}),qe("keyup.enter",function(){At(t);let i=gt();return Rt(i.createProject())}),J()(),K(11,"div",27)(12,"button",28),qe("click",function(){At(t);let i=gt();return Rt(i.closeCreateDialog())}),ce(13," Cancel "),J(),K(14,"button",29),qe("click",function(){At(t);let i=gt();return Rt(i.createProject())}),ce(15),J()()()()}if(n&2){let t=gt();we(10),Ey("ngModel",t.newProjectName),we(2),dt("disabled",t.isLoading()),we(2),dt("disabled",t.isLoading()),we(),ns(" ",t.isLoading()?"Creating...":"Create Project"," ")}}var ZE=class n{authService=x(ii);projectService=x(Oa);eventService=x(Hd);router=x(an);projects=st([]);showCreateDialog=st(!1);newProjectName=st("");isLoading=st(!1);ngOnInit(){this.loadProjects(),this.eventService.createProject$.subscribe(()=>{this.openCreateDialog()})}loadProjects(){this.projectService.getUserProjects().subscribe(e=>{this.projects.set(e)},e=>{console.error("Error loading projects:",e)})}openCreateDialog(){this.showCreateDialog.set(!0),this.newProjectName.set("")}closeCreateDialog(){this.showCreateDialog.set(!1),this.newProjectName.set("")}async createProject(){let e=this.newProjectName().trim();if(!e){alert("Please enter a project name");return}this.isLoading.set(!0);try{await this.projectService.createProject(e),this.closeCreateDialog()}catch(t){console.error("Error creating project:",t),alert("Failed to create project. Please try again.")}finally{this.isLoading.set(!1)}}async deleteProject(e){if(!(!e.id||!confirm(`Are you sure you want to delete "${e.name}"?`)))try{await this.projectService.deleteProject(e.id)}catch(r){console.error("Error deleting project:",r),alert("Failed to delete project. Please try again.")}}async logout(){try{await this.authService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Logout error:",e)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-dashboard"]],decls:11,vars:3,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"create-btn",3,"click"],[1,"icon"],["class","projects-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","dialog-overlay",3,"click",4,"ngIf"],[1,"projects-grid"],["class","project-card",4,"ngFor","ngForOf"],[1,"project-card"],[1,"project-header"],[1,"project-icon"],["title","Delete project",1,"delete-btn",3,"click"],[1,"project-name"],[1,"project-meta"],[1,"date"],[1,"open-btn",3,"routerLink"],[1,"empty-state"],[1,"empty-icon"],[1,"create-btn-large",3,"click"],[1,"dialog-overlay",3,"click"],[1,"dialog",3,"click"],[1,"dialog-header"],[1,"close-btn",3,"click"],[1,"dialog-body"],["for","projectName"],["type","text","id","projectName","placeholder","Enter project name","autofocus","",3,"ngModelChange","keyup.enter","ngModel"],[1,"dialog-footer"],[1,"cancel-btn",3,"click","disabled"],[1,"submit-btn",3,"click","disabled"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"div",1)(2,"h1"),ce(3,"My Projects"),J(),K(4,"button",2),qe("click",function(){return r.openCreateDialog()}),K(5,"span",3),ce(6,"+"),J(),ce(7," New Project "),J()(),Xt(8,tte,2,1,"div",4)(9,nte,11,0,"div",5)(10,rte,16,4,"div",6),J()),t&2&&(we(8),dt("ngIf",r.projects().length>0),we(),dt("ngIf",r.projects().length===0),we(),dt("ngIf",r.showCreateDialog()))},dependencies:[Jr,yl,Ci,A$,YE,C$,BP,ca,Pb],styles:['.dashboard-container[_ngcontent-%COMP%]{padding:40px;background:linear-gradient(135deg,#0f0f1e,#1a1a2e);color:#fff;min-height:100vh}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px;animation:_ngcontent-%COMP%_fadeInDown .5s ease}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}.create-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.projects-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px;animation:_ngcontent-%COMP%_fadeIn .6s ease}.project-card[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:24px;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden}.project-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2);transform:scaleX(0);transition:transform .3s ease}.project-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 30px #667eea4d;border-color:#667eea80}.project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.project-icon[_ngcontent-%COMP%]{font-size:2.5rem;filter:drop-shadow(0 2px 8px rgba(102,126,234,.4))}.delete-btn[_ngcontent-%COMP%]{background:#ff3b301a;border:1px solid rgba(255,59,48,.3);color:#ff3b30;width:32px;height:32px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;font-size:1.5rem;line-height:1}.delete-btn[_ngcontent-%COMP%]:hover{background:#ff3b3033;transform:scale(1.1)}.project-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 12px;color:#fff}.project-meta[_ngcontent-%COMP%]{margin-bottom:20px}.date[_ngcontent-%COMP%]{font-size:.875rem;color:#fff9}.open-btn[_ngcontent-%COMP%]{width:100%;background:#667eea1a;border:1px solid rgba(102,126,234,.3);color:#667eea;padding:10px;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.open-btn[_ngcontent-%COMP%]:hover{background:#667eea33;border-color:#667eea80}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;animation:_ngcontent-%COMP%_fadeIn .6s ease}.empty-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:24px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin:0 0 12px;color:#ffffffe6}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;color:#fff9;margin:0 0 32px}.create-btn-large[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:16px 32px;border-radius:12px;font-size:1.125rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:10px;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.create-btn-large[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 25px #667eea99}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease}.dialog[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e1e2e,#2a2a3e);border:1px solid rgba(255,255,255,.1);border-radius:16px;width:90%;max-width:500px;box-shadow:0 20px 60px #00000080;animation:_ngcontent-%COMP%_slideUp .3s ease}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#fff}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff9;font-size:2rem;cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .3s ease;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.dialog-body[_ngcontent-%COMP%]{padding:24px}.dialog-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#ffffffe6}.dialog-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;color:#fff;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.dialog-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#ffffff14;box-shadow:0 0 0 3px #667eea1a}.dialog-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff6}.dialog-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 24px 24px;justify-content:flex-end}.cancel-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;border:none}.cancel-btn[_ngcontent-%COMP%]{background:#ffffff0d;color:#ffffffb3;border:1px solid rgba(255,255,255,.1)}.cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff1a;color:#fff}.submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea66}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}.cancel-btn[_ngcontent-%COMP%]:disabled, .submit-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media(max-width:768px){.dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:flex-start}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.projects-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog[_ngcontent-%COMP%]{width:95%;margin:20px}}']})};var $P=(n,e)=>{let t=x(ii),r=x(an);return t.user$.pipe(Un(1),Ge(i=>!!i),jn(i=>{i||r.navigate(["/login"])}))};function ite(n,e){if(n&1){let t=Rn();K(0,"div",17),Yn(1,"img",18),K(2,"div",19)(3,"span",20),ce(4),J(),K(5,"span",21),ce(6),J()(),K(7,"button",22),qe("click",function(){let i=At(t).$implicit,s=gt(3);return Rt(s.removeMedia(i))}),ce(8,"\xD7"),J()()}if(n&2){let t=e.$implicit;we(),dt("src",t.path,na)("alt",(t.file==null?null:t.file.name)||t.name||"Image"),we(3),Jn((t.file==null?null:t.file.name)||t.name||"Unknown"),we(2),Jn(t.format)}}function ste(n,e){if(n&1&&(K(0,"div",15),Xt(1,ite,9,4,"div",16),J()),n&2){let t=gt(2);we(),dt("ngForOf",t.images())}}function ote(n,e){if(n&1){let t=Rn();K(0,"div",11)(1,"input",12,0),qe("change",function(i){At(t);let s=gt();return Rt(s.onMediaSelected(i,"image"))}),J(),K(3,"button",13),qe("click",function(){At(t);let i=rf(2);return Rt(i.click())}),ce(4," Select Images "),J(),Xt(5,ste,2,1,"div",14),J()}if(n&2){let t=gt();we(5),dt("ngIf",t.images().length>0)}}function ate(n,e){if(n&1){let t=Rn();K(0,"div",17),Yn(1,"video",24),K(2,"div",19)(3,"span",20),ce(4),J(),K(5,"span",21),ce(6),J()(),K(7,"button",22),qe("click",function(){let i=At(t).$implicit,s=gt(3);return Rt(s.removeMedia(i))}),ce(8,"\xD7"),J()()}if(n&2){let t=e.$implicit;we(),dt("src",t.path,na),we(3),Jn((t.file==null?null:t.file.name)||t.name||"Unknown"),we(2),Jn(t.format)}}function cte(n,e){if(n&1&&(K(0,"div",15),Xt(1,ate,9,3,"div",16),J()),n&2){let t=gt(2);we(),dt("ngForOf",t.videos())}}function ute(n,e){if(n&1){let t=Rn();K(0,"div",11)(1,"input",23,1),qe("change",function(i){At(t);let s=gt();return Rt(s.onMediaSelected(i,"video"))}),J(),K(3,"button",13),qe("click",function(){At(t);let i=rf(2);return Rt(i.click())}),ce(4," Select Videos "),J(),Xt(5,cte,2,1,"div",14),J()}if(n&2){let t=gt();we(5),dt("ngIf",t.videos().length>0)}}function lte(n,e){if(n&1){let t=Rn();K(0,"div",29),Yn(1,"audio",24),K(2,"div",19)(3,"span",20),ce(4),J(),K(5,"span",21),ce(6),J()(),K(7,"button",22),qe("click",function(){let i=At(t).$implicit,s=gt(3);return Rt(s.removeMedia(i))}),ce(8,"\xD7"),J()()}if(n&2){let t=e.$implicit;we(),dt("src",t.path,na),we(3),Jn((t.file==null?null:t.file.name)||t.name||"Unknown"),we(2),Jn(t.format)}}function dte(n,e){if(n&1&&(K(0,"div",27),Xt(1,lte,9,3,"div",28),J()),n&2){let t=gt(2);we(),dt("ngForOf",t.audio())}}function hte(n,e){if(n&1){let t=Rn();K(0,"div",11)(1,"input",25,2),qe("change",function(i){At(t);let s=gt();return Rt(s.onMediaSelected(i,"audio"))}),J(),K(3,"button",13),qe("click",function(){At(t);let i=rf(2);return Rt(i.click())}),ce(4," Select Audio "),J(),Xt(5,dte,2,1,"div",26),J()}if(n&2){let t=gt();we(5),dt("ngIf",t.audio().length>0)}}var XE=class n{projectId="";initialMedia=[];mediaChange=new qt;projectService=x(Oa);media=st([]);images=st([]);videos=st([]);audio=st([]);isImagesExpanded=st(!1);isVideosExpanded=st(!1);isAudioExpanded=st(!1);ngOnInit(){this.initialMedia&&this.initialMedia.length>0&&(this.media.set(this.initialMedia),this.organizeMedia(this.initialMedia))}organizeMedia(e){this.images.set(e.filter(t=>t.type==="image")),this.videos.set(e.filter(t=>t.type==="video")),this.audio.set(e.filter(t=>t.type==="audio"))}onMediaSelected(e,t){let r=e.target,i=r.files;if(!i||i.length===0)return;let s=Array.from(i).map(c=>{let d=URL.createObjectURL(c),h=c.name.split(".").pop()?.toLowerCase()||"";return{file:c,path:d,type:t,format:h}}),a=[...this.media(),...s];this.media.set(a),this.organizeMedia(a),this.mediaChange.emit(a),this.saveMediaToProject(a),r.value=""}async saveMediaToProject(e){if(this.projectId)try{let t=e.map(r=>({path:r.path,type:r.type,format:r.format,name:r.file?.name||r.name,size:r.file?.size||r.size}));await this.projectService.updateProject(this.projectId,{media:t})}catch(t){console.error("Error saving media to project:",t)}}removeMedia(e){let r=this.media().filter(i=>i.path!==e.path&&i.file?.name!==e.file?.name&&i.name!==e.name);this.media.set(r),this.organizeMedia(r),this.mediaChange.emit(r),this.saveMediaToProject(r),e.path.startsWith("blob:")&&URL.revokeObjectURL(e.path)}toggleImages(){this.isImagesExpanded.set(!this.isImagesExpanded())}toggleVideos(){this.isVideosExpanded.set(!this.isVideosExpanded())}toggleAudio(){this.isAudioExpanded.set(!this.isAudioExpanded())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-media"]],inputs:{projectId:"projectId",initialMedia:"initialMedia"},outputs:{mediaChange:"mediaChange"},decls:39,vars:9,consts:[["imageInput",""],["videoInput",""],["audioInput",""],[1,"media-library"],[1,"media-card"],[1,"media-card-header",3,"click"],[1,"media-card-title"],[1,"media-icon"],[1,"media-count"],[1,"toggle-icon"],["class","media-card-content",4,"ngIf"],[1,"media-card-content"],["type","file","accept","image/*","multiple","",2,"display","none",3,"change"],[1,"btn-select",3,"click"],["class","media-grid",4,"ngIf"],[1,"media-grid"],["class","media-item",4,"ngFor","ngForOf"],[1,"media-item"],[3,"src","alt"],[1,"media-info"],[1,"media-name"],[1,"media-format"],[1,"btn-remove",3,"click"],["type","file","accept","video/*","multiple","",2,"display","none",3,"change"],["controls","",3,"src"],["type","file","accept","audio/*","multiple","",2,"display","none",3,"change"],["class","media-list",4,"ngIf"],[1,"media-list"],["class","media-item audio-item",4,"ngFor","ngForOf"],[1,"media-item","audio-item"]],template:function(t,r){t&1&&(K(0,"section",3)(1,"h2"),ce(2,"Media Library"),J(),K(3,"div",4)(4,"div",5),qe("click",function(){return r.toggleImages()}),K(5,"div",6)(6,"span",7),ce(7,"\u{1F5BC}\uFE0F"),J(),K(8,"span"),ce(9,"Images"),J(),K(10,"span",8),ce(11),J()(),K(12,"span",9),ce(13),J()(),Xt(14,ote,6,1,"div",10),J(),K(15,"div",4)(16,"div",5),qe("click",function(){return r.toggleVideos()}),K(17,"div",6)(18,"span",7),ce(19,"\u{1F3AC}"),J(),K(20,"span"),ce(21,"Videos"),J(),K(22,"span",8),ce(23),J()(),K(24,"span",9),ce(25),J()(),Xt(26,ute,6,1,"div",10),J(),K(27,"div",4)(28,"div",5),qe("click",function(){return r.toggleAudio()}),K(29,"div",6)(30,"span",7),ce(31,"\u{1F3B5}"),J(),K(32,"span"),ce(33,"Audio"),J(),K(34,"span",8),ce(35),J()(),K(36,"span",9),ce(37),J()(),Xt(38,hte,6,1,"div",10),J()()),t&2&&(we(11),ns("(",r.images().length,")"),we(2),Jn(r.isImagesExpanded()?"\u25BC":"\u25B6"),we(),dt("ngIf",r.isImagesExpanded()),we(9),ns("(",r.videos().length,")"),we(2),Jn(r.isVideosExpanded()?"\u25BC":"\u25B6"),we(),dt("ngIf",r.isVideosExpanded()),we(9),ns("(",r.audio().length,")"),we(2),Jn(r.isAudioExpanded()?"\u25BC":"\u25B6"),we(),dt("ngIf",r.isAudioExpanded()))},dependencies:[Jr,yl,Ci],styles:[".media-library[_ngcontent-%COMP%]{margin-top:24px}.media-library[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px;font-weight:600}.media-card[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2937;border-radius:10px;margin-bottom:12px;overflow:hidden}.media-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background .2s}.media-card-header[_ngcontent-%COMP%]:hover{background:#1a2332}.media-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:600}.media-icon[_ngcontent-%COMP%]{font-size:18px}.media-count[_ngcontent-%COMP%]{color:#9ca3af;font-weight:400;font-size:14px}.toggle-icon[_ngcontent-%COMP%]{color:#9ca3af;font-size:12px;transition:transform .2s}.media-card-content[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #1f2937}.btn-select[_ngcontent-%COMP%]{width:100%;padding:10px;background:#1f2937;border:1px dashed #374151;border-radius:8px;color:#e5e7eb;cursor:pointer;font-weight:500;margin-bottom:16px;transition:all .2s}.btn-select[_ngcontent-%COMP%]:hover{background:#374151;border-color:#4b5563}.media-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px}.media-item[_ngcontent-%COMP%]{position:relative;background:#111827;border:1px solid #1f2937;border-radius:8px;overflow:hidden;padding:8px}.media-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .media-item[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:4px;display:block}.media-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-top:8px;font-size:12px}.media-name[_ngcontent-%COMP%]{color:#e5e7eb;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.media-format[_ngcontent-%COMP%]{color:#9ca3af;text-transform:uppercase;font-size:10px}.btn-remove[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;width:24px;height:24px;background:#000000b3;border:none;border-radius:50%;color:#fff;cursor:pointer;font-size:18px;line-height:1;display:flex;align-items:center;justify-content:center;transition:background .2s}.btn-remove[_ngcontent-%COMP%]:hover{background:#ef4444e6}.media-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.audio-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px}.audio-item[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{flex:1}.audio-item[_ngcontent-%COMP%]   .media-info[_ngcontent-%COMP%]{margin:0;min-width:150px}.audio-item[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{position:static;flex-shrink:0}@media(max-width:960px){.media-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}}"]})};var fte=["canvas"];function pte(n,e){if(n&1&&(K(0,"h1"),ce(1),J()),n&2){let t,r=gt();we(),Jn(((t=r.project())==null?null:t.name)||"Loading...")}}function gte(n,e){n&1&&(K(0,"h1"),ce(1,"Loading..."),J())}var eI=class n{canvasRef;route=x(Zr);router=x(an);projectService=x(Oa);projectId="";project=st(null);isLoading=st(!0);movie;projectMedia=st([]);async ngOnInit(){if(this.projectId=this.route.snapshot.paramMap.get("id")||"",!this.projectId){this.router.navigate(["/dashboard"]);return}await this.loadProject(),this.initEtro()}async loadProject(){try{this.isLoading.set(!0);let e=await this.projectService.getProjectById(this.projectId);if(!e){this.router.navigate(["/dashboard"]);return}this.project.set(e),e.media&&e.media.length>0&&this.projectMedia.set(e.media)}catch(e){console.error("Error loading project:",e),this.router.navigate(["/dashboard"])}finally{this.isLoading.set(!1)}}ngOnDestroy(){this.movie?.stop&&this.movie.stop()}async initEtro(){try{let e=await import("./chunk-V6IRMN6Y.js"),t=this.canvasRef.nativeElement;t.width=960,t.height=540;let r=new e.Movie({canvas:t}),i=new e.Scene({duration:5});i.addLayer(new e.layers.Rect({color:"#111827",width:960,height:540}));let s=this.project()?.name||`Project ${this.projectId}`;i.addLayer(new e.layers.Text({text:s,color:"#fff",font:"48px Inter, sans-serif",x:80,y:120})),i.addLayer(new e.layers.Rect({color:"#10b981",width:180,height:40,x:80,y:300,animations:{x:[{time:0,value:80},{time:5,value:740}]}})),r.addScene(i),this.movie=r,await r.play()}catch(e){console.error("Failed to initialize Etro",e)}}onMediaChange(e){this.projectMedia.set(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-project"]],viewQuery:function(t,r){if(t&1&&ub(fte,7),t&2){let i;tf(i=nf())&&(r.canvasRef=i.first)}},decls:29,vars:4,consts:[["canvas",""],[1,"project-container"],[1,"project-header"],[1,"eyebrow"],[4,"ngIf"],[1,"actions"],[1,"btn","secondary"],[1,"btn","primary"],[1,"editor"],[1,"canvas-shell"],[1,"panel"],[3,"mediaChange","projectId","initialMedia"]],template:function(t,r){if(t&1){let i=Rn();K(0,"div",1)(1,"header",2)(2,"div")(3,"p",3),ce(4,"Project"),J(),Xt(5,pte,2,1,"h1",4)(6,gte,2,0,"h1",4),J(),K(7,"div",5)(8,"button",6),ce(9,"Export"),J(),K(10,"button",7),ce(11,"Render"),J()()(),K(12,"section",8)(13,"div",9),Yn(14,"canvas",null,0),J(),K(16,"div",10)(17,"h3"),ce(18,"Timeline (demo)"),J(),K(19,"p"),ce(20,"Add layers, audio, and clips here. Etro is rendering on the canvas."),J(),K(21,"ul")(22,"li"),ce(23,"Background layer (solid)"),J(),K(24,"li"),ce(25,"Title text with project id"),J(),K(26,"li"),ce(27,"Animated bar layer"),J()()()(),K(28,"app-media",11),qe("mediaChange",function(o){return At(i),Rt(r.onMediaChange(o))}),J()()}t&2&&(we(5),dt("ngIf",!r.isLoading()),we(),dt("ngIf",r.isLoading()),we(22),dt("projectId",r.projectId)("initialMedia",r.projectMedia()))},dependencies:[Jr,Ci,XE],styles:[".project-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px;color:#e5e7eb;background:#0b1220;min-height:100vh}.project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #1f2937;padding-bottom:12px}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:11px;color:#9ca3af;margin:0 0 4px}.project-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{border:1px solid #374151;background:#111827;color:#e5e7eb;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}.btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#8b5cf6);border:none;color:#fff}.btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05)}.editor[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:16px;align-items:flex-start}.canvas-shell[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2937;border-radius:10px;padding:12px;display:flex;justify-content:center;align-items:center}canvas[_ngcontent-%COMP%]{width:100%;max-width:960px;aspect-ratio:16 / 9;background:#0b0f1a;border-radius:8px;border:1px solid #1f2937}.panel[_ngcontent-%COMP%]{background:#0f172a;border:1px solid #1f2937;border-radius:10px;padding:14px 16px}.panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px}.panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#9ca3af}.panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:18px;color:#d1d5db}@media(max-width:960px){.editor[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var R$=[{path:"login",component:zE},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:ZE,canActivate:[$P]},{path:"projects/:id",component:eI,canActivate:[$P]},{path:"**",redirectTo:"dashboard"}];var P$={production:!0,firebase:{apiKey:"AIzaSyCsHpTewZoHC_ck1pn3pqfBtmB1OPm4Io4",authDomain:"imagix-dev.firebaseapp.com",projectId:"imagix-dev",storageBucket:"imagix-dev.firebasestorage.app",messagingSenderId:"990473235218",appId:"1:990473235218:web:69affd810fd2449672a1cb",measurementId:"G-2NBZ4N1GKG"}};var HP="Service workers are disabled or not supported by this browser",qd=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Ie(r=>r.error(new ie(5601,!1)));else{let r=null,i=new kt;this.worker=new Ie(d=>(r!==null&&d.next(r),i.subscribe(h=>d.next(h))));let s=()=>{let{controller:d}=e;d!==null&&(r=d,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(bn(()=>e.getRegistration().then(d=>{if(!d)throw new ie(5601,!1);return d})));let o=new kt;this.events=o.asObservable();let a=d=>{let{data:h}=d;h?.type&&o.next(h)};e.addEventListener("message",a),t?.get(Ii,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(Un(1)).subscribe(i=>{i.postMessage(z({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Kn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Un(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Kn(i=>i.nonce===e),Un(1),Ge(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},mte=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new kt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=ks,this.notificationClicks=ks,this.notificationCloses=ks,this.pushSubscriptionChanges=ks,this.subscription=ks;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Ge(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ge(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Ge(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Ge(i=>i.data)),this.pushManager=this.sw.registration.pipe(Ge(i=>i.pushManager));let r=this.pushManager.pipe(bn(i=>i.getSubscription()));this.subscription=new Ie(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(HP));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,a)=>{this.pushManager.pipe(bn(c=>c.subscribe(r)),Un(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(HP));let t=r=>{if(r===null)throw new ie(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new ie(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Un(1),bn(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(ve(qd))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),yte=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=ks,this.unrecoverable=ks;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(HP));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new ie(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(ve(qd))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),k$=new ae("");function _te(){let n=x(rg);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=x(k$),t=x(et),r=x(Ii);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:s}=n;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...a]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=N$(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),N$(+a[0])]);break;default:throw new ie(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(Wi(5604,!1)))})})}function N$(n){return new Promise(e=>setTimeout(e,n))}function vte(){let n=x(rg),e=x(Lt),t=!0;return new qd(t&&n.enabled!==!1?navigator.serviceWorker:void 0,e)}var rg=class{enabled;updateViaCache;type;scope;registrationStrategy};function M$(n,e={}){return cr([mte,yte,{provide:k$,useValue:n},{provide:rg,useValue:e},{provide:qd,useFactory:vte},pl(_te)])}var x$={providers:[nO({eventCoalescing:!0}),pC(R$),IL(()=>wL(P$.firebase)),gV(()=>{let n=x(Xr);return yV(n)}),e$(()=>{let n=x(Xr);return o$(n)}),M$("ngsw-worker.js",{enabled:!uf(),registrationStrategy:"registerWhenStable:30000"})]};var zd=class n{sidebarOpen=st(!1);toggleSidebar(){this.sidebarOpen.update(e=>!e)}closeSidebar(){this.sidebarOpen.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ete(n,e){if(n&1){let t=Rn();K(0,"div",7)(1,"div",8),Yn(2,"img",9),K(3,"button",10),qe("click",function(){At(t);let i=gt();return Rt(i.logout())}),ce(4,"Logout"),J()()()}if(n&2){let t=e.ngIf;we(2),dt("src",t.photoURL,na)}}var tI=class n{authService=x(ii);layoutService=x(zd);eventService=x(Hd);router=x(an);toggleSidebar(){this.layoutService.toggleSidebar()}createNewProject(){this.eventService.triggerCreateProject()}async logout(){await this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-header"]],decls:11,vars:3,consts:[[1,"app-header"],[1,"left-section"],[1,"menu-btn",3,"click"],[1,"logo"],[1,"logo-icon"],[1,"logo-text"],["class","actions",4,"ngIf"],[1,"actions"],[1,"user-profile"],["alt","User",1,"avatar",3,"src"],[1,"logout-btn",3,"click"]],template:function(t,r){t&1&&(K(0,"header",0)(1,"div",1)(2,"button",2),qe("click",function(){return r.toggleSidebar()}),ce(3,"\u2630"),J(),K(4,"div",3)(5,"span",4),ce(6,"\u{1F3AC}"),J(),K(7,"span",5),ce(8,"Imagix"),J()()(),Xt(9,Ete,5,1,"div",6),sf(10,"async"),J()),t&2&&(we(9),dt("ngIf",hb(10,1,r.authService.user$)))},dependencies:[Jr,Ci,Rb],styles:[".app-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 20px;height:60px;background-color:#1e1e1e;border-bottom:1px solid #333;color:#fff}.left-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.menu-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;display:none}@media(max-width:768px){.menu-btn[_ngcontent-%COMP%]{display:block}}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:1.2rem;font-weight:700}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.create-btn[_ngcontent-%COMP%]{background-color:#6200ea;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%}.logout-btn[_ngcontent-%COMP%]{background:none;border:1px solid #555;color:#aaa;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:.8rem}"]})};function Ite(n,e){if(n&1){let t=Rn();K(0,"div",5),qe("click",function(){At(t);let i=gt();return Rt(i.closeSidebar())}),J()}}var nI=class n{layoutService=x(zd);closeSidebar(){window.innerWidth<=768&&this.layoutService.closeSidebar()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-sidebar"]],decls:12,vars:3,consts:[[1,"sidebar"],["routerLink","/dashboard","routerLinkActive","active",3,"click"],["routerLink","/assets","routerLinkActive","active",3,"click"],["routerLink","/settings","routerLinkActive","active",3,"click"],["class","overlay",3,"click",4,"ngIf"],[1,"overlay",3,"click"]],template:function(t,r){t&1&&(K(0,"nav",0)(1,"ul")(2,"li")(3,"a",1),qe("click",function(){return r.closeSidebar()}),ce(4,"Projects"),J()(),K(5,"li")(6,"a",2),qe("click",function(){return r.closeSidebar()}),ce(7,"Assets"),J()(),K(8,"li")(9,"a",3),qe("click",function(){return r.closeSidebar()}),ce(10,"Settings"),J()()()(),Xt(11,Ite,1,0,"div",4)),t&2&&(gl("open",r.layoutService.sidebarOpen()),we(11),dt("ngIf",r.layoutService.sidebarOpen()))},dependencies:[Jr,Ci,mC,ca,fC],styles:[".sidebar[_ngcontent-%COMP%]{width:250px;background-color:#1e1e1e;border-right:1px solid #333;height:100%;padding-top:20px;transition:transform .3s ease}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{margin-bottom:5px}a[_ngcontent-%COMP%]{display:block;padding:10px 20px;color:#aaa;text-decoration:none;transition:background-color .2s}a[_ngcontent-%COMP%]:hover, a.active[_ngcontent-%COMP%]{background-color:#333;color:#fff}.overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:99}@media(max-width:768px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:60px;left:0;bottom:0;z-index:100;transform:translate(-100%)}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.overlay[_ngcontent-%COMP%]{display:block;top:60px}}"]})};var rI=class n{title=st("imagix");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"layout-container"],[1,"content-wrapper"],[1,"main-content"]],template:function(t,r){t&1&&(K(0,"div",0),Yn(1,"app-header"),K(2,"div",1),Yn(3,"app-sidebar"),K(4,"main",2),Yn(5,"router-outlet"),J()()())},dependencies:[Nf,tI,nI],styles:[".layout-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden;position:relative}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background-color:#121212;color:#fff;padding:20px}"]})};jb(rI,x$).catch(n=>console.error(n));
